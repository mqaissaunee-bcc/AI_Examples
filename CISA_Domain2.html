<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CISA Domain 2 Learning Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #00FFC5 0%, #ADF5FF 50%, #0075A2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #333;
        }

        .game-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 30px;
            max-width: 900px;
            width: 90%;
            position: relative;
            overflow: hidden;
        }

        .game-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #00FFC5, #ADF5FF, #0075A2, #D55672);
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #0075A2, #481620);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .score-board {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            padding: 15px;
            background: linear-gradient(135deg, #D55672 0%, #481620 100%);
            border-radius: 15px;
            color: white;
            font-weight: bold;
        }

        .game-modes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .mode-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .mode-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            border-color: #0075A2;
        }

        .mode-card.active {
            background: linear-gradient(135deg, #0075A2 0%, #00FFC5 100%);
            color: white;
            border-color: #0075A2;
        }

        .mode-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .mode-title {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .mode-description {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        .topic-selector {
            margin: 20px 0;
        }

        .topic-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .topic-btn {
            padding: 15px;
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-size: 0.9rem;
        }

        .topic-btn:hover, .topic-btn.active {
            border-color: #0075A2;
            background: #0075A2;
            color: white;
        }

        .content-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            display: none;
            max-height: 600px;
            overflow-y: auto;
        }

        .content-container::-webkit-scrollbar {
            width: 8px;
        }

        .content-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }

        .content-container::-webkit-scrollbar-thumb {
            background: #0075A2;
            border-radius: 4px;
        }

        .content-container::-webkit-scrollbar-thumb:hover {
            background: #005580;
        }

        .content-container.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .question {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .options {
            display: grid;
            gap: 15px;
        }

        .option {
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f9f9f9;
        }

        .option:hover {
            border-color: #0075A2;
            background: #e8f7ff;
            transform: translateX(5px);
        }

        .option.selected {
            border-color: #0075A2;
            background: #0075A2;
            color: white;
        }

        .option.correct {
            border-color: #28a745;
            background: #28a745;
            color: white;
        }

        .option.incorrect {
            border-color: #dc3545;
            background: #dc3545;
            color: white;
        }

        .explanation {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #e8f7ff 0%, #f0f8ff 100%);
            border-left: 4px solid #0075A2;
            border-radius: 8px;
            display: none !important;
            box-shadow: 0 3px 10px rgba(0, 117, 162, 0.1);
            line-height: 1.6;
        }

        .explanation.show {
            display: block !important;
            animation: fadeIn 0.5s ease-in;
        }

        .explanation strong {
            color: #481620;
            font-size: 1.1rem;
            display: block;
            margin-bottom: 10px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .flashcard {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            min-height: 300px;
            max-height: 500px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            overflow-y: auto;
            pointer-events: auto;
            user-select: none;
        }

        .flashcard:hover {
            transform: rotateY(5deg);
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        }

        .flashcard.flipped {
            background: linear-gradient(135deg, #D55672 0%, #481620 100%);
            color: white;
            text-align: left;
            justify-content: flex-start;
            padding-top: 40px;
        }

        .card-content {
            font-size: 1.3rem;
            line-height: 1.6;
            width: 100%;
            pointer-events: none;
        }

        .flashcard.flipped .card-content {
            font-size: 1.1rem;
            line-height: 1.6;
        }

        .flashcard::-webkit-scrollbar {
            width: 6px;
        }

        .flashcard::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .flashcard::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
        }

        .flashcard::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        .card-hint {
            position: absolute;
            bottom: 20px;
            right: 20px;
            font-size: 0.8rem;
            opacity: 0.7;
            pointer-events: none;
        }

        .learning-content h3 {
            color: #0075A2;
            margin-bottom: 15px;
            font-size: 1.4rem;
            border-bottom: 2px solid #ADF5FF;
            padding-bottom: 8px;
        }

        .learning-content p {
            line-height: 1.6;
            margin-bottom: 15px;
            text-align: justify;
            font-size: 1rem;
        }

        .learning-example {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, #f0f8ff 0%, #e8f7ff 100%);
            border-radius: 12px;
            border-left: 5px solid #0075A2;
            box-shadow: 0 3px 10px rgba(0, 117, 162, 0.1);
        }

        .learning-example strong {
            color: #481620;
            font-size: 1.1rem;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
            gap: 15px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #0075A2 0%, #481620 100%);
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-outline {
            background: transparent;
            color: #0075A2;
            border: 2px solid #0075A2;
        }

        .btn-outline:hover {
            background: #0075A2;
            color: white;
        }

        .results-actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }

        .results-actions .btn {
            padding: 15px 20px;
            font-size: 0.9rem;
            border-radius: 12px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #0075A2, #00FFC5);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .results-container {
            text-align: center;
            padding: 30px;
            display: none;
        }

        .results-container.show {
            display: block;
            animation: bounceIn 0.6s ease-out;
        }

        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            50% {
                opacity: 1;
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .results-score {
            font-size: 3rem;
            font-weight: bold;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2rem;
            }
            
            .game-container {
                padding: 20px;
                width: 95%;
            }
            
            .score-board {
                flex-direction: column;
                gap: 10px;
                text-align: center;
            }
            
            .controls {
                flex-direction: column;
                gap: 15px;
            }

            .game-modes {
                grid-template-columns: 1fr;
            }

            .results-actions {
                grid-template-columns: 1fr;
                gap: 12px;
            }

            .results-actions .btn {
                padding: 12px 15px;
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1 class="title">CISA Domain 2 Mastery</h1>
            <p class="subtitle">Governance and Management of IT (18% of Exam)</p>
            <div class="score-board">
                <div>Total Score: <span id="score">0</span></div>
                <div>Current Streak: <span id="streak">0</span></div>
                <div>Section Progress: <span id="progress">0</span>%</div>
            </div>
        </div>

        <div class="game-modes" id="gameMode">
            <div class="mode-card" data-mode="learn">
                <div class="mode-icon">üìö</div>
                <div class="mode-title">Learn Mode</div>
                <div class="mode-description">Study concepts with comprehensive explanations and examples</div>
            </div>
            <div class="mode-card" data-mode="quiz">
                <div class="mode-icon">üéØ</div>
                <div class="mode-title">Quiz Mode</div>
                <div class="mode-description">Test your knowledge with questions and detailed explanations</div>
            </div>
            <div class="mode-card" data-mode="flashcards">
                <div class="mode-icon">üÉè</div>
                <div class="mode-title">Flashcards</div>
                <div class="mode-description">Review key terms with detailed explanations - click to reveal comprehensive answers</div>
            </div>
            <div class="mode-card" data-mode="scenario">
                <div class="mode-icon">üîç</div>
                <div class="mode-title">Scenarios</div>
                <div class="mode-description">Practice with real-world situations and explanations</div>
            </div>
        </div>

        <div class="topic-selector" id="topicSelector" style="display: none;">
            <h3>Choose Your Focus Area:</h3>
            <div class="topic-grid">
                <div class="topic-btn" data-topic="governance">IT Governance (A)</div>
                <div class="topic-btn" data-topic="management">IT Management (B)</div>
                <div class="topic-btn" data-topic="frameworks">Frameworks & Standards</div>
                <div class="topic-btn" data-topic="compliance">Risk & Compliance</div>
                <div class="topic-btn" data-topic="mixed">Mixed Topics</div>
            </div>
            <div style="margin-top: 20px; text-align: center;">
                <button class="btn btn-secondary" onclick="goBackToModes()">‚Üê Back to Game Modes</button>
            </div>
        </div>

        <div class="progress-bar" id="progressBar" style="display: none;">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="content-container" id="questionContainer">
            <div class="question" id="question"></div>
            <div class="options" id="options"></div>
            <div class="explanation" id="explanation"></div>
        </div>

        <div class="content-container" id="learningContainer">
            <div class="learning-content">
                <h3 id="learningTitle"></h3>
                <p id="learningText"></p>
                <div class="learning-example" id="learningExample"></div>
            </div>
        </div>

        <div class="flashcard" id="flashcard" style="display: none;">
            <div class="card-content" id="cardContent"></div>
            <div class="card-hint">Click for detailed explanation</div>
        </div>

        <div class="controls" id="controls" style="display: none;">
            <button class="btn btn-secondary" id="prevBtn">Previous</button>
            <button class="btn btn-secondary" onclick="goBackToTopics()">‚Üê Back to Topics</button>
            <button class="btn btn-primary" id="nextBtn">Next</button>
        </div>

        <div class="results-container" id="results">
            <h2>üéâ Complete!</h2>
            <div class="results-score" id="finalScore"></div>
            <p id="resultMessage"></p>
            <div class="results-actions">
                <button class="btn btn-primary" onclick="playAgain()">üîÑ Play Again</button>
                <button class="btn btn-secondary" onclick="goToMainScreen()">üè† Main Menu</button>
                <button class="btn btn-secondary" onclick="chooseAnotherSection()">üìö Try Another Section</button>
                <button class="btn btn-outline" onclick="resetGame()">üîÉ Reset All Progress</button>
            </div>
        </div>
    </div>

    <script>
        // Game State
        let currentMode = '';
        let currentTopic = '';
        let currentQuestion = 0;
        let score = 0;
        let streak = 0;
        let answeredQuestions = [];
        let currentQuestions = [];

        // Comprehensive Question Bank with properly diversified correct answers
        const questionBank = {
            governance: [
                {
                    question: "Which framework is specifically designed for IT governance and is developed by ISACA?",
                    options: ["ITIL", "COBIT", "ISO 27001", "COSO"],
                    correct: 1,
                    explanation: "COBIT (Control Objectives for Information and Related Technologies) is ISACA's framework specifically designed for IT governance and management."
                },
                {
                    question: "Enterprise Risk Management (ERM) serves which fundamental organizational function?",
                    options: [
                        "To eliminate all business risks",
                        "To identify, assess, and manage risks across the enterprise",
                        "To focus only on IT security risks",
                        "To reduce operational costs"
                    ],
                    correct: 1,
                    explanation: "ERM is a systematic approach to identify, assess, and manage risks across the entire enterprise, not just eliminate them."
                },
                {
                    question: "In IT governance, what does the 'Three Lines of Defense' model refer to?",
                    options: [
                        "Operational Management, Risk Management, and Internal Audit",
                        "Firewall, Antivirus, and Encryption",
                        "Physical, Logical, and Administrative controls",
                        "Prevention, Detection, and Response"
                    ],
                    correct: 0,
                    explanation: "The Three Lines of Defense model includes: 1st line (Operational Management), 2nd line (Risk Management and Compliance), and 3rd line (Internal Audit)."
                },
                {
                    question: "Which ISO standard specifically addresses corporate governance of IT?",
                    options: ["ISO 27001", "ISO 20000", "ISO 38500", "ISO 31000"],
                    correct: 2,
                    explanation: "ISO 38500 provides guiding principles for members of governing bodies on the effective, efficient, and acceptable use of IT in their organizations."
                },
                {
                    question: "What is the primary difference between IT governance and IT management?",
                    options: [
                        "There is no difference",
                        "Governance focuses on direction and oversight, management on execution",
                        "Management is strategic, governance is operational",
                        "Governance is technical, management is business-focused"
                    ],
                    correct: 1,
                    explanation: "IT Governance focuses on strategic direction, oversight, and accountability, while IT Management focuses on day-to-day execution and operations."
                },
                {
                    question: "In COBIT 5, which of the following is NOT one of the five key principles?",
                    options: [
                        "Meeting Stakeholder Needs",
                        "Covering the Enterprise End-to-End",
                        "Maximizing Profit Margins",
                        "Enabling a Holistic Approach"
                    ],
                    correct: 2,
                    explanation: "COBIT 5 principles are: Meeting Stakeholder Needs, Covering the Enterprise End-to-End, Applying a Single Integrated Framework, Enabling a Holistic Approach, and Separating Governance from Management."
                },
                {
                    question: "Business Impact Analysis (BIA) is primarily designed to accomplish which goal?",
                    options: [
                        "To calculate financial profits",
                        "To identify critical business processes and their recovery requirements",
                        "To assess employee performance",
                        "To evaluate IT vendor contracts"
                    ],
                    correct: 1,
                    explanation: "A BIA identifies critical business processes, their dependencies, and recovery time/point objectives to support business continuity planning."
                },
                {
                    question: "Which stakeholder group has ultimate accountability for IT governance?",
                    options: [
                        "IT Management",
                        "External Auditors",
                        "Chief Information Officer",
                        "Board of Directors"
                    ],
                    correct: 3,
                    explanation: "The Board of Directors has ultimate accountability for IT governance, setting strategic direction and ensuring appropriate oversight of IT investments and risks."
                }
            ],
            management: [
                {
                    question: "Which committee is typically responsible for strategic IT decisions and alignment with business objectives?",
                    options: [
                        "IT Steering Committee",
                        "IT Operations Committee",
                        "Security Committee",
                        "Audit Committee"
                    ],
                    correct: 0,
                    explanation: "The IT Steering Committee provides strategic oversight and ensures IT initiatives align with business objectives and priorities."
                },
                {
                    question: "In data governance, what does data classification primarily help achieve?",
                    options: [
                        "Faster data processing",
                        "Better storage efficiency",
                        "Appropriate protection based on sensitivity and value",
                        "Simplified data backup"
                    ],
                    correct: 2,
                    explanation: "Data classification helps organizations apply appropriate security controls and protection measures based on data sensitivity, value, and regulatory requirements."
                },
                {
                    question: "What is the key characteristic of the ITIL framework?",
                    options: [
                        "It focuses on IT governance",
                        "It provides best practices for IT service management",
                        "It is a risk management framework",
                        "It addresses software development"
                    ],
                    correct: 1,
                    explanation: "ITIL (Information Technology Infrastructure Library) provides best practices for IT service management throughout the service lifecycle."
                },
                {
                    question: "Which of the following is a key principle of privacy program management?",
                    options: [
                        "Collect as much data as possible",
                        "Share data freely within the organization",
                        "Store data indefinitely",
                        "Data minimization and purpose limitation"
                    ],
                    correct: 3,
                    explanation: "Privacy programs emphasize data minimization (collecting only necessary data) and purpose limitation (using data only for stated purposes)."
                },
                {
                    question: "What does SLA typically stand for in IT service management?",
                    options: [
                        "Software License Agreement",
                        "Service Level Agreement",
                        "Security Level Assessment",
                        "System Load Analysis"
                    ],
                    correct: 1,
                    explanation: "SLA stands for Service Level Agreement, which defines the expected level of service between a service provider and customer."
                },
                {
                    question: "What is vendor lock-in in IT vendor management?",
                    options: [
                        "Securing vendor facilities",
                        "Legal contracts preventing vendor changes",
                        "Dependency on a single vendor making it difficult to switch",
                        "Vendor security clearance requirements"
                    ],
                    correct: 2,
                    explanation: "Vendor lock-in occurs when an organization becomes overly dependent on a single vendor, making it difficult or costly to switch to alternatives."
                },
                {
                    question: "In IT resource management, what does capacity planning primarily address?",
                    options: [
                        "Employee training needs",
                        "Budget allocation",
                        "Vendor selection",
                        "Future resource requirements to meet demand"
                    ],
                    correct: 3,
                    explanation: "Capacity planning ensures adequate IT resources (hardware, software, network) are available to meet current and future business demands."
                },
                {
                    question: "Which role is primarily responsible for ensuring IT services meet agreed performance standards?",
                    options: [
                        "Service Level Manager",
                        "Network Administrator",
                        "Database Administrator",
                        "Project Manager"
                    ],
                    correct: 0,
                    explanation: "The Service Level Manager is responsible for ensuring IT services consistently meet agreed performance standards and managing customer relationships regarding service levels."
                }
            ],
            frameworks: [
                {
                    question: "In enterprise architecture, what does the Zachman Framework primarily provide?",
                    options: [
                        "A security architecture model",
                        "A structured approach to enterprise architecture description",
                        "A project management methodology",
                        "A risk assessment framework"
                    ],
                    correct: 1,
                    explanation: "The Zachman Framework provides a structured way to view and define enterprise architecture from different perspectives and aspects."
                },
                {
                    question: "IT performance monitoring is best described as serving which function?",
                    options: [
                        "To measure and improve IT service delivery against objectives",
                        "To reduce IT costs",
                        "To eliminate all system errors",
                        "To replace manual processes"
                    ],
                    correct: 0,
                    explanation: "IT performance monitoring measures key indicators to ensure IT services meet defined objectives and identify areas for improvement."
                },
                {
                    question: "Which framework primarily focuses on value delivery from IT investments?",
                    options: ["COBIT", "Val IT", "ITIL", "PMBOK"],
                    correct: 1,
                    explanation: "Val IT specifically focuses on ensuring IT investments deliver expected value to the organization and align with business strategy."
                },
                {
                    question: "How does implementing IT governance frameworks primarily benefit an organization?",
                    options: [
                        "Reducing IT staff",
                        "Eliminating all IT risks",
                        "Ensuring IT supports business objectives effectively",
                        "Automating all processes"
                    ],
                    correct: 2,
                    explanation: "IT governance frameworks ensure IT investments and operations are aligned with and support business objectives while managing associated risks."
                },
                {
                    question: "In COBIT, what are the five domains?",
                    options: [
                        "Plan, Build, Run, Monitor, Evaluate",
                        "EDM, APO, BAI, DSS, MEA",
                        "Strategy, Design, Transition, Operation, Improvement",
                        "Identify, Protect, Detect, Respond, Recover"
                    ],
                    correct: 1,
                    explanation: "COBIT 5 domains are: EDM (Evaluate, Direct, Monitor), APO (Align, Plan, Organize), BAI (Build, Acquire, Implement), DSS (Deliver, Service, Support), MEA (Monitor, Evaluate, Assess)."
                },
                {
                    question: "What is the relationship between COBIT and other frameworks?",
                    options: [
                        "COBIT replaces all other frameworks",
                        "COBIT is incompatible with other frameworks",
                        "COBIT provides an overarching governance framework that can integrate others",
                        "COBIT only works with ISACA frameworks"
                    ],
                    correct: 2,
                    explanation: "COBIT serves as an overarching governance framework that can integrate and align other frameworks like ITIL, ISO 27001, and PMBOK."
                },
                {
                    question: "Which maturity model is commonly used to assess IT process improvement?",
                    options: [
                        "CMMI (Capability Maturity Model Integration)",
                        "Basel III",
                        "Balanced Scorecard",
                        "Six Sigma"
                    ],
                    correct: 0,
                    explanation: "CMMI provides a framework for assessing and improving organizational processes through defined maturity levels from Initial to Optimizing."
                },
                {
                    question: "What does TOGAF primarily provide for enterprise architecture?",
                    options: [
                        "Security controls",
                        "Financial metrics",
                        "Project management processes",
                        "Methodology and tools for developing architecture"
                    ],
                    correct: 3,
                    explanation: "TOGAF (The Open Group Architecture Framework) provides methodology and tools for developing enterprise architecture including the Architecture Development Method (ADM)."
                }
            ],
            compliance: [
                {
                    question: "Which regulation primarily focuses on financial reporting and internal controls?",
                    options: [
                        "GDPR",
                        "HIPAA",
                        "SOX (Sarbanes-Oxley)",
                        "PCI DSS"
                    ],
                    correct: 2,
                    explanation: "The Sarbanes-Oxley Act (SOX) requires public companies to maintain adequate internal controls over financial reporting."
                },
                {
                    question: "What is the main difference between qualitative and quantitative risk assessment?",
                    options: [
                        "Quantitative uses numerical analysis, qualitative uses descriptive analysis",
                        "Qualitative uses numbers, quantitative uses descriptions",
                        "They are the same approach",
                        "Qualitative is more accurate than quantitative"
                    ],
                    correct: 0,
                    explanation: "Quantitative risk assessment uses numerical data and calculations, while qualitative assessment uses descriptive scales and subjective judgment."
                },
                {
                    question: "Data governance programs are established to achieve which core objectives?",
                    options: [
                        "To reduce data storage costs",
                        "To ensure data quality, security, and compliance",
                        "To eliminate all data redundancy",
                        "To automate data processing"
                    ],
                    correct: 1,
                    explanation: "Data governance ensures data is managed as a valuable asset with appropriate quality, security, privacy, and regulatory compliance measures."
                },
                {
                    question: "In risk management, what does 'risk appetite' refer to?",
                    options: [
                        "The total amount of risk in the organization",
                        "The cost of risk mitigation",
                        "The probability of risk occurrence",
                        "The level of risk an organization is willing to accept"
                    ],
                    correct: 3,
                    explanation: "Risk appetite is the amount and type of risk that an organization is willing to accept in pursuit of its objectives."
                },
                {
                    question: "What is the purpose of a privacy impact assessment (PIA)?",
                    options: [
                        "To calculate the cost of privacy programs",
                        "To identify and mitigate privacy risks in projects or systems",
                        "To train employees on privacy policies",
                        "To audit existing privacy controls"
                    ],
                    correct: 1,
                    explanation: "A PIA systematically evaluates potential privacy impacts and risks of new projects, systems, or processes to identify appropriate safeguards."
                },
                {
                    question: "Which principle is fundamental to effective risk management?",
                    options: [
                        "Eliminating all risks",
                        "Risk assessment should be integrated into decision-making",
                        "Only focusing on high-probability risks",
                        "Risk management is solely an IT responsibility"
                    ],
                    correct: 1,
                    explanation: "Effective risk management requires integrating risk considerations into all business decisions and processes, not treating it as a separate activity."
                },
                {
                    question: "Under GDPR, what is the maximum fine for serious data protection violations?",
                    options: [
                        "‚Ç¨10 million or 2% of annual turnover",
                        "‚Ç¨20 million or 4% of annual turnover",
                        "‚Ç¨50 million or 5% of annual turnover",
                        "‚Ç¨100 million or 10% of annual turnover"
                    ],
                    correct: 1,
                    explanation: "GDPR allows for fines up to ‚Ç¨20 million or 4% of annual global turnover (whichever is higher) for the most serious violations."
                },
                {
                    question: "What is the primary objective of compliance monitoring?",
                    options: [
                        "To verify adherence to laws, regulations, and policies",
                        "To reduce operational costs",
                        "To improve system performance",
                        "To eliminate all business risks"
                    ],
                    correct: 0,
                    explanation: "Compliance monitoring is an ongoing process to verify that an organization adheres to applicable laws, regulations, policies, and standards through testing and reporting."
                }
            ],
            mixed: [
                {
                    question: "What is the primary responsibility of a Chief Information Officer (CIO)?",
                    options: [
                        "Managing day-to-day IT operations",
                        "Aligning IT strategy with business strategy",
                        "Writing code and developing systems",
                        "Maintaining network infrastructure"
                    ],
                    correct: 1,
                    explanation: "The CIO is responsible for strategic IT leadership, ensuring IT investments and initiatives support business objectives and create value."
                },
                {
                    question: "In IT governance, what is the purpose of organizational structure?",
                    options: [
                        "To clearly define roles, responsibilities, and decision-making authority",
                        "To reduce headcount",
                        "To increase bureaucracy",
                        "To eliminate the need for policies"
                    ],
                    correct: 0,
                    explanation: "Organizational structure defines roles, responsibilities, reporting relationships, and decision-making authority to ensure effective governance and management."
                },
                {
                    question: "What is the key difference between a policy and a procedure?",
                    options: [
                        "Policies are technical, procedures are business-focused",
                        "Policies provide high-level direction, procedures provide detailed steps",
                        "There is no difference",
                        "Procedures are more important than policies"
                    ],
                    correct: 1,
                    explanation: "Policies establish high-level principles and requirements, while procedures provide detailed step-by-step instructions for implementing policies."
                },
                {
                    question: "IT portfolio management achieves its value through which primary approach?",
                    options: [
                        "To reduce the number of IT projects",
                        "To eliminate project risks",
                        "To standardize all IT projects",
                        "To optimize value from IT investments across the portfolio"
                    ],
                    correct: 3,
                    explanation: "IT portfolio management optimizes value delivery by selecting, prioritizing, and managing IT investments as a coordinated portfolio aligned with business strategy."
                },
                {
                    question: "Which of the following best describes enterprise architecture?",
                    options: [
                        "A blueprint that defines the structure and operation of an organization",
                        "The physical design of data centers",
                        "Software architecture for applications",
                        "Network topology design"
                    ],
                    correct: 0,
                    explanation: "Enterprise architecture provides a comprehensive blueprint showing how all components of the enterprise fit together to achieve business objectives."
                },
                {
                    question: "What is the primary benefit of service level management?",
                    options: [
                        "Reducing service costs",
                        "Ensuring services meet agreed performance standards",
                        "Eliminating all service incidents",
                        "Automating service delivery"
                    ],
                    correct: 1,
                    explanation: "Service level management ensures IT services consistently meet agreed performance standards and user expectations while facilitating improvement."
                },
                {
                    question: "In change management, what is the purpose of a Change Advisory Board (CAB)?",
                    options: [
                        "To implement all changes automatically",
                        "To reduce the number of change requests",
                        "To provide expert advice and authorization for changes",
                        "To eliminate the need for change approvals"
                    ],
                    correct: 2,
                    explanation: "The Change Advisory Board provides expert advice, evaluates change requests, and authorizes changes based on risk assessment and business impact."
                },
                {
                    question: "What is the primary purpose of business continuity planning?",
                    options: [
                        "To increase revenue",
                        "To reduce operational costs",
                        "To improve customer satisfaction",
                        "To maintain essential operations during and after disruptions"
                    ],
                    correct: 3,
                    explanation: "Business continuity planning ensures an organization can maintain essential operations during and after disruptions through preparation and recovery procedures."
                }
            ]
        };

        const flashcards = {
            governance: [
                { 
                    front: "COBIT 5 Principles", 
                    back: "The five key principles of COBIT 5 are:",
                    explanation: "1. Meeting Stakeholder Needs - Balancing benefits, risks, and resources to meet stakeholder requirements. 2. Covering Enterprise End-to-End - Integrating governance of enterprise IT from end to end. 3. Applying a Single Integrated Framework - Aligning with other standards and frameworks. 4. Enabling a Holistic Approach - Considering all factors that influence governance and management. 5. Separating Governance from Management - Clear distinction between governance (oversight) and management (execution)."
                },
                { 
                    front: "Three Lines of Defense", 
                    back: "Risk management model with three levels:",
                    explanation: "1st Line: Operational Management - Owns and manages risks day-to-day, implements controls, and reports on performance. 2nd Line: Risk Management & Compliance - Provides oversight, sets policies, monitors compliance, and reports on risk. 3rd Line: Internal Audit - Provides independent assurance on governance, risk management, and internal controls through systematic review and evaluation."
                },
                { 
                    front: "ISO 38500 Principles", 
                    back: "Six principles for corporate governance of IT:",
                    explanation: "Responsibility - Individuals and groups understand and accept their responsibilities. Strategy - IT strategy aligns with business strategy. Acquisition - Acquisitions are made for valid reasons with proper analysis. Performance - IT performs well whenever required. Conformance - IT complies with formal rules and optional standards. Human Behavior - IT policies and decisions demonstrate respect for human behavior."
                },
                { 
                    front: "IT Governance vs Management", 
                    back: "Key distinction in COBIT framework:",
                    explanation: "IT Governance focuses on strategic direction, oversight, and accountability - ensuring IT delivers value and manages risks appropriately. Performed by board and executive management. IT Management focuses on day-to-day execution, operations, and implementation of governance decisions. Performed by IT management and staff. Governance is about 'what' and 'why', management is about 'how' and 'when'."
                },
                { 
                    front: "Enterprise Risk Management (ERM)", 
                    back: "Comprehensive approach to organizational risk:",
                    explanation: "ERM is a systematic methodology to identify, assess, respond to, and monitor risks across the entire enterprise. It considers all types of risks (strategic, operational, financial, compliance) and integrates risk management into business processes and decision-making. ERM supports strategic objectives by providing risk appetite guidance and ensuring risks are managed within acceptable levels."
                },
                { 
                    front: "Risk Appetite", 
                    back: "Organization's willingness to accept risk:",
                    explanation: "Risk appetite is the amount and type of risk that an organization is willing to accept in pursuit of its strategic objectives. It's established by the board and senior management, guides decision-making, and helps determine appropriate risk responses. Risk appetite considers the organization's capacity to bear risk, stakeholder expectations, and regulatory requirements."
                },
                { 
                    front: "Business Impact Analysis (BIA)", 
                    back: "Critical component of business continuity planning:",
                    explanation: "BIA systematically identifies and evaluates the potential impacts of disruptions to critical business processes. It determines Recovery Time Objectives (RTO) - maximum acceptable downtime, and Recovery Point Objectives (RPO) - maximum acceptable data loss. BIA results guide business continuity strategies, resource allocation, and investment decisions for resilience capabilities."
                },
                { 
                    front: "COBIT 5 Domains", 
                    back: "Five domains organizing IT processes:",
                    explanation: "EDM (Evaluate, Direct, Monitor) - Governance processes ensuring objectives are achieved. APO (Align, Plan, Organize) - Strategic alignment and planning processes. BAI (Build, Acquire, Implement) - Solution delivery and implementation processes. DSS (Deliver, Service, Support) - Operational service delivery processes. MEA (Monitor, Evaluate, Assess) - Performance monitoring and compliance processes."
                }
            ],
            management: [
                { 
                    front: "IT Steering Committee", 
                    back: "Strategic IT governance body:",
                    explanation: "Senior management group responsible for IT strategic direction, investment priorities, and ensuring IT alignment with business objectives. Typically includes business executives, IT leadership, and key stakeholders. Reviews and approves major IT initiatives, resolves resource conflicts, monitors IT performance, and ensures IT governance policies are followed."
                },
                { 
                    front: "Service Level Agreement (SLA)", 
                    back: "Formal service commitment document:",
                    explanation: "Legal or contractual agreement between service provider and customer defining expected service levels, performance metrics, responsibilities, and remedies. SLAs specify availability targets, response times, quality standards, and reporting requirements. They provide basis for service monitoring, performance measurement, and relationship management between IT and business stakeholders."
                },
                { 
                    front: "Data Classification", 
                    back: "Systematic categorization of organizational data:",
                    explanation: "Process of organizing data into categories based on sensitivity, value, regulatory requirements, and business impact. Common classifications include Public, Internal, Confidential, and Restricted. Each classification level has specific handling requirements, access controls, retention policies, and protection measures to ensure appropriate data security and compliance."
                },
                { 
                    front: "Vendor Lock-in", 
                    back: "Risk in vendor relationship management:",
                    explanation: "Situation where organization becomes overly dependent on single vendor, making it difficult or costly to switch to alternatives. Causes include proprietary technologies, custom integrations, specialized skills, and switching costs. Mitigation strategies include multi-vendor approaches, standard technologies, contract terms, and exit planning."
                },
                { 
                    front: "Capacity Planning", 
                    back: "IT resource forecasting and management:",
                    explanation: "Systematic process of determining future IT resource requirements to ensure adequate capacity meets business demands while optimizing costs. Includes demand forecasting, performance monitoring, bottleneck analysis, and scaling decisions. Considers growth projections, seasonal variations, technology changes, and service level requirements."
                },
                { 
                    front: "Privacy by Design", 
                    back: "Fundamental privacy engineering approach:",
                    explanation: "Methodology that embeds privacy considerations into system design and business processes from the beginning rather than as an afterthought. Seven foundational principles include proactive not reactive, privacy as default, privacy embedded into design, full functionality, end-to-end security, visibility and transparency, and respect for user privacy."
                },
                { 
                    front: "Data Minimization", 
                    back: "Core privacy principle:",
                    explanation: "Fundamental privacy principle requiring collection of only data that is necessary for specific, stated purposes. Organizations should limit data collection to what is directly relevant and not excessive for the purposes. Also requires regular review and deletion of data that is no longer needed, supporting both privacy compliance and security risk reduction."
                },
                { 
                    front: "IT Performance Monitoring", 
                    back: "Ongoing measurement and analysis system:",
                    explanation: "Continuous process of measuring and analyzing IT service delivery against defined objectives and service levels. Includes technical metrics (availability, response time), business metrics (customer satisfaction, cost per service), and strategic metrics (alignment with business objectives). Results drive improvement initiatives and support decision-making."
                }
            ],
            frameworks: [
                { 
                    front: "ITIL Service Lifecycle", 
                    back: "Five-stage approach to service management:",
                    explanation: "Service Strategy - Defining value propositions and service portfolio. Service Design - Designing new services and processes for quality and efficiency. Service Transition - Building, testing, and deploying services into production. Service Operation - Delivering and supporting services day-to-day. Continual Service Improvement - Monitoring and improving services and processes throughout lifecycle."
                },
                { 
                    front: "Zachman Framework", 
                    back: "Enterprise architecture classification scheme:",
                    explanation: "Structured approach using 6x6 matrix examining enterprise architecture from different perspectives and aspects. Perspectives include Planner, Owner, Designer, Builder, Implementer, and Worker views. Aspects cover What (data), How (function), Where (network), Who (people), When (time), and Why (motivation). Provides comprehensive view for architecture development and analysis."
                },
                { 
                    front: "Val IT Framework", 
                    back: "ISACA framework for IT value delivery:",
                    explanation: "Comprehensive framework focused on value governance, value portfolio management, and value investment management. Ensures IT investments deliver expected value and align with business strategy. Addresses entire investment lifecycle from idea through realization of benefits, with emphasis on business case development, portfolio optimization, and value measurement."
                },
                { 
                    front: "COSO Framework", 
                    back: "Internal control framework with five components:",
                    explanation: "Control Environment - Tone at the top and organizational culture. Risk Assessment - Identification and analysis of risks. Control Activities - Policies and procedures to mitigate risks. Information & Communication - Relevant information communicated effectively. Monitoring Activities - Ongoing evaluations of internal control system. Supports reliable financial reporting, operational effectiveness, and compliance."
                },
                { 
                    front: "Balanced Scorecard", 
                    back: "Strategic performance measurement tool:",
                    explanation: "Framework using four perspectives to measure organizational performance: Financial (revenue, profit, ROI), Customer (satisfaction, retention, market share), Internal Process (efficiency, quality, innovation), and Learning & Growth (employee skills, systems, culture). Translates strategy into measurable objectives with cause-and-effect relationships between perspectives."
                },
                { 
                    front: "Capability Maturity Model (CMM)", 
                    back: "Process improvement and assessment framework:",
                    explanation: "Five-level maturity model for assessing and improving organizational processes: Level 1 Initial (ad hoc, unpredictable), Level 2 Managed (disciplined processes), Level 3 Defined (standard processes), Level 4 Quantitatively Managed (measured processes), Level 5 Optimizing (continuously improving). Provides roadmap for process improvement and organizational capability development."
                },
                { 
                    front: "TOGAF", 
                    back: "Enterprise architecture development framework:",
                    explanation: "The Open Group Architecture Framework providing methodology and tools for developing enterprise architecture. Core component is Architecture Development Method (ADM) - iterative approach for architecture development. Includes architecture content framework, enterprise continuum, and reference models. Supports architecture governance, skills development, and stakeholder management."
                },
                { 
                    front: "ISO 27001", 
                    back: "Information security management standard:",
                    explanation: "International standard specifying requirements for establishing, implementing, maintaining, and continually improving Information Security Management System (ISMS). Uses Plan-Do-Check-Act approach with risk-based thinking. Includes 114 security controls across 14 categories covering organizational, people, physical, and technological aspects of information security."
                }
            ],
            compliance: [
                { 
                    front: "Sarbanes-Oxley Act (SOX)", 
                    back: "US financial reporting and corporate governance law:",
                    explanation: "Federal law requiring public companies to maintain adequate internal controls over financial reporting and disclosure. Key provisions include CEO/CFO certification of financial statements, independent audit of internal controls, whistleblower protections, and executive compensation restrictions. IT general controls supporting financial systems are critical for SOX compliance."
                },
                { 
                    front: "GDPR", 
                    back: "European Union data protection regulation:",
                    explanation: "General Data Protection Regulation governing data protection and privacy for EU residents. Key principles include lawfulness, fairness, transparency, purpose limitation, data minimization, accuracy, storage limitation, integrity, confidentiality, and accountability. Provides individual rights, requires privacy by design, and imposes significant penalties up to ‚Ç¨20 million or 4% of annual turnover."
                },
                { 
                    front: "Risk Assessment Methods", 
                    back: "Approaches to evaluating organizational risks:",
                    explanation: "Qualitative methods use descriptive scales (low/medium/high) and professional judgment, suitable for initial assessments and non-quantifiable risks. Quantitative methods use numerical analysis, statistical techniques, and financial modeling to calculate expected losses and ROI. Hybrid approaches combine both methods for comprehensive risk evaluation supporting decision-making."
                },
                { 
                    front: "Privacy Impact Assessment (PIA)", 
                    back: "Systematic privacy risk evaluation process:",
                    explanation: "Structured assessment evaluating potential privacy impacts and risks of new projects, systems, or processes. Identifies data flows, privacy risks, legal requirements, and appropriate safeguards. Conducted before implementation to ensure privacy by design principles. Results guide risk mitigation strategies, privacy controls, and stakeholder communication."
                },
                { 
                    front: "Compliance Monitoring", 
                    back: "Ongoing verification of adherence to requirements:",
                    explanation: "Continuous process to verify organization adheres to applicable laws, regulations, policies, and standards through testing, monitoring, and reporting. Includes control testing, exception reporting, corrective action tracking, and management reporting. Supports regulatory reporting, audit preparation, and continuous improvement of compliance programs."
                },
                { 
                    front: "Data Governance", 
                    back: "Framework for managing data as enterprise asset:",
                    explanation: "Comprehensive approach ensuring data quality, security, privacy, and compliance throughout data lifecycle. Includes data stewardship roles, policies and procedures, data classification, quality management, and lifecycle management. Supports regulatory compliance, business decision-making, and operational efficiency through effective data management practices."
                },
                { 
                    front: "Risk Response Strategies", 
                    back: "Four primary approaches to risk treatment:",
                    explanation: "Accept - Acknowledge risk and take no action, often for low-impact risks within appetite. Avoid - Eliminate risk source or change approach to prevent risk occurrence. Mitigate - Reduce likelihood or impact through controls and safeguards. Transfer - Share risk with others through insurance, outsourcing, or contracts. Selection depends on risk assessment, cost-benefit analysis, and organizational risk appetite."
                },
                { 
                    front: "Due Diligence", 
                    back: "Comprehensive investigation and evaluation process:",
                    explanation: "Systematic investigation of risks, controls, and compliance before making decisions or entering agreements. Includes financial analysis, legal review, operational assessment, and risk evaluation. Common in mergers and acquisitions, vendor selection, and investment decisions. Ensures informed decision-making and identifies potential issues requiring attention or mitigation."
                }
            ],
            mixed: [
                { 
                    front: "Enterprise Architecture", 
                    back: "Comprehensive organizational blueprint:",
                    explanation: "Holistic view defining structure and operation of organization including business processes, information systems, data flows, and technology infrastructure. Enables strategic planning, decision-making, risk management, and change management. Reduces complexity, improves integration, supports digital transformation, and ensures technology investments align with business objectives."
                },
                { 
                    front: "IT Portfolio Management", 
                    back: "Coordinated management of IT investments:",
                    explanation: "Strategic approach to selecting, prioritizing, and managing IT investments as coordinated portfolio aligned with business strategy. Includes demand management, investment evaluation, resource allocation, and performance monitoring. Optimizes value delivery, manages interdependencies, balances risk and return, and ensures strategic alignment across all IT initiatives."
                },
                { 
                    front: "Policy vs Procedure", 
                    back: "Distinction between high-level and detailed guidance:",
                    explanation: "Policies establish high-level principles, requirements, and expectations that guide organizational behavior and decision-making. They define 'what' and 'why'. Procedures provide detailed step-by-step instructions for implementing policies and accomplishing specific tasks. They define 'how', 'when', and 'who'. Policies are strategic; procedures are operational."
                },
                { 
                    front: "Service Catalog", 
                    back: "Comprehensive directory of IT services:",
                    explanation: "Centralized repository containing descriptions of all IT services available to users, including service levels, access procedures, costs, and support contacts. Supports service request management, user self-service, service level management, and communication between IT and business. Enables better service visibility, standardization, and customer experience."
                },
                { 
                    front: "Change Management", 
                    back: "Formal process for controlling IT changes:",
                    explanation: "Systematic approach to managing changes to IT systems and services to minimize risk and business disruption. Includes change request, assessment, approval, implementation, and review processes. Change Advisory Board provides expert evaluation and authorization. Ensures changes are properly planned, tested, documented, and communicated to stakeholders."
                },
                { 
                    front: "Business Continuity", 
                    back: "Organizational resilience capability:",
                    explanation: "Capability to maintain essential business operations during and after disruptions through planning, preparation, and response procedures. Includes business impact analysis, risk assessment, continuity strategies, crisis management, and recovery procedures. Supports organizational resilience, regulatory compliance, and stakeholder confidence in ability to manage disruptions."
                },
                { 
                    front: "IT Strategy", 
                    back: "High-level plan for technology direction:",
                    explanation: "Comprehensive plan defining how IT will support and enable business objectives through technology investments, capabilities, and initiatives. Addresses digital transformation, emerging technologies, cybersecurity, infrastructure, and organizational capabilities. Must align with business strategy, consider industry trends, and provide roadmap for achieving strategic objectives through IT."
                },
                { 
                    front: "Stakeholder Management", 
                    back: "Process of engaging organizational stakeholders:",
                    explanation: "Systematic approach to identifying, analyzing, and engaging stakeholders to ensure their needs and expectations are understood and addressed. Includes stakeholder analysis, communication planning, expectation management, and relationship building. Critical for project success, change management, and organizational alignment around IT initiatives and strategies."
                }
            ]
        };

        const learningContent = {
            governance: [
                {
                    title: "IT Governance Fundamentals and COBIT Framework",
                    content: "IT governance ensures that IT supports business objectives, delivers value, manages risks appropriately, and uses resources responsibly. It is the responsibility of the board of directors and executive management, not IT management. The COBIT framework provides a comprehensive approach to IT governance with five key principles: Meeting Stakeholder Needs (balancing benefits, risks, and resources), Covering the Enterprise End-to-End (integrating governance across the organization), Applying a Single Integrated Framework (aligning with other standards), Enabling a Holistic Approach (considering all factors), and Separating Governance from Management (clear distinction between oversight and execution). COBIT 5 has five domains: EDM (Evaluate, Direct, Monitor) for governance, and APO (Align, Plan, Organize), BAI (Build, Acquire, Implement), DSS (Deliver, Service, Support), and MEA (Monitor, Evaluate, Assess) for management.",
                    example: "Example: A bank's board of directors (governance) sets the strategic direction for IT investments in digital banking, while the IT department (management) implements the mobile banking application. The board evaluates progress, directs priorities, and monitors outcomes, while IT manages day-to-day operations."
                },
                {
                    title: "Enterprise Risk Management and Risk Frameworks",
                    content: "Enterprise Risk Management (ERM) is a systematic approach to identify, assess, respond to, and monitor risks that could affect achievement of organizational objectives. ERM considers risk appetite (the amount of risk an organization is willing to accept) and risk tolerance (acceptable deviation from objectives). Risk assessment methods include qualitative approaches using descriptive scales and professional judgment, and quantitative methods using numerical analysis and statistical techniques. Risk response strategies include Accept (tolerate the risk), Avoid (eliminate the risk source), Mitigate (reduce likelihood or impact), and Transfer (share risk through insurance or outsourcing). Effective ERM requires integration with strategic planning, regular monitoring and reporting, and clear governance structures with defined roles and responsibilities.",
                    example: "Example: A healthcare organization identifies cybersecurity as a top risk with high impact and medium likelihood. They might mitigate through security controls and training (reduce likelihood), transfer through cyber insurance (share impact), and accept residual risk within their appetite while monitoring threat landscape changes."
                },
                {
                    title: "Laws, Regulations, and Industry Standards",
                    content: "Organizations must comply with various laws and regulations affecting IT governance and operations. The Sarbanes-Oxley Act requires public companies to maintain adequate internal controls over financial reporting, including IT general controls supporting financial systems. GDPR and privacy laws establish requirements for data protection, consent management, and breach notification. Industry-specific regulations like HIPAA (healthcare), PCI DSS (payment cards), and Basel III (banking) impose additional requirements. International standards like ISO 38500 provide governance principles, ISO 27001 covers information security management, and ISO 20000 addresses IT service management. Compliance requires understanding applicable requirements, implementing appropriate controls, monitoring effectiveness, and reporting to regulators and stakeholders.",
                    example: "Example: A multinational bank must comply with SOX for financial reporting, GDPR for EU customer data, PCI DSS for payment processing, and local banking regulations in each jurisdiction. They need integrated compliance management to avoid overlaps and gaps while ensuring all requirements are met."
                }
            ],
            management: [
                {
                    title: "IT Resource Management and Capacity Planning",
                    content: "IT resource management encompasses planning, acquiring, developing, and maintaining IT resources including hardware, software, networks, data, and personnel. Capacity planning ensures adequate resources are available to meet current and future business demands while optimizing costs. This involves demand forecasting, resource utilization monitoring, performance analysis, and scaling decisions. Portfolio management evaluates and prioritizes IT investments to maximize value and alignment with business strategy. Resource optimization includes consolidation opportunities, cloud migration considerations, and lifecycle management. Effective resource management requires understanding business requirements, technology trends, vendor relationships, and total cost of ownership including acquisition, operation, and disposal costs.",
                    example: "Example: An e-commerce company forecasts 50% transaction growth during holiday season. Capacity planning involves analyzing current utilization, projecting resource needs, evaluating scaling options (cloud auto-scaling vs. additional servers), and implementing monitoring to ensure adequate performance while controlling costs."
                },
                {
                    title: "IT Vendor Management and Third-Party Risk",
                    content: "Vendor management encompasses the entire lifecycle of third-party relationships from selection through contract termination. Key activities include vendor evaluation and due diligence, contract negotiation and management, performance monitoring and measurement, risk assessment and mitigation, and relationship governance. Critical considerations include vendor lock-in risks (over-dependence on single vendors), service level management, data protection and privacy, business continuity planning, and exit strategies. Vendor risk assessment should evaluate financial stability, security practices, compliance capabilities, business continuity plans, and strategic alignment. Effective vendor management requires clear governance structures, regular performance reviews, escalation procedures, and continuous monitoring of vendor health and market conditions.",
                    example: "Example: When selecting a cloud storage vendor, evaluation criteria include security certifications, data location and sovereignty, SLA terms, pricing models, integration capabilities, vendor financial stability, and exit procedures including data portability and deletion guarantees."
                },
                {
                    title: "Data Governance and Privacy Programs",
                    content: "Data governance establishes policies, procedures, and accountability for managing data as an enterprise asset throughout its lifecycle. Key components include data classification (categorizing by sensitivity and value), data ownership and stewardship (defining roles and responsibilities), data quality management (ensuring accuracy and completeness), and data lifecycle management (from creation to disposal). Privacy programs implement privacy by design principles, ensure compliance with privacy laws, manage consent and user rights, and handle privacy incidents. Data classification typically includes categories like public, internal, confidential, and restricted, with appropriate protection measures for each level. Effective data governance requires executive sponsorship, clear policies, defined processes, technology tools, and regular monitoring and reporting.",
                    example: "Example: A financial services firm classifies customer account data as 'restricted' requiring encryption, access controls, audit logging, and specific retention periods. They implement privacy controls for GDPR compliance including consent management, data subject rights handling, and breach notification procedures."
                }
            ],
            frameworks: [
                {
                    title: "ITIL and IT Service Management Best Practices",
                    content: "ITIL (Information Technology Infrastructure Library) provides best practices for IT service management throughout the service lifecycle: Service Strategy (defining value propositions), Service Design (designing services and processes), Service Transition (building and deploying services), Service Operation (delivering day-to-day services), and Continual Service Improvement (monitoring and improving services). Key processes include Incident Management (restoring service quickly), Problem Management (preventing recurring incidents), Change Management (controlling changes), and Service Level Management (ensuring services meet agreed standards). ITIL emphasizes service-oriented thinking, customer focus, process-based approach, and continuous improvement. Implementation requires cultural change, process redesign, tool integration, and staff training.",
                    example: "Example: When email service fails, Incident Management quickly restores service while Problem Management investigates root cause to prevent recurrence. Change Management ensures any fixes follow proper approval and testing procedures to minimize future risk."
                },
                {
                    title: "Enterprise Architecture and Integration Frameworks",
                    content: "Enterprise Architecture provides a comprehensive blueprint showing how business strategy, processes, information systems, and technology infrastructure fit together to achieve organizational objectives. The Zachman Framework uses a 6x6 matrix examining What (data), How (function), Where (network), Who (people), When (time), and Why (motivation) from different stakeholder perspectives. TOGAF (The Open Group Architecture Framework) provides methodology and tools for developing enterprise architecture including Architecture Development Method (ADM). Enterprise architecture enables better decision-making, reduces complexity and redundancy, improves agility and integration, and supports strategic planning. Effective implementation requires executive sponsorship, stakeholder engagement, governance processes, and regular updates to reflect changing business needs.",
                    example: "Example: A retail company's enterprise architecture shows how customer data flows from online channels through CRM systems to inventory management, ensuring consistent customer experience across touchpoints while supporting business analytics and compliance requirements."
                },
                {
                    title: "Integration of Multiple Frameworks and Standards",
                    content: "Organizations typically use multiple frameworks and standards that must be integrated effectively to avoid conflicts and redundancy. COBIT provides overarching governance and can integrate with ITIL for service management, ISO 27001 for security, COSO for internal controls, and PMBOK for project management. Integration requires mapping common objectives, aligning processes and procedures, coordinating governance structures, and ensuring consistent terminology and metrics. Val IT complements COBIT by focusing specifically on value delivery from IT investments through value governance, portfolio management, and investment management. Successful integration requires understanding each framework's scope and purpose, identifying overlaps and gaps, developing integrated policies and procedures, and providing coordinated training and communication.",
                    example: "Example: A healthcare organization integrates COBIT for IT governance, ITIL for service delivery, ISO 27001 for security management, and HIPAA requirements for privacy protection, creating unified policies and procedures that address all requirements without duplication or conflicts."
                }
            ],
            compliance: [
                {
                    title: "Regulatory Compliance and Industry Standards",
                    content: "Regulatory compliance requires understanding applicable laws and regulations, implementing appropriate controls, monitoring compliance, and reporting to relevant authorities. Key regulations include SOX for financial reporting controls, GDPR for data protection, HIPAA for healthcare information, and PCI DSS for payment card security. Industry standards like ISO 27001 for information security and ISO 20000 for service management provide frameworks for compliance. Compliance management involves risk assessment, control implementation, monitoring and testing, documentation and reporting, and continuous improvement. Challenges include keeping up with regulatory changes, managing multiple jurisdictions, integrating compliance requirements, and balancing compliance costs with business objectives.",
                    example: "Example: A global financial services firm must comply with SOX in the US, GDPR in Europe, and local banking regulations in each country. They implement integrated compliance management with unified controls, monitoring systems, and reporting processes to efficiently meet all requirements."
                },
                {
                    title: "Risk Assessment Methodologies and Techniques",
                    content: "Risk assessment systematically identifies, analyzes, and evaluates risks to support decision-making and risk management. Qualitative methods use descriptive scales (low/medium/high) and professional judgment to assess likelihood and impact, suitable for initial assessments and non-quantifiable risks. Quantitative methods use numerical analysis including probability distributions, Monte Carlo simulation, and financial modeling to calculate expected losses and return on investment for risk mitigation. Hybrid approaches combine both methods for comprehensive assessment. Risk assessment should consider all types of risks including strategic, operational, financial, compliance, and reputational risks. Regular reassessment is necessary as business environment, threats, and controls change over time.",
                    example: "Example: Assessing cybersecurity risk might use qualitative methods for emerging threats with limited data, quantitative analysis for known attack vectors with historical data, and hybrid approaches for comprehensive risk modeling supporting investment decisions in security controls."
                },
                {
                    title: "Privacy and Data Protection Programs",
                    content: "Privacy programs ensure compliance with data protection laws and regulations while building customer trust and managing privacy risks. Key components include privacy governance (policies, roles, accountability), privacy by design (embedding privacy in systems and processes), consent management (obtaining and managing user consent), data subject rights (access, correction, deletion), privacy impact assessments (evaluating privacy risks), breach management (detection, notification, remediation), and vendor management (ensuring third parties protect data appropriately). GDPR and similar laws establish principles including lawfulness, fairness, transparency, purpose limitation, data minimization, accuracy, storage limitation, integrity, confidentiality, and accountability. Effective privacy programs require legal expertise, technical implementation, business process integration, and ongoing monitoring and improvement.",
                    example: "Example: An e-commerce company implements privacy by design in their new mobile app including minimal data collection, clear consent mechanisms, encryption in transit and at rest, user access to their data, automated deletion after retention periods, and privacy impact assessment before launch."
                }
            ],
            mixed: [
                {
                    title: "IT Strategy Development and Business Alignment",
                    content: "IT strategy defines how technology will support and enable business objectives through planned investments, capabilities, and initiatives. Strategy development involves understanding business strategy and objectives, assessing current IT capabilities and gaps, identifying opportunities and threats, evaluating technology trends and innovations, and developing roadmaps for closing gaps and achieving objectives. Key considerations include digital transformation opportunities, emerging technologies (cloud, AI, IoT), cybersecurity requirements, regulatory compliance, and competitive positioning. IT strategy must be regularly reviewed and updated to reflect changing business needs, technology advances, and market conditions. Successful implementation requires strong governance, adequate funding, skilled resources, and effective change management.",
                    example: "Example: A traditional retailer develops IT strategy for digital transformation including e-commerce platform, mobile applications, data analytics for personalization, cloud infrastructure for scalability, and cybersecurity enhancement to support online operations while maintaining competitive advantage."
                },
                {
                    title: "Organizational Structure and Decision-Making",
                    content: "Organizational structure defines roles, responsibilities, reporting relationships, and decision-making authority for effective governance and management. IT governance structures typically include the board of directors (ultimate accountability), audit committee (oversight of risks and controls), IT steering committee (strategic direction and priorities), IT strategy committee (long-term planning), and various management committees (operational oversight). Key roles include Chief Information Officer (IT strategy and leadership), Chief Information Security Officer (security governance), Chief Data Officer (data governance), and IT auditor (independent assurance). Effective structures ensure clear accountability, appropriate segregation of duties, timely decision-making, and proper escalation procedures. Structure should be documented, communicated, and regularly reviewed for effectiveness.",
                    example: "Example: A financial services firm establishes IT governance with board oversight, audit committee monitoring, IT steering committee setting priorities, architecture review board ensuring standards compliance, and security committee managing cyber risks, with clear escalation paths and decision rights."
                },
                {
                    title: "Performance Management and Continuous Improvement",
                    content: "Performance management measures, monitors, and improves IT performance to ensure objectives are met efficiently and effectively. Key performance indicators (KPIs) should align with business objectives and include both leading indicators (predictive) and lagging indicators (results). Common metrics include service availability, response times, customer satisfaction, project delivery, cost efficiency, and security incidents. Performance monitoring requires baseline establishment, regular measurement, trend analysis, exception identification, and corrective action. Continuous improvement involves identifying improvement opportunities, implementing changes, measuring results, and institutionalizing successful practices. Effective performance management requires stakeholder engagement, data quality, analytical capabilities, and change management to act on insights.",
                    example: "Example: A service provider monitors customer satisfaction scores, service availability percentages, incident resolution times, and cost per service unit, with monthly reviews identifying trends and improvement opportunities, quarterly business reviews with stakeholders, and annual strategy updates based on performance insights."
                }
            ]
        };

        const scenarios = [
            {
                question: "You are auditing IT governance at a mid-size company and discover that the same person serves as both CIO and head of internal audit for IT functions. The CEO explains this saves costs and ensures IT expertise in auditing. What is your primary concern?",
                options: ["The arrangement is cost-effective and should be maintained", "There is a fundamental conflict of interest violating independence principles", "The person needs additional audit training", "More frequent external audits would solve any issues"],
                correct: 1,
                explanation: "This arrangement violates fundamental independence principles. The CIO cannot objectively audit their own decisions and controls. Independence requires organizational and functional separation between those responsible for operations and those providing assurance."
            },
            {
                question: "During your review of an organization's data governance program, you find that data classification policies exist but 60% of datasets remain unclassified after two years. Management claims they are 'working on it' but have no timeline. What should be your recommendation?",
                options: ["Accept that data classification takes time", "Recommend immediate classification of all data within 90 days", "Focus only on the 40% that is classified", "Suggest hiring more staff for classification"],
                correct: 1,
                explanation: "Unclassified data cannot receive appropriate protection. The recommendation should include immediate risk-based prioritization for classification, starting with the most sensitive/critical data, with clear timelines and accountability."
            },
            {
                question: "You are reviewing vendor management practices and find that a critical cloud provider contract expired six months ago, but services continue under the expired terms. Management says 'it's working fine' and renewal negotiations are 'in progress.' What is your assessment?",
                options: ["The situation is acceptable since services are working", "This represents significant legal and operational risk requiring immediate attention", "Expired contracts are common and not concerning", "The vendor relationship history justifies continued service"],
                correct: 1,
                explanation: "Operating under expired contracts creates legal uncertainty, potential service disruption risk, lack of SLA enforcement, and possible compliance violations. This requires immediate management attention and risk mitigation."
            },
            {
                question: "During an audit of IT steering committee effectiveness, you attend a meeting where technical decisions are made without business representation, and strategic decisions are deferred 'pending technical analysis.' What governance issue does this indicate?",
                options: ["The technical team is highly competent", "IT governance lacks proper business-IT alignment and decision-making balance", "More technical analysis is always beneficial", "Business representatives are not needed for technical decisions"],
                correct: 1,
                explanation: "Effective IT governance requires balanced business-IT decision-making. Technical decisions without business input may not align with business needs, while deferring strategic decisions prevents timely governance."
            },
            {
                question: "You discover that an organization has implemented multiple frameworks (COBIT, ITIL, ISO 27001) but there's significant confusion about conflicting requirements and duplicate processes. Staff complain about 'framework overload.' What should you recommend?",
                options: ["Eliminate all frameworks except one", "Continue with all frameworks as implemented", "Develop an integrated approach mapping common objectives and eliminating redundancy", "Add more training on each framework"],
                correct: 2,
                explanation: "Multiple frameworks should be integrated to leverage their strengths while eliminating conflicts and redundancy. An integrated approach maps common objectives, aligns processes, and creates unified governance."
            },
            {
                question: "While reviewing business continuity planning, you find that IT disaster recovery plans exist but haven't been tested in 18 months. The plans assume 4-hour recovery times, but the business requires 1-hour recovery for critical systems. What's your primary concern?",
                options: ["The plans need minor updates", "There's a critical gap between business requirements and IT capabilities", "18 months without testing is acceptable", "Recovery time objectives are unrealistic"],
                correct: 1,
                explanation: "The gap between business requirements (1 hour) and IT capabilities (4 hours) represents a critical business risk. Untested plans may not achieve even the 4-hour target, compounding the problem."
            },
            {
                question: "You are auditing privacy controls and find that consent management exists for marketing, but customer data is shared with analytics partners without explicit consent. Legal says this is 'covered under legitimate business interest.' What should be your audit conclusion?",
                options: ["Legal's interpretation is sufficient", "This represents potential privacy law violation requiring legal review and control enhancement", "Analytics don't require consent", "Current practices are industry standard"],
                correct: 1,
                explanation: "Data sharing with third parties typically requires explicit consent under privacy laws like GDPR. Relying solely on legitimate interest for partner analytics may not provide adequate legal basis and requires careful review."
            },
            {
                question: "During your audit of IT performance monitoring, you find that SLAs exist but are consistently missed, there's no root cause analysis of failures, and business users have stopped reporting issues because 'nothing changes.' What governance failure does this represent?",
                options: ["Users need to be more patient", "Performance monitoring lacks accountability and continuous improvement", "SLAs should be made less stringent", "More monitoring tools are needed"],
                correct: 1,
                explanation: "This represents failure in performance management governance - no accountability for SLA breaches, no improvement processes, and loss of stakeholder confidence in IT service delivery."
            },
            {
                question: "You discover that risk assessments are performed annually but significant technology changes occur monthly without risk evaluation. IT management says they 'know the risks' and formal assessment would slow down innovation. How should you respond?",
                options: ["Annual assessments are sufficient", "Risk assessment frequency should align with the pace of change", "Innovation should not be slowed by risk processes", "Informal risk knowledge is adequate"],
                correct: 1,
                explanation: "Risk assessment frequency must match the pace of change. Monthly significant changes require more frequent risk evaluation, potentially through streamlined processes that don't impede innovation while ensuring risks are identified and managed."
            },
            {
                question: "While auditing IT governance maturity, you find excellent documentation and processes, but interviews reveal that actual practices often bypass formal procedures due to 'urgent business needs.' What does this indicate about governance effectiveness?",
                options: ["Documentation is comprehensive and sufficient", "There's a significant gap between governance design and implementation", "Business urgency justifies process bypasses", "More training on procedures is needed"],
                correct: 1,
                explanation: "Governance effectiveness requires alignment between formal processes and actual practices. Frequent bypasses indicate either inadequate process design for business realities or insufficient governance culture and accountability."
            }
        ];

        // Initialize game
        function initGame() {
            document.querySelectorAll('.mode-card').forEach(card => {
                card.addEventListener('click', () => selectMode(card.dataset.mode));
            });

            document.querySelectorAll('.topic-btn').forEach(btn => {
                btn.addEventListener('click', () => selectTopic(btn.dataset.topic));
            });

            document.getElementById('nextBtn').addEventListener('click', nextQuestion);
            document.getElementById('prevBtn').addEventListener('click', prevQuestion);
            
            // Ensure flashcard click event is set up
            const flashcardElement = document.getElementById('flashcard');
            if (flashcardElement) {
                flashcardElement.addEventListener('click', flipCard);
            }
        }

        function selectMode(mode) {
            currentMode = mode;
            
            document.querySelectorAll('.mode-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelector(`[data-mode="${mode}"]`).classList.add('active');
            
            document.getElementById('topicSelector').style.display = 'block';
        }

        function selectTopic(topic) {
            currentTopic = topic;
            
            document.querySelectorAll('.topic-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector(`[data-topic="${topic}"]`).classList.add('active');
            
            startMode();
        }

        function startMode() {
            document.getElementById('gameMode').style.display = 'none';
            document.getElementById('topicSelector').style.display = 'none';
            document.getElementById('progressBar').style.display = 'block';
            document.getElementById('controls').style.display = 'flex';
            
            currentQuestion = 0;
            score = 0;
            streak = 0;
            answeredQuestions = [];
            
            if (currentMode === 'quiz' || currentMode === 'scenario') {
                setupQuiz();
            } else if (currentMode === 'flashcards') {
                setupFlashcards();
            } else if (currentMode === 'learn') {
                setupLearning();
            }
        }

        function setupQuiz() {
            if (currentMode === 'scenario') {
                currentQuestions = [...scenarios];
            } else if (currentTopic === 'mixed') {
                currentQuestions = [
                    ...questionBank.governance,
                    ...questionBank.management,
                    ...questionBank.frameworks,
                    ...questionBank.compliance
                ].sort(() => Math.random() - 0.5);
            } else {
                currentQuestions = [...questionBank[currentTopic]];
            }
            
            // Ensure proper container visibility
            document.getElementById('questionContainer').classList.add('active');
            document.getElementById('questionContainer').style.display = 'block';
            document.getElementById('learningContainer').classList.remove('active');
            document.getElementById('learningContainer').style.display = 'none';
            document.getElementById('flashcard').style.display = 'none';
            
            showQuestion();
        }

        function setupFlashcards() {
            let cards;
            if (currentTopic === 'mixed') {
                cards = [
                    ...flashcards.governance,
                    ...flashcards.management,
                    ...flashcards.frameworks,
                    ...flashcards.compliance
                ].sort(() => Math.random() - 0.5);
            } else {
                cards = [...flashcards[currentTopic]];
            }
            
            currentQuestions = cards;
            
            document.getElementById('questionContainer').classList.remove('active');
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('learningContainer').classList.remove('active');
            document.getElementById('learningContainer').style.display = 'none';
            document.getElementById('flashcard').style.display = 'flex';
            
            showFlashcard();
            
            // Remove any existing event listeners and add new one
            const flashcardElement = document.getElementById('flashcard');
            flashcardElement.removeEventListener('click', flipCard);
            flashcardElement.addEventListener('click', flipCard);
        }

        function setupLearning() {
            let lessons;
            if (currentTopic === 'mixed') {
                lessons = [
                    ...learningContent.governance,
                    ...learningContent.management,
                    ...learningContent.frameworks,
                    ...learningContent.compliance
                ];
            } else {
                lessons = [...learningContent[currentTopic]];
            }
            
            currentQuestions = lessons;
            
            document.getElementById('questionContainer').classList.remove('active');
            document.getElementById('learningContainer').classList.add('active');
            document.getElementById('flashcard').style.display = 'none';
            
            showLearningContent();
        }

        function showQuestion() {
            if (currentQuestion >= currentQuestions.length) {
                showResults();
                return;
            }
            
            const question = currentQuestions[currentQuestion];
            
            document.getElementById('question').textContent = question.question;
            
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.textContent = option;
                optionElement.style.pointerEvents = 'auto'; // Re-enable clicking
                optionElement.addEventListener('click', () => selectOption(index));
                optionsContainer.appendChild(optionElement);
            });
            
            // Hide and reset explanation thoroughly
            const explanationDiv = document.getElementById('explanation');
            explanationDiv.style.display = 'none';
            explanationDiv.classList.remove('show');
            explanationDiv.innerHTML = '';
            
            document.getElementById('nextBtn').textContent = 'Submit Answer';
            document.getElementById('nextBtn').disabled = true;
            
            updateProgress();
        }

        function showFlashcard() {
            if (currentQuestion >= currentQuestions.length) {
                showResults();
                return;
            }
            
            const card = currentQuestions[currentQuestion];
            const flashcardElement = document.getElementById('flashcard');
            const cardContent = document.getElementById('cardContent');
            
            // Reset flashcard to front side
            cardContent.textContent = card.front;
            flashcardElement.classList.remove('flipped');
            
            // Update button text for flashcards
            if (currentQuestion === currentQuestions.length - 1) {
                document.getElementById('nextBtn').textContent = 'Complete Flashcards';
            } else {
                document.getElementById('nextBtn').textContent = `Next Card (${currentQuestion + 2}/${currentQuestions.length})`;
            }
            
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').disabled = false;
            
            updateProgress();
        }

        function showLearningContent() {
            if (currentQuestion >= currentQuestions.length) {
                showResults();
                return;
            }
            
            const lesson = currentQuestions[currentQuestion];
            
            document.getElementById('learningTitle').textContent = lesson.title;
            document.getElementById('learningText').innerHTML = lesson.content;
            document.getElementById('learningExample').innerHTML = `<strong>üí° Practical Example:</strong><br>${lesson.example}`;
            
            if (currentQuestion === currentQuestions.length - 1) {
                document.getElementById('nextBtn').textContent = 'Complete Learning Module';
            } else {
                document.getElementById('nextBtn').textContent = `Next Lesson (${currentQuestion + 2}/${currentQuestions.length})`;
            }
            
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').disabled = false;
            
            updateProgress();
        }

        function flipCard(event) {
            // Prevent event bubbling
            if (event) {
                event.stopPropagation();
            }
            
            const flashcard = document.getElementById('flashcard');
            const cardContent = document.getElementById('cardContent');
            const card = currentQuestions[currentQuestion];
            
            if (!card) return;
            
            if (flashcard.classList.contains('flipped')) {
                // Show front
                cardContent.textContent = card.front;
                flashcard.classList.remove('flipped');
            } else {
                // Show back with explanation
                const backContent = card.back || '';
                const explanation = card.explanation || '';
                cardContent.innerHTML = `
                    <div style="margin-bottom: 15px; font-weight: bold; font-size: 1.1em; color: #fff;">${backContent}</div>
                    <div style="font-size: 0.95em; line-height: 1.5; text-align: left; color: #fff;">${explanation}</div>
                `;
                flashcard.classList.add('flipped');
            }
        }

        function selectOption(index) {
            document.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            document.querySelectorAll('.option')[index].classList.add('selected');
            document.getElementById('nextBtn').disabled = false;
            
            answeredQuestions[currentQuestion] = index;
        }

        function nextQuestion() {
            if (currentMode === 'flashcards') {
                currentQuestion++;
                score++;
                updateScore();
                showFlashcard();
                return;
            }
            
            if (currentMode === 'learn') {
                currentQuestion++;
                score += 10;
                updateScore();
                showLearningContent();
                return;
            }
            
            const question = currentQuestions[currentQuestion];
            const selectedAnswer = answeredQuestions[currentQuestion];
            const nextBtn = document.getElementById('nextBtn');
            
            if (nextBtn.textContent === 'Submit Answer') {
                const options = document.querySelectorAll('.option');
                
                // Disable all options after submission
                options.forEach(opt => {
                    opt.style.pointerEvents = 'none';
                });
                
                if (selectedAnswer === question.correct) {
                    options[selectedAnswer].classList.add('correct');
                    score += 10;
                    streak++;
                } else {
                    options[selectedAnswer].classList.add('incorrect');
                    options[question.correct].classList.add('correct');
                    streak = 0;
                }
                
                // Show explanation
                const explanationDiv = document.getElementById('explanation');
                explanationDiv.innerHTML = `<strong>üìù Explanation:</strong><br><br>${question.explanation}`;
                explanationDiv.classList.remove('show');
                explanationDiv.style.display = 'block';
                explanationDiv.style.visibility = 'visible';
                explanationDiv.style.opacity = '1';
                
                // Force reflow and add show class
                explanationDiv.offsetHeight;
                explanationDiv.classList.add('show');
                
                if (currentQuestion === currentQuestions.length - 1) {
                    nextBtn.textContent = 'Complete Quiz';
                } else {
                    nextBtn.textContent = 'Next Question';
                }
                updateScore();
                
            } else {
                currentQuestion++;
                showQuestion();
            }
        }

        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                if (currentMode === 'flashcards') {
                    showFlashcard();
                } else if (currentMode === 'learn') {
                    showLearningContent();
                } else {
                    showQuestion();
                }
            }
        }

        function goBackToModes() {
            document.getElementById('gameMode').style.display = 'grid';
            document.getElementById('topicSelector').style.display = 'none';
            document.getElementById('progressBar').style.display = 'none';
            document.getElementById('controls').style.display = 'none';
            
            // Hide all content containers completely
            document.getElementById('questionContainer').classList.remove('active');
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('learningContainer').classList.remove('active');
            document.getElementById('learningContainer').style.display = 'none';
            document.getElementById('flashcard').style.display = 'none';
            document.getElementById('results').classList.remove('show');
            document.getElementById('results').style.display = 'none';
            
            // Clear any active mode cards
            document.querySelectorAll('.mode-card').forEach(card => {
                card.classList.remove('active');
            });
            
            // Reset game state
            currentMode = '';
            currentTopic = '';
            currentQuestion = 0;
            score = 0;
            streak = 0;
            answeredQuestions = [];
            currentQuestions = [];
            
            updateScore();
            document.getElementById('progress').textContent = '0';
            document.getElementById('progressFill').style.width = '0%';
        }

        function goBackToTopics() {
            document.getElementById('topicSelector').style.display = 'block';
            document.getElementById('progressBar').style.display = 'none';
            document.getElementById('questionContainer').classList.remove('active');
            document.getElementById('learningContainer').classList.remove('active');
            document.getElementById('flashcard').style.display = 'none';
            document.getElementById('controls').style.display = 'none';
            
            document.querySelectorAll('.topic-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            currentTopic = '';
            currentQuestion = 0;
            score = 0;
            streak = 0;
            updateScore();
        }

        function updateScore() {
            document.getElementById('score').textContent = score;
            document.getElementById('streak').textContent = streak;
        }

        function updateProgress() {
            // Fixed progress calculation to show proper progression
            const progress = Math.round(((currentQuestion + 1) / currentQuestions.length) * 100);
            document.getElementById('progress').textContent = progress;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function showResults() {
            document.getElementById('questionContainer').classList.remove('active');
            document.getElementById('learningContainer').classList.remove('active');
            document.getElementById('flashcard').style.display = 'none';
            document.getElementById('controls').style.display = 'none';
            document.getElementById('results').classList.add('show');
            
            let resultMessage = '';
            let nextSteps = '';
            
            if (currentMode === 'flashcards') {
                resultMessage = `You reviewed ${currentQuestions.length} flashcards! Great job studying CISA Domain 2 concepts.`;
                nextSteps = " Try the quiz mode to test your knowledge or explore another topic area.";
                document.getElementById('finalScore').textContent = `${currentQuestions.length} Cards Reviewed`;
            } else if (currentMode === 'learn') {
                resultMessage = `You completed ${currentQuestions.length} comprehensive learning modules! You've gained deep insights into CISA Domain 2 concepts.`;
                nextSteps = " Consider testing your knowledge with quiz mode or reviewing key terms with flashcards.";
                document.getElementById('finalScore').textContent = `${currentQuestions.length} Modules Complete`;
            } else {
                const percentage = Math.round((score / (currentQuestions.length * 10)) * 100);
                document.getElementById('finalScore').textContent = `${percentage}%`;
                
                if (percentage >= 90) {
                    resultMessage = 'üåü Outstanding! You have excellent mastery of CISA Domain 2 concepts! You\'re well-prepared for this section of the exam.';
                    nextSteps = " Try another topic area or challenge yourself with scenario mode.";
                } else if (percentage >= 80) {
                    resultMessage = 'üéâ Great job! You have a solid understanding of the material.';
                    nextSteps = " Review the explanations for missed questions and try another topic area to broaden your knowledge.";
                } else if (percentage >= 70) {
                    resultMessage = 'üëç Good work! You\'re on the right track.';
                    nextSteps = " Use the learning modules to strengthen weak areas, then practice with flashcards before retrying.";
                } else {
                    resultMessage = 'üìö Keep studying! This is a challenging certification.';
                    nextSteps = " Start with the learning modules to build your foundation, then practice with flashcards before attempting quizzes.";
                }
            }
            
            document.getElementById('resultMessage').textContent = resultMessage + nextSteps;
        }

        function playAgain() {
            currentQuestion = 0;
            score = 0;
            streak = 0;
            answeredQuestions = [];
            
            document.getElementById('results').classList.remove('show');
            document.getElementById('progressBar').style.display = 'block';
            document.getElementById('controls').style.display = 'flex';
            
            if (currentMode === 'quiz' || currentMode === 'scenario') {
                setupQuiz();
            } else if (currentMode === 'flashcards') {
                setupFlashcards();
            } else if (currentMode === 'learn') {
                setupLearning();
            }
            
            updateScore();
        }

        function goToMainScreen() {
            document.getElementById('gameMode').style.display = 'grid';
            document.getElementById('topicSelector').style.display = 'none';
            document.getElementById('progressBar').style.display = 'none';
            document.getElementById('controls').style.display = 'none';
            
            // Hide all content containers completely
            document.getElementById('questionContainer').classList.remove('active');
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('learningContainer').classList.remove('active');
            document.getElementById('learningContainer').style.display = 'none';
            document.getElementById('flashcard').style.display = 'none';
            document.getElementById('results').classList.remove('show');
            document.getElementById('results').style.display = 'none';
            
            // Clear all active states
            document.querySelectorAll('.mode-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelectorAll('.topic-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Reset complete game state
            currentMode = '';
            currentTopic = '';
            currentQuestion = 0;
            score = 0;
            streak = 0;
            answeredQuestions = [];
            currentQuestions = [];
            
            updateScore();
            document.getElementById('progress').textContent = '0';
            document.getElementById('progressFill').style.width = '0%';
        }

        function chooseAnotherSection() {
            document.getElementById('gameMode').style.display = 'none';
            document.getElementById('topicSelector').style.display = 'block';
            document.getElementById('progressBar').style.display = 'none';
            document.getElementById('questionContainer').classList.remove('active');
            document.getElementById('learningContainer').classList.remove('active');
            document.getElementById('flashcard').style.display = 'none';
            document.getElementById('controls').style.display = 'none';
            document.getElementById('results').classList.remove('show');
            
            document.querySelectorAll('.topic-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            currentTopic = '';
            currentQuestion = 0;
            answeredQuestions = [];
            
            updateScore();
            document.getElementById('progress').textContent = '0';
            document.getElementById('progressFill').style.width = '0%';
        }

        function resetGame() {
            document.getElementById('gameMode').style.display = 'grid';
            document.getElementById('topicSelector').style.display = 'none';
            document.getElementById('progressBar').style.display = 'none';
            document.getElementById('controls').style.display = 'none';
            
            // Hide all content containers completely
            document.getElementById('questionContainer').classList.remove('active');
            document.getElementById('questionContainer').style.display = 'none';
            document.getElementById('learningContainer').classList.remove('active');
            document.getElementById('learningContainer').style.display = 'none';
            document.getElementById('flashcard').style.display = 'none';
            document.getElementById('results').classList.remove('show');
            document.getElementById('results').style.display = 'none';
            
            // Clear all active states
            document.querySelectorAll('.mode-card').forEach(card => {
                card.classList.remove('active');
            });
            document.querySelectorAll('.topic-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Reset complete game state
            currentMode = '';
            currentTopic = '';
            currentQuestion = 0;
            score = 0;
            streak = 0;
            answeredQuestions = [];
            currentQuestions = [];
            
            updateScore();
            document.getElementById('progress').textContent = '0';
            document.getElementById('progressFill').style.width = '0%';
        }

        // Initialize the game when page loads
        document.addEventListener('DOMContentLoaded', initGame);
    </script>
</body>
</html>
