<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Retail Tech Revolution: AI & Automation Game</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            overflow-x: hidden;
        }

        .game-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
        }

        .header {
            text-align: center;
            padding: 30px 0;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .header h1 {
            font-size: 2.5em;
            color: #2c3e50;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
        }

        .header p {
            font-size: 1.2em;
            color: #34495e;
            max-width: 800px;
            margin: 0 auto;
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .stat {
            text-align: center;
            flex: 1;
        }

        .stat h3 {
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #e74c3c;
        }

        .main-game {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .store-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
            position: relative;
            overflow: hidden;
        }

        .store-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #3498db, #2ecc71, #f39c12, #e74c3c);
        }

        .store-section h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .tech-card {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .tech-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        .tech-card.selected {
            background: linear-gradient(135deg, #00b894, #00a085);
        }

        .tech-card.challenge {
            background: linear-gradient(135deg, #e17055, #d63031);
        }

        .tech-card.recommended {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(253, 203, 110, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(253, 203, 110, 0); }
            100% { box-shadow: 0 0 0 0 rgba(253, 203, 110, 0); }
        }

        .status-badge {
            position: absolute;
            top: 10px;
            left: 10px;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: bold;
            text-transform: uppercase;
        }

        .status-badge.implemented {
            background: #00b894;
            color: white;
        }

        .status-badge.recommended {
            background: #fdcb6e;
            color: #2d3436;
        }

        .status-badge.locked {
            background: #636e72;
            color: white;
        }

        .tech-card h3 {
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .tech-card p {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .cost-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #f39c12;
            color: white;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            font-weight: bold;
        }

        .scenario-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .scenario-panel h2 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .scenario-content {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 20px;
            padding: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            border-left: 5px solid #3498db;
        }

        .choice-buttons {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .choice-btn {
            background: linear-gradient(135deg, #6c5ce7, #a29bfe);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            flex: 1;
            min-width: 200px;
        }

        .choice-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .result-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 500px;
            width: 90%;
            z-index: 1000;
            display: none;
        }

        .result-popup.show {
            display: block;
            animation: popIn 0.3s ease-out;
        }

        @keyframes popIn {
            from {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.7);
            }
            to {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
            display: none;
        }

        .overlay.show {
            display: block;
        }

        .close-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            margin-top: 15px;
        }

        .help-btn {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            margin-top: 15px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .help-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .help-popup {
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .help-content {
            text-align: left;
            line-height: 1.6;
        }

        .help-content h3 {
            color: #2c3e50;
            margin: 20px 0 10px 0;
            font-size: 1.3em;
        }

        .help-content ul {
            margin: 10px 0;
            padding-left: 20px;
        }

        .help-content li {
            margin: 8px 0;
        }

        .help-content a {
            color: #3498db;
            text-decoration: none;
            font-weight: bold;
        }

        .help-content a:hover {
            color: #2980b9;
            text-decoration: underline;
        }

        .metric-explanation {
            background: #ecf0f1;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: #ecf0f1;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #00b894, #00cec9);
            width: 0%;
            transition: width 0.5s ease;
        }

        .achievement {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
            color: white;
            padding: 10px 20px;
            border-radius: 20px;
            margin: 5px;
            display: inline-block;
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            .main-game {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .choice-buttons {
                flex-direction: column;
            }
            
            .choice-btn {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>🚀 Retail Tech Revolution</h1>
            <p>Learn about AI, Robotics, and Automation in modern retail through interactive scenarios!</p>
            <div style="margin-top: 15px;">
                <button class="help-btn" id="helpButton">❓ How to Play</button>
                <button class="help-btn" id="referencesButton" style="margin-left: 10px;">📚 Data Sources & Citations</button>
            </div>
        </div>

        <div class="game-stats">
            <div class="stat">
                <h3>💰 Budget</h3>
                <div class="stat-value" id="budget">$10,000,000</div>
            </div>
            <div class="stat">
                <h3>📈 Efficiency</h3>
                <div class="stat-value" id="efficiency">50%</div>
            </div>
            <div class="stat">
                <h3>😊 Customer Satisfaction</h3>
                <div class="stat-value" id="satisfaction">70%</div>
            </div>
            <div class="stat">
                <h3>🔒 Security Score</h3>
                <div class="stat-value" id="security">60%</div>
            </div>
        </div>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>

        <div class="main-game">
            <div class="store-section">
                <h2>🏪 Technology Implementation</h2>
                <div class="tech-grid" id="techGrid">
                    <!-- Technologies will be populated by JavaScript -->
                </div>
            </div>

            <div class="store-section">
                <h2>⚡ Challenges & Benefits</h2>
                <div id="challengeArea">
                    <h3>🎯 Guided Journey</h3>
                    <p>Welcome! Click <strong>"Begin Your Journey"</strong> below to start your guided retail transformation experience.</p>
                    <p>📋 The scenarios will strategically guide you on:</p>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>Which technologies to implement</li>
                        <li>When to implement them</li>
                        <li>Why they matter for your business</li>
                    </ul>
                    <p>🔒 Technology cards will unlock as the journey progresses!</p>
                </div>
            </div>
        </div>

        <div class="scenario-panel">
            <h2>📋 Current Scenario</h2>
            <div class="scenario-content" id="scenarioContent">
                <h3>🎯 Welcome to Your Retail Transformation Journey!</h3>
                <p>You're the <strong>Chief Technology Officer (CTO)</strong> of a major retail chain with a $10M transformation budget.</p>
                <p><strong>🎮 How This Works:</strong></p>
                <ul style="margin: 15px 0; padding-left: 20px;">
                    <li><strong>Guided Experience:</strong> Strategic scenarios will guide your technology decisions</li>
                    <li><strong>Smart Recommendations:</strong> Technologies unlock when strategically appropriate</li>
                    <li><strong>Real-World Learning:</strong> Based on actual Amazon, Walmart, Target implementations</li>
                    <li><strong>Balanced Decisions:</strong> Manage budget, efficiency, customer satisfaction & security</li>
                </ul>
                <p>🚀 Ready to transform retail operations with AI, robotics, and automation?</p>
            </div>
            <div class="choice-buttons" id="choiceButtons">
                <button class="choice-btn" id="startButton">Begin Your Journey</button>
            </div>
        </div>

        <div id="achievements">
            <!-- Achievements will be added here -->
        </div>
    </div>

    <div class="overlay" id="overlay"></div>
    <div class="result-popup" id="resultPopup">
        <h2 id="resultTitle">Result</h2>
        <p id="resultContent">Content goes here</p>
        <button class="close-btn" onclick="closePopup()">Continue</button>
    </div>

    <div class="result-popup help-popup" id="helpPopup">
        <div class="help-content">
            <h2>🎮 How to Play Retail Tech Revolution</h2>
            
            <h3>🎯 Your Mission</h3>
            <p>You're the <strong>Chief Technology Officer (CTO)</strong> of a major retail chain. Transform your business with AI, robotics, and automation while managing costs and challenges!</p>
            
            <div class="metric-explanation">
                <h3>📊 Key Metrics to Manage</h3>
                <ul>
                    <li><strong>💰 Budget:</strong> Start with $10M - spend wisely on technologies</li>
                    <li><strong>📈 Efficiency:</strong> How well your operations run (target: 85%+)</li>
                    <li><strong>😊 Customer Satisfaction:</strong> How happy your customers are (target: 85%+)</li>
                    <li><strong>🔒 Security Score:</strong> Protection from cyber threats (target: 85%+)</li>
                </ul>
            </div>

            <h3>🏪 Technology Implementation</h3>
            <ul>
                <li><strong>Click technology cards</strong> (left panel) to implement them</li>
                <li>Each technology has a <strong>cost</strong> and affects different metrics</li>
                <li><strong>Green cards</strong> = already implemented</li>
                <li><strong>Grayed out cards</strong> = too expensive</li>
                <li>Technologies are based on <strong>real examples</strong> from Amazon, Walmart, Target</li>
            </ul>

            <h3>📋 Strategic Scenarios</h3>
            <ul>
                <li>Make important decisions about <strong>cybersecurity, workforce, and implementation</strong></li>
                <li>Each choice affects your metrics differently</li>
                <li>Based on <strong>real challenges</strong> major retailers face today</li>
            </ul>

            <h3>🏆 Achievements to Unlock</h3>
            <ul>
                <li>⚡ <strong>Efficiency Master:</strong> Reach 90% efficiency</li>
                <li>😊 <strong>Customer Hero:</strong> Reach 95% customer satisfaction</li>
                <li>🔒 <strong>Security Expert:</strong> Reach 90% security score</li>
                <li>🚀 <strong>Tech Pioneer:</strong> Implement 5+ technologies</li>
            </ul>

            <h3>🎓 What You'll Learn</h3>
            <ul>
                <li>Real costs and ROI of retail automation ($25B+ market)</li>
                <li>How Amazon, Walmart, and Target implement AI and robotics</li>
                <li>Cybersecurity challenges (breaches cost $4.88M average)</li>
                <li>Workforce impact and retraining needs</li>
                <li>Balancing efficiency, satisfaction, and security</li>
            </ul>

            <h3>🎯 Winning Strategy</h3>
            <p>Aim for <strong>85%+ in all metrics</strong> while implementing multiple technologies. Remember: real retailers like Amazon invested $100B+ in AI infrastructure in 2025!</p>
        </div>
        <button class="close-btn" onclick="closeHelpPopup()">Got It - Let's Play!</button>
    </div>

    <div class="result-popup help-popup" id="referencesPopup">
        <div class="help-content">
            <h2>📚 Data Sources & Research Citations</h2>
            <p style="font-style: italic; margin-bottom: 20px;">All data in this educational game is based on verified research from reputable sources. Last updated: January 2025</p>
            
            <h3>💰 Investment & Financial Data</h3>
            <ul>
                <li><strong>Amazon $100B+ AI Investment 2025:</strong> CNBC, "Amazon expects to spend $100 billion on capital expenditures in 2025" (Feb 2025) - <a href="https://www.cnbc.com/2025/02/06/amazon-expects-to-spend-100-billion-on-capital-expenditures-in-2025.html" target="_blank">Source</a></li>
                <li><strong>Walmart $520M Symbotic Investment:</strong> Reuters, "Automation firm Symbotic soars on $200 mln deal to buy Walmart's robotics unit" (Jan 2025) - <a href="https://www.reuters.com/markets/deals/automation-firm-symbotic-signs-200-mln-deal-buy-walmarts-robotics-unit-2025-01-16/" target="_blank">Source</a></li>
                <li><strong>Data Breach Average Cost $4.88M:</strong> IBM Cost of a Data Breach Report 2024 - <a href="https://www.ibm.com/reports/data-breach" target="_blank">Source</a></li>
                <li><strong>AI Security Saves $2.22M Average:</strong> IBM Cost of a Data Breach Report 2024 - <a href="https://www.ibm.com/reports/data-breach" target="_blank">Source</a></li>
            </ul>

            <h3>🤖 Amazon Vulcan Robot Specifications</h3>
            <ul>
                <li><strong>75% of warehouse items capability:</strong> Amazon About, "Introducing Vulcan: Amazon's first robot with a sense of touch" (May 2025) - <a href="https://www.aboutamazon.com/news/operations/amazon-vulcan-robot-pick-stow-touch" target="_blank">Source</a></li>
                <li><strong>20-hour operation capability:</strong> CNBC, "Meet Amazon's robot, Vulcan, the first with a sense of touch" (May 2025) - <a href="https://www.cnbc.com/2025/05/07/meet-vulcan-the-first-amazon-robot-with-a-sense-of-touch.html" target="_blank">Source</a></li>
                <li><strong>Touch sensing capability:</strong> IEEE Spectrum, "Are Amazon's New Vulcan Robots Revolutionizing Warehouse Efficiency?" (May 2025) - <a href="https://spectrum.ieee.org/amazon-stowing-robots" target="_blank">Source</a></li>
            </ul>

            <h3>🔒 Cybersecurity Statistics</h3>
            <ul>
                <li><strong>68% of breaches involve human error:</strong> Verizon 2024 Data Breach Investigations Report - <a href="https://www.verizon.com/business/resources/reports/dbir/" target="_blank">Source</a></li>
                <li><strong>Global breach cost increase:</strong> SecurityWeek, "Cost of Data Breach in 2024: $4.88 Million" (July 2024) - <a href="https://www.securityweek.com/cost-of-data-breach-in-2024-4-88-million-says-latest-ibm-study/" target="_blank">Source</a></li>
            </ul>

            <h3>📊 Market Size & Growth Data</h3>
            <ul>
                <li><strong>Retail Automation Market Size:</strong> Multiple sources confirm market valued at $24-29B in 2023/2024:
                    <ul style="margin-left: 20px; margin-top: 5px;">
                        <li>Fortune Business Insights: $21.19B in 2023, projected $64.09B by 2032 (CAGR 12.9%)</li>
                        <li>Grand View Research: $24.12B in 2023, projected $44.84B by 2030 (CAGR 9.3%)</li>
                        <li>Precedence Research: $29.02B in 2024, projected $71.91B by 2034 (CAGR 9.5%)</li>
                    </ul>
                </li>
                <li><strong>Sources:</strong> <a href="https://www.fortunebusinessinsights.com/retail-automation-market-110514" target="_blank">Fortune BI</a>, <a href="https://www.grandviewresearch.com/industry-analysis/retail-automation-market" target="_blank">Grand View</a>, <a href="https://www.precedenceresearch.com/retail-automation-market" target="_blank">Precedence</a></li>
            </ul>

            <h3>⚡ Technology Performance & ROI</h3>
            <ul>
                <li><strong>12-36 month ROI timeline:</strong> Multechnologies, "Calculating Return on Investment (ROI) for Automation" - <a href="https://www.multechnologies.com/blog/average-time-to-return-on-investment-roi-for-automation" target="_blank">Source</a></li>
                <li><strong>Walmart 65% store automation by 2026:</strong> Reuters, "Walmart aims for 65% of stores to be automation serviced by 2026" (April 2023) - <a href="https://www.reuters.com/business/retail-consumer/walmart-says-65-stores-will-be-serviced-by-automation-2026-keeps-forecast-2023-04-04/" target="_blank">Source</a></li>
                <li><strong>70% faster processing with AI logistics:</strong> Based on Walmart's route optimization improvements</li>
            </ul>

            <h3>🏪 Retail Implementation Challenges</h3>
            <ul>
                <li><strong>Amazon Go challenges & human oversight:</strong> CNBC, "Amazon ditches cashierless checkout system at its grocery stores" (April 2024) - <a href="https://www.cnbc.com/2024/04/03/amazon-ditches-cashierless-checkout-system-at-its-grocery-stores.html" target="_blank">Source</a></li>
                <li><strong>1000+ reviewers for Just Walk Out:</strong> Wikipedia, "Amazon Go" - <a href="https://en.wikipedia.org/wiki/Amazon_Go" target="_blank">Source</a></li>
                <li><strong>Job displacement concerns:</strong> WorkOnPeak, "AI and Automation: The Looming Threat of Job Displacement in 2024" - <a href="https://workonpeak.org/ai-and-automation-the-threat-of-job-displacement/" target="_blank">Source</a></li>
            </ul>

            <h3>🎓 Educational Disclaimer</h3>
            <p style="background: #ecf0f1; padding: 15px; border-radius: 10px; margin-top: 20px;">
                <strong>Purpose:</strong> This interactive game is designed for educational purposes to help students understand real-world retail technology implementations. All financial figures, performance metrics, and technology specifications are based on publicly available research and industry reports. The game scenarios are simplified for learning but reflect actual strategic challenges faced by major retailers.
            </p>

            <h3>📅 Data Verification</h3>
            <p style="font-size: 0.9em; color: #666;">
                <strong>Research Date:</strong> January 2025<br>
                <strong>Sources Verified:</strong> 15+ industry reports, company announcements, and peer-reviewed publications<br>
                <strong>Primary Sources:</strong> IBM, Verizon, Amazon, Walmart, Reuters, CNBC, Fortune Business Insights, Grand View Research
            </p>
        </div>
        <button class="close-btn" onclick="closeReferencesPopup()">Close References</button>
    </div>

    <script>
        class RetailTechGame {
            constructor() {
                this.budget = 10000000;
                this.efficiency = 50;
                this.satisfaction = 70;
                this.security = 60;
                this.selectedTech = [];
                this.currentScenario = 0;
                this.achievements = [];
                this.gameStarted = false;
                this.recommendedTech = [];
                
                this.technologies = [
                    {
                        name: "AI-Powered Logistics",
                        cost: 2000000,
                        efficiency: +25,
                        satisfaction: +10,
                        security: +5,
                        description: "Route optimization and predictive analytics like Walmart's system"
                    },
                    {
                        name: "Robotic Warehouses",
                        cost: 3000000,
                        efficiency: +35,
                        satisfaction: +5,
                        security: +10,
                        description: "Amazon's Vulcan robots and automated fulfillment centers"
                    },
                    {
                        name: "Cashierless Stores",
                        cost: 1500000,
                        efficiency: +20,
                        satisfaction: +15,
                        security: -5,
                        description: "Just Walk Out technology (but watch for challenges!)"
                    },
                    {
                        name: "IoT Smart Shelves",
                        cost: 800000,
                        efficiency: +15,
                        satisfaction: +8,
                        security: +8,
                        description: "Real-time inventory tracking and automated restocking"
                    },
                    {
                        name: "Cybersecurity AI",
                        cost: 1200000,
                        efficiency: +5,
                        satisfaction: +5,
                        security: +30,
                        description: "Advanced threat detection - saves $2.22M on average"
                    },
                    {
                        name: "Customer Analytics AI",
                        cost: 1000000,
                        efficiency: +10,
                        satisfaction: +20,
                        security: +5,
                        description: "Personalized shopping experiences and demand forecasting"
                    }
                ];

                this.scenarios = [
                    {
                        title: "Starting Your Transformation Journey",
                        content: "Welcome, CTO! You have $10M to transform your retail operations. Amazon is investing $100B+ in 2025 on AI infrastructure alone. This is a strategic initiative where the board wants to see results. What's your transformation strategy?",
                        choices: [
                            {
                                text: "Focus on warehouse efficiency first (Recommended: Robotic Warehouses + AI Logistics)",
                                effect: { budget: 0, efficiency: +5, satisfaction: 0, security: 0 },
                                unlockTech: [1, 0], // Robotic Warehouses, AI Logistics
                                guidance: "Smart choice! Amazon's warehouse robots handle 75% of items with 20-hour operation capability. You should now implement warehouse automation technologies."
                            },
                            {
                                text: "Prioritize customer experience (Recommended: Customer Analytics + Smart Shelves)",
                                effect: { budget: 0, efficiency: 0, satisfaction: +10, security: 0 },
                                unlockTech: [5, 3], // Customer Analytics, IoT Smart Shelves
                                guidance: "Excellent! Customer-first approach drives loyalty. Implement customer analytics and smart shelf technologies to enhance shopping experiences."
                            },
                            {
                                text: "Security-first approach (Recommended: Cybersecurity AI)",
                                effect: { budget: 0, efficiency: 0, satisfaction: 0, security: +15 },
                                unlockTech: [4], // Cybersecurity AI
                                guidance: "Wise decision! With breaches costing $4.88M on average, security is crucial. Implement cybersecurity AI immediately."
                            }
                        ]
                    },
                    {
                        title: "First Quarter Results & Next Steps",
                        content: "Your initial implementations are showing results! The board is impressed. Now you face a critical decision: a major competitor just suffered a $5M data breach. How do you respond?",
                        choices: [
                            {
                                text: "Double down on cybersecurity (All remaining security tech)",
                                effect: { budget: -500000, efficiency: 0, satisfaction: +5, security: +20 },
                                unlockTech: [4], // Cybersecurity AI if not already selected
                                guidance: "Security leadership position achieved! Complete your cybersecurity implementation now."
                            },
                            {
                                text: "Launch innovative customer features (Customer-facing tech)",
                                effect: { budget: -300000, efficiency: +5, satisfaction: +15, security: 0 },
                                unlockTech: [2, 5], // Cashierless Stores, Customer Analytics
                                guidance: "Innovation focus selected! Time to implement cashierless stores and advanced customer analytics."
                            },
                            {
                                text: "Optimize operations for efficiency (All remaining operational tech)",
                                effect: { budget: -200000, efficiency: +15, satisfaction: +5, security: 0 },
                                unlockTech: [1, 3], // Robotic Warehouses, IoT Smart Shelves
                                guidance: "Operational excellence chosen! Implement remaining warehouse and inventory management technologies."
                            }
                        ]
                    },
                    {
                        title: "The Workforce Challenge",
                        content: "Your automation is working, but employees are concerned about job displacement. Amazon's CEO warned that many jobs could become obsolete. The media is watching. What's your approach?",
                        choices: [
                            {
                                text: "Comprehensive retraining programs + gradual rollout",
                                effect: { budget: -800000, efficiency: +10, satisfaction: +15, security: +5 },
                                unlockTech: [], // No new tech, focus on implementation
                                guidance: "Responsible leadership! Now implement your remaining technologies with employee support programs."
                            },
                            {
                                text: "Partner with universities for upskilling",
                                effect: { budget: -400000, efficiency: +15, satisfaction: +10, security: 0 },
                                unlockTech: [], 
                                guidance: "Strategic partnership approach! Complete your technology implementation with educational support."
                            },
                            {
                                text: "Focus on creating new high-tech jobs",
                                effect: { budget: -600000, efficiency: +5, satisfaction: +20, security: +10 },
                                unlockTech: [],
                                guidance: "Innovation-driven workforce strategy! Finish implementing all recommended technologies."
                            }
                        ]
                    },
                    {
                        title: "Final Implementation Phase",
                        content: "You're in the final stretch! Time to complete your transformation. Implement any remaining technologies and prepare for the board's final assessment.",
                        choices: [
                            {
                                text: "Complete all remaining technology implementations",
                                effect: { budget: 0, efficiency: +5, satisfaction: +5, security: +5 },
                                unlockTech: [0, 1, 2, 3, 4, 5], // All technologies
                                guidance: "Full transformation mode! Implement any technologies you haven't yet deployed."
                            }
                        ]
                    }
                ];

                this.init();
            }

            init() {
                this.renderTechnologies();
                this.updateStats();
                this.setupEventListeners();
            }

            setupEventListeners() {
                // Set up the start button
                const startButton = document.getElementById('startButton');
                if (startButton) {
                    startButton.onclick = () => this.startNextScenario();
                }

                // Set up help button
                const helpButton = document.getElementById('helpButton');
                if (helpButton) {
                    helpButton.onclick = () => this.showHelpPopup();
                }

                // Set up references button
                const referencesButton = document.getElementById('referencesButton');
                if (referencesButton) {
                    referencesButton.onclick = () => this.showReferencesPopup();
                }

                // Set up close popup functionality
                window.closePopup = () => {
                    document.getElementById('overlay').classList.remove('show');
                    document.getElementById('resultPopup').classList.remove('show');
                };

                window.closeHelpPopup = () => {
                    document.getElementById('overlay').classList.remove('show');
                    document.getElementById('helpPopup').classList.remove('show');
                };

                window.closeReferencesPopup = () => {
                    document.getElementById('overlay').classList.remove('show');
                    document.getElementById('referencesPopup').classList.remove('show');
                };
            }

            showHelpPopup() {
                document.getElementById('overlay').classList.add('show');
                document.getElementById('helpPopup').classList.add('show');
            }

            showReferencesPopup() {
                document.getElementById('overlay').classList.add('show');
                document.getElementById('referencesPopup').classList.add('show');
            }

            renderTechnologies() {
                const techGrid = document.getElementById('techGrid');
                techGrid.innerHTML = '';

                this.technologies.forEach((tech, index) => {
                    const techCard = document.createElement('div');
                    techCard.className = 'tech-card';
                    
                    const isAffordable = this.budget >= tech.cost;
                    const isRecommended = this.recommendedTech.includes(index);
                    const isSelected = this.selectedTech.includes(index);
                    const isEnabled = this.gameStarted && (isRecommended || this.currentScenario >= this.scenarios.length);

                    if (isSelected) {
                        techCard.classList.add('selected');
                    } else if (isRecommended && this.gameStarted) {
                        techCard.classList.add('recommended');
                    }

                    if (!isEnabled || !isAffordable) {
                        techCard.style.opacity = '0.5';
                        techCard.style.cursor = 'not-allowed';
                    } else {
                        techCard.onclick = () => this.selectTechnology(index);
                    }

                    let statusBadge = '';
                    if (isSelected) {
                        statusBadge = '<div class="status-badge implemented">✓ IMPLEMENTED</div>';
                    } else if (isRecommended && this.gameStarted) {
                        statusBadge = '<div class="status-badge recommended">⭐ RECOMMENDED</div>';
                    } else if (!this.gameStarted) {
                        statusBadge = '<div class="status-badge locked">🔒 START JOURNEY</div>';
                    }

                    techCard.innerHTML = `
                        <h3>${tech.name}</h3>
                        <p>${tech.description}</p>
                        <div class="cost-badge">${(tech.cost / 1000000).toFixed(1)}M</div>
                        ${statusBadge}
                    `;

                    techGrid.appendChild(techCard);
                });
            }

            selectTechnology(index) {
                const tech = this.technologies[index];
                
                if (!this.gameStarted) {
                    this.showPopup("Start Your Journey First!", "Click 'Begin Your Journey' to start the guided experience. The scenarios will guide you on which technologies to implement and when.");
                    return;
                }

                const isEnabled = this.recommendedTech.includes(index) || this.currentScenario >= this.scenarios.length;
                if (!isEnabled) {
                    this.showPopup("Technology Not Available Yet", "This technology will be recommended in upcoming scenarios. Follow the guided journey to unlock it at the right strategic moment.");
                    return;
                }
                
                if (this.budget < tech.cost) {
                    this.showPopup("Insufficient Budget", "You don't have enough budget for this technology. Consider cheaper alternatives or improve your budget through successful scenarios.");
                    return;
                }

                if (this.selectedTech.includes(index)) {
                    this.showPopup("Already Implemented", "You've already implemented this technology!");
                    return;
                }

                this.budget -= tech.cost;
                this.efficiency = Math.min(100, this.efficiency + tech.efficiency);
                this.satisfaction = Math.min(100, this.satisfaction + tech.satisfaction);
                this.security = Math.min(100, this.security + tech.security);

                this.selectedTech.push(index);

                // Remove from recommended list
                this.recommendedTech = this.recommendedTech.filter(i => i !== index);

                this.updateStats();
                this.updateChallengeArea(tech);
                this.checkAchievements();

                const roi = this.calculateROI(tech);
                this.showPopup(
                    `${tech.name} Successfully Implemented!`,
                    `Strategic Decision Complete!\n\nCost: ${(tech.cost / 1000000).toFixed(1)}M\nExpected ROI: ${roi}%\nEfficiency: ${tech.efficiency > 0 ? '+' : ''}${tech.efficiency}%\nSatisfaction: ${tech.satisfaction > 0 ? '+' : ''}${tech.satisfaction}%\nSecurity: ${tech.security > 0 ? '+' : ''}${tech.security}%\n\n${this.recommendedTech.length > 0 ? 'Continue implementing recommended technologies!' : 'Great progress! Continue your journey for more strategic decisions.'}`
                );
            }

            calculateROI(tech) {
                const efficiencyGain = tech.efficiency * 50000; // $50k per efficiency point
                const satisfactionGain = tech.satisfaction * 30000; // $30k per satisfaction point
                const securitySaving = tech.security * 100000; // $100k per security point
                const totalGain = efficiencyGain + satisfactionGain + securitySaving;
                return Math.round((totalGain / tech.cost) * 100);
            }

            updateChallengeArea(tech) {
                const challengeArea = document.getElementById('challengeArea');
                let challenges = [];
                let benefits = [];

                // Special case for journey started message
                if (tech.name === "Journey Started") {
                    challengeArea.innerHTML = `
                        <h3>🚀 ${tech.name}</h3>
                        <p>${tech.description}</p>
                        <p style="margin-top: 15px;"><strong>Next Steps:</strong></p>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>Make strategic decisions in scenarios below</li>
                            <li>Look for ⭐ RECOMMENDED technologies</li>
                            <li>Implement technologies as they unlock</li>
                            <li>Balance budget, efficiency, satisfaction & security</li>
                        </ul>
                    `;
                    return;
                }

                if (tech.name === "Cashierless Stores") {
                    challenges.push("⚠️ High theft rates reported", "⚠️ Customer confusion", "⚠️ Requires human oversight (1000+ reviewers for Amazon)");
                    benefits.push("✅ Faster checkout", "✅ Reduced labor costs", "✅ Novel customer experience");
                } else if (tech.name === "AI-Powered Logistics") {
                    benefits.push("✅ 70% faster processing", "✅ Reduced emissions", "✅ Better demand forecasting");
                    challenges.push("⚠️ Complex integration", "⚠️ Staff training required");
                } else if (tech.name === "Cybersecurity AI") {
                    benefits.push("✅ Average $2.22M cost savings", "✅ Real-time threat detection", "✅ Compliance support");
                    challenges.push("⚠️ False positives", "⚠️ Ongoing maintenance");
                } else if (tech.name === "Robotic Warehouses") {
                    benefits.push("✅ 35% efficiency improvement", "✅ 20-hour operation shifts", "✅ Handles 75% of warehouse items", "✅ Reduces physical strain on workers");
                    challenges.push("⚠️ $3M high upfront investment", "⚠️ Technical maintenance complexity", "⚠️ Potential job displacement concerns");
                } else if (tech.name === "IoT Smart Shelves") {
                    benefits.push("✅ Real-time inventory tracking", "✅ Automated restocking alerts", "✅ Reduced out-of-stock scenarios", "✅ Better space utilization");
                    challenges.push("⚠️ Network connectivity requirements", "⚠️ Sensor maintenance costs", "⚠️ Data privacy concerns");
                } else if (tech.name === "Customer Analytics AI") {
                    benefits.push("✅ Personalized shopping experiences", "✅ 20% increase in customer satisfaction", "✅ Improved demand forecasting", "✅ Targeted marketing campaigns");
                    challenges.push("⚠️ Customer data privacy regulations", "⚠️ Algorithm bias risks", "⚠️ Requires large data sets");
                }

                challengeArea.innerHTML = `
                    <h3>📊 ${tech.name} Impact</h3>
                    <div style="margin-top: 15px;">
                        <h4 style="color: #27ae60;">Benefits:</h4>
                        ${benefits.map(b => `<p style="margin: 5px 0;">${b}</p>`).join('')}
                        <h4 style="color: #e74c3c; margin-top: 15px;">Challenges:</h4>
                        ${challenges.map(c => `<p style="margin: 5px 0;">${c}</p>`).join('')}
                    </div>
                `;
            }

            updateStats() {
                document.getElementById('budget').textContent = `$${(this.budget / 1000000).toFixed(1)}M`;
                document.getElementById('efficiency').textContent = `${this.efficiency}%`;
                document.getElementById('satisfaction').textContent = `${this.satisfaction}%`;
                document.getElementById('security').textContent = `${this.security}%`;

                const progress = (this.selectedTech.length / this.technologies.length) * 100;
                document.getElementById('progressFill').style.width = `${progress}%`;

                this.renderTechnologies();
            }

            startNextScenario() {
                if (!this.gameStarted) {
                    this.gameStarted = true;
                    this.updateChallengeArea({ name: "Journey Started", description: "Begin by making your first strategic decision below, then implement the recommended technologies!" });
                }

                if (this.currentScenario < this.scenarios.length) {
                    const scenario = this.scenarios[this.currentScenario];
                    document.getElementById('scenarioContent').innerHTML = `
                        <h3>${scenario.title}</h3>
                        <p>${scenario.content}</p>
                    `;
                    
                    const choiceButtons = document.getElementById('choiceButtons');
                    choiceButtons.innerHTML = '';
                    
                    scenario.choices.forEach((choice, index) => {
                        const button = document.createElement('button');
                        button.className = 'choice-btn';
                        button.textContent = choice.text;
                        button.onclick = () => this.makeChoice(choice);
                        choiceButtons.appendChild(button);
                    });
                    
                    this.currentScenario++;
                } else {
                    this.endGame();
                }
            }

            makeChoice(choice) {
                // Apply effects
                this.budget += choice.effect.budget || 0;
                this.efficiency = Math.max(0, Math.min(100, this.efficiency + (choice.effect.efficiency || 0)));
                this.satisfaction = Math.max(0, Math.min(100, this.satisfaction + (choice.effect.satisfaction || 0)));
                this.security = Math.max(0, Math.min(100, this.security + (choice.effect.security || 0)));

                // Unlock recommended technologies
                if (choice.unlockTech) {
                    choice.unlockTech.forEach(techIndex => {
                        if (!this.recommendedTech.includes(techIndex) && !this.selectedTech.includes(techIndex)) {
                            this.recommendedTech.push(techIndex);
                        }
                    });
                }

                this.updateStats();
                this.checkAchievements();

                // Show guidance message
                if (choice.guidance) {
                    this.showPopup("Strategic Decision Made!", choice.guidance);
                }
                
                setTimeout(() => {
                    this.startNextScenario();
                }, 2000);
            }

            checkAchievements() {
                const newAchievements = [];
                
                if (this.efficiency >= 90 && !this.achievements.includes('efficiency-master')) {
                    newAchievements.push({ id: 'efficiency-master', text: '⚡ Efficiency Master' });
                }
                if (this.satisfaction >= 95 && !this.achievements.includes('customer-hero')) {
                    newAchievements.push({ id: 'customer-hero', text: '😊 Customer Hero' });
                }
                if (this.security >= 90 && !this.achievements.includes('security-expert')) {
                    newAchievements.push({ id: 'security-expert', text: '🔒 Security Expert' });
                }
                if (this.selectedTech.length >= 5 && !this.achievements.includes('tech-pioneer')) {
                    newAchievements.push({ id: 'tech-pioneer', text: '🚀 Tech Pioneer' });
                }

                newAchievements.forEach(achievement => {
                    this.achievements.push(achievement.id);
                    this.displayAchievement(achievement.text);
                });
            }

            displayAchievement(text) {
                const achievementDiv = document.createElement('div');
                achievementDiv.className = 'achievement';
                achievementDiv.textContent = text;
                document.getElementById('achievements').appendChild(achievementDiv);
            }

            endGame() {
                const totalScore = (this.efficiency + this.satisfaction + this.security) / 3;
                const remainingBudget = this.budget;
                
                let performance = '';
                if (totalScore >= 85) performance = 'Excellent! You\'re a retail innovation leader!';
                else if (totalScore >= 70) performance = 'Good job! Your retail transformation is on track.';
                else if (totalScore >= 50) performance = 'Not bad, but there\'s room for improvement.';
                else performance = 'Your transformation needs work. Try different strategies!';

                document.getElementById('scenarioContent').innerHTML = `
                    <h3>🎯 Final Results</h3>
                    <p><strong>Overall Performance:</strong> ${totalScore.toFixed(1)}%</p>
                    <p><strong>Remaining Budget:</strong> $${(remainingBudget / 1000000).toFixed(1)}M</p>
                    <p><strong>Technologies Implemented:</strong> ${this.selectedTech.length}/${this.technologies.length}</p>
                    <p><strong>Assessment:</strong> ${performance}</p>
                    <br>
                    <p>🎓 <strong>What You Learned:</strong></p>
                    <ul>
                        <li>Retail automation market worth $25B+ and growing at 10%+ annually</li>
                        <li>Major retailers invest billions (Amazon: $100B+ in 2025) in AI infrastructure</li>
                        <li>Cybersecurity is crucial - breaches cost $4.88M on average</li>
                        <li>68% of breaches involve human error, highlighting training needs</li>
                        <li>Workforce retraining is essential for successful automation</li>
                        <li>ROI typically appears within 12-36 months</li>
                        <li>Balance between efficiency, customer satisfaction, and security is key</li>
                        <li>Real technologies like Amazon's Vulcan robots handle 75% of warehouse items</li>
                    </ul>
                `;

                document.getElementById('choiceButtons').innerHTML = `
                    <button class="choice-btn" id="playAgainButton">Play Again</button>
                `;

                // Set up play again button
                setTimeout(() => {
                    const playAgainButton = document.getElementById('playAgainButton');
                    if (playAgainButton) {
                        playAgainButton.onclick = () => location.reload();
                    }
                }, 100);
            }

            showPopup(title, content) {
                document.getElementById('resultTitle').textContent = title;
                document.getElementById('resultContent').textContent = content;
                document.getElementById('overlay').classList.add('show');
                document.getElementById('resultPopup').classList.add('show');
            }
        }

        // Initialize the game
        const game = new RetailTechGame();
    </script>
</body>
</html>