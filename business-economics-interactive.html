<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Interactive learning module covering inflation, consumer price index, supply and demand, and gross domestic product for Introduction to Business">
    <title>Economic Fundamentals: Interactive Learning Module</title>
    <style>
        /* CSS Custom Properties - Web Safe Colors with High Contrast */
        :root {
            --primary-color: #003366;
            --primary-dark: #002244;
            --secondary-color: #006633;
            --accent-color: #CC6600;
            --warning-color: #990000;
            --success-color: #006600;
            --background-main: #FFFFFF;
            --background-alt: #F5F5F5;
            --background-card: #FAFAFA;
            --text-primary: #1A1A1A;
            --text-secondary: #4D4D4D;
            --text-light: #FFFFFF;
            --border-color: #CCCCCC;
            --border-dark: #999999;
            --shadow-color: rgba(0, 0, 0, 0.15);
            --focus-color: #FF6600;
            --link-color: #0066CC;
            --link-hover: #004499;
            --tooltip-bg: #333333;
            --highlight-bg: #FFFFCC;
            --chart-blue: #336699;
            --chart-green: #339966;
            --chart-orange: #CC6633;
            --chart-red: #CC3333;
        }

        /* Reset and Base Styles */
        *, *::before, *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: Georgia, "Times New Roman", Times, serif;
            line-height: 1.7;
            color: var(--text-primary);
            background-color: var(--background-main);
            min-height: 100vh;
        }

        /* Skip Link for Accessibility */
        .skip-link {
            position: absolute;
            top: -50px;
            left: 0;
            background: var(--primary-color);
            color: var(--text-light);
            padding: 12px 24px;
            z-index: 1000;
            font-weight: bold;
            text-decoration: none;
            border-radius: 0 0 4px 0;
        }

        .skip-link:focus {
            top: 0;
            outline: 3px solid var(--focus-color);
            outline-offset: 2px;
        }

        /* Focus Styles */
        *:focus {
            outline: 3px solid var(--focus-color);
            outline-offset: 2px;
        }

        *:focus:not(:focus-visible) {
            outline: none;
        }

        *:focus-visible {
            outline: 3px solid var(--focus-color);
            outline-offset: 2px;
        }

        /* Header */
        header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: var(--text-light);
            padding: 2rem 1.5rem;
            text-align: center;
            border-bottom: 5px solid var(--accent-color);
        }

        header h1 {
            font-size: clamp(1.75rem, 4vw, 2.5rem);
            font-weight: bold;
            margin-bottom: 0.5rem;
            letter-spacing: 0.02em;
        }

        header p {
            font-size: 1.1rem;
            opacity: 0.95;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Navigation */
        nav {
            background-color: var(--background-alt);
            border-bottom: 2px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 0.5rem 1rem;
        }

        nav ul {
            list-style: none;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0.5rem;
            max-width: 1200px;
            margin: 0 auto;
        }

        nav a {
            display: block;
            padding: 0.75rem 1.25rem;
            color: var(--primary-color);
            text-decoration: none;
            font-weight: 600;
            border-radius: 4px;
            border: 2px solid transparent;
            transition: all 0.2s ease;
            font-size: 0.95rem;
        }

        nav a:hover,
        nav a:focus {
            background-color: var(--primary-color);
            color: var(--text-light);
        }

        nav a[aria-current="true"] {
            background-color: var(--primary-color);
            color: var(--text-light);
        }

        /* Main Content */
        main {
            max-width: 1100px;
            margin: 0 auto;
            padding: 2rem 1.5rem;
        }

        /* Sections */
        section {
            margin-bottom: 3rem;
            padding: 2rem;
            background-color: var(--background-card);
            border-radius: 8px;
            border: 1px solid var(--border-color);
            box-shadow: 0 2px 8px var(--shadow-color);
        }

        section h2 {
            color: var(--primary-color);
            font-size: 1.75rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.75rem;
            border-bottom: 3px solid var(--accent-color);
            display: flex;
            align-items: center;
            gap: 0.75rem;
        }

        section h2 .icon {
            font-size: 1.5rem;
        }

        h3 {
            color: var(--primary-dark);
            font-size: 1.35rem;
            margin: 1.75rem 0 1rem 0;
        }

        h4 {
            color: var(--secondary-color);
            font-size: 1.15rem;
            margin: 1.25rem 0 0.75rem 0;
        }

        p {
            margin-bottom: 1rem;
        }

        /* Key Term Tooltips */
        .key-term {
            position: relative;
            color: var(--link-color);
            font-weight: 600;
            border-bottom: 2px dotted var(--link-color);
            cursor: help;
            white-space: nowrap;
            display: inline;
        }

        .key-term:hover,
        .key-term:focus {
            background-color: var(--highlight-bg);
        }

        .tooltip {
            position: fixed;
            background-color: var(--tooltip-bg);
            color: var(--text-light);
            padding: 0.75rem 1rem;
            border-radius: 6px;
            font-size: 0.9rem;
            font-weight: normal;
            line-height: 1.5;
            width: max-content;
            max-width: min(300px, 90vw);
            white-space: normal;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.2s, visibility 0.2s;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            pointer-events: none;
        }

        .tooltip::after {
            content: '';
            position: absolute;
            border: 8px solid transparent;
        }

        /* Arrow pointing down (tooltip above term) */
        .tooltip.position-above::after {
            top: 100%;
            left: var(--arrow-left, 50%);
            transform: translateX(-50%);
            border-top-color: var(--tooltip-bg);
        }

        /* Arrow pointing up (tooltip below term) */
        .tooltip.position-below::after {
            bottom: 100%;
            left: var(--arrow-left, 50%);
            transform: translateX(-50%);
            border-bottom-color: var(--tooltip-bg);
        }

        .key-term:hover .tooltip,
        .key-term:focus .tooltip,
        .tooltip.visible {
            opacity: 1;
            visibility: visible;
        }

        /* Lists */
        ul, ol {
            margin: 1rem 0 1.5rem 1.5rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        /* Info Boxes */
        .info-box {
            background-color: #E6F3FF;
            border-left: 5px solid var(--chart-blue);
            padding: 1.25rem;
            margin: 1.5rem 0;
            border-radius: 0 6px 6px 0;
        }

        .info-box.warning {
            background-color: #FFF5E6;
            border-left-color: var(--accent-color);
        }

        .info-box.success {
            background-color: #E6FFE6;
            border-left-color: var(--success-color);
        }

        .info-box h4 {
            margin-top: 0;
            color: var(--text-primary);
        }

        /* Formula Display */
        .formula {
            background-color: var(--background-alt);
            border: 2px solid var(--border-color);
            padding: 1.25rem;
            margin: 1.5rem 0;
            border-radius: 8px;
            font-family: "Courier New", Courier, monospace;
            font-size: 1.1rem;
            text-align: center;
            color: var(--primary-dark);
            font-weight: bold;
        }

        /* Interactive Components Container */
        .interactive-container {
            background-color: var(--background-alt);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .interactive-container h4 {
            margin-top: 0;
            color: var(--primary-color);
            font-size: 1.2rem;
        }

        /* Buttons */
        button, .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            font-size: 1rem;
            font-weight: 600;
            text-align: center;
            text-decoration: none;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-family: inherit;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: var(--text-light);
        }

        .btn-primary:hover,
        .btn-primary:focus {
            background-color: var(--primary-dark);
        }

        .btn-secondary {
            background-color: var(--secondary-color);
            color: var(--text-light);
        }

        .btn-secondary:hover,
        .btn-secondary:focus {
            background-color: #005528;
        }

        .btn-accent {
            background-color: var(--accent-color);
            color: var(--text-light);
        }

        .btn-accent:hover,
        .btn-accent:focus {
            background-color: #B35500;
        }

        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* Form Elements */
        label {
            display: block;
            margin-bottom: 0.4rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        input[type="text"],
        input[type="number"],
        select {
            width: 100%;
            max-width: 300px;
            padding: 0.75rem;
            font-size: 1rem;
            border: 2px solid var(--border-color);
            border-radius: 4px;
            background-color: var(--background-main);
            font-family: inherit;
            transition: border-color 0.2s;
        }

        input:focus,
        select:focus {
            border-color: var(--primary-color);
        }

        .form-group {
            margin-bottom: 1.25rem;
        }

        /* Tables */
        .table-container {
            overflow-x: auto;
            margin: 1.5rem 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.95rem;
        }

        th, td {
            padding: 0.875rem 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-color);
        }

        th {
            background-color: var(--primary-color);
            color: var(--text-light);
            font-weight: 600;
        }

        tr:nth-child(even) {
            background-color: var(--background-alt);
        }

        tr:hover {
            background-color: var(--highlight-bg);
        }

        /* Charts and Visualizations */
        .chart-container {
            width: 100%;
            max-width: 600px;
            margin: 1.5rem auto;
            background-color: var(--background-main);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
        }

        canvas {
            max-width: 100%;
            height: auto;
        }

        /* Supply and Demand Graph */
        .graph-wrapper {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin: 1.5rem auto;
        }

        .sd-graph {
            width: 100%;
            aspect-ratio: 1;
            background-color: var(--background-main);
            border: 2px solid var(--border-color);
            border-radius: 8px;
        }

        /* GDP Pie Chart */
        .gdp-chart {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            justify-content: center;
            align-items: center;
            margin: 2rem 0;
        }

        .pie-container {
            width: 280px;
            height: 280px;
            position: relative;
        }

        .legend {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 0.95rem;
        }

        .legend-color {
            width: 24px;
            height: 24px;
            border-radius: 4px;
            border: 1px solid var(--border-dark);
        }

        /* Progress Tracker */
        .progress-container {
            background-color: var(--background-alt);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border: 2px solid var(--border-color);
        }

        .progress-bar-wrapper {
            background-color: var(--border-color);
            border-radius: 25px;
            height: 30px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary-color), var(--chart-green));
            border-radius: 25px;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-light);
            font-weight: bold;
            font-size: 0.9rem;
        }

        /* Quiz Styles */
        .quiz-container {
            background-color: var(--background-alt);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .quiz-question {
            margin-bottom: 1.5rem;
            padding: 1.25rem;
            background-color: var(--background-main);
            border-radius: 6px;
            border: 1px solid var(--border-color);
        }

        .quiz-question p {
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--primary-dark);
        }

        .quiz-options {
            list-style: none;
            margin: 0;
            padding: 0;
        }

        .quiz-options li {
            margin-bottom: 0.5rem;
        }

        .quiz-options label {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            background-color: var(--background-alt);
            border: 2px solid var(--border-color);
            border-radius: 6px;
            cursor: pointer;
            font-weight: normal;
            transition: all 0.2s ease;
        }

        .quiz-options label:hover {
            background-color: var(--highlight-bg);
            border-color: var(--primary-color);
        }

        .quiz-options input[type="radio"] {
            width: 18px;
            height: 18px;
            accent-color: var(--primary-color);
        }

        .quiz-options input[type="radio"]:checked + span {
            font-weight: 600;
        }

        .quiz-feedback {
            margin-top: 1rem;
            padding: 1rem;
            border-radius: 6px;
            font-weight: 600;
        }

        .quiz-feedback.correct {
            background-color: #D4EDDA;
            color: #155724;
            border: 2px solid #28a745;
        }

        .quiz-feedback.incorrect {
            background-color: #F8D7DA;
            color: #721c24;
            border: 2px solid #dc3545;
        }

        .quiz-feedback.neutral {
            background-color: #D1ECF1;
            color: #0c5460;
            border: 2px solid #17a2b8;
        }

        /* Calculator Results */
        .result-display {
            background-color: var(--primary-color);
            color: var(--text-light);
            padding: 1.5rem;
            border-radius: 8px;
            margin-top: 1.5rem;
            text-align: center;
        }

        .result-display .result-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 0.5rem 0;
        }

        .result-display .result-label {
            font-size: 1rem;
            opacity: 0.9;
        }

        /* Tab Component */
        .tabs {
            margin: 1.5rem 0;
        }

        .tab-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 0.5rem;
        }

        .tab-btn {
            padding: 0.75rem 1.25rem;
            background-color: var(--background-alt);
            border: 2px solid var(--border-color);
            border-radius: 6px 6px 0 0;
            cursor: pointer;
            font-weight: 600;
            color: var(--text-secondary);
            transition: all 0.2s ease;
        }

        .tab-btn:hover {
            background-color: var(--border-color);
        }

        .tab-btn.active {
            background-color: var(--primary-color);
            color: var(--text-light);
            border-color: var(--primary-color);
        }

        .tab-content {
            display: none;
            padding: 1.5rem;
            background-color: var(--background-main);
            border: 2px solid var(--border-color);
            border-radius: 0 0 8px 8px;
        }

        .tab-content.active {
            display: block;
        }

        /* Slider Control */
        .slider-control {
            margin: 1.5rem 0;
        }

        .slider-control input[type="range"] {
            width: 100%;
            max-width: 400px;
            height: 8px;
            -webkit-appearance: none;
            appearance: none;
            background: var(--border-color);
            border-radius: 4px;
            cursor: pointer;
        }

        .slider-control input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            height: 24px;
            background: var(--primary-color);
            border-radius: 50%;
            cursor: pointer;
            border: 3px solid var(--background-main);
            box-shadow: 0 2px 6px var(--shadow-color);
        }

        .slider-value {
            font-size: 1.25rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-left: 1rem;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
            margin: 1.5rem 0;
        }

        .stat-card {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--primary-dark) 100%);
            color: var(--text-light);
            padding: 1.5rem;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 4px 12px var(--shadow-color);
        }

        .stat-card .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .stat-card .stat-label {
            font-size: 0.95rem;
            opacity: 0.9;
        }

        /* Accordion */
        .accordion {
            margin: 1.5rem 0;
        }

        .accordion-item {
            border: 2px solid var(--border-color);
            border-radius: 6px;
            margin-bottom: 0.75rem;
            overflow: hidden;
        }

        .accordion-header {
            width: 100%;
            padding: 1rem 1.25rem;
            background-color: var(--background-alt);
            border: none;
            text-align: left;
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary-color);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s;
        }

        .accordion-header:hover {
            background-color: var(--border-color);
        }

        .accordion-header .icon {
            font-size: 1.25rem;
            transition: transform 0.3s;
        }

        .accordion-header[aria-expanded="true"] .icon {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            background-color: var(--background-main);
        }

        .accordion-content.open {
            max-height: 1000px;
        }

        .accordion-content-inner {
            padding: 1.25rem;
        }

        /* Footer */
        footer {
            background-color: var(--primary-dark);
            color: var(--text-light);
            text-align: center;
            padding: 2rem 1.5rem;
            margin-top: 3rem;
        }

        footer p {
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }

        footer a {
            color: var(--highlight-bg);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            header {
                padding: 1.5rem 1rem;
            }

            nav ul {
                flex-direction: column;
                align-items: stretch;
            }

            nav a {
                text-align: center;
            }

            section {
                padding: 1.5rem 1rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .tab-buttons {
                flex-direction: column;
            }

            .gdp-chart {
                flex-direction: column;
            }
        }

        /* Print Styles */
        @media print {
            nav, .interactive-container, .quiz-container, .progress-container {
                display: none;
            }

            section {
                break-inside: avoid;
                page-break-inside: avoid;
            }

            body {
                font-size: 12pt;
            }
        }

        /* High Contrast Mode Support */
        @media (prefers-contrast: high) {
            :root {
                --border-color: #000000;
                --text-secondary: #000000;
            }
        }

        /* Reduced Motion Support */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }

            html {
                scroll-behavior: auto;
            }
        }
    </style>
</head>
<body>
    <!-- Skip Link for Screen Readers -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header -->
    <header role="banner">
        <h1>Economic Fundamentals</h1>
        <p>An Interactive Learning Module for Introduction to Business</p>
    </header>

    <!-- Navigation -->
    <nav role="navigation" aria-label="Main navigation">
        <ul>
            <li><a href="#inflation" aria-current="false">Inflation &amp; CPI</a></li>
            <li><a href="#supply-demand" aria-current="false">Supply &amp; Demand</a></li>
            <li><a href="#gdp" aria-current="false">Gross Domestic Product</a></li>
            <li><a href="#quiz" aria-current="false">Knowledge Check</a></li>
        </ul>
    </nav>

    <!-- Main Content -->
    <main id="main-content" role="main">

        <!-- Progress Tracker -->
        <div class="progress-container" aria-label="Learning Progress">
            <h2 style="font-size: 1.25rem; margin-bottom: 0.5rem;">Your Learning Progress</h2>
            <div class="progress-bar-wrapper" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Course completion progress">
                <div class="progress-bar" id="progress-bar" style="width: 0%;">
                    <span id="progress-text">0%</span>
                </div>
            </div>
            <p style="font-size: 0.9rem; color: var(--text-secondary);">Complete each section and quiz to track your progress</p>
            <p style="font-size: 0.85rem; color: var(--text-secondary); margin-top: 0.5rem;">
                <strong>Tip:</strong> Use <kbd style="background: var(--border-color); padding: 2px 6px; border-radius: 3px; font-family: monospace;">‚Üê</kbd> and <kbd style="background: var(--border-color); padding: 2px 6px; border-radius: 3px; font-family: monospace;">‚Üí</kbd> arrow keys to navigate between sections
            </p>
        </div>

        <!-- Section 1: Inflation and CPI -->
        <section id="inflation" aria-labelledby="inflation-heading" data-section="inflation">
            <h2 id="inflation-heading"><span class="icon" aria-hidden="true">üìà</span> Inflation and Consumer Price Index</h2>

            <p>
                <span class="key-term" tabindex="0" role="button" aria-describedby="tooltip-inflation">
                    Inflation
                    <span class="tooltip" id="tooltip-inflation" role="tooltip">A sustained increase in the general price level of goods and services in an economy over time, reducing purchasing power.</span>
                </span>
                is one of the most important economic concepts affecting consumers, businesses, and governments. It represents the rate at which the general level of prices for goods and services is rising, consequently eroding the purchasing power of money.
            </p>

            <h3>Understanding Inflation</h3>
            <p>
                When inflation occurs, each unit of currency buys fewer goods and services than before. For example, if inflation is 3% per year, a product that costs $100 today would cost approximately $103 next year. Over time, this compounding effect can significantly impact savings, investments, and living standards.
            </p>

            <div class="info-box">
                <h4>üìä Current Inflation Data (2024-2025)</h4>
                <p>According to the U.S. Bureau of Labor Statistics, the Consumer Price Index rose approximately 2.9% from December 2023 to December 2024, showing a period of disinflation where prices still increased but at a slower rate than previous years. As of September 2025, the 12-month inflation rate stands at 3.0%.</p>
            </div>

            <h3>Types of Inflation</h3>

            <div class="tabs">
                <div class="tab-buttons" role="tablist" aria-label="Types of Inflation">
                    <button class="tab-btn active" role="tab" aria-selected="true" aria-controls="demand-pull-tab" id="demand-pull-btn" onclick="switchTab('demand-pull')">Demand-Pull Inflation</button>
                    <button class="tab-btn" role="tab" aria-selected="false" aria-controls="cost-push-tab" id="cost-push-btn" onclick="switchTab('cost-push')">Cost-Push Inflation</button>
                    <button class="tab-btn" role="tab" aria-selected="false" aria-controls="built-in-tab" id="built-in-btn" onclick="switchTab('built-in')">Built-In Inflation</button>
                </div>

                <div id="demand-pull-tab" class="tab-content active" role="tabpanel" aria-labelledby="demand-pull-btn">
                    <h4>Demand-Pull Inflation</h4>
                    <p>
                        <span class="key-term" tabindex="0" role="button" aria-describedby="tooltip-demand-pull">
                            Demand-pull inflation
                            <span class="tooltip" id="tooltip-demand-pull" role="tooltip">Inflation caused when aggregate demand in an economy exceeds aggregate supply, pulling prices higher.</span>
                        </span>
                        occurs when the total demand for goods and services (aggregate demand) exceeds the available supply. This excess demand "pulls" prices higher as consumers compete for limited goods.
                    </p>
                    <p><strong>Common causes include:</strong></p>
                    <ul>
                        <li>Increased consumer spending due to higher disposable income</li>
                        <li>Lower interest rates encouraging borrowing and spending</li>
                        <li>Government stimulus programs and increased public spending</li>
                        <li>Strong economic growth approaching full employment</li>
                        <li>Currency devaluation making exports more competitive</li>
                    </ul>
                    <p><strong>Real-world example:</strong> Following the COVID-19 pandemic, government stimulus checks boosted consumer spending while supply chains were disrupted, creating significant demand-pull inflationary pressure in the U.S. economy.</p>
                </div>

                <div id="cost-push-tab" class="tab-content" role="tabpanel" aria-labelledby="cost-push-btn">
                    <h4>Cost-Push Inflation</h4>
                    <p>
                        <span class="key-term" tabindex="0" role="button" aria-describedby="tooltip-cost-push">
                            Cost-push inflation
                            <span class="tooltip" id="tooltip-cost-push" role="tooltip">Inflation caused by rising production costs, which are passed on to consumers through higher prices.</span>
                        </span>
                        occurs when the costs of production increase, causing businesses to raise prices to maintain profit margins. This "pushes" inflation from the supply side of the economy.
                    </p>
                    <p><strong>Common causes include:</strong></p>
                    <ul>
                        <li>Rising raw material prices (oil, metals, agricultural commodities)</li>
                        <li>Higher labor costs and wage increases</li>
                        <li>Supply chain disruptions</li>
                        <li>Increased taxes on production</li>
                        <li>Currency depreciation making imports more expensive</li>
                    </ul>
                    <p><strong>Real-world example:</strong> The 1973 oil embargo by OPEC caused oil prices to rise 400%, leading to widespread cost-push inflation as transportation and production costs increased across all industries.</p>
                </div>

                <div id="built-in-tab" class="tab-content" role="tabpanel" aria-labelledby="built-in-btn">
                    <h4>Built-In (Wage-Price) Inflation</h4>
                    <p>
                        <span class="key-term" tabindex="0" role="button" aria-describedby="tooltip-built-in">
                            Built-in inflation
                            <span class="tooltip" id="tooltip-built-in" role="tooltip">Self-perpetuating inflation where expectations of future price increases lead to wage demands that further increase prices.</span>
                        </span>
                        is a self-perpetuating cycle where expectations of future inflation lead to behaviors that cause inflation. When workers expect prices to rise, they demand higher wages. When businesses expect costs to rise, they raise prices preemptively.
                    </p>
                    <p><strong>The wage-price spiral:</strong></p>
                    <ol>
                        <li>Workers expect inflation and demand wage increases</li>
                        <li>Businesses face higher labor costs</li>
                        <li>Businesses raise prices to maintain profits</li>
                        <li>Higher prices confirm workers' expectations</li>
                        <li>Workers demand even higher wages</li>
                        <li>The cycle continues...</li>
                    </ol>
                    <p><strong>Key insight:</strong> This is why central banks focus heavily on managing inflation expectations‚Äîonce people expect inflation, it becomes a self-fulfilling prophecy.</p>
                </div>
            </div>

            <h3>The Consumer Price Index (CPI)</h3>
            <p>
                The <span class="key-term" tabindex="0" role="button" aria-describedby="tooltip-cpi">
                    Consumer Price Index (CPI)
                    <span class="tooltip" id="tooltip-cpi" role="tooltip">A measure of the average change over time in the prices paid by urban consumers for a market basket of consumer goods and services.</span>
                </span>
                is the primary measure used to track inflation in the United States. Published monthly by the U.S. Bureau of Labor Statistics, the CPI measures the average change in prices paid by urban consumers for a representative "market basket" of goods and services.
            </p>

            <h4>How the CPI is Calculated</h4>
            <p>The CPI is based on prices collected from approximately 4,000 housing units and 26,000 retail establishments across 87 urban areas. The "market basket" includes:</p>

            <div class="table-container">
                <table aria-label="CPI Market Basket Categories">
                    <thead>
                        <tr>
                            <th scope="col">Category</th>
                            <th scope="col">Examples</th>
                            <th scope="col">Approximate Weight</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Housing</td>
                            <td>Rent, owners' equivalent rent, utilities</td>
                            <td>~33%</td>
                        </tr>
                        <tr>
                            <td>Transportation</td>
                            <td>Vehicles, gasoline, public transit</td>
                            <td>~15%</td>
                        </tr>
                        <tr>
                            <td>Food & Beverages</td>
                            <td>Groceries, dining out</td>
                            <td>~14%</td>
                        </tr>
                        <tr>
                            <td>Medical Care</td>
                            <td>Doctor visits, prescriptions, insurance</td>
                            <td>~9%</td>
                        </tr>
                        <tr>
                            <td>Education & Communication</td>
                            <td>Tuition, phone service, internet</td>
                            <td>~7%</td>
                        </tr>
                        <tr>
                            <td>Recreation</td>
                            <td>Entertainment, sports equipment, pets</td>
                            <td>~6%</td>
                        </tr>
                        <tr>
                            <td>Apparel</td>
                            <td>Clothing, footwear</td>
                            <td>~3%</td>
                        </tr>
                        <tr>
                            <td>Other</td>
                            <td>Personal care, tobacco, miscellaneous</td>
                            <td>~13%</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="formula" aria-label="Inflation Rate Formula">
                Inflation Rate = ((CPI<sub>current</sub> - CPI<sub>previous</sub>) √∑ CPI<sub>previous</sub>) √ó 100
            </div>

            <!-- Interactive CPI Calculator -->
            <div class="interactive-container" aria-labelledby="cpi-calc-heading">
                <h4 id="cpi-calc-heading">üßÆ Interactive: Inflation Impact Calculator</h4>
                <p>See how inflation affects purchasing power over time. Enter an amount and select a time period to see the impact.</p>

                <div class="form-group">
                    <label for="initial-amount">Initial Amount ($):</label>
                    <input type="number" id="initial-amount" value="1000" min="1" max="1000000" aria-describedby="initial-amount-help">
                    <small id="initial-amount-help" style="display: block; color: var(--text-secondary); margin-top: 0.25rem;">Enter an amount between $1 and $1,000,000</small>
                </div>

                <div class="form-group">
                    <label for="inflation-rate">Annual Inflation Rate (%):</label>
                    <input type="number" id="inflation-rate" value="3" min="0" max="50" step="0.1" aria-describedby="rate-help">
                    <small id="rate-help" style="display: block; color: var(--text-secondary); margin-top: 0.25rem;">Historical average: 2-3%; Recent rates: 3-9%</small>
                </div>

                <div class="form-group">
                    <label for="years">Number of Years:</label>
                    <input type="number" id="years" value="10" min="1" max="50" aria-describedby="years-help">
                    <small id="years-help" style="display: block; color: var(--text-secondary); margin-top: 0.25rem;">See the effect over 1 to 50 years</small>
                </div>

                <button class="btn btn-primary" onclick="calculateInflationImpact()" aria-describedby="calc-result">Calculate Impact</button>

                <div id="inflation-result" class="result-display" style="display: none;" aria-live="polite" aria-atomic="true">
                    <div class="result-label">Future Cost of Same Goods:</div>
                    <div class="result-value" id="future-cost">$0</div>
                    <div class="result-label" style="margin-top: 1rem;">Purchasing Power of Original Amount:</div>
                    <div class="result-value" id="purchasing-power">$0</div>
                    <div class="result-label" style="margin-top: 1rem;">Total Purchasing Power Lost:</div>
                    <div class="result-value" id="power-lost">$0</div>
                </div>
            </div>

            <h3>Why Inflation Matters for Business</h3>
            <div class="accordion">
                <div class="accordion-item">
                    <button class="accordion-header" aria-expanded="false" onclick="toggleAccordion(this)">
                        Impact on Consumers
                        <span class="icon" aria-hidden="true">‚ñº</span>
                    </button>
                    <div class="accordion-content">
                        <div class="accordion-content-inner">
                            <p>Inflation erodes purchasing power, meaning consumers can buy fewer goods and services with the same amount of money. This particularly affects:</p>
                            <ul>
                                <li><strong>Fixed-income earners:</strong> Retirees on fixed pensions see their real income decline</li>
                                <li><strong>Savers:</strong> Money in savings accounts loses value if interest rates don't keep pace with inflation</li>
                                <li><strong>Essential goods buyers:</strong> Food, housing, and healthcare costs rise, disproportionately affecting lower-income households</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header" aria-expanded="false" onclick="toggleAccordion(this)">
                        Impact on Businesses
                        <span class="icon" aria-hidden="true">‚ñº</span>
                    </button>
                    <div class="accordion-content">
                        <div class="accordion-content-inner">
                            <p>Businesses face multiple challenges during inflationary periods:</p>
                            <ul>
                                <li><strong>Input costs:</strong> Raw materials, labor, and overhead costs increase</li>
                                <li><strong>Pricing decisions:</strong> Difficulty passing costs to consumers without losing sales</li>
                                <li><strong>Planning uncertainty:</strong> Harder to forecast costs and revenues</li>
                                <li><strong>Interest rates:</strong> Higher borrowing costs as central banks combat inflation</li>
                                <li><strong>Contract negotiations:</strong> Long-term contracts may become unprofitable</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header" aria-expanded="false" onclick="toggleAccordion(this)">
                        Central Bank Response
                        <span class="icon" aria-hidden="true">‚ñº</span>
                    </button>
                    <div class="accordion-content">
                        <div class="accordion-content-inner">
                            <p>The <span class="key-term" tabindex="0" role="button" aria-describedby="tooltip-fed">Federal Reserve<span class="tooltip" id="tooltip-fed" role="tooltip">The central bank of the United States, responsible for monetary policy including setting interest rates.</span></span> uses monetary policy tools to manage inflation:</p>
                            <ul>
                                <li><strong>Interest rate adjustments:</strong> Raising rates makes borrowing more expensive, reducing spending</li>
                                <li><strong>Open market operations:</strong> Buying/selling government securities to control money supply</li>
                                <li><strong>Reserve requirements:</strong> Adjusting how much banks must hold in reserve</li>
                                <li><strong>Forward guidance:</strong> Communicating future policy intentions to shape expectations</li>
                            </ul>
                            <p>The Fed typically targets a 2% annual inflation rate as optimal for economic growth and stability.</p>
                        </div>
                    </div>
                </div>
            </div>

            <button class="btn btn-secondary" onclick="markSectionComplete('inflation')" aria-describedby="complete-inflation">Mark Section Complete</button>
            <span id="complete-inflation" class="visually-hidden">Click to mark the Inflation and CPI section as complete</span>
        </section>

        <!-- Section 2: Supply and Demand -->
        <section id="supply-demand" aria-labelledby="supply-demand-heading" data-section="supply-demand">
            <h2 id="supply-demand-heading"><span class="icon" aria-hidden="true">‚öñÔ∏è</span> Supply and Demand</h2>

            <p>
                <span class="key-term" tabindex="0" role="button" aria-describedby="tooltip-sd">
                    Supply and demand
                    <span class="tooltip" id="tooltip-sd" role="tooltip">The fundamental economic model describing how prices are determined by the relationship between product availability (supply) and consumer desire (demand).</span>
                </span>
                is the fundamental model of price determination in economics. It explains how prices for goods and services are established in a free market through the interaction of producers (sellers) and consumers (buyers).
            </p>

            <h3>The Law of Demand</h3>
            <p>
                The <span class="key-term" tabindex="0" role="button" aria-describedby="tooltip-demand">
                    Law of Demand
                    <span class="tooltip" id="tooltip-demand" role="tooltip">Economic principle stating that, all else being equal, as the price of a good increases, the quantity demanded decreases, and vice versa.</span>
                </span>
                states that there is an inverse relationship between price and quantity demanded, assuming all other factors remain constant (<em>ceteris paribus</em>). In other words:
            </p>
            <ul>
                <li>When prices <strong>increase</strong>, consumers demand <strong>less</strong></li>
                <li>When prices <strong>decrease</strong>, consumers demand <strong>more</strong></li>
            </ul>

            <div class="info-box">
                <h4>üí° Why Does This Happen?</h4>
                <ul>
                    <li><strong>Income effect:</strong> Higher prices reduce purchasing power, so consumers buy less</li>
                    <li><strong>Substitution effect:</strong> Consumers switch to cheaper alternatives when prices rise</li>
                    <li><strong>Diminishing marginal utility:</strong> Additional units provide less satisfaction, so consumers won't pay as much</li>
                </ul>
            </div>

            <h3>The Law of Supply</h3>
            <p>
                The <span class="key-term" tabindex="0" role="button" aria-describedby="tooltip-supply">
                    Law of Supply
                    <span class="tooltip" id="tooltip-supply" role="tooltip">Economic principle stating that, all else being equal, as the price of a good increases, the quantity supplied increases, and vice versa.</span>
                </span>
                states that there is a direct relationship between price and quantity supplied, assuming all other factors remain constant. In other words:
            </p>
            <ul>
                <li>When prices <strong>increase</strong>, producers supply <strong>more</strong></li>
                <li>When prices <strong>decrease</strong>, producers supply <strong>less</strong></li>
            </ul>

            <div class="info-box success">
                <h4>üí∞ Why Does This Happen?</h4>
                <ul>
                    <li><strong>Profit motive:</strong> Higher prices mean more profit per unit, incentivizing more production</li>
                    <li><strong>New producers:</strong> Higher prices attract new businesses into the market</li>
                    <li><strong>Expansion capacity:</strong> Existing producers can afford to increase capacity</li>
                </ul>
            </div>

            <h3>Market Equilibrium</h3>
            <p>
                <span class="key-term" tabindex="0" role="button" aria-describedby="tooltip-equilibrium">
                    Market equilibrium
                    <span class="tooltip" id="tooltip-equilibrium" role="tooltip">The point where the quantity demanded equals the quantity supplied, determining the market price and quantity.</span>
                </span>
                occurs where the supply and demand curves intersect. At this point:
            </p>
            <ul>
                <li>The <strong>equilibrium price</strong> is the price at which consumers want to buy exactly as much as producers want to sell</li>
                <li>The <strong>equilibrium quantity</strong> is the amount that will be bought and sold at this price</li>
                <li>There is no tendency for the market to move away from this point (unless external factors change)</li>
            </ul>

            <!-- Interactive Supply and Demand Graph -->
            <div class="interactive-container" aria-labelledby="sd-graph-heading">
                <h4 id="sd-graph-heading">üìä Interactive: Supply and Demand Graph</h4>
                <p>Use the sliders to see how changes in supply and demand affect equilibrium price and quantity.</p>

                <div class="slider-control">
                    <label for="demand-shift">Demand Shift:</label>
                    <div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                        <input type="range" id="demand-shift" min="-50" max="50" value="0" aria-describedby="demand-shift-desc" onchange="updateSDGraph()">
                        <span class="slider-value" id="demand-shift-value">0 (Normal)</span>
                    </div>
                    <small id="demand-shift-desc" style="color: var(--text-secondary);">Move left to decrease demand, right to increase demand</small>
                </div>

                <div class="slider-control">
                    <label for="supply-shift">Supply Shift:</label>
                    <div style="display: flex; align-items: center; gap: 1rem; flex-wrap: wrap;">
                        <input type="range" id="supply-shift" min="-50" max="50" value="0" aria-describedby="supply-shift-desc" onchange="updateSDGraph()">
                        <span class="slider-value" id="supply-shift-value">0 (Normal)</span>
                    </div>
                    <small id="supply-shift-desc" style="color: var(--text-secondary);">Move left to decrease supply, right to increase supply</small>
                </div>

                <div class="graph-wrapper">
                    <canvas id="sd-canvas" class="sd-graph" width="500" height="500" aria-label="Supply and Demand Graph" role="img">
                        Supply and demand graph showing the relationship between price and quantity
                    </canvas>
                </div>

                <div id="equilibrium-info" class="result-display" style="background-color: var(--secondary-color);" aria-live="polite">
                    <div class="result-label">Equilibrium Point:</div>
                    <div class="result-value" id="eq-price">Price: $50</div>
                    <div class="result-value" id="eq-quantity">Quantity: 50 units</div>
                </div>
            </div>

            <h3>Shifts vs. Movements</h3>

            <div class="table-container">
                <table aria-label="Difference between movements along curves and shifts of curves">
                    <thead>
                        <tr>
                            <th scope="col">Concept</th>
                            <th scope="col">Movement Along Curve</th>
                            <th scope="col">Shift of Curve</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Cause</strong></td>
                            <td>Change in price of the good itself</td>
                            <td>Change in non-price factors</td>
                        </tr>
                        <tr>
                            <td><strong>Effect</strong></td>
                            <td>Move to different point on same curve</td>
                            <td>Entire curve moves left or right</td>
                        </tr>
                        <tr>
                            <td><strong>Demand Example</strong></td>
                            <td>Price of pizza drops from $15 to $10</td>
                            <td>Consumer income increases</td>
                        </tr>
                        <tr>
                            <td><strong>Supply Example</strong></td>
                            <td>Price of pizza rises from $10 to $15</td>
                            <td>New pizza restaurants open</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>Determinants of Demand (Non-Price Factors)</h3>
            <p>Factors that cause the entire demand curve to shift:</p>
            <ul>
                <li><strong>Income:</strong> Higher income typically increases demand for normal goods</li>
                <li><strong>Tastes and preferences:</strong> Changes in consumer preferences affect demand</li>
                <li><strong>Price of related goods:</strong> Substitutes and complements affect demand</li>
                <li><strong>Expectations:</strong> Expected future prices or income changes current demand</li>
                <li><strong>Number of buyers:</strong> More buyers in the market increases total demand</li>
            </ul>

            <h3>Determinants of Supply (Non-Price Factors)</h3>
            <p>Factors that cause the entire supply curve to shift:</p>
            <ul>
                <li><strong>Input prices:</strong> Higher production costs reduce supply</li>
                <li><strong>Technology:</strong> Better technology increases supply efficiency</li>
                <li><strong>Expectations:</strong> Expected future prices affect current production decisions</li>
                <li><strong>Number of sellers:</strong> More producers increases total supply</li>
                <li><strong>Government policies:</strong> Taxes, subsidies, and regulations affect supply</li>
            </ul>

            <h3>Surplus and Shortage</h3>

            <div class="stats-grid">
                <div class="stat-card" style="background: linear-gradient(135deg, #CC6633 0%, #993300 100%);">
                    <div class="stat-value">Surplus</div>
                    <div class="stat-label">When price is ABOVE equilibrium, quantity supplied exceeds quantity demanded. Sellers have excess inventory and will lower prices.</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, #336699 0%, #003366 100%);">
                    <div class="stat-value">Shortage</div>
                    <div class="stat-label">When price is BELOW equilibrium, quantity demanded exceeds quantity supplied. Buyers compete for limited goods, pushing prices up.</div>
                </div>
            </div>

            <div class="info-box warning">
                <h4>üîÑ Market Self-Correction</h4>
                <p>In a free market, surpluses and shortages are temporary. Market forces naturally push prices toward equilibrium:</p>
                <ul>
                    <li><strong>Surplus ‚Üí Price falls ‚Üí Quantity demanded rises, quantity supplied falls ‚Üí Equilibrium</strong></li>
                    <li><strong>Shortage ‚Üí Price rises ‚Üí Quantity demanded falls, quantity supplied rises ‚Üí Equilibrium</strong></li>
                </ul>
            </div>

            <button class="btn btn-secondary" onclick="markSectionComplete('supply-demand')">Mark Section Complete</button>
        </section>

        <!-- Section 3: Gross Domestic Product -->
        <section id="gdp" aria-labelledby="gdp-heading" data-section="gdp">
            <h2 id="gdp-heading"><span class="icon" aria-hidden="true">üèõÔ∏è</span> Gross Domestic Product (GDP)</h2>

            <p>
                <span class="key-term" tabindex="0" role="button" aria-describedby="tooltip-gdp">
                    Gross Domestic Product (GDP)
                    <span class="tooltip" id="tooltip-gdp" role="tooltip">The total monetary value of all final goods and services produced within a country's borders during a specific time period.</span>
                </span>
                is the most comprehensive measure of a nation's overall economic activity. It represents the total market value of all final goods and services produced within a country's borders during a specified period, typically a year or quarter.
            </p>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">$28.3T</div>
                    <div class="stat-label">U.S. GDP (2024)</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, var(--secondary-color) 0%, #004d26 100%);">
                    <div class="stat-value">~2.5%</div>
                    <div class="stat-label">Typical Annual Growth</div>
                </div>
                <div class="stat-card" style="background: linear-gradient(135deg, var(--accent-color) 0%, #994d00 100%);">
                    <div class="stat-value">~68%</div>
                    <div class="stat-label">Consumer Spending Share</div>
                </div>
            </div>

            <h3>The GDP Formula (Expenditure Approach)</h3>
            <p>The most common method for calculating GDP is the expenditure approach, which adds up all spending on final goods and services:</p>

            <div class="formula" aria-label="GDP Formula">
                GDP = C + I + G + (X - M)
            </div>

            <p>Where:</p>
            <ul>
                <li><strong>C</strong> = Consumer Spending (Personal Consumption Expenditures)</li>
                <li><strong>I</strong> = Investment (Business Investment + Residential Construction)</li>
                <li><strong>G</strong> = Government Spending (on goods and services)</li>
                <li><strong>X</strong> = Exports (goods and services sold abroad)</li>
                <li><strong>M</strong> = Imports (goods and services purchased from abroad)</li>
                <li><strong>(X - M)</strong> = Net Exports (can be negative if imports exceed exports)</li>
            </ul>

            <h3>Components of GDP</h3>

            <div class="gdp-chart">
                <div class="pie-container">
                    <canvas id="gdp-pie" width="280" height="280" aria-label="GDP Components Pie Chart" role="img">
                        Pie chart showing breakdown of GDP components
                    </canvas>
                </div>
                <div class="legend" aria-label="GDP Components Legend">
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: var(--chart-blue);"></span>
                        <span>Consumer Spending (C) - ~68%</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: var(--chart-green);"></span>
                        <span>Investment (I) - ~18%</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: var(--chart-orange);"></span>
                        <span>Government Spending (G) - ~17%</span>
                    </div>
                    <div class="legend-item">
                        <span class="legend-color" style="background-color: var(--chart-red);"></span>
                        <span>Net Exports (X-M) - ~-3%</span>
                    </div>
                </div>
            </div>

            <!-- GDP Component Details -->
            <div class="accordion">
                <div class="accordion-item">
                    <button class="accordion-header" aria-expanded="false" onclick="toggleAccordion(this)">
                        C - Consumer Spending (Personal Consumption)
                        <span class="icon" aria-hidden="true">‚ñº</span>
                    </button>
                    <div class="accordion-content">
                        <div class="accordion-content-inner">
                            <p>Consumer spending is the largest component of GDP, accounting for approximately two-thirds of all economic activity. It includes:</p>
                            <ul>
                                <li><strong>Durable goods:</strong> Items lasting more than 3 years (cars, appliances, furniture)</li>
                                <li><strong>Nondurable goods:</strong> Items consumed quickly (food, clothing, gasoline)</li>
                                <li><strong>Services:</strong> Intangible products (healthcare, education, entertainment, housing)</li>
                            </ul>
                            <p><strong>Key insight:</strong> Consumer confidence heavily influences this component. When people feel optimistic about the economy and their job security, they spend more.</p>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header" aria-expanded="false" onclick="toggleAccordion(this)">
                        I - Investment (Gross Private Domestic Investment)
                        <span class="icon" aria-hidden="true">‚ñº</span>
                    </button>
                    <div class="accordion-content">
                        <div class="accordion-content-inner">
                            <p>Investment represents spending on capital goods that will be used to produce other goods in the future:</p>
                            <ul>
                                <li><strong>Business fixed investment:</strong> Equipment, machinery, software, structures</li>
                                <li><strong>Residential investment:</strong> Construction of new homes and apartments</li>
                                <li><strong>Change in inventories:</strong> Goods produced but not yet sold</li>
                            </ul>
                            <p><strong>Key insight:</strong> This is the most volatile GDP component, swinging significantly with business confidence and interest rates. It's often the first indicator of economic turning points.</p>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header" aria-expanded="false" onclick="toggleAccordion(this)">
                        G - Government Spending
                        <span class="icon" aria-hidden="true">‚ñº</span>
                    </button>
                    <div class="accordion-content">
                        <div class="accordion-content-inner">
                            <p>Government purchases of goods and services at all levels (federal, state, local):</p>
                            <ul>
                                <li><strong>Federal:</strong> Defense spending, federal employee salaries, national parks</li>
                                <li><strong>State/Local:</strong> Public schools, police, roads, infrastructure</li>
                            </ul>
                            <p><strong>Important distinction:</strong> Transfer payments (Social Security, Medicare, unemployment benefits) are NOT included in G because they don't represent production‚Äîthey're just transfers of money from one group to another.</p>
                        </div>
                    </div>
                </div>
                <div class="accordion-item">
                    <button class="accordion-header" aria-expanded="false" onclick="toggleAccordion(this)">
                        (X - M) - Net Exports
                        <span class="icon" aria-hidden="true">‚ñº</span>
                    </button>
                    <div class="accordion-content">
                        <div class="accordion-content-inner">
                            <p>The difference between what we sell to other countries and what we buy from them:</p>
                            <ul>
                                <li><strong>Exports (X):</strong> Goods and services produced domestically and sold abroad (adds to GDP)</li>
                                <li><strong>Imports (M):</strong> Goods and services produced abroad and purchased domestically (subtracted from GDP)</li>
                            </ul>
                            <p><strong>Trade balance:</strong></p>
                            <ul>
                                <li><strong>Trade surplus:</strong> X > M (positive net exports)</li>
                                <li><strong>Trade deficit:</strong> M > X (negative net exports)</li>
                            </ul>
                            <p>The U.S. typically runs a trade deficit, meaning net exports subtract from GDP.</p>
                        </div>
                    </div>
                </div>
            </div>

            <h3>Three Approaches to Measuring GDP</h3>

            <div class="table-container">
                <table aria-label="Three approaches to calculating GDP">
                    <thead>
                        <tr>
                            <th scope="col">Approach</th>
                            <th scope="col">Description</th>
                            <th scope="col">What It Measures</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>Expenditure</strong></td>
                            <td>C + I + G + (X - M)</td>
                            <td>Total spending on final goods/services</td>
                        </tr>
                        <tr>
                            <td><strong>Income</strong></td>
                            <td>Wages + Profits + Rent + Interest</td>
                            <td>Total income earned from production</td>
                        </tr>
                        <tr>
                            <td><strong>Production</strong></td>
                            <td>Sum of value added at each stage</td>
                            <td>Total value of all output</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <p>All three approaches should yield the same GDP figure because every dollar spent on goods is simultaneously income for someone and represents production value.</p>

            <h3>Nominal vs. Real GDP</h3>

            <div class="info-box">
                <h4>Understanding the Difference</h4>
                <p>
                    <span class="key-term" tabindex="0" role="button" aria-describedby="tooltip-nominal">
                        Nominal GDP
                        <span class="tooltip" id="tooltip-nominal" role="tooltip">GDP measured at current market prices, without adjusting for inflation.</span>
                    </span>
                    uses current prices and can be misleading because it increases with both actual production growth AND inflation.
                </p>
                <p>
                    <span class="key-term" tabindex="0" role="button" aria-describedby="tooltip-real">
                        Real GDP
                        <span class="tooltip" id="tooltip-real" role="tooltip">GDP adjusted for inflation, using constant prices from a base year, showing actual changes in production.</span>
                    </span>
                    adjusts for inflation using a base year's prices, showing true changes in production volume.
                </p>
            </div>

            <div class="formula" aria-label="Real GDP Formula">
                Real GDP = Nominal GDP √∑ GDP Deflator √ó 100
            </div>

            <!-- GDP Calculator -->
            <div class="interactive-container" aria-labelledby="gdp-calc-heading">
                <h4 id="gdp-calc-heading">üßÆ Interactive: GDP Calculator</h4>
                <p>Enter values for each component to calculate GDP using the expenditure approach (values in billions):</p>

                <div class="form-group">
                    <label for="gdp-c">Consumer Spending (C): $</label>
                    <input type="number" id="gdp-c" value="19000" min="0" step="100" aria-describedby="gdp-c-help">
                    <small id="gdp-c-help" style="display: block; color: var(--text-secondary);">Enter in billions (e.g., 19000 = $19 trillion)</small>
                </div>

                <div class="form-group">
                    <label for="gdp-i">Investment (I): $</label>
                    <input type="number" id="gdp-i" value="5000" min="0" step="100">
                </div>

                <div class="form-group">
                    <label for="gdp-g">Government Spending (G): $</label>
                    <input type="number" id="gdp-g" value="4800" min="0" step="100">
                </div>

                <div class="form-group">
                    <label for="gdp-x">Exports (X): $</label>
                    <input type="number" id="gdp-x" value="2500" min="0" step="100">
                </div>

                <div class="form-group">
                    <label for="gdp-m">Imports (M): $</label>
                    <input type="number" id="gdp-m" value="3300" min="0" step="100">
                </div>

                <button class="btn btn-primary" onclick="calculateGDP()">Calculate GDP</button>

                <div id="gdp-result" class="result-display" style="display: none; background-color: var(--secondary-color);" aria-live="polite">
                    <div class="result-label">Total GDP:</div>
                    <div class="result-value" id="gdp-total">$0 billion</div>
                    <div class="result-label" style="margin-top: 1rem;">Net Exports:</div>
                    <div class="result-value" id="net-exports">$0 billion</div>
                </div>
            </div>

            <h3>Limitations of GDP</h3>
            <p>While GDP is useful, it has important limitations:</p>
            <ul>
                <li><strong>Doesn't measure well-being:</strong> Higher GDP doesn't necessarily mean better quality of life</li>
                <li><strong>Ignores income distribution:</strong> GDP can grow while inequality worsens</li>
                <li><strong>Excludes non-market activities:</strong> Household work, volunteer work not counted</li>
                <li><strong>Ignores environmental costs:</strong> Pollution and resource depletion not subtracted</li>
                <li><strong>Misses the underground economy:</strong> Black market and unreported income excluded</li>
                <li><strong>Quality improvements:</strong> Doesn't fully capture technological advances</li>
            </ul>

            <button class="btn btn-secondary" onclick="markSectionComplete('gdp')">Mark Section Complete</button>
        </section>

        <!-- Section 4: Knowledge Check Quiz -->
        <section id="quiz" aria-labelledby="quiz-heading" data-section="quiz">
            <h2 id="quiz-heading"><span class="icon" aria-hidden="true">‚úÖ</span> Knowledge Check</h2>

            <p>Test your understanding of the economic concepts covered in this module. Select the best answer for each question.</p>

            <div class="quiz-container" role="form" aria-label="Economic Fundamentals Quiz">
                <!-- Question 1 -->
                <div class="quiz-question" id="q1">
                    <p>1. Which type of inflation is caused by increased production costs being passed on to consumers?</p>
                    <ul class="quiz-options" role="radiogroup" aria-labelledby="q1">
                        <li>
                            <label>
                                <input type="radio" name="q1" value="a">
                                <span>Demand-pull inflation</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q1" value="b">
                                <span>Cost-push inflation</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q1" value="c">
                                <span>Built-in inflation</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q1" value="d">
                                <span>Monetary inflation</span>
                            </label>
                        </li>
                    </ul>
                    <div id="feedback-q1" class="quiz-feedback" style="display: none;" aria-live="polite"></div>
                </div>

                <!-- Question 2 -->
                <div class="quiz-question" id="q2">
                    <p>2. The Consumer Price Index (CPI) measures:</p>
                    <ul class="quiz-options" role="radiogroup" aria-labelledby="q2">
                        <li>
                            <label>
                                <input type="radio" name="q2" value="a">
                                <span>Total economic output of a country</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q2" value="b">
                                <span>Average change in prices paid by urban consumers for a basket of goods</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q2" value="c">
                                <span>The unemployment rate</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q2" value="d">
                                <span>Stock market performance</span>
                            </label>
                        </li>
                    </ul>
                    <div id="feedback-q2" class="quiz-feedback" style="display: none;" aria-live="polite"></div>
                </div>

                <!-- Question 3 -->
                <div class="quiz-question" id="q3">
                    <p>3. According to the Law of Demand, when the price of a good increases (all else equal):</p>
                    <ul class="quiz-options" role="radiogroup" aria-labelledby="q3">
                        <li>
                            <label>
                                <input type="radio" name="q3" value="a">
                                <span>Quantity demanded increases</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q3" value="b">
                                <span>Quantity demanded decreases</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q3" value="c">
                                <span>Quantity supplied decreases</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q3" value="d">
                                <span>The demand curve shifts right</span>
                            </label>
                        </li>
                    </ul>
                    <div id="feedback-q3" class="quiz-feedback" style="display: none;" aria-live="polite"></div>
                </div>

                <!-- Question 4 -->
                <div class="quiz-question" id="q4">
                    <p>4. Market equilibrium occurs when:</p>
                    <ul class="quiz-options" role="radiogroup" aria-labelledby="q4">
                        <li>
                            <label>
                                <input type="radio" name="q4" value="a">
                                <span>Price is at its lowest possible level</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q4" value="b">
                                <span>Government sets the price</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q4" value="c">
                                <span>Quantity demanded equals quantity supplied</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q4" value="d">
                                <span>All consumers can afford the product</span>
                            </label>
                        </li>
                    </ul>
                    <div id="feedback-q4" class="quiz-feedback" style="display: none;" aria-live="polite"></div>
                </div>

                <!-- Question 5 -->
                <div class="quiz-question" id="q5">
                    <p>5. The correct formula for GDP using the expenditure approach is:</p>
                    <ul class="quiz-options" role="radiogroup" aria-labelledby="q5">
                        <li>
                            <label>
                                <input type="radio" name="q5" value="a">
                                <span>GDP = C + I + G + (X - M)</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q5" value="b">
                                <span>GDP = C - I + G - (X + M)</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q5" value="c">
                                <span>GDP = C √ó I √ó G √ó (X / M)</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q5" value="d">
                                <span>GDP = (C + I) - (G + X + M)</span>
                            </label>
                        </li>
                    </ul>
                    <div id="feedback-q5" class="quiz-feedback" style="display: none;" aria-live="polite"></div>
                </div>

                <!-- Question 6 -->
                <div class="quiz-question" id="q6">
                    <p>6. Which component typically makes up the largest portion of U.S. GDP?</p>
                    <ul class="quiz-options" role="radiogroup" aria-labelledby="q6">
                        <li>
                            <label>
                                <input type="radio" name="q6" value="a">
                                <span>Government Spending (G)</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q6" value="b">
                                <span>Investment (I)</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q6" value="c">
                                <span>Consumer Spending (C)</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q6" value="d">
                                <span>Net Exports (X - M)</span>
                            </label>
                        </li>
                    </ul>
                    <div id="feedback-q6" class="quiz-feedback" style="display: none;" aria-live="polite"></div>
                </div>

                <!-- Question 7 -->
                <div class="quiz-question" id="q7">
                    <p>7. When there is a market shortage:</p>
                    <ul class="quiz-options" role="radiogroup" aria-labelledby="q7">
                        <li>
                            <label>
                                <input type="radio" name="q7" value="a">
                                <span>Price is above equilibrium and quantity supplied exceeds quantity demanded</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q7" value="b">
                                <span>Price is below equilibrium and quantity demanded exceeds quantity supplied</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q7" value="c">
                                <span>The market is in equilibrium</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q7" value="d">
                                <span>The supply curve has shifted left</span>
                            </label>
                        </li>
                    </ul>
                    <div id="feedback-q7" class="quiz-feedback" style="display: none;" aria-live="polite"></div>
                </div>

                <!-- Question 8 -->
                <div class="quiz-question" id="q8">
                    <p>8. Real GDP differs from Nominal GDP because Real GDP:</p>
                    <ul class="quiz-options" role="radiogroup" aria-labelledby="q8">
                        <li>
                            <label>
                                <input type="radio" name="q8" value="a">
                                <span>Includes imports but excludes exports</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q8" value="b">
                                <span>Is adjusted for inflation</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q8" value="c">
                                <span>Only measures government spending</span>
                            </label>
                        </li>
                        <li>
                            <label>
                                <input type="radio" name="q8" value="d">
                                <span>Is calculated monthly instead of quarterly</span>
                            </label>
                        </li>
                    </ul>
                    <div id="feedback-q8" class="quiz-feedback" style="display: none;" aria-live="polite"></div>
                </div>

                <div style="margin-top: 1.5rem; display: flex; gap: 1rem; flex-wrap: wrap;">
                    <button class="btn btn-primary" onclick="submitQuiz()">Submit Quiz</button>
                    <button class="btn btn-accent" onclick="resetQuiz()">Reset Quiz</button>
                </div>

                <div id="quiz-results" style="display: none; margin-top: 1.5rem;" aria-live="polite">
                    <div class="result-display" style="background-color: var(--chart-green);">
                        <div class="result-label">Your Score:</div>
                        <div class="result-value" id="quiz-score">0/8</div>
                        <div class="result-label" id="quiz-percentage">0%</div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer role="contentinfo">
        <p><strong>Economic Fundamentals: Interactive Learning Module</strong></p>
        <p>Introduction to Business | Brookdale Community College</p>
        <p style="margin-top: 1rem; font-size: 0.85rem;">
            Data sources: U.S. Bureau of Labor Statistics, Bureau of Economic Analysis, Federal Reserve<br>
            Last updated: December 2025
        </p>
    </footer>

    <!-- JavaScript -->
    <script>
        // ============================================
        // GLOBAL STATE AND INITIALIZATION
        // ============================================

        const completedSections = new Set();
        const totalSections = 4; // inflation, supply-demand, gdp, quiz

        // Quiz answer key
        const quizAnswers = {
            q1: 'b',
            q2: 'b',
            q3: 'b',
            q4: 'c',
            q5: 'a',
            q6: 'c',
            q7: 'b',
            q8: 'b'
        };

        // Quiz explanations
        const quizExplanations = {
            q1: {
                correct: 'Correct! Cost-push inflation occurs when rising production costs (like raw materials, labor, or energy) are passed on to consumers through higher prices.',
                incorrect: 'Incorrect. Cost-push inflation is caused by rising production costs. Demand-pull inflation is caused by excess demand, and built-in inflation is caused by expectations of future price increases.'
            },
            q2: {
                correct: 'Correct! The CPI measures the average change over time in prices paid by urban consumers for a market basket of goods and services.',
                incorrect: 'Incorrect. The CPI specifically measures price changes for consumer goods and services. GDP measures total economic output, not price changes.'
            },
            q3: {
                correct: 'Correct! The Law of Demand states there is an inverse relationship between price and quantity demanded.',
                incorrect: 'Incorrect. The Law of Demand states that when price increases, quantity demanded decreases (inverse relationship).'
            },
            q4: {
                correct: 'Correct! Market equilibrium occurs at the price where quantity demanded exactly equals quantity supplied.',
                incorrect: 'Incorrect. Equilibrium is specifically the point where quantity demanded equals quantity supplied, not about price levels or affordability.'
            },
            q5: {
                correct: 'Correct! GDP = Consumption + Investment + Government Spending + (Exports - Imports).',
                incorrect: 'Incorrect. The correct formula is GDP = C + I + G + (X - M). Imports are subtracted because they represent foreign production.'
            },
            q6: {
                correct: 'Correct! Consumer spending typically accounts for about 68% of U.S. GDP, making it by far the largest component.',
                incorrect: 'Incorrect. Consumer spending (C) is the largest component at approximately 68% of GDP. Investment is about 18%, and government spending about 17%.'
            },
            q7: {
                correct: 'Correct! A shortage occurs when price is below equilibrium, causing quantity demanded to exceed quantity supplied.',
                incorrect: 'Incorrect. A shortage occurs when price is below equilibrium. At this lower price, consumers want more than producers are willing to supply.'
            },
            q8: {
                correct: 'Correct! Real GDP removes the effects of inflation by using constant prices from a base year, showing true changes in production.',
                incorrect: 'Incorrect. The key difference is that Real GDP is adjusted for inflation, while Nominal GDP uses current prices.'
            }
        };

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            drawSDGraph();
            drawGDPPieChart();
            setupNavigation();
            setupScrollSpy();
            setupKeyboardNavigation();
            updateProgress();
        });

        // ============================================
        // NAVIGATION AND PROGRESS TRACKING
        // ============================================

        // Define section order for navigation
        const sectionOrder = ['inflation', 'supply-demand', 'gdp', 'quiz'];
        let currentSectionIndex = 0;

        function setupNavigation() {
            const navLinks = document.querySelectorAll('nav a');
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    // Update current section index based on clicked link
                    const href = this.getAttribute('href').substring(1); // Remove #
                    currentSectionIndex = sectionOrder.indexOf(href);
                    updateActiveNavLink(href);
                });
            });
        }

        function updateActiveNavLink(sectionId) {
            const navLinks = document.querySelectorAll('nav a');
            navLinks.forEach(link => {
                const href = link.getAttribute('href').substring(1);
                if (href === sectionId) {
                    link.setAttribute('aria-current', 'true');
                } else {
                    link.setAttribute('aria-current', 'false');
                }
            });
        }

        function setupScrollSpy() {
            const sections = sectionOrder.map(id => document.getElementById(id)).filter(Boolean);
            const navHeight = document.querySelector('nav')?.offsetHeight || 60;
            
            // Throttle scroll events for performance
            let ticking = false;
            
            function updateOnScroll() {
                const scrollPosition = window.scrollY + navHeight + 100; // Offset for nav height + buffer
                
                let currentSection = sectionOrder[0];
                
                sections.forEach((section, index) => {
                    if (section) {
                        const sectionTop = section.offsetTop;
                        const sectionBottom = sectionTop + section.offsetHeight;
                        
                        // Check if scroll position is within this section
                        if (scrollPosition >= sectionTop && scrollPosition < sectionBottom) {
                            currentSection = sectionOrder[index];
                        }
                        // Also check if we've scrolled past the last section
                        else if (index === sections.length - 1 && scrollPosition >= sectionTop) {
                            currentSection = sectionOrder[index];
                        }
                    }
                });
                
                // Update navigation and current index
                currentSectionIndex = sectionOrder.indexOf(currentSection);
                updateActiveNavLink(currentSection);
                
                ticking = false;
            }
            
            window.addEventListener('scroll', function() {
                if (!ticking) {
                    window.requestAnimationFrame(updateOnScroll);
                    ticking = true;
                }
            });
            
            // Initial check
            updateOnScroll();
        }

        function setupKeyboardNavigation() {
            document.addEventListener('keydown', function(e) {
                // Only respond to arrow keys when not focused on form elements
                const activeElement = document.activeElement;
                const isFormElement = activeElement.tagName === 'INPUT' || 
                                     activeElement.tagName === 'TEXTAREA' || 
                                     activeElement.tagName === 'SELECT' ||
                                     activeElement.getAttribute('role') === 'slider' ||
                                     activeElement.type === 'range';
                
                if (isFormElement) return;
                
                if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {
                    e.preventDefault();
                    navigateToSection(1); // Next section
                } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {
                    e.preventDefault();
                    navigateToSection(-1); // Previous section
                }
            });
        }

        function navigateToSection(direction) {
            const newIndex = currentSectionIndex + direction;
            
            // Bounds checking
            if (newIndex < 0 || newIndex >= sectionOrder.length) {
                // Announce that we're at the boundary
                if (newIndex < 0) {
                    announceToScreenReader('You are at the first section');
                } else {
                    announceToScreenReader('You are at the last section');
                }
                return;
            }
            
            currentSectionIndex = newIndex;
            const targetSectionId = sectionOrder[currentSectionIndex];
            const targetSection = document.getElementById(targetSectionId);
            
            if (targetSection) {
                // Scroll to section
                targetSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                
                // Update navigation
                updateActiveNavLink(targetSectionId);
                
                // Announce section change for screen readers
                const sectionNames = {
                    'inflation': 'Inflation and CPI',
                    'supply-demand': 'Supply and Demand',
                    'gdp': 'Gross Domestic Product',
                    'quiz': 'Knowledge Check'
                };
                announceToScreenReader(`Navigated to ${sectionNames[targetSectionId]} section`);
            }
        }

        function markSectionComplete(sectionId) {
            completedSections.add(sectionId);
            updateProgress();

            // Visual feedback
            const section = document.querySelector(`[data-section="${sectionId}"]`);
            if (section) {
                const btn = section.querySelector('.btn-secondary');
                if (btn) {
                    btn.textContent = '‚úì Section Completed';
                    btn.disabled = true;
                    btn.style.backgroundColor = 'var(--success-color)';
                }
            }

            // Announce to screen readers
            announceToScreenReader(`${sectionId.replace('-', ' ')} section marked as complete`);
        }

        function updateProgress() {
            const progress = (completedSections.size / totalSections) * 100;
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');

            progressBar.style.width = `${progress}%`;
            progressText.textContent = `${Math.round(progress)}%`;

            // Update ARIA
            progressBar.parentElement.setAttribute('aria-valuenow', Math.round(progress));
        }

        // ============================================
        // TAB FUNCTIONALITY
        // ============================================

        function switchTab(tabId) {
            // Update buttons
            const buttons = document.querySelectorAll('.tab-btn');
            buttons.forEach(btn => {
                btn.classList.remove('active');
                btn.setAttribute('aria-selected', 'false');
            });

            const activeBtn = document.getElementById(`${tabId}-btn`);
            if (activeBtn) {
                activeBtn.classList.add('active');
                activeBtn.setAttribute('aria-selected', 'true');
            }

            // Update content
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => {
                content.classList.remove('active');
            });

            const activeContent = document.getElementById(`${tabId}-tab`);
            if (activeContent) {
                activeContent.classList.add('active');
            }
        }

        // ============================================
        // ACCORDION FUNCTIONALITY
        // ============================================

        function toggleAccordion(header) {
            const content = header.nextElementSibling;
            const isExpanded = header.getAttribute('aria-expanded') === 'true';

            // Toggle state
            header.setAttribute('aria-expanded', !isExpanded);

            if (isExpanded) {
                content.classList.remove('open');
            } else {
                content.classList.add('open');
            }
        }

        // ============================================
        // INFLATION CALCULATOR
        // ============================================

        function calculateInflationImpact() {
            const amount = parseFloat(document.getElementById('initial-amount').value);
            const rate = parseFloat(document.getElementById('inflation-rate').value) / 100;
            const years = parseInt(document.getElementById('years').value);

            if (isNaN(amount) || isNaN(rate) || isNaN(years) || amount <= 0 || years <= 0) {
                alert('Please enter valid positive numbers for all fields.');
                return;
            }

            // Future cost calculation: how much would same goods cost after inflation
            const futureCost = amount * Math.pow(1 + rate, years);

            // Purchasing power: what can original amount buy in future dollars
            const purchasingPower = amount / Math.pow(1 + rate, years);

            // Power lost
            const powerLost = amount - purchasingPower;

            // Display results
            document.getElementById('future-cost').textContent = '$' + futureCost.toLocaleString('en-US', {maximumFractionDigits: 2});
            document.getElementById('purchasing-power').textContent = '$' + purchasingPower.toLocaleString('en-US', {maximumFractionDigits: 2});
            document.getElementById('power-lost').textContent = '$' + powerLost.toLocaleString('en-US', {maximumFractionDigits: 2});

            document.getElementById('inflation-result').style.display = 'block';

            announceToScreenReader(`After ${years} years at ${rate * 100}% inflation, goods costing $${amount} today would cost $${futureCost.toFixed(2)}. Your purchasing power would be reduced to $${purchasingPower.toFixed(2)}.`);
        }

        // ============================================
        // SUPPLY AND DEMAND GRAPH
        // ============================================

        function drawSDGraph() {
            const canvas = document.getElementById('sd-canvas');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;

            // Get shift values
            const demandShift = parseInt(document.getElementById('demand-shift')?.value || 0);
            const supplyShift = parseInt(document.getElementById('supply-shift')?.value || 0);

            // Clear canvas
            ctx.fillStyle = '#FFFFFF';
            ctx.fillRect(0, 0, width, height);

            // Graph margins
            const margin = 60;
            const graphWidth = width - 2 * margin;
            const graphHeight = height - 2 * margin;

            // Draw axes
            ctx.strokeStyle = '#333333';
            ctx.lineWidth = 2;

            // Y-axis (Price)
            ctx.beginPath();
            ctx.moveTo(margin, margin);
            ctx.lineTo(margin, height - margin);
            ctx.stroke();

            // X-axis (Quantity)
            ctx.beginPath();
            ctx.moveTo(margin, height - margin);
            ctx.lineTo(width - margin, height - margin);
            ctx.stroke();

            // Axis labels
            ctx.fillStyle = '#333333';
            ctx.font = 'bold 16px Georgia, serif';
            ctx.textAlign = 'center';

            // X-axis label
            ctx.fillText('Quantity', width / 2, height - 15);

            // Y-axis label (rotated)
            ctx.save();
            ctx.translate(20, height / 2);
            ctx.rotate(-Math.PI / 2);
            ctx.fillText('Price', 0, 0);
            ctx.restore();

            // Calculate equilibrium point
            // Base equilibrium at center (50, 50 in graph coordinates)
            // Demand shift increases quantity at each price (moves right)
            // Supply shift increases quantity at each price (moves right)
            const baseEq = 50;
            const eqQuantity = baseEq + (demandShift + supplyShift) / 2;
            const eqPrice = baseEq + (demandShift - supplyShift) / 2;

            // Draw demand curve (downward sloping)
            ctx.strokeStyle = '#336699';
            ctx.lineWidth = 3;
            ctx.beginPath();

            for (let q = 0; q <= 100; q++) {
                // Demand: P = 100 - Q + demandShift
                const price = 100 - q + demandShift;
                const x = margin + (q / 100) * graphWidth;
                const y = height - margin - (price / 100) * graphHeight;

                if (q === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();

            // Demand label
            ctx.fillStyle = '#336699';
            ctx.font = 'bold 14px Georgia, serif';
            ctx.fillText('D', width - margin + 20, margin + 30 - demandShift * 2);

            // Draw supply curve (upward sloping)
            ctx.strokeStyle = '#339966';
            ctx.lineWidth = 3;
            ctx.beginPath();

            for (let q = 0; q <= 100; q++) {
                // Supply: P = Q - supplyShift
                const price = q - supplyShift;
                const x = margin + (q / 100) * graphWidth;
                const y = height - margin - (price / 100) * graphHeight;

                if (q === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();

            // Supply label
            ctx.fillStyle = '#339966';
            ctx.fillText('S', width - margin + 20, height - margin - 30 + supplyShift * 2);

            // Draw equilibrium point
            const eqX = margin + (eqQuantity / 100) * graphWidth;
            const eqY = height - margin - (eqPrice / 100) * graphHeight;

            // Dotted lines to axes
            ctx.strokeStyle = '#999999';
            ctx.lineWidth = 1;
            ctx.setLineDash([5, 5]);

            // Horizontal line to Y-axis
            ctx.beginPath();
            ctx.moveTo(margin, eqY);
            ctx.lineTo(eqX, eqY);
            ctx.stroke();

            // Vertical line to X-axis
            ctx.beginPath();
            ctx.moveTo(eqX, eqY);
            ctx.lineTo(eqX, height - margin);
            ctx.stroke();

            ctx.setLineDash([]);

            // Equilibrium point
            ctx.fillStyle = '#CC6600';
            ctx.beginPath();
            ctx.arc(eqX, eqY, 8, 0, 2 * Math.PI);
            ctx.fill();

            // Equilibrium label
            ctx.fillStyle = '#CC6600';
            ctx.font = 'bold 12px Georgia, serif';
            ctx.fillText('E', eqX + 15, eqY - 10);

            // Update equilibrium display
            document.getElementById('eq-price').textContent = `Price: $${Math.round(eqPrice)}`;
            document.getElementById('eq-quantity').textContent = `Quantity: ${Math.round(eqQuantity)} units`;
        }

        function updateSDGraph() {
            const demandShift = parseInt(document.getElementById('demand-shift').value);
            const supplyShift = parseInt(document.getElementById('supply-shift').value);

            // Update slider value displays
            let demandText = demandShift === 0 ? '0 (Normal)' :
                            demandShift > 0 ? `+${demandShift} (Increase)` : `${demandShift} (Decrease)`;
            let supplyText = supplyShift === 0 ? '0 (Normal)' :
                            supplyShift > 0 ? `+${supplyShift} (Increase)` : `${supplyShift} (Decrease)`;

            document.getElementById('demand-shift-value').textContent = demandText;
            document.getElementById('supply-shift-value').textContent = supplyText;

            drawSDGraph();
        }

        // ============================================
        // GDP PIE CHART
        // ============================================

        function drawGDPPieChart() {
            const canvas = document.getElementById('gdp-pie');
            if (!canvas) return;

            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            const radius = Math.min(width, height) / 2 - 20;

            // GDP component data (approximate percentages)
            const data = [
                { value: 68, color: '#336699', label: 'C' },
                { value: 18, color: '#339966', label: 'I' },
                { value: 17, color: '#CC6633', label: 'G' },
                // Net exports is negative, so we show it as small slice
            ];

            // Adjust for net exports (which is negative ~3%)
            // Total positive components: 68 + 18 + 17 = 103
            // We'll show proportions

            const total = data.reduce((sum, d) => sum + d.value, 0);
            let startAngle = -Math.PI / 2; // Start from top

            // Draw slices
            data.forEach((slice, i) => {
                const sliceAngle = (slice.value / total) * 2 * Math.PI;

                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, startAngle, startAngle + sliceAngle);
                ctx.closePath();

                ctx.fillStyle = slice.color;
                ctx.fill();

                ctx.strokeStyle = '#FFFFFF';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Add label inside slice
                const midAngle = startAngle + sliceAngle / 2;
                const labelX = centerX + Math.cos(midAngle) * radius * 0.6;
                const labelY = centerY + Math.sin(midAngle) * radius * 0.6;

                ctx.fillStyle = '#FFFFFF';
                ctx.font = 'bold 18px Georgia, serif';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(slice.label, labelX, labelY);

                startAngle += sliceAngle;
            });

            // Add center circle for donut effect
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius * 0.3, 0, 2 * Math.PI);
            ctx.fillStyle = '#FFFFFF';
            ctx.fill();

            // Center text
            ctx.fillStyle = '#333333';
            ctx.font = 'bold 14px Georgia, serif';
            ctx.fillText('GDP', centerX, centerY);
        }

        // ============================================
        // GDP CALCULATOR
        // ============================================

        function calculateGDP() {
            const c = parseFloat(document.getElementById('gdp-c').value) || 0;
            const i = parseFloat(document.getElementById('gdp-i').value) || 0;
            const g = parseFloat(document.getElementById('gdp-g').value) || 0;
            const x = parseFloat(document.getElementById('gdp-x').value) || 0;
            const m = parseFloat(document.getElementById('gdp-m').value) || 0;

            const netExports = x - m;
            const gdp = c + i + g + netExports;

            // Display results
            document.getElementById('gdp-total').textContent = '$' + gdp.toLocaleString('en-US') + ' billion';
            document.getElementById('net-exports').textContent = '$' + netExports.toLocaleString('en-US') + ' billion' +
                (netExports < 0 ? ' (Trade Deficit)' : netExports > 0 ? ' (Trade Surplus)' : ' (Balanced)');

            document.getElementById('gdp-result').style.display = 'block';

            announceToScreenReader(`Total GDP calculated as $${gdp.toLocaleString('en-US')} billion with net exports of $${netExports.toLocaleString('en-US')} billion.`);
        }

        // ============================================
        // QUIZ FUNCTIONALITY
        // ============================================

        function submitQuiz() {
            let score = 0;
            const totalQuestions = Object.keys(quizAnswers).length;

            // Check each answer
            Object.keys(quizAnswers).forEach(questionId => {
                const selectedAnswer = document.querySelector(`input[name="${questionId}"]:checked`);
                const feedbackDiv = document.getElementById(`feedback-${questionId}`);
                const correctAnswer = quizAnswers[questionId];

                if (selectedAnswer) {
                    if (selectedAnswer.value === correctAnswer) {
                        score++;
                        feedbackDiv.textContent = quizExplanations[questionId].correct;
                        feedbackDiv.className = 'quiz-feedback correct';
                    } else {
                        feedbackDiv.textContent = quizExplanations[questionId].incorrect;
                        feedbackDiv.className = 'quiz-feedback incorrect';
                    }
                } else {
                    feedbackDiv.textContent = 'Please select an answer.';
                    feedbackDiv.className = 'quiz-feedback neutral';
                }

                feedbackDiv.style.display = 'block';
            });

            // Display results
            const percentage = Math.round((score / totalQuestions) * 100);
            document.getElementById('quiz-score').textContent = `${score}/${totalQuestions}`;
            document.getElementById('quiz-percentage').textContent = `${percentage}%`;
            document.getElementById('quiz-results').style.display = 'block';

            // Mark section complete if passing score (>= 75%)
            if (percentage >= 75) {
                markSectionComplete('quiz');
            }

            announceToScreenReader(`Quiz submitted. You scored ${score} out of ${totalQuestions}, which is ${percentage} percent.`);

            // Scroll to results
            document.getElementById('quiz-results').scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function resetQuiz() {
            // Clear all selections
            const radioButtons = document.querySelectorAll('.quiz-container input[type="radio"]');
            radioButtons.forEach(radio => {
                radio.checked = false;
            });

            // Hide all feedback
            const feedbackDivs = document.querySelectorAll('.quiz-feedback');
            feedbackDivs.forEach(div => {
                div.style.display = 'none';
            });

            // Hide results
            document.getElementById('quiz-results').style.display = 'none';

            announceToScreenReader('Quiz has been reset. All answers cleared.');
        }

        // ============================================
        // ACCESSIBILITY HELPERS
        // ============================================

        function announceToScreenReader(message) {
            const announcement = document.createElement('div');
            announcement.setAttribute('role', 'status');
            announcement.setAttribute('aria-live', 'polite');
            announcement.setAttribute('aria-atomic', 'true');
            announcement.style.position = 'absolute';
            announcement.style.left = '-10000px';
            announcement.style.width = '1px';
            announcement.style.height = '1px';
            announcement.style.overflow = 'hidden';
            announcement.textContent = message;

            document.body.appendChild(announcement);

            setTimeout(() => {
                document.body.removeChild(announcement);
            }, 1000);
        }

        // ============================================
        // TOOLTIP POSITIONING SYSTEM
        // ============================================

        function positionTooltip(term, tooltip) {
            const termRect = term.getBoundingClientRect();
            const tooltipRect = tooltip.getBoundingClientRect();
            const viewportWidth = window.innerWidth;
            const viewportHeight = window.innerHeight;
            const padding = 10; // Padding from viewport edges
            const gap = 8; // Gap between tooltip and term

            // Calculate tooltip dimensions (need to briefly show it to measure)
            tooltip.style.visibility = 'hidden';
            tooltip.style.opacity = '0';
            tooltip.style.display = 'block';
            
            const tooltipWidth = tooltip.offsetWidth;
            const tooltipHeight = tooltip.offsetHeight;

            // Determine vertical position (above or below)
            let top;
            let positionClass = 'position-above';
            
            // Check if there's enough space above
            if (termRect.top - tooltipHeight - gap - padding > 0) {
                // Position above
                top = termRect.top - tooltipHeight - gap;
                positionClass = 'position-above';
            } else {
                // Position below
                top = termRect.bottom + gap;
                positionClass = 'position-below';
            }

            // Determine horizontal position
            // Start by centering on the term
            let left = termRect.left + (termRect.width / 2) - (tooltipWidth / 2);
            
            // Calculate where the arrow should point (center of term)
            let arrowLeft = tooltipWidth / 2;

            // Adjust if tooltip would overflow left edge
            if (left < padding) {
                const adjustment = padding - left;
                left = padding;
                arrowLeft = arrowLeft - adjustment;
            }

            // Adjust if tooltip would overflow right edge
            if (left + tooltipWidth > viewportWidth - padding) {
                const overflow = (left + tooltipWidth) - (viewportWidth - padding);
                left = left - overflow;
                arrowLeft = arrowLeft + overflow;
            }

            // Ensure arrow stays within tooltip bounds
            arrowLeft = Math.max(16, Math.min(tooltipWidth - 16, arrowLeft));

            // Apply positioning
            tooltip.style.top = `${top}px`;
            tooltip.style.left = `${left}px`;
            tooltip.style.setProperty('--arrow-left', `${arrowLeft}px`);
            
            // Update position class for arrow direction
            tooltip.classList.remove('position-above', 'position-below');
            tooltip.classList.add(positionClass);
        }

        function showTooltip(term) {
            const tooltip = term.querySelector('.tooltip');
            if (!tooltip) return;
            
            positionTooltip(term, tooltip);
            tooltip.classList.add('visible');
            tooltip.style.opacity = '1';
            tooltip.style.visibility = 'visible';
        }

        function hideTooltip(term) {
            const tooltip = term.querySelector('.tooltip');
            if (!tooltip) return;
            
            tooltip.classList.remove('visible');
            tooltip.style.opacity = '0';
            tooltip.style.visibility = 'hidden';
        }

        function hideAllTooltips() {
            document.querySelectorAll('.tooltip').forEach(tooltip => {
                tooltip.classList.remove('visible');
                tooltip.style.opacity = '0';
                tooltip.style.visibility = 'hidden';
            });
        }

        // Set up tooltip event listeners
        document.querySelectorAll('.key-term').forEach(term => {
            // Mouse events
            term.addEventListener('mouseenter', function() {
                showTooltip(this);
            });

            term.addEventListener('mouseleave', function() {
                hideTooltip(this);
            });

            // Keyboard events
            term.addEventListener('focus', function() {
                showTooltip(this);
            });

            term.addEventListener('blur', function() {
                hideTooltip(this);
            });

            term.addEventListener('keydown', function(e) {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    const tooltip = this.querySelector('.tooltip');
                    if (tooltip) {
                        const isVisible = tooltip.classList.contains('visible');
                        if (isVisible) {
                            hideTooltip(this);
                        } else {
                            showTooltip(this);
                        }
                    }
                }
                // Allow Escape to close tooltip
                if (e.key === 'Escape') {
                    hideTooltip(this);
                }
            });
        });

        // Close tooltips when clicking elsewhere
        document.addEventListener('click', function(e) {
            if (!e.target.closest('.key-term')) {
                hideAllTooltips();
            }
        });

        // Reposition tooltips on scroll or resize
        let repositionTimeout;
        function handleRepositionEvent() {
            clearTimeout(repositionTimeout);
            repositionTimeout = setTimeout(() => {
                document.querySelectorAll('.key-term').forEach(term => {
                    const tooltip = term.querySelector('.tooltip');
                    if (tooltip && tooltip.classList.contains('visible')) {
                        positionTooltip(term, tooltip);
                    }
                });
            }, 10);
        }

        window.addEventListener('scroll', handleRepositionEvent, true);
        window.addEventListener('resize', handleRepositionEvent);
    </script>
</body>
</html>
