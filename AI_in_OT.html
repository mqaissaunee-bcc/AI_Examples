<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure AI Integration in Operational Technology - Interactive Lesson</title>
    <style>
        /* Web-safe colors and ADA compliant styling */
        :root {
            --primary-color: #003366;
            --secondary-color: #006699;
            --accent-color: #CC6600;
            --background-color: #FFFFFF;
            --text-color: #333333;
            --light-bg: #F0F0F0;
            --success-color: #006600;
            --error-color: #CC0000;
            --focus-color: #FFCC00;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: Arial, Helvetica, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--background-color);
            margin: 0;
            padding: 20px;
            max-width: 900px;
            margin: 0 auto;
        }

        /* Skip link for keyboard navigation */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: var(--primary-color);
            color: #FFFFFF;
            padding: 8px 16px;
            z-index: 100;
            text-decoration: none;
        }

        .skip-link:focus {
            top: 0;
        }

        header {
            background-color: var(--primary-color);
            color: #FFFFFF;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 24px;
        }

        h1 {
            font-size: 1.75rem;
            margin: 0 0 8px 0;
        }

        h2 {
            color: var(--primary-color);
            font-size: 1.5rem;
            border-bottom: 3px solid var(--accent-color);
            padding-bottom: 8px;
            margin-top: 32px;
        }

        h3 {
            color: var(--secondary-color);
            font-size: 1.25rem;
        }

        .lesson-section {
            background-color: var(--light-bg);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 24px;
            border-left: 4px solid var(--secondary-color);
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
        }

        .comparison-table th,
        .comparison-table td {
            border: 2px solid var(--primary-color);
            padding: 12px;
            text-align: left;
        }

        .comparison-table th {
            background-color: var(--primary-color);
            color: #FFFFFF;
        }

        .comparison-table tr:nth-child(even) {
            background-color: var(--light-bg);
        }

        .interactive-box {
            background-color: #FFFFCC;
            border: 2px solid var(--accent-color);
            padding: 16px;
            border-radius: 8px;
            margin: 16px 0;
        }

        button {
            background-color: var(--secondary-color);
            color: #FFFFFF;
            border: none;
            padding: 12px 24px;
            font-size: 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin: 8px 4px 8px 0;
        }

        button:hover,
        button:focus {
            background-color: var(--primary-color);
            outline: 3px solid var(--focus-color);
            outline-offset: 2px;
        }

        button:disabled {
            background-color: #999999;
            cursor: not-allowed;
        }

        .quiz-option {
            display: block;
            width: 100%;
            text-align: left;
            margin: 8px 0;
            background-color: var(--light-bg);
            color: var(--text-color);
            border: 2px solid var(--secondary-color);
        }

        .quiz-option:hover,
        .quiz-option:focus {
            background-color: var(--secondary-color);
            color: #FFFFFF;
        }

        .quiz-option.correct {
            background-color: var(--success-color);
            color: #FFFFFF;
            border-color: var(--success-color);
        }

        .quiz-option.incorrect {
            background-color: var(--error-color);
            color: #FFFFFF;
            border-color: var(--error-color);
        }

        .feedback {
            padding: 12px;
            border-radius: 4px;
            margin-top: 12px;
            font-weight: bold;
        }

        .feedback.success {
            background-color: #CCFFCC;
            color: var(--success-color);
            border: 2px solid var(--success-color);
        }

        .feedback.error {
            background-color: #FFCCCC;
            color: var(--error-color);
            border: 2px solid var(--error-color);
        }

        .principle-card {
            background-color: #FFFFFF;
            border: 2px solid var(--secondary-color);
            border-radius: 8px;
            padding: 16px;
            margin: 12px 0;
        }

        .principle-card h4 {
            color: var(--primary-color);
            margin-top: 0;
        }

        .principle-card ul {
            margin-bottom: 12px;
        }

        .hidden {
            display: none;
        }

        .progress-bar {
            width: 100%;
            height: 24px;
            background-color: var(--light-bg);
            border-radius: 12px;
            overflow: hidden;
            margin: 16px 0;
            border: 2px solid var(--secondary-color);
        }

        .progress-fill {
            height: 100%;
            background-color: var(--success-color);
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #FFFFFF;
            font-weight: bold;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 24px;
            padding-top: 16px;
            border-top: 2px solid var(--light-bg);
        }

        /* High contrast focus states for accessibility */
        a:focus,
        button:focus,
        input:focus {
            outline: 3px solid var(--focus-color);
            outline-offset: 2px;
        }

        .source-note {
            font-size: 0.875rem;
            color: #666666;
            font-style: italic;
            margin-top: 24px;
            padding: 12px;
            background-color: var(--light-bg);
            border-radius: 4px;
        }

        .details-panel {
            margin-top: 12px;
            background-color: #FFFFFF;
            padding: 12px;
            border-radius: 4px;
            border: 1px solid var(--secondary-color);
        }

        .details-panel ul {
            margin: 8px 0;
            padding-left: 20px;
        }

        @media (max-width: 600px) {
            body {
                padding: 12px;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .comparison-table th,
            .comparison-table td {
                padding: 8px;
                font-size: 0.875rem;
            }
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <header>
        <h1>Secure AI Integration in Operational Technology</h1>
        <p>An interactive overview based on joint guidance from CISA and international cybersecurity agencies</p>
    </header>

    <main id="main-content">
        <!-- Progress Bar -->
        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Lesson progress">
            <div class="progress-fill" id="progress-fill" style="width: 0%;">
                <span id="progress-text">0%</span>
            </div>
        </div>

        <!-- Section 1: What is OT? -->
        <section id="section1" class="lesson-section" aria-labelledby="section1-heading">
            <h2 id="section1-heading">Section 1: What is Operational Technology (OT)?</h2>
            
            <p><strong>Operational Technology (OT)</strong> refers to programmable systems or devices that interact with the physical environment. These systems detect or cause direct change through the monitoring and control of devices, processes, and events.</p>
            
            <h3>Examples of OT Systems:</h3>
            <ul>
                <li>Industrial control systems (ICS)</li>
                <li>Building management systems</li>
                <li>Fire control systems</li>
                <li>Physical access control mechanisms</li>
                <li>SCADA (Supervisory Control and Data Acquisition) systems</li>
                <li>Programmable Logic Controllers (PLCs)</li>
            </ul>

            <div class="interactive-box">
                <h3>Quick Check</h3>
                <p id="quiz1-question"><strong>Question:</strong> Which of the following is an example of Operational Technology?</p>
                <div role="group" aria-labelledby="quiz1-question">
                    <button class="quiz-option" onclick="checkAnswer(1, this, false)" aria-describedby="quiz1-feedback">A corporate email server</button>
                    <button class="quiz-option" onclick="checkAnswer(1, this, true)" aria-describedby="quiz1-feedback">A water treatment plant control system</button>
                    <button class="quiz-option" onclick="checkAnswer(1, this, false)" aria-describedby="quiz1-feedback">A customer database</button>
                    <button class="quiz-option" onclick="checkAnswer(1, this, false)" aria-describedby="quiz1-feedback">An HR management application</button>
                </div>
                <div id="quiz1-feedback" class="feedback hidden" role="alert" aria-live="polite"></div>
            </div>

            <div class="nav-buttons">
                <span></span>
                <button onclick="showSection(2)">Next: OT vs IT →</button>
            </div>
        </section>

        <!-- Section 2: OT vs IT -->
        <section id="section2" class="lesson-section hidden" aria-labelledby="section2-heading">
            <h2 id="section2-heading">Section 2: How OT Differs from Information Technology (IT)</h2>
            
            <p>While both OT and IT involve computer systems, they serve fundamentally different purposes and have distinct priorities.</p>

            <table class="comparison-table" aria-describedby="table-desc">
                <caption id="table-desc" class="hidden">Comparison of Operational Technology and Information Technology characteristics</caption>
                <thead>
                    <tr>
                        <th scope="col">Characteristic</th>
                        <th scope="col">Operational Technology (OT)</th>
                        <th scope="col">Information Technology (IT)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <th scope="row">Primary Purpose</th>
                        <td>Controls physical processes and equipment</td>
                        <td>Manages data and information flow</td>
                    </tr>
                    <tr>
                        <th scope="row">Top Priority</th>
                        <td>Safety and availability</td>
                        <td>Confidentiality and data integrity</td>
                    </tr>
                    <tr>
                        <th scope="row">Environment</th>
                        <td>Industrial plants, utilities, manufacturing</td>
                        <td>Offices, data centers, cloud</td>
                    </tr>
                    <tr>
                        <th scope="row">Update Frequency</th>
                        <td>Infrequent (systems run for decades)</td>
                        <td>Regular patches and updates</td>
                    </tr>
                    <tr>
                        <th scope="row">Failure Impact</th>
                        <td>Physical harm, environmental damage</td>
                        <td>Data loss, business disruption</td>
                    </tr>
                </tbody>
            </table>

            <div class="interactive-box">
                <h3>Key Insight</h3>
                <p>OT systems control physical processes that can directly affect human safety. A failure in an OT system at a power plant or water treatment facility could have life-threatening consequences, which is why <strong>safety and availability</strong> are the top priorities in OT environments.</p>
            </div>

            <div class="nav-buttons">
                <button onclick="showSection(1)">← Previous</button>
                <button onclick="showSection(3)">Next: OT-IT Relationship →</button>
            </div>
        </section>

        <!-- Section 3: OT-IT Relationship -->
        <section id="section3" class="lesson-section hidden" aria-labelledby="section3-heading">
            <h2 id="section3-heading">Section 3: The Relationship Between OT and IT</h2>
            
            <p>The <strong>Purdue Model</strong> is a widely accepted framework for understanding the hierarchical relationship between OT and IT systems in critical infrastructure.</p>

            <h3>The Purdue Model Levels:</h3>
            
            <div class="principle-card">
                <h4>Levels 0-3: OT Layers</h4>
                <p><strong>Level 0 (Field Devices):</strong> Sensors, actuators, and devices that interact with physical processes</p>
                <p><strong>Level 1 (Local Controllers):</strong> PLCs, RTUs that provide automated regulation</p>
                <p><strong>Level 2 (Local Supervisory):</strong> SCADA systems, HMIs for process oversight</p>
                <p><strong>Level 3 (Site-Wide Supervisory):</strong> Manufacturing execution systems, historians</p>
            </div>

            <div class="principle-card">
                <h4>Levels 4-5: IT/Business Layers</h4>
                <p>Enterprise and business network systems that manage corporate processes and decisions, including OT data analysis and autonomous defense systems.</p>
            </div>

            <div class="interactive-box">
                <h3>Convergence Challenge</h3>
                <p>Modern critical infrastructure increasingly connects OT and IT systems to gain efficiency benefits. However, this convergence also introduces cybersecurity risks, as vulnerabilities in IT systems could potentially impact OT operations.</p>
                
                <button onclick="toggleDetails('convergence-details')" aria-expanded="false" aria-controls="convergence-details">
                    Show Example
                </button>
                <div id="convergence-details" class="hidden details-panel">
                    <p><strong>Example:</strong> AI models for predictive maintenance might analyze data from OT sensors (Level 0-3) but run on IT systems (Levels 4-5). This creates connection pathways that must be carefully secured.</p>
                </div>
            </div>

            <div class="nav-buttons">
                <button onclick="showSection(2)">← Previous</button>
                <button onclick="showSection(4)">Next: AI Integration Principles →</button>
            </div>
        </section>

        <!-- Section 4: AI Integration Principles - ENHANCED -->
        <section id="section4" class="lesson-section hidden" aria-labelledby="section4-heading">
            <h2 id="section4-heading">Section 4: Principles for Secure AI Integration in OT</h2>
            
            <p>International cybersecurity agencies have established four key principles for safely integrating AI into OT environments:</p>

            <div class="principle-card">
                <h4>Principle 1: Understand AI</h4>
                <p><strong>Core Focus:</strong> Understand the unique risks and potential impacts of AI integration into OT environments.</p>
                
                <p><strong>Key Actions:</strong></p>
                <ul>
                    <li><strong>Recognize AI-Specific Risks:</strong> AI systems face cybersecurity risks (prompt injection, data manipulation), data quality issues, model drift over time, and lack of explainability in decision-making.</li>
                    <li><strong>Understand the Secure AI Development Lifecycle:</strong> Ensure AI systems follow secure design, secure procurement, secure deployment, and secure operation/maintenance practices.</li>
                    <li><strong>Educate Personnel:</strong> Train OT teams on AI fundamentals and threat modeling. Address dependency risks and skill erosion that can occur when personnel rely too heavily on AI automation.</li>
                </ul>
                
                <button onclick="toggleDetails('p1-details')" aria-expanded="false" aria-controls="p1-details">
                    Show AI Risks Table
                </button>
                <div id="p1-details" class="hidden details-panel">
                    <table class="comparison-table" style="font-size: 0.9rem;">
                        <thead>
                            <tr>
                                <th scope="col">Risk Type</th>
                                <th scope="col">OT Impact</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Cybersecurity Risks</td>
                                <td>System availability loss, safety risks, cascading compromise</td>
                            </tr>
                            <tr>
                                <td>Data Quality Issues</td>
                                <td>Reduced OT safety from poor AI training data</td>
                            </tr>
                            <tr>
                                <td>AI Model Drift</td>
                                <td>Decreased accuracy over time, reduced productivity</td>
                            </tr>
                            <tr>
                                <td>Lack of Explainability</td>
                                <td>Difficult troubleshooting, increased recovery time</td>
                            </tr>
                            <tr>
                                <td>AI Dependency</td>
                                <td>Operators may lose manual skills needed during AI failures</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="principle-card">
                <h4>Principle 2: Consider AI Use in the OT Domain</h4>
                <p><strong>Core Focus:</strong> Carefully evaluate whether AI is the appropriate solution for your specific OT needs before deployment.</p>
                
                <p><strong>Key Actions:</strong></p>
                <ul>
                    <li><strong>Assess the Business Case:</strong> Evaluate if AI technologies are the most appropriate solution compared to other technologies. Consider security, performance, complexity, cost, and effect on OT safety.</li>
                    <li><strong>Manage OT Data Security:</strong> Address data assurance (where is data stored?), data sovereignty (which country's laws apply?), and protection of sensitive engineering configuration data.</li>
                    <li><strong>Understand Vendor Roles:</strong> OT vendors increasingly embed AI in devices. Ask about internet connectivity requirements and whether AI features can be disabled.</li>
                    <li><strong>Evaluate Integration Challenges:</strong> Consider increased system complexity, new attack surfaces, cloud security risks, and interoperability issues with existing OT protocols.</li>
                </ul>
                
                <button onclick="toggleDetails('p2-details')" aria-expanded="false" aria-controls="p2-details">
                    Show Example Use Case
                </button>
                <div id="p2-details" class="hidden details-panel">
                    <p><strong>Example: Predictive Maintenance for Industrial Generator</strong></p>
                    <p><em>Problem:</em> High downtime and maintenance costs from generator failures</p>
                    <p><em>Goal:</em> AI-powered solution to predict failures 30 days in advance</p>
                    <p><em>Risk:</em> If AI incorrectly predicts, equipment could be replaced prematurely</p>
                    <p><em>Requirements:</em> Historical sensor data, real-time processing capability, reliable failure detection</p>
                    <p><em>Success Metrics:</em> 25% reduction in downtime, 15% decrease in maintenance costs</p>
                </div>
            </div>

            <div class="principle-card">
                <h4>Principle 3: Establish AI Governance and Assurance Frameworks</h4>
                <p><strong>Core Focus:</strong> Implement robust governance structures with clear accountability for AI systems in OT environments.</p>
                
                <p><strong>Key Stakeholders:</strong></p>
                <ul>
                    <li><strong>Leadership:</strong> CEO and CISO commitment is essential for establishing a robust AI governance framework and considering AI security risks.</li>
                    <li><strong>OT/IT Subject Matter Experts:</strong> Provide valuable insights into the OT environment and help identify potential risks and challenges with AI integration.</li>
                    <li><strong>Cybersecurity Teams:</strong> Develop policies to protect sensitive OT data, identify vulnerabilities, and provide mitigation recommendations.</li>
                </ul>
                
                <p><strong>Key Actions:</strong></p>
                <ul>
                    <li><strong>Integrate AI into Security Frameworks:</strong> Add AI considerations to existing cybersecurity strategies including encryption, access controls, and intrusion detection.</li>
                    <li><strong>Conduct Thorough Testing:</strong> Test AI systems on dedicated infrastructure before production deployment. Use low-fidelity testing early, then progress to more realistic non-production systems.</li>
                    <li><strong>Navigate Regulatory Compliance:</strong> Current AI standards are evolving and primarily aligned with IT, not OT. Maintain audit trails and consider safety certifications.</li>
                </ul>
                
                <button onclick="toggleDetails('p3-details')" aria-expanded="false" aria-controls="p3-details">
                    Show Governance Components
                </button>
                <div id="p3-details" class="hidden details-panel">
                    <p><strong>Additional Governance Components:</strong></p>
                    <ul>
                        <li>Enforce strict data governance policies (encryption, access controls, user behavior analytics)</li>
                        <li>Establish clear roles and responsibilities for AI system development, deployment, and operations</li>
                        <li>Implement regular audits and compliance testing</li>
                        <li>Continuously validate AI system performance against safety thresholds</li>
                        <li>Define thresholds for defaulting back to non-AI systems</li>
                    </ul>
                </div>
            </div>

            <div class="principle-card">
                <h4>Principle 4: Embed Oversight and Failsafe Practices</h4>
                <p><strong>Core Focus:</strong> Ensure humans remain in control and AI systems can fail safely without disrupting critical operations.</p>
                
                <p><strong>Human-in-the-Loop Benefits:</strong></p>
                <ul>
                    <li><strong>Improved Safety:</strong> Operators provide context and make informed decisions when interacting with AI-driven systems.</li>
                    <li><strong>Enhanced Reliability:</strong> Human oversight helps detect and correct potential errors or anomalies in AI performance.</li>
                    <li><strong>Increased Trust:</strong> Organizations build trust in AI systems through transparent decision-making processes involving operators.</li>
                </ul>
                
                <p><strong>Key Actions:</strong></p>
                <ul>
                    <li><strong>Establish Monitoring Mechanisms:</strong> Implement real-time dashboards and anomaly detection to track AI system performance. Integrate these into existing HMI views.</li>
                    <li><strong>Implement Behavioral Analytics:</strong> Establish safe operating bounds for OT devices that detect AI drift, model changes, or security risks.</li>
                    <li><strong>Use Push-Based Architectures:</strong> Move data summaries out of OT without granting persistent inbound access to the OT network.</li>
                    <li><strong>Embed Failsafe Mechanisms:</strong> Ensure AI systems can fail gracefully. Define how to bypass or replace AI systems and incorporate these into incident response processes.</li>
                </ul>
                
                <button onclick="toggleDetails('p4-details')" aria-expanded="false" aria-controls="p4-details">
                    Show Monitoring Example
                </button>
                <div id="p4-details" class="hidden details-panel">
                    <p><strong>Example: Monitoring a Predictive Maintenance AI System</strong></p>
                    <ul>
                        <li><strong>AI System Output:</strong> Predictive maintenance recommendations for equipment downtime</li>
                        <li><strong>Anomaly Detection:</strong> Statistical process control to detect outliers in predicted values</li>
                        <li><strong>Monitoring Tools:</strong> Real-time dashboards integrated into existing HMI views</li>
                        <li><strong>Human Validation:</strong> Operators use alternative sensors (temperature, vibration) to validate AI output</li>
                        <li><strong>Failsafe:</strong> If AI output falls below performance threshold, system reverts to traditional automation</li>
                    </ul>
                </div>
            </div>

            <div class="interactive-box">
                <h3>Critical Warning</h3>
                <p style="color: var(--error-color);"><strong>Important:</strong> AI systems such as Large Language Models (LLMs) should almost certainly NOT be used to make safety decisions in OT environments. AI can hallucinate, fabricate plausible but false information, and provide operators with incorrect data for decision-making. This poses risks of unsafe operating conditions, equipment damage, and production halts.</p>
            </div>

            <div class="nav-buttons">
                <button onclick="showSection(3)">← Previous</button>
                <button onclick="showSection(5)">Next: Final Quiz →</button>
            </div>
        </section>

        <!-- Section 5: Final Quiz -->
        <section id="section5" class="lesson-section hidden" aria-labelledby="section5-heading">
            <h2 id="section5-heading">Section 5: Knowledge Check</h2>
            
            <p>Test your understanding of secure AI integration in OT environments.</p>

            <div class="interactive-box">
                <p id="quiz2-question"><strong>Question 1:</strong> What is the TOP priority in OT environments?</p>
                <div role="group" aria-labelledby="quiz2-question">
                    <button class="quiz-option" onclick="checkFinalQuiz(2, this, false)">Maximizing data processing speed</button>
                    <button class="quiz-option" onclick="checkFinalQuiz(2, this, true)">Safety and availability</button>
                    <button class="quiz-option" onclick="checkFinalQuiz(2, this, false)">Reducing IT costs</button>
                </div>
                <div id="quiz2-feedback" class="feedback hidden" role="alert" aria-live="polite"></div>
            </div>

            <div class="interactive-box">
                <p id="quiz3-question"><strong>Question 2:</strong> Should LLMs be used to make safety-critical decisions in OT environments?</p>
                <div role="group" aria-labelledby="quiz3-question">
                    <button class="quiz-option" onclick="checkFinalQuiz(3, this, false)">Yes, they are highly reliable</button>
                    <button class="quiz-option" onclick="checkFinalQuiz(3, this, true)">No, they can provide incorrect information</button>
                    <button class="quiz-option" onclick="checkFinalQuiz(3, this, false)">Only with minimal oversight</button>
                </div>
                <div id="quiz3-feedback" class="feedback hidden" role="alert" aria-live="polite"></div>
            </div>

            <div class="interactive-box">
                <p id="quiz4-question"><strong>Question 3:</strong> Which principle emphasizes maintaining human-in-the-loop oversight?</p>
                <div role="group" aria-labelledby="quiz4-question">
                    <button class="quiz-option" onclick="checkFinalQuiz(4, this, false)">Principle 1: Understand AI</button>
                    <button class="quiz-option" onclick="checkFinalQuiz(4, this, false)">Principle 2: Consider AI Use</button>
                    <button class="quiz-option" onclick="checkFinalQuiz(4, this, true)">Principle 4: Embed Oversight and Failsafe Practices</button>
                </div>
                <div id="quiz4-feedback" class="feedback hidden" role="alert" aria-live="polite"></div>
            </div>

            <div id="completion-message" class="hidden" style="text-align: center; padding: 24px; background-color: #CCFFCC; border-radius: 8px; margin-top: 24px;">
                <h3 style="color: var(--success-color);">Lesson Complete!</h3>
                <p>You have completed the overview of Secure AI Integration in Operational Technology.</p>
                <button onclick="resetLesson()">Restart Lesson</button>
            </div>

            <div class="nav-buttons">
                <button onclick="showSection(4)">← Previous</button>
                <button id="complete-btn" onclick="completeLesson()" disabled>Complete Lesson</button>
            </div>
        </section>

        <div class="source-note">
            <p><strong>Source:</strong> This lesson is based on "Principles for the Secure Integration of Artificial Intelligence in Operational Technology" (December 3, 2025) published jointly by CISA, NSA, FBI, and international cybersecurity agencies.</p>
        </div>
    </main>

    <script>
        // Track progress
        let sectionsCompleted = new Set();
        let quizAnswers = {1: false, 2: false, 3: false, 4: false};
        const totalSections = 5;

        function showSection(sectionNum) {
            // Hide all sections
            for (let i = 1; i <= totalSections; i++) {
                document.getElementById('section' + i).classList.add('hidden');
            }
            
            // Show requested section
            document.getElementById('section' + sectionNum).classList.remove('hidden');
            
            // Mark section as completed
            sectionsCompleted.add(sectionNum);
            
            // Update progress bar
            updateProgress();
            
            // Scroll to top of section
            document.getElementById('section' + sectionNum).scrollIntoView({behavior: 'smooth'});
            
            // Set focus to section heading for screen readers
            document.getElementById('section' + sectionNum + '-heading').focus();
        }

        function updateProgress() {
            const progress = Math.round((sectionsCompleted.size / totalSections) * 100);
            const progressFill = document.getElementById('progress-fill');
            const progressText = document.getElementById('progress-text');
            
            progressFill.style.width = progress + '%';
            progressText.textContent = progress + '%';
            
            // Update ARIA values
            progressFill.parentElement.setAttribute('aria-valuenow', progress);
        }

        function checkAnswer(quizNum, button, isCorrect) {
            const feedback = document.getElementById('quiz' + quizNum + '-feedback');
            const buttons = button.parentElement.querySelectorAll('.quiz-option');
            
            // Disable all buttons
            buttons.forEach(btn => btn.disabled = true);
            
            // Mark the selected button
            if (isCorrect) {
                button.classList.add('correct');
                feedback.textContent = '✓ Correct! OT systems like water treatment plants directly control physical processes.';
                feedback.className = 'feedback success';
                quizAnswers[quizNum] = true;
            } else {
                button.classList.add('incorrect');
                feedback.textContent = '✗ Incorrect. That is an IT system. OT systems control physical processes.';
                feedback.className = 'feedback error';
                // Show correct answer
                buttons.forEach(btn => {
                    if (btn.textContent.includes('water treatment')) {
                        btn.classList.add('correct');
                    }
                });
            }
            
            feedback.classList.remove('hidden');
        }

        function checkFinalQuiz(quizNum, button, isCorrect) {
            const feedback = document.getElementById('quiz' + quizNum + '-feedback');
            const buttons = button.parentElement.querySelectorAll('.quiz-option');
            
            // Disable all buttons in this quiz
            buttons.forEach(btn => btn.disabled = true);
            
            const feedbackMessages = {
                2: {
                    correct: '✓ Correct! Safety and availability are the top priorities in OT environments because failures can cause physical harm.',
                    incorrect: '✗ Incorrect. Safety and availability are the top priorities in OT environments.'
                },
                3: {
                    correct: '✓ Correct! LLMs can hallucinate and provide incorrect information, making them unsuitable for safety-critical decisions.',
                    incorrect: '✗ Incorrect. LLMs should NOT be used for safety-critical decisions due to their potential to provide incorrect information.'
                },
                4: {
                    correct: '✓ Correct! Principle 4 specifically addresses oversight, safety, and failsafe mechanisms.',
                    incorrect: '✗ Incorrect. Principle 4: Embed Oversight and Failsafe Practices emphasizes human-in-the-loop oversight.'
                }
            };
            
            if (isCorrect) {
                button.classList.add('correct');
                feedback.textContent = feedbackMessages[quizNum].correct;
                feedback.className = 'feedback success';
                quizAnswers[quizNum] = true;
            } else {
                button.classList.add('incorrect');
                feedback.textContent = feedbackMessages[quizNum].incorrect;
                feedback.className = 'feedback error';
            }
            
            feedback.classList.remove('hidden');
            
            // Check if all final quiz questions answered
            if (quizAnswers[2] !== undefined && quizAnswers[3] !== undefined && quizAnswers[4] !== undefined) {
                document.getElementById('complete-btn').disabled = false;
            }
        }

        function toggleDetails(elementId) {
            const element = document.getElementById(elementId);
            const button = element.previousElementSibling;
            
            if (element.classList.contains('hidden')) {
                element.classList.remove('hidden');
                button.textContent = button.textContent.replace('Show', 'Hide');
                button.setAttribute('aria-expanded', 'true');
            } else {
                element.classList.add('hidden');
                button.textContent = button.textContent.replace('Hide', 'Show');
                button.setAttribute('aria-expanded', 'false');
            }
        }

        function completeLesson() {
            sectionsCompleted.add(5);
            updateProgress();
            document.getElementById('completion-message').classList.remove('hidden');
            document.getElementById('complete-btn').classList.add('hidden');
        }

        function resetLesson() {
            // Reset all state
            sectionsCompleted = new Set();
            quizAnswers = {1: false, 2: false, 3: false, 4: false};
            
            // Reset all quiz buttons
            document.querySelectorAll('.quiz-option').forEach(btn => {
                btn.disabled = false;
                btn.classList.remove('correct', 'incorrect');
            });
            
            // Hide all feedback
            document.querySelectorAll('.feedback').forEach(fb => {
                fb.classList.add('hidden');
            });
            
            // Reset completion message and button
            document.getElementById('completion-message').classList.add('hidden');
            document.getElementById('complete-btn').classList.remove('hidden');
            document.getElementById('complete-btn').disabled = true;
            
            // Reset all details panels
            document.querySelectorAll('.details-panel').forEach(panel => {
                panel.classList.add('hidden');
            });
            
            // Reset all toggle buttons
            document.querySelectorAll('[aria-expanded]').forEach(btn => {
                btn.setAttribute('aria-expanded', 'false');
                btn.textContent = btn.textContent.replace('Hide', 'Show');
            });
            
            // Show first section
            showSection(1);
        }

        // Initialize - mark first section as viewed
        sectionsCompleted.add(1);
        updateProgress();
    </script>
</body>
</html>