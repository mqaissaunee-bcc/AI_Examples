<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scientific & Engineering Notation for Electronics</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .lesson-nav {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .nav-btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .nav-btn.active {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
        }

        .lesson-section {
            display: none;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .lesson-section.active {
            display: block;
        }

        .lesson-section h2 {
            color: #ffeb3b;
            margin-bottom: 20px;
            font-size: 2em;
            text-align: center;
        }

        .lesson-section h3 {
            color: #81c784;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .lesson-section h4 {
            color: #fff;
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .example-box {
            background: rgba(76, 175, 80, 0.2);
            border-left: 4px solid #4CAF50;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .practice-box {
            background: rgba(33, 150, 243, 0.2);
            border-left: 4px solid #2196F3;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .important-note {
            background: rgba(255, 193, 7, 0.2);
            border-left: 4px solid #FFC107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
            color: #fff;
        }

        .warning-box {
            background: rgba(244, 67, 54, 0.2);
            border-left: 4px solid #f44336;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .quiz-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
        }

        .quiz-question {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .quiz-btn {
            background: linear-gradient(45deg, #2196F3, #1976D2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
            transition: all 0.3s ease;
        }

        .quiz-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .quiz-btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }

        .calculator-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
        }

        .calculator-input, .calculator-select {
            width: 100%;
            padding: 12px;
            margin: 8px 0;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            font-size: 16px;
        }

        .calculator-output {
            background: rgba(76, 175, 80, 0.3);
            border: 2px solid #4CAF50;
            border-radius: 5px;
            padding: 15px;
            margin: 15px 0;
            min-height: 60px;
            color: #fff;
        }

        .progress-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #4CAF50, #81C784);
            transition: width 0.3s ease;
        }

        /* Worksheet-specific styles */
        .worksheet-container {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            border-radius: 10px;
            padding: 30px;
            margin: 20px 0;
        }

        .worksheet-header {
            background: rgba(0, 0, 0, 0.1);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .worksheet-problem {
            background: rgba(0, 0, 0, 0.05);
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
        }

        .worksheet-problem h4 {
            color: #2196F3;
            margin-bottom: 10px;
        }

        .worksheet-input {
            padding: 8px 12px;
            border: 2px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            width: 200px;
            margin: 5px;
        }

        .worksheet-input.correct {
            border-color: #4CAF50;
            background-color: #f1f8e9;
        }

        .worksheet-input.incorrect {
            border-color: #f44336;
            background-color: #ffebee;
        }

        .worksheet-solution {
            display: none;
            background: rgba(76, 175, 80, 0.1);
            border-left: 4px solid #4CAF50;
            padding: 15px;
            margin-top: 10px;
            color: #2e7d32;
        }

        .guidance-box {
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid;
        }

        .guidance-scientific {
            background: rgba(255, 235, 59, 0.1);
            border-color: #FFC107;
            color: #333;
        }

        .guidance-engineering {
            background: rgba(33, 150, 243, 0.1);
            border-color: #2196F3;
            color: #333;
        }

        .guidance-sigfigs {
            background: rgba(244, 67, 54, 0.1);
            border-color: #f44336;
            color: #333;
        }

        .guidance-electronics {
            background: rgba(76, 175, 80, 0.1);
            border-color: #4CAF50;
            color: #333;
        }

        .score-display {
            background: rgba(33, 150, 243, 0.2);
            border: 2px solid #2196F3;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
        }

        @media print {
            body {
                background: white;
                color: black;
            }
            .lesson-nav, .worksheet-controls {
                display: none;
            }
            .worksheet-container {
                background: white;
                box-shadow: none;
            }
        }

        @media (max-width: 768px) {
            .lesson-nav {
                flex-direction: column;
            }
            .nav-btn {
                width: 100%;
                margin: 5px 0;
            }
            .container {
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>⚡ Scientific & Engineering Notation for Electronics</h1>
            <p>Master essential notation systems for electronics and engineering</p>
        </div>

        <div class="progress-container">
            <h3>Lesson Progress</h3>
            <div class="progress-bar">
                <div class="progress-fill" id="progressBar" style="width: 0%"></div>
            </div>
            <p id="progressText">Ready to begin • Time: <span id="timer">00:00</span></p>
        </div>

        <nav class="lesson-nav">
            <button class="nav-btn active" onclick="showSection('intro')">📚 Introduction</button>
            <button class="nav-btn" onclick="showSection('scientific')">🔬 Scientific Notation</button>
            <button class="nav-btn" onclick="showSection('engineering')">⚙️ Engineering Notation</button>
            <button class="nav-btn" onclick="showSection('sigfigs')">🎯 Significant Figures</button>
            <button class="nav-btn" onclick="showSection('applications')">💡 Applications</button>
            <button class="nav-btn" onclick="showSection('practice')">🛠️ Practice Tools</button>
            <button class="nav-btn" onclick="showSection('worksheets')">📄 Interactive Worksheets</button>
            <button class="nav-btn" onclick="showSection('assessment1')">📝 Quiz 1</button>
            <button class="nav-btn" onclick="showSection('assessment2')">📝 Quiz 2</button>
            <button class="nav-btn" onclick="showSection('final')">🏆 Final Assessment</button>
        </nav>

        <!-- Introduction Section -->
        <section id="intro" class="lesson-section active">
            <h2>📚 Welcome to Electronics Notation</h2>
            
            <div class="important-note">
                <h3>🎯 Learning Objectives</h3>
                <p>By the end of this lesson, you will be able to:</p>
                <ul>
                    <li>Convert between standard, scientific, and engineering notation</li>
                    <li>Apply proper significant figures in calculations</li>
                    <li>Read and interpret component values in electronics</li>
                    <li>Choose the appropriate notation system for different situations</li>
                    <li>Perform calculations with correct precision and units</li>
                </ul>
            </div>

            <h3>Why Learn Different Notation Systems?</h3>
            <p>In electronics and engineering, we work with an enormous range of values - from nanoseconds to gigahertz, from microamps to kilovolts. Different notation systems help us:</p>
            
            <div class="example-box">
                <h4>🔬 Scientific Notation</h4>
                <p><strong>Best for:</strong> Calculations, very large or small numbers, precise scientific work</p>
                <p><strong>Example:</strong> 0.000047 = 4.7 × 10⁻⁵</p>
                <p><strong>Why:</strong> Maintains precision, works well with calculators, standard in scientific literature</p>
            </div>

            <div class="practice-box">
                <h4>⚙️ Engineering Notation</h4>
                <p><strong>Best for:</strong> Component values, industry communication, practical applications</p>
                <p><strong>Example:</strong> 0.000047 = 47 × 10⁻⁶ = 47 μ (micro)</p>
                <p><strong>Why:</strong> Aligns with metric prefixes, easier mental math, industry standard</p>
            </div>

            <div class="warning-box">
                <h4>⚠️ Common Student Mistakes</h4>
                <ul>
                    <li>Mixing notation systems in the same calculation</li>
                    <li>Ignoring significant figures (claiming false precision)</li>
                    <li>Using scientific notation when engineering notation is more appropriate</li>
                    <li>Forgetting to check if answers make physical sense</li>
                </ul>
            </div>

            <h3>Real-World Context</h3>
            <p>Consider these actual values from electronics:</p>
            <ul>
                <li><strong>CPU Clock:</strong> 3.2 GHz = 3.2 × 10⁹ Hz</li>
                <li><strong>Resistor:</strong> 4.7 kΩ = 4.7 × 10³ Ω</li>
                <li><strong>Capacitor:</strong> 47 μF = 47 × 10⁻⁶ F</li>
                <li><strong>Current:</strong> 25 mA = 25 × 10⁻³ A</li>
            </ul>
            
            <p>Each notation system serves specific purposes in professional electronics work.</p>
        </section>

        <!-- Scientific Notation Section -->
        <section id="scientific" class="lesson-section">
            <h2>🔬 Scientific Notation</h2>
            
            <h3>Format: a × 10ⁿ where 1 ≤ a < 10</h3>
            
            <div class="example-box">
                <h4>Key Rules</h4>
                <ul>
                    <li>The coefficient (a) must be between 1 and 10</li>
                    <li>Only one digit appears before the decimal point</li>
                    <li>The exponent (n) can be positive, negative, or zero</li>
                    <li>Maintain the same number of significant figures</li>
                </ul>
            </div>

            <h3>Conversion Process</h3>
            
            <h4>Large Numbers (Moving decimal left)</h4>
            <div class="practice-box">
                <p><strong>Example:</strong> Convert 47,000 to scientific notation</p>
                <p><strong>Step 1:</strong> Place decimal after first digit: 4.7000</p>
                <p><strong>Step 2:</strong> Count places moved: 4 places left</p>
                <p><strong>Step 3:</strong> Exponent is positive: +4</p>
                <p><strong>Result:</strong> 4.7 × 10⁴ (maintaining 2 significant figures)</p>
            </div>

            <h4>Small Numbers (Moving decimal right)</h4>
            <div class="practice-box">
                <p><strong>Example:</strong> Convert 0.000047 to scientific notation</p>
                <p><strong>Step 1:</strong> Place decimal after first non-zero digit: 4.7</p>
                <p><strong>Step 2:</strong> Count places moved: 5 places right</p>
                <p><strong>Step 3:</strong> Exponent is negative: -5</p>
                <p><strong>Result:</strong> 4.7 × 10⁻⁵</p>
            </div>

            <h3>When to Use Scientific Notation</h3>
            <ul>
                <li><strong>Calculations:</strong> Multiplying/dividing very large or small numbers</li>
                <li><strong>Data Analysis:</strong> Recording precise measurements</li>
                <li><strong>Research:</strong> Scientific papers and technical documentation</li>
                <li><strong>Calculator Input:</strong> Most scientific calculators use this format</li>
            </ul>

            <div class="important-note">
                <h4>🎯 Practice Tip</h4>
                <p>Scientific notation is ideal when you need to maintain exact significant figures and when working with calculations that span many orders of magnitude.</p>
            </div>
        </section>

        <!-- Engineering Notation Section -->
        <section id="engineering" class="lesson-section">
            <h2>⚙️ Engineering Notation</h2>
            
            <h3>Format: a × 10ⁿ where n is a multiple of 3</h3>
            
            <div class="example-box">
                <h4>Key Rules</h4>
                <ul>
                    <li>Exponent must be ..., -12, -9, -6, -3, 0, 3, 6, 9, 12, ...</li>
                    <li>Coefficient can be 1 to 999.999...</li>
                    <li>Aligns with metric prefixes (kilo, mega, micro, nano, etc.)</li>
                    <li>Makes mental math easier</li>
                </ul>
            </div>

            <h3>Metric Prefixes in Electronics</h3>
            <div class="practice-box">
                <table style="width: 100%; color: #333;">
                    <tr style="background: rgba(0,0,0,0.1);">
                        <th>Prefix</th><th>Symbol</th><th>Power of 10</th><th>Common Use</th>
                    </tr>
                    <tr><td>Tera</td><td>T</td><td>10¹²</td><td>Data storage</td></tr>
                    <tr><td>Giga</td><td>G</td><td>10⁹</td><td>Frequencies</td></tr>
                    <tr><td>Mega</td><td>M</td><td>10⁶</td><td>Large resistors</td></tr>
                    <tr><td>Kilo</td><td>k</td><td>10³</td><td>Common resistors</td></tr>
                    <tr><td>-</td><td>-</td><td>10⁰</td><td>Base units</td></tr>
                    <tr><td>Milli</td><td>m</td><td>10⁻³</td><td>Current</td></tr>
                    <tr><td>Micro</td><td>μ</td><td>10⁻⁶</td><td>Capacitors</td></tr>
                    <tr><td>Nano</td><td>n</td><td>10⁻⁹</td><td>Small capacitors</td></tr>
                    <tr><td>Pico</td><td>p</td><td>10⁻¹²</td><td>Very small capacitors</td></tr>
                </table>
            </div>

            <h3>Conversion Examples</h3>
            
            <h4>Scientific to Engineering Notation</h4>
            <div class="example-box">
                <p><strong>Example:</strong> Convert 4.7 × 10⁻⁵ to engineering notation</p>
                <p><strong>Step 1:</strong> Current exponent is -5 (not a multiple of 3)</p>
                <p><strong>Step 2:</strong> Nearest multiple of 3 is -6</p>
                <p><strong>Step 3:</strong> Change exponent: -5 → -6 (decrease by 1)</p>
                <p><strong>Step 4:</strong> Adjust coefficient: multiply by 10¹</p>
                <p><strong>Result:</strong> 47 × 10⁻⁶ = 47 μ</p>
            </div>

            <h3>Why Engineers Prefer This System</h3>
            <ul>
                <li><strong>Component Values:</strong> 4.7k resistor vs. 4.7 × 10³ Ω</li>
                <li><strong>Mental Math:</strong> Easier to estimate: "about 50 micro"</li>
                <li><strong>Industry Standards:</strong> Datasheets use engineering notation</li>
                <li><strong>Communication:</strong> "22 nanofarads" vs. "22 times 10 to the minus 9 farads"</li>
            </ul>

            <div class="important-note">
                <h4>🎯 Practice Tip</h4>
                <p>Engineering notation makes it easier to work with component values and communicate with other engineers. It's the language of practical electronics!</p>
            </div>
        </section>

        <!-- Significant Figures Section -->
        <section id="sigfigs" class="lesson-section">
            <h2>🎯 Significant Figures</h2>
            
            <h3>Why Significant Figures Matter in Electronics</h3>
            <div class="warning-box">
                <h4>⚠️ The Problem</h4>
                <p>A student calculates current as 5.454545454 mA, but the resistor has only 2 significant figures. This implies false precision - the answer should be 5.5 mA.</p>
            </div>

            <h3>Rules for Counting Significant Figures</h3>
            
            <div class="example-box">
                <h4>✅ These ARE significant:</h4>
                <ul>
                    <li><strong>All non-zero digits:</strong> 123 has 3 sig figs</li>
                    <li><strong>Zeros between non-zeros:</strong> 1003 has 4 sig figs</li>
                    <li><strong>Trailing zeros with decimal:</strong> 12.0 has 3 sig figs</li>
                    <li><strong>Leading zeros after decimal:</strong> 0.0012 has 2 sig figs</li>
                </ul>
            </div>

            <div class="practice-box">
                <h4>❌ These are NOT significant:</h4>
                <ul>
                    <li><strong>Leading zeros:</strong> 0.047 has 2 sig figs (4 and 7)</li>
                    <li><strong>Trailing zeros without decimal:</strong> 4700 has 2 sig figs (ambiguous)</li>
                    <li><strong>Placeholder zeros:</strong> Used only for decimal placement</li>
                </ul>
            </div>

            <h3>Electronics Examples</h3>
            
            <div class="example-box">
                <h4>Resistor Values</h4>
                <ul>
                    <li><strong>4.7k:</strong> 2 significant figures (precision: ±5% or ±10%)</li>
                    <li><strong>47.0k:</strong> 3 significant figures (precision: ±1%)</li>
                    <li><strong>47.00k:</strong> 4 significant figures (precision: ±0.1%)</li>
                </ul>
            </div>

            <h3>Calculation Rules</h3>
            
            <h4>Multiplication and Division</h4>
            <div class="practice-box">
                <p><strong>Rule:</strong> Result has the same number of significant figures as the measurement with the fewest sig figs.</p>
                <p><strong>Example:</strong> V = 12.0 V (3 sig figs), R = 2.2k Ω (2 sig figs)</p>
                <p>I = V/R = 12.0/2200 = 0.005454... = 5.5 mA (limited to 2 sig figs)</p>
            </div>

            <h4>Addition and Subtraction</h4>
            <div class="practice-box">
                <p><strong>Rule:</strong> Result has the same number of decimal places as the measurement with the fewest decimal places.</p>
                <p><strong>Example:</strong> 12.1 V + 0.05 V = 12.15 V → 12.2 V (limited by 12.1 V)</p>
            </div>

            <div class="important-note">
                <h4>🎯 Professional Practice</h4>
                <p>In electronics, significant figures reflect component tolerances and measurement precision. Claiming more precision than your components provide is scientifically incorrect and professionally embarrassing!</p>
            </div>
        </section>

        <!-- Applications Section -->
        <section id="applications" class="lesson-section">
            <h2>💡 Real-World Applications in Electronics</h2>

            <h3>Circuit Analysis with Proper Notation</h3>
            
            <h4>Ohm's Law Calculations</h4>
            <div class="example-box">
                <h4>Problem: Calculate current in a circuit</h4>
                <p><strong>Given:</strong></p>
                <ul>
                    <li>Voltage: 12.0 V (3 sig figs)</li>
                    <li>Resistance: 2.2 kΩ (2 sig figs) = 2.2 × 10³ Ω</li>
                </ul>
                <p><strong>Find:</strong> Current (I)</p>
                <p><strong>Solution:</strong></p>
                <p>I = V/R = 12.0 V ÷ (2.2 × 10³ Ω)</p>
                <p>I = 5.454... × 10⁻³ A</p>
                <p>I = 5.5 × 10⁻³ A = 5.5 mA (2 sig figs)</p>
            </div>

            <h4>Frequency and Period Relationships</h4>
            <div class="practice-box">
                <h4>Problem: Convert between frequency and period</h4>
                <p><strong>Given:</strong> Clock frequency = 3.2 GHz</p>
                <p><strong>Find:</strong> Period of one clock cycle</p>
                <p><strong>Solution:</strong></p>
                <p>f = 3.2 GHz = 3.2 × 10⁹ Hz</p>
                <p>T = 1/f = 1/(3.2 × 10⁹ Hz)</p>
                <p>T = 3.125 × 10⁻¹⁰ s = 312.5 × 10⁻¹² s = 312.5 ps</p>
            </div>

            <h3>Component Value Reading</h3>
            
            <h4>Resistor Color Codes vs. Digital Readouts</h4>
            <div class="example-box">
                <h4>Standard Resistor Values</h4>
                <p>Resistors come in standard values based on their tolerance:</p>
                <ul>
                    <li><strong>E12 series (10% tolerance):</strong> 1.0, 1.2, 1.5, 1.8, 2.2, 2.7, 3.3, 3.9, 4.7, 5.6, 6.8, 8.2</li>
                    <li><strong>E24 series (5% tolerance):</strong> More values available</li>
                    <li><strong>Surface Mount:</strong> Often marked in engineering notation (472 = 4.7k)</li>
                </ul>
            </div>

            <h4>Capacitor Markings</h4>
            <div class="practice-box">
                <h4>Three-Digit Code System</h4>
                <p>Many capacitors use a three-digit code: XYZ</p>
                <ul>
                    <li><strong>X and Y:</strong> First two digits</li>
                    <li><strong>Z:</strong> Number of zeros (multiplier)</li>
                    <li><strong>Unit:</strong> Picofarads (pF)</li>
                </ul>
                <p><strong>Examples:</strong></p>
                <ul>
                    <li><strong>104:</strong> 10 + 4 zeros = 100,000 pF = 0.1 μF</li>
                    <li><strong>223:</strong> 22 + 3 zeros = 22,000 pF = 22 nF</li>
                    <li><strong>471:</strong> 47 + 1 zero = 470 pF</li>
                </ul>
            </div>

            <h3>Measurement and Tolerance</h3>
            
            <div class="warning-box">
                <h4>Real-World Constraints</h4>
                <p>Your calculations can only be as precise as your least precise component or measurement:</p>
                <ul>
                    <li><strong>Resistor tolerance:</strong> ±1%, ±5%, ±10%</li>
                    <li><strong>Multimeter accuracy:</strong> ±0.5% of reading ±3 digits</li>
                    <li><strong>Component aging:</strong> Values drift over time</li>
                    <li><strong>Temperature effects:</strong> Values change with heat</li>
                </ul>
            </div>

            <div class="important-note">
                <h4>🎯 Professional Insight</h4>
                <p>Engineers choose notation systems based on context: scientific notation for precise calculations, engineering notation for component selection and communication, and appropriate significant figures based on component tolerances.</p>
            </div>
        </section>

        <!-- Practice Tools Section -->
        <section id="practice" class="lesson-section">
            <h2>🛠️ Interactive Practice Tools</h2>
            
            <div class="calculator-container">
                <h3>📊 Number Notation Converter</h3>
                <p>Enter a number in any format to see all representations:</p>
                
                <label>Input Number:</label>
                <input type="text" class="calculator-input" id="numberInput" placeholder="e.g., 0.000047, 4.7e-5, 47u">
                <button class="quiz-btn" onclick="convertNumber()">Convert</button>
                
                <div class="calculator-output" id="conversionResult">
                    Enter a number above to see conversions
                </div>
            </div>

            <div class="calculator-container">
                <h3>🔍 Significant Figures Analyzer</h3>
                <p>Check how many significant figures are in a number:</p>
                
                <label>Number to analyze:</label>
                <input type="text" class="calculator-input" id="sigfigInput" placeholder="e.g., 0.01200, 47000">
                <button class="quiz-btn" onclick="analyzeSigFigs()">Analyze</button>
                
                <div class="calculator-output" id="sigfigResult">
                    Enter a number above to analyze significant figures
                </div>
            </div>

            <div class="calculator-container">
                <h3>⚡ Ohm's Law Calculator</h3>
                <p>Calculate V, I, or R using proper notation and significant figures:</p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px;">
                    <div>
                        <label>Voltage (V):</label>
                        <input type="text" class="calculator-input" id="voltage" placeholder="e.g., 12.0">
                    </div>
                    <div>
                        <label>Current (A):</label>
                        <input type="text" class="calculator-input" id="current" placeholder="e.g., 5.5m">
                    </div>
                    <div>
                        <label>Resistance (Ω):</label>
                        <input type="text" class="calculator-input" id="resistance" placeholder="e.g., 2.2k">
                    </div>
                </div>
                
                <button class="quiz-btn" onclick="calculateOhmsLaw()">Calculate Missing Value</button>
                
                <div class="calculator-output" id="ohmsResult">
                    Enter any two values to calculate the third
                </div>
            </div>

            <div class="calculator-container">
                <h3>🔧 Component Value Practice</h3>
                <p>Practice reading component markings:</p>
                
                <label>Component Type:</label>
                <select class="calculator-select" id="componentType">
                    <option value="resistor">Resistor Code</option>
                    <option value="capacitor">Capacitor Code</option>
                </select>
                
                <label>Component Marking:</label>
                <input type="text" class="calculator-input" id="componentCode" placeholder="e.g., 472, 104">
                <button class="quiz-btn" onclick="decodeComponent()">Decode Value</button>
                
                <div class="calculator-output" id="componentResult">
                    Select component type and enter marking
                </div>
            </div>
        </section>

        <!-- Interactive Worksheets Section -->
        <section id="worksheets" class="lesson-section">
            <h2>📄 Interactive Practice Worksheets</h2>
            <p>Complete these randomized worksheets to practice your skills. Each time you generate a worksheet, you'll get new problems!</p>

            <div class="worksheet-header">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label><strong>Student Name:</strong></label>
                        <input type="text" class="calculator-input" id="studentName" placeholder="Enter your name">
                    </div>
                    <div>
                        <label><strong>Date:</strong></label>
                        <input type="date" class="calculator-input" id="worksheetDate">
                    </div>
                </div>
                
                <div class="lesson-nav" style="margin-bottom: 30px;">
                    <button class="nav-btn" onclick="selectWorksheet('scientific')">📏 Scientific Notation</button>
                    <button class="nav-btn" onclick="selectWorksheet('engineering')">⚙️ Engineering Notation</button>
                    <button class="nav-btn" onclick="selectWorksheet('sigfigs')">🔍 Significant Figures</button>
                    <button class="nav-btn" onclick="selectWorksheet('electronics')">🔧 Electronics Applications</button>
                    <button class="nav-btn" onclick="selectWorksheet('mixed')">📋 Mixed Practice</button>
                </div>

                <div style="text-align: center; margin-bottom: 20px;">
                    <button class="quiz-btn" onclick="generateWorksheet()">🔄 Generate New Worksheet</button>
                    <button class="quiz-btn" onclick="checkAnswers()">✅ Check My Answers</button>
                    <button class="quiz-btn" onclick="printWorksheet()">🖨️ Print Worksheet</button>
                    <button class="quiz-btn" onclick="downloadPDF()">📥 Download PDF</button>
                </div>
            </div>

            <div id="worksheet-content" class="worksheet-container">
                <div class="important-note">
                    <h3>🎯 Instructions</h3>
                    <p>1. Enter your name and date above</p>
                    <p>2. Select a worksheet type from the buttons</p>
                    <p>3. Click "Generate New Worksheet" to create randomized problems</p>
                    <p>4. Fill in your answers and click "Check My Answers" for immediate feedback</p>
                    <p>5. Use Print or Download PDF to submit your completed worksheet</p>
                </div>
            </div>

            <div id="score-display" class="score-display" style="display: none;">
                <h3>📊 Your Score</h3>
                <p id="score-text">0/0 correct (0%)</p>
                <p id="score-feedback">Complete the worksheet and check your answers!</p>
            </div>
        </section>

        <!-- Assessment 1 Section -->
        <section id="assessment1" class="lesson-section">
            <h2>📝 Quiz 1: Notation Fundamentals</h2>
            
            <div class="quiz-container">
                <div class="quiz-question">
                    <h4>Question 1: Convert 0.000456 to scientific notation</h4>
                    <input type="text" class="calculator-input" id="q1_1" placeholder="Your answer (e.g., 4.56 × 10^-4)">
                    <div id="feedback1_1" class="calculator-output" style="display: none;"></div>
                </div>

                <div class="quiz-question">
                    <h4>Question 2: Convert 4.7 × 10⁻⁶ to engineering notation</h4>
                    <input type="text" class="calculator-input" id="q1_2" placeholder="Your answer (e.g., 47 × 10^-7)">
                    <div id="feedback1_2" class="calculator-output" style="display: none;"></div>
                </div>

                <div class="quiz-question">
                    <h4>Question 3: How many significant figures are in 0.01200?</h4>
                    <input type="text" class="calculator-input" id="q1_3" placeholder="Your answer (number only)">
                    <div id="feedback1_3" class="calculator-output" style="display: none;"></div>
                </div>

                <div class="quiz-question">
                    <h4>Question 4: Convert 2.2 kΩ to standard notation with proper significant figures</h4>
                    <input type="text" class="calculator-input" id="q1_4" placeholder="Your answer (e.g., 2200 Ω)">
                    <div id="feedback1_4" class="calculator-output" style="display: none;"></div>
                </div>

                <button class="quiz-btn" onclick="checkQuiz1()">Check Answers</button>
                <button class="quiz-btn" onclick="retakeQuiz1()">Retake Quiz</button>
                
                <div id="quiz1Score" class="calculator-output" style="display: none;">
                    Your score will appear here
                </div>
            </div>
        </section>

        <!-- Assessment 2 Section -->
        <section id="assessment2" class="lesson-section">
            <h2>📝 Quiz 2: Applications & Calculations</h2>
            
            <div class="quiz-container">
                <div class="quiz-question">
                    <h4>Question 1: Calculate current using I = V/R</h4>
                    <p>Given: V = 9.0 V, R = 1.8 kΩ</p>
                    <input type="text" class="calculator-input" id="q2_1" placeholder="Your answer with units and proper sig figs">
                    <div id="feedback2_1" class="calculator-output" style="display: none;"></div>
                </div>

                <div class="quiz-question">
                    <h4>Question 2: A capacitor is marked "223". What is its value?</h4>
                    <input type="text" class="calculator-input" id="q2_2" placeholder="Your answer with units (e.g., 22 nF)">
                    <div id="feedback2_2" class="calculator-output" style="display: none;"></div>
                </div>

                <div class="quiz-question">
                    <h4>Question 3: Add these voltages with proper significant figures</h4>
                    <p>V₁ = 12.1 V, V₂ = 0.05 V</p>
                    <input type="text" class="calculator-input" id="q2_3" placeholder="Your answer (e.g., 12.2 V)">
                    <div id="feedback2_3" class="calculator-output" style="display: none;"></div>
                </div>

                <button class="quiz-btn" onclick="checkQuiz2()">Check Answers</button>
                <button class="quiz-btn" onclick="retakeQuiz2()">Retake Quiz</button>
                
                <div id="quiz2Score" class="calculator-output" style="display: none;">
                    Your score will appear here
                </div>
            </div>
        </section>

        <!-- Final Assessment Section -->
        <section id="final" class="lesson-section">
            <h2>🏆 Final Assessment</h2>
            
            <div class="quiz-container">
                <div class="quiz-question">
                    <h4>Question 1: Convert 63,000,000 to both scientific and engineering notation</h4>
                    <p>Scientific: <input type="text" class="calculator-input" id="qf_1a" placeholder="e.g., 6.3 × 10^7"></p>
                    <p>Engineering: <input type="text" class="calculator-input" id="qf_1b" placeholder="e.g., 63 × 10^6"></p>
                    <div id="feedbackf_1" class="calculator-output" style="display: none;"></div>
                </div>

                <div class="quiz-question">
                    <h4>Question 2: Calculate power using P = V²/R with proper precision</h4>
                    <p>Given: V = 12.0 V (3 sig figs), R = 2.2 kΩ (2 sig figs)</p>
                    <input type="text" class="calculator-input" id="qf_2" placeholder="Answer with units and proper sig figs">
                    <div id="feedbackf_2" class="calculator-output" style="display: none;"></div>
                </div>

                <div class="quiz-question">
                    <h4>Question 3: A frequency is given as 2.4 GHz. Express this in Hz using scientific notation</h4>
                    <input type="text" class="calculator-input" id="qf_3" placeholder="Answer in Hz">
                    <div id="feedbackf_3" class="calculator-output" style="display: none;"></div>
                </div>

                <div class="quiz-question">
                    <h4>Question 4: Which notation system would you use for each scenario and why?</h4>
                    <p>a) Documenting a lab measurement of 0.000000047 A</p>
                    <p>b) Ordering a 47 kΩ resistor from a supplier</p>
                    <textarea class="calculator-input" id="qf_4" rows="4" placeholder="Explain your choices..."></textarea>
                    <div id="feedbackf_4" class="calculator-output" style="display: none;"></div>
                </div>

                <div class="quiz-question">
                    <h4>Question 5: Find the total resistance of two resistors in series</h4>
                    <p>R₁ = 4.7 kΩ (2 sig figs), R₂ = 2200 Ω (2 sig figs)</p>
                    <p>Formula: R_total = R₁ + R₂</p>
                    <input type="text" class="calculator-input" id="qf_5" placeholder="Answer with proper sig figs and units">
                    <div id="feedbackf_5" class="calculator-output" style="display: none;"></div>
                </div>

                <button class="quiz-btn" onclick="checkFinalQuiz()">Check Final Answers</button>
                <button class="quiz-btn" onclick="retakeFinalQuiz()">Retake Final</button>
                
                <div id="finalScore" class="calculator-output" style="display: none;">
                    Your final score will appear here
                </div>
            </div>
        </section>
    </div>

    <script>
        // Global variables
        let startTime = Date.now();
        let currentSection = 'intro';
        let sections = ['intro', 'scientific', 'engineering', 'sigfigs', 'applications', 'practice', 'worksheets', 'assessment1', 'assessment2', 'final'];
        let sectionProgress = {};
        let worksheetProblems = [];
        let selectedWorksheetType = null;

        // Initialize
        sections.forEach(section => sectionProgress[section] = false);
        sectionProgress['intro'] = true;
        updateTimer();
        setInterval(updateTimer, 1000);

        // Set today's date in worksheet
        document.getElementById('worksheetDate').value = new Date().toISOString().split('T')[0];

        // Navigation functions
        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.lesson-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionName).classList.add('active');
            
            // Update navigation buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Mark section as visited
            sectionProgress[sectionName] = true;
            currentSection = sectionName;
            updateProgress();
        }

        function updateProgress() {
            const completedSections = Object.values(sectionProgress).filter(Boolean).length;
            const totalSections = sections.length;
            const percentage = Math.round((completedSections / totalSections) * 100);
            
            document.getElementById('progressBar').style.width = percentage + '%';
            document.getElementById('progressText').innerHTML = 
                `Section ${completedSections}/${totalSections} • Progress: ${percentage}% • Time: <span id="timer">00:00</span>`;
        }

        function updateTimer() {
            const elapsed = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            const timerElements = document.querySelectorAll('#timer');
            timerElements.forEach(el => {
                el.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            });
        }

        // Practice Tools Functions
        function convertNumber() {
            const input = document.getElementById('numberInput').value.trim();
            const result = document.getElementById('conversionResult');
            
            if (!input) {
                result.innerHTML = "Please enter a number";
                return;
            }
            
            try {
                let number = parseFloat(input.replace(/[a-zA-Z]/g, ''));
                
                if (isNaN(number)) {
                    result.innerHTML = "Invalid number format";
                    return;
                }
                
                // Convert to different notations
                const scientific = number.toExponential(2);
                const standard = number.toString();
                
                // Engineering notation
                let engNotation = '';
                const absNumber = Math.abs(number);
                if (absNumber >= 1e12) engNotation = (number / 1e12).toPrecision(3) + ' T';
                else if (absNumber >= 1e9) engNotation = (number / 1e9).toPrecision(3) + ' G';
                else if (absNumber >= 1e6) engNotation = (number / 1e6).toPrecision(3) + ' M';
                else if (absNumber >= 1e3) engNotation = (number / 1e3).toPrecision(3) + ' k';
                else if (absNumber >= 1) engNotation = number.toPrecision(3) + ' ';
                else if (absNumber >= 1e-3) engNotation = (number * 1e3).toPrecision(3) + ' m';
                else if (absNumber >= 1e-6) engNotation = (number * 1e6).toPrecision(3) + ' μ';
                else if (absNumber >= 1e-9) engNotation = (number * 1e9).toPrecision(3) + ' n';
                else if (absNumber >= 1e-12) engNotation = (number * 1e12).toPrecision(3) + ' p';
                else engNotation = number.toPrecision(3);
                
                result.innerHTML = `
                    <strong>Standard Notation:</strong> ${standard}<br>
                    <strong>Scientific Notation:</strong> ${scientific}<br>
                    <strong>Engineering Notation:</strong> ${engNotation}
                `;
            } catch (error) {
                result.innerHTML = "Error processing number";
            }
        }

        function analyzeSigFigs() {
            const input = document.getElementById('sigfigInput').value.trim();
            const result = document.getElementById('sigfigResult');
            
            if (!input) {
                result.innerHTML = "Please enter a number";
                return;
            }
            
            const sigFigs = countSigFigs(input);
            result.innerHTML = `
                <strong>Number:</strong> ${input}<br>
                <strong>Significant Figures:</strong> ${sigFigs}<br>
                <strong>Explanation:</strong> ${explainSigFigs(input)}
            `;
        }

        function countSigFigs(numStr) {
            // Remove any spaces
            numStr = numStr.replace(/\s/g, '');
            
            // Handle scientific notation
            if (numStr.toLowerCase().includes('e')) {
                const parts = numStr.toLowerCase().split('e');
                numStr = parts[0];
            }
            
            // Remove leading zeros and decimal point for counting
            let significant = numStr.replace(/^0*\.?0*/, '');
            
            // Count all remaining digits
            significant = significant.replace(/[^0-9]/g, '');
            
            return significant.length;
        }

        function explainSigFigs(numStr) {
            if (numStr.includes('.')) {
                if (numStr.match(/^0+\./)) {
                    return "Leading zeros are not significant. Count digits after leading zeros.";
                } else {
                    return "All digits including trailing zeros after decimal are significant.";
                }
            } else {
                if (numStr.match(/0+$/)) {
                    return "Trailing zeros without decimal may or may not be significant (ambiguous).";
                } else {
                    return "All non-zero digits are significant.";
                }
            }
        }

        function calculateOhmsLaw() {
            const voltage = document.getElementById('voltage').value.trim();
            const current = document.getElementById('current').value.trim();
            const resistance = document.getElementById('resistance').value.trim();
            const result = document.getElementById('ohmsResult');
            
            const values = [voltage, current, resistance];
            const filledCount = values.filter(v => v !== '').length;
            
            if (filledCount !== 2) {
                result.innerHTML = "Please enter exactly two values to calculate the third";
                return;
            }
            
            try {
                let V = voltage ? parseValue(voltage) : null;
                let I = current ? parseValue(current) : null;
                let R = resistance ? parseValue(resistance) : null;
                
                if (!voltage) {
                    V = I * R;
                    result.innerHTML = `<strong>Voltage:</strong> ${formatResult(V, 'V')}`;
                } else if (!current) {
                    I = V / R;
                    result.innerHTML = `<strong>Current:</strong> ${formatResult(I, 'A')}`;
                } else if (!resistance) {
                    R = V / I;
                    result.innerHTML = `<strong>Resistance:</strong> ${formatResult(R, 'Ω')}`;
                }
            } catch (error) {
                result.innerHTML = "Error in calculation. Check your input format.";
            }
        }

        function parseValue(str) {
            // Handle common engineering prefixes
            str = str.toLowerCase().replace(/\s/g, '');
            let multiplier = 1;
            
            if (str.includes('k')) multiplier = 1e3;
            else if (str.includes('m') && !str.includes('meg')) multiplier = 1e-3;
            else if (str.includes('u') || str.includes('μ')) multiplier = 1e-6;
            else if (str.includes('n')) multiplier = 1e-9;
            else if (str.includes('p')) multiplier = 1e-12;
            else if (str.includes('meg') || str.includes('M')) multiplier = 1e6;
            else if (str.includes('g')) multiplier = 1e9;
            
            const number = parseFloat(str.replace(/[a-zA-Z]/g, ''));
            return number * multiplier;
        }

        function formatResult(value, unit) {
            const absValue = Math.abs(value);
            let prefix = '';
            let scaledValue = value;
            
            if (absValue >= 1e9) {
                prefix = 'G';
                scaledValue = value / 1e9;
            } else if (absValue >= 1e6) {
                prefix = 'M';
                scaledValue = value / 1e6;
            } else if (absValue >= 1e3) {
                prefix = 'k';
                scaledValue = value / 1e3;
            } else if (absValue >= 1) {
                scaledValue = value;
            } else if (absValue >= 1e-3) {
                prefix = 'm';
                scaledValue = value * 1e3;
            } else if (absValue >= 1e-6) {
                prefix = 'μ';
                scaledValue = value * 1e6;
            } else if (absValue >= 1e-9) {
                prefix = 'n';
                scaledValue = value * 1e9;
            } else {
                prefix = 'p';
                scaledValue = value * 1e12;
            }
            
            return `${scaledValue.toPrecision(3)} ${prefix}${unit}`;
        }

        function decodeComponent() {
            const type = document.getElementById('componentType').value;
            const code = document.getElementById('componentCode').value.trim();
            const result = document.getElementById('componentResult');
            
            if (!code) {
                result.innerHTML = "Please enter a component marking";
                return;
            }
            
            if (type === 'capacitor') {
                if (code.length === 3) {
                    const firstTwo = parseInt(code.substring(0, 2));
                    const multiplier = parseInt(code.substring(2));
                    const picofarads = firstTwo * Math.pow(10, multiplier);
                    
                    let value = '';
                    if (picofarads >= 1e6) {
                        value = `${(picofarads / 1e6).toPrecision(3)} μF`;
                    } else if (picofarads >= 1e3) {
                        value = `${(picofarads / 1e3).toPrecision(3)} nF`;
                    } else {
                        value = `${picofarads} pF`;
                    }
                    
                    result.innerHTML = `<strong>Capacitor Value:</strong> ${value}<br><strong>Calculation:</strong> ${firstTwo} × 10^${multiplier} pF = ${picofarads} pF`;
                } else {
                    result.innerHTML = "Invalid capacitor code format. Use 3-digit format (e.g., 104, 223)";
                }
            } else if (type === 'resistor') {
                // Simple resistor code decoder (3-digit SMD format)
                if (code.length === 3) {
                    const firstTwo = parseInt(code.substring(0, 2));
                    const multiplier = parseInt(code.substring(2));
                    const ohms = firstTwo * Math.pow(10, multiplier);
                    
                    result.innerHTML = `<strong>Resistor Value:</strong> ${formatResult(ohms, 'Ω')}<br><strong>Calculation:</strong> ${firstTwo} × 10^${multiplier} Ω = ${ohms} Ω`;
                } else {
                    result.innerHTML = "Invalid resistor code format. Use 3-digit format (e.g., 472, 103)";
                }
            }
        }

        // Worksheet functions
        function selectWorksheet(type) {
            selectedWorksheetType = type;
            
            // Update button styling
            document.querySelectorAll('.lesson-nav .nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Update content
            const content = document.getElementById('worksheet-content');
            content.innerHTML = `
                <div class="important-note">
                    <h3>📋 ${getWorksheetTitle(type)} Selected</h3>
                    <p>Click "Generate New Worksheet" to create randomized problems for this topic.</p>
                    <p><strong>Topic Focus:</strong> ${getWorksheetDescription(type)}</p>
                </div>
            `;
        }

        function getWorksheetTitle(type) {
            const titles = {
                'scientific': 'Scientific Notation Practice',
                'engineering': 'Engineering Notation & Metric Prefixes',
                'sigfigs': 'Significant Figures Analysis',
                'electronics': 'Electronics Applications',
                'mixed': 'Mixed Practice - All Topics'
            };
            return titles[type] || 'Practice Worksheet';
        }

        function getWorksheetDescription(type) {
            const descriptions = {
                'scientific': 'Converting between standard and scientific notation with proper significant figures',
                'engineering': 'Working with engineering notation and metric prefixes (k, M, μ, n, etc.)',
                'sigfigs': 'Counting significant figures and applying rules in calculations',
                'electronics': 'Real circuit problems using Ohm\'s law, component values, and proper notation',
                'mixed': 'Combination problems covering all notation systems and applications'
            };
            return descriptions[type] || 'General practice problems';
        }

        function generateWorksheet() {
            if (!selectedWorksheetType) {
                alert('Please select a worksheet type first!');
                return;
            }
            
            worksheetProblems = [];
            const content = document.getElementById('worksheet-content');
            const studentName = document.getElementById('studentName').value || 'Student';
            const worksheetDate = document.getElementById('worksheetDate').value || new Date().toISOString().split('T')[0];
            
            let worksheetHTML = `
                <div class="worksheet-header" style="background: white; color: #333; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                    <h2 style="text-align: center; color: #2196F3; margin-bottom: 10px;">${getWorksheetTitle(selectedWorksheetType)}</h2>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                        <p><strong>Name:</strong> ${studentName}</p>
                        <p><strong>Date:</strong> ${worksheetDate}</p>
                    </div>
                    <p style="margin-top: 10px;"><strong>Instructions:</strong> Solve each problem showing your work. Use proper significant figures and units.</p>
                </div>
            `;
            
            // Generate problems based on type
            switch(selectedWorksheetType) {
                case 'scientific':
                    worksheetHTML += generateScientificProblems();
                    break;
                case 'engineering':
                    worksheetHTML += generateEngineeringProblems();
                    break;
                case 'sigfigs':
                    worksheetHTML += generateSigFigProblems();
                    break;
                case 'electronics':
                    worksheetHTML += generateElectronicsProblems();
                    break;
                case 'mixed':
                    worksheetHTML += generateMixedProblems();
                    break;
            }
            
            content.innerHTML = worksheetHTML;
            
            // Hide score display
            document.getElementById('score-display').style.display = 'none';
        }

        function generateScientificProblems() {
            let html = '<h3>📏 Scientific Notation Conversions</h3>';
            
            // Generate 6 random problems
            for (let i = 0; i < 6; i++) {
                let problem, answer, guidance;
                
                if (i < 3) {
                    // Convert to scientific notation
                    const baseNumbers = [0.000456, 0.00789, 23400, 567000, 0.0012, 89000];
                    const num = baseNumbers[Math.floor(Math.random() * baseNumbers.length)];
                    problem = `Convert to scientific notation: ${num}`;
                    answer = num.toExponential(2);
                    guidance = `📏 Significant Figures Guidance: Maintain the same number of significant figures from the original number.`;
                } else {
                    // Convert from scientific notation
                    const mantissa = (Math.random() * 9 + 1).toFixed(1);
                    const exponent = Math.floor(Math.random() * 10) - 5;
                    const sciNum = `${mantissa} × 10^${exponent}`;
                    problem = `Convert to standard notation: ${sciNum}`;
                    answer = (parseFloat(mantissa) * Math.pow(10, exponent)).toString();
                    guidance = `📏 Significant Figures Guidance: The result should have the same number of significant figures as the scientific notation.`;
                }
                
                worksheetProblems.push({type: 'scientific', problem: problem, answer: answer});
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 1}:</h4>
                        <p>${problem}</p>
                        <div class="guidance-box guidance-scientific">
                            ${guidance}
                        </div>
                        <p>Answer: <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Your answer"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${answer}
                        </div>
                    </div>
                `;
            }
            
            return html;
        }

        function generateEngineeringProblems() {
            let html = '<h3>⚙️ Engineering Notation & Metric Prefixes</h3>';
            
            for (let i = 0; i < 6; i++) {
                let problem, answer, guidance;
                
                if (i < 3) {
                    // Convert to engineering notation
                    const values = [0.000047, 0.0022, 47000, 2200000, 0.000000068, 1500];
                    const num = values[Math.floor(Math.random() * values.length)];
                    problem = `Convert to engineering notation: ${num}`;
                    
                    // Convert to engineering notation
                    let engAnswer = '';
                    const absNum = Math.abs(num);
                    if (absNum >= 1e6) engAnswer = `${(num / 1e6).toPrecision(2)} × 10^6`;
                    else if (absNum >= 1e3) engAnswer = `${(num / 1e3).toPrecision(2)} × 10^3`;
                    else if (absNum >= 1) engAnswer = `${num.toPrecision(2)} × 10^0`;
                    else if (absNum >= 1e-3) engAnswer = `${(num * 1e3).toPrecision(2)} × 10^-3`;
                    else if (absNum >= 1e-6) engAnswer = `${(num * 1e6).toPrecision(2)} × 10^-6`;
                    else engAnswer = `${(num * 1e9).toPrecision(2)} × 10^-9`;
                    
                    answer = engAnswer;
                    guidance = `⚙️ Engineering Notation: Exponent must be a multiple of 3 (-9, -6, -3, 0, 3, 6, 9).`;
                } else {
                    // Convert engineering notation to standard
                    const prefixes = [
                        {prefix: 'k', mult: 1e3, unit: ''},
                        {prefix: 'M', mult: 1e6, unit: ''},
                        {prefix: 'm', mult: 1e-3, unit: ''},
                        {prefix: 'μ', mult: 1e-6, unit: ''},
                        {prefix: 'n', mult: 1e-9, unit: ''}
                    ];
                    const p = prefixes[Math.floor(Math.random() * prefixes.length)];
                    const baseVal = (Math.random() * 90 + 10).toFixed(1);
                    problem = `Convert to standard notation: ${baseVal} ${p.prefix}`;
                    answer = (parseFloat(baseVal) * p.mult).toString();
                    guidance = `⚙️ Metric Prefix: ${p.prefix} represents ${p.mult.toExponential()}.`;
                }
                
                worksheetProblems.push({type: 'engineering', problem: problem, answer: answer});
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 1}:</h4>
                        <p>${problem}</p>
                        <div class="guidance-box guidance-engineering">
                            ${guidance}
                        </div>
                        <p>Answer: <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Your answer"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${answer}
                        </div>
                    </div>
                `;
            }
            
            return html;
        }

        function generateSigFigProblems() {
            let html = '<h3>🔍 Significant Figures Practice</h3>';
            
            for (let i = 0; i < 6; i++) {
                let problem, answer, guidance;
                
                if (i < 3) {
                    // Count significant figures
                    const numbers = ['0.01200', '45000', '0.000470', '123.0', '0.0506', '7.00'];
                    const num = numbers[Math.floor(Math.random() * numbers.length)];
                    problem = `How many significant figures are in ${num}?`;
                    answer = countSigFigs(num).toString();
                    guidance = `🔍 Count carefully: Leading zeros don't count, trailing zeros after decimal do count.`;
                } else {
                    // Calculation with sig figs
                    const vals = [
                        {a: '12.0', b: '2.5', op: '×'},
                        {a: '47.3', b: '2.1', op: '÷'},
                        {a: '15.67', b: '0.8', op: '×'}
                    ];
                    const calc = vals[Math.floor(Math.random() * vals.length)];
                    problem = `Calculate ${calc.a} ${calc.op} ${calc.b} with proper significant figures`;
                    
                    let result;
                    if (calc.op === '×') result = parseFloat(calc.a) * parseFloat(calc.b);
                    else result = parseFloat(calc.a) / parseFloat(calc.b);
                    
                    const sigFigsA = countSigFigs(calc.a);
                    const sigFigsB = countSigFigs(calc.b);
                    const limitingSigFigs = Math.min(sigFigsA, sigFigsB);
                    answer = result.toPrecision(limitingSigFigs);
                    guidance = `🔍 Result limited by the value with fewer significant figures (${limitingSigFigs} sig figs).`;
                }
                
                worksheetProblems.push({type: 'sigfigs', problem: problem, answer: answer});
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 1}:</h4>
                        <p>${problem}</p>
                        <div class="guidance-box guidance-sigfigs">
                            ${guidance}
                        </div>
                        <p>Answer: <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Your answer"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${answer}
                        </div>
                    </div>
                `;
            }
            
            return html;
        }

        function generateElectronicsProblems() {
            let html = '<h3>🔧 Electronics Applications</h3>';
            
            // Ohm's law problems
            for (let i = 0; i < 3; i++) {
                const voltages = ['9.0', '12.0', '5.0', '15.0'];
                const resistances = ['1.2k', '2.2k', '4.7k', '10k', '470'];
                
                const V = voltages[Math.floor(Math.random() * voltages.length)];
                const R = resistances[Math.floor(Math.random() * resistances.length)];
                
                const voltage = parseFloat(V);
                const resistance = parseValue(R);
                const current = voltage / resistance;
                
                const problem = `Calculate current: I = V/R where V = ${V} V, R = ${R}Ω`;
                const answer = formatResult(current, 'A');
                const guidance = `🔧 Engineering Precision: Use proper significant figures based on component tolerances.`;
                
                worksheetProblems.push({type: 'electronics', problem: problem, answer: answer});
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 1}:</h4>
                        <p>${problem}</p>
                        <div class="guidance-box guidance-electronics">
                            ${guidance}
                        </div>
                        <p>I = <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Current with units"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${answer}
                        </div>
                    </div>
                `;
            }
            
            // Capacitor value problems
            for (let i = 0; i < 3; i++) {
                const codes = ['104', '223', '471', '103', '473'];
                const code = codes[Math.floor(Math.random() * codes.length)];
                
                const firstTwo = parseInt(code.substring(0, 2));
                const multiplier = parseInt(code.substring(2));
                const picofarads = firstTwo * Math.pow(10, multiplier);
                
                let value = '';
                if (picofarads >= 1e6) value = `${(picofarads / 1e6).toPrecision(3)} μF`;
                else if (picofarads >= 1e3) value = `${(picofarads / 1e3).toPrecision(3)} nF`;
                else value = `${picofarads} pF`;
                
                const problem = `A capacitor is marked "${code}". What is its value?`;
                const answer = value;
                const guidance = `🔧 Capacitor Code: First two digits + number of zeros, result in picofarads.`;
                
                worksheetProblems.push({type: 'electronics', problem: problem, answer: answer});
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 4}:</h4>
                        <p>${problem}</p>
                        <div class="guidance-box guidance-electronics">
                            ${guidance}
                        </div>
                        <p>Value: <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Value with units"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${answer}
                        </div>
                    </div>
                `;
            }
            
            return html;
        }

        function generateMixedProblems() {
            let html = '<h3>📋 Mixed Practice - All Topics</h3>';
            
            // Generate a mix of all problem types
            const problemTypes = ['scientific', 'engineering', 'sigfigs', 'electronics'];
            
            for (let i = 0; i < 8; i++) {
                const type = problemTypes[i % problemTypes.length];
                let problem, answer, guidance;
                
                switch(type) {
                    case 'scientific':
                        const num = [0.000456, 47000, 0.0078][Math.floor(Math.random() * 3)];
                        problem = `Convert to scientific notation: ${num}`;
                        answer = num.toExponential(2);
                        guidance = `📏 Scientific: Maintain significant figures, format as a × 10^n where 1 ≤ a < 10.`;
                        break;
                        
                    case 'engineering':
                        const engNum = [0.000047, 2200, 0.0015][Math.floor(Math.random() * 3)];
                        problem = `Express in engineering notation: ${engNum}`;
                        answer = formatEngineering(engNum);
                        guidance = `⚙️ Engineering: Exponent must be multiple of 3, use metric prefixes.`;
                        break;
                        
                    case 'sigfigs':
                        const sigNum = ['0.01200', '47000', '123.0'][Math.floor(Math.random() * 3)];
                        problem = `How many significant figures: ${sigNum}`;
                        answer = countSigFigs(sigNum).toString();
                        guidance = `🔍 Sig Figs: Count carefully - leading zeros don't count, trailing zeros with decimal do.`;
                        break;
                        
                    case 'electronics':
                        const V = ['9.0', '12.0', '5.0'][Math.floor(Math.random() * 3)];
                        const R = ['1.2k', '2.2k', '4.7k'][Math.floor(Math.random() * 3)];
                        problem = `Calculate I = V/R: V = ${V} V, R = ${R}Ω`;
                        const current = parseFloat(V) / parseValue(R);
                        answer = formatResult(current, 'A');
                        guidance = `🔧 Electronics: Use Ohm's law with proper significant figures and units.`;
                        break;
                }
                
                worksheetProblems.push({type: 'mixed', problem: problem, answer: answer});
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 1}:</h4>
                        <p>${problem}</p>
                        <div class="guidance-box guidance-${type}">
                            ${guidance}
                        </div>
                        <p>Answer: <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Your answer"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${answer}
                        </div>
                    </div>
                `;
            }
            
            return html;
        }

        function formatEngineering(num) {
            const absNum = Math.abs(num);
            if (absNum >= 1e6) return `${(num / 1e6).toPrecision(2)} × 10^6`;
            else if (absNum >= 1e3) return `${(num / 1e3).toPrecision(2)} × 10^3`;
            else if (absNum >= 1) return `${num.toPrecision(2)} × 10^0`;
            else if (absNum >= 1e-3) return `${(num * 1e3).toPrecision(2)} × 10^-3`;
            else if (absNum >= 1e-6) return `${(num * 1e6).toPrecision(2)} × 10^-6`;
            else return `${(num * 1e9).toPrecision(2)} × 10^-9`;
        }

        function checkAnswers() {
            if (worksheetProblems.length === 0) {
                alert('Please generate a worksheet first!');
                return;
            }
            
            let correct = 0;
            let total = worksheetProblems.length;
            
            worksheetProblems.forEach((problem, index) => {
                const input = document.getElementById(`prob_${index}`);
                const solution = document.getElementById(`sol_${index}`);
                
                if (input && solution) {
                    const userAnswer = input.value.trim().toLowerCase();
                    const correctAnswer = problem.answer.toLowerCase();
                    
                    // Simple answer checking (could be made more sophisticated)
                    const isCorrect = userAnswer === correctAnswer || 
                                     userAnswer.replace(/\s/g, '') === correctAnswer.replace(/\s/g, '') ||
                                     Math.abs(parseFloat(userAnswer) - parseFloat(correctAnswer)) < 0.01;
                    
                    if (isCorrect) {
                        correct++;
                        input.classList.add('correct');
                        input.classList.remove('incorrect');
                    } else {
                        input.classList.add('incorrect');
                        input.classList.remove('correct');
                    }
                    
                    solution.style.display = 'block';
                }
            });
            
            // Show score
            const percentage = Math.round((correct / total) * 100);
            const scoreDisplay = document.getElementById('score-display');
            const scoreText = document.getElementById('score-text');
            const scoreFeedback = document.getElementById('score-feedback');
            
            scoreText.textContent = `${correct}/${total} correct (${percentage}%)`;
            
            if (percentage >= 90) scoreFeedback.textContent = 'Excellent work! You have mastered this topic.';
            else if (percentage >= 80) scoreFeedback.textContent = 'Good job! Review the incorrect answers.';
            else if (percentage >= 70) scoreFeedback.textContent = 'Keep practicing! Focus on the areas you missed.';
            else scoreFeedback.textContent = 'More practice needed. Review the lesson material.';
            
            scoreDisplay.style.display = 'block';
        }

        function printWorksheet() {
            // Hide interactive elements for printing
            const controls = document.querySelectorAll('.worksheet-controls, .lesson-nav');
            controls.forEach(el => el.style.display = 'none');
            
            // Hide solutions
            document.querySelectorAll('.worksheet-solution').forEach(sol => {
                sol.style.display = 'none';
            });
            
            window.print();
            
            // Restore elements after printing
            setTimeout(() => {
                controls.forEach(el => el.style.display = '');
            }, 1000);
        }

        function downloadPDF() {
            if (typeof jsPDF === 'undefined') {
                alert('PDF functionality not available. Please use the print option instead.');
                return;
            }
            
            const { jsPDF } = window.jsPDF;
            const doc = new jsPDF();
            
            const studentName = document.getElementById('studentName').value || 'Student';
            const worksheetDate = document.getElementById('worksheetDate').value || new Date().toISOString().split('T')[0];
            
            // Add content to PDF
            doc.setFontSize(18);
            doc.text('Electronics Notation Worksheet', 20, 20);
            
            doc.setFontSize(12);
            doc.text(`Name: ${studentName}`, 20, 35);
            doc.text(`Date: ${worksheetDate}`, 120, 35);
            
            let yPosition = 50;
            
            worksheetProblems.forEach((problem, index) => {
                if (yPosition > 250) {
                    doc.addPage();
                    yPosition = 20;
                }
                
                doc.text(`${index + 1}. ${problem.problem}`, 20, yPosition);
                yPosition += 10;
                doc.text(`Answer: ________________________`, 20, yPosition);
                yPosition += 15;
            });
            
            doc.save(`${studentName}_${selectedWorksheetType}_worksheet_${worksheetDate}.pdf`);
        }

        // Quiz functions
        function checkQuiz1() {
            const answers = {
                'q1_1': '4.56 × 10^-4',
                'q1_2': '4.7 × 10^-6',
                'q1_3': '3',
                'q1_4': '2200 Ω'
            };
            
            let score = 0;
            Object.keys(answers).forEach(id => {
                const userAnswer = document.getElementById(id).value.trim();
                const feedback = document.getElementById('feedback' + id.slice(1));
                
                if (userAnswer.toLowerCase().includes(answers[id].toLowerCase()) || 
                    userAnswer.replace(/\s/g, '').toLowerCase() === answers[id].replace(/\s/g, '').toLowerCase()) {
                    score++;
                    feedback.innerHTML = `✅ Correct! ${answers[id]}`;
                    feedback.style.background = 'rgba(76, 175, 80, 0.3)';
                } else {
                    feedback.innerHTML = `❌ Incorrect. Correct answer: ${answers[id]}`;
                    feedback.style.background = 'rgba(244, 67, 54, 0.3)';
                }
                feedback.style.display = 'block';
            });
            
            const scoreDiv = document.getElementById('quiz1Score');
            scoreDiv.innerHTML = `<strong>Score: ${score}/4 (${Math.round(score/4*100)}%)</strong>`;
            scoreDiv.style.display = 'block';
        }

        function retakeQuiz1() {
            document.querySelectorAll('[id^="q1_"]').forEach(input => {
                input.value = '';
            });
            document.querySelectorAll('[id^="feedback1_"]').forEach(div => {
                div.style.display = 'none';
            });
            document.getElementById('quiz1Score').style.display = 'none';
        }

        function checkQuiz2() {
            const answers = {
                'q2_1': '5.0 mA',
                'q2_2': '22 nF',
                'q2_3': '12.2 V'
            };
            
            let score = 0;
            Object.keys(answers).forEach(id => {
                const userAnswer = document.getElementById(id).value.trim();
                const feedback = document.getElementById('feedback' + id.slice(1));
                
                if (userAnswer.toLowerCase().includes(answers[id].toLowerCase()) || 
                    userAnswer.replace(/\s/g, '').toLowerCase() === answers[id].replace(/\s/g, '').toLowerCase()) {
                    score++;
                    feedback.innerHTML = `✅ Correct! ${answers[id]}`;
                    feedback.style.background = 'rgba(76, 175, 80, 0.3)';
                } else {
                    feedback.innerHTML = `❌ Incorrect. Correct answer: ${answers[id]}`;
                    feedback.style.background = 'rgba(244, 67, 54, 0.3)';
                }
                feedback.style.display = 'block';
            });
            
            const scoreDiv = document.getElementById('quiz2Score');
            scoreDiv.innerHTML = `<strong>Score: ${score}/3 (${Math.round(score/3*100)}%)</strong>`;
            scoreDiv.style.display = 'block';
        }

        function retakeQuiz2() {
            document.querySelectorAll('[id^="q2_"]').forEach(input => {
                input.value = '';
            });
            document.querySelectorAll('[id^="feedback2_"]').forEach(div => {
                div.style.display = 'none';
            });
            document.getElementById('quiz2Score').style.display = 'none';
        }

        function checkFinalQuiz() {
            const answers = {
                'qf_1a': '6.3 × 10^7',
                'qf_1b': '63 × 10^6',
                'qf_2': '65 W',
                'qf_3': '2.4 × 10^9 Hz',
                'qf_4': 'scientific for precise documentation, engineering for practical use',
                'qf_5': '6.9 kΩ'
            };
            
            let score = 0;
            Object.keys(answers).forEach(id => {
                const userAnswer = document.getElementById(id).value.trim();
                const feedback = document.getElementById('feedback' + id.slice(2));
                
                let isCorrect = false;
                if (id === 'qf_4') {
                    isCorrect = userAnswer.toLowerCase().includes('scientific') && userAnswer.toLowerCase().includes('engineering');
                } else {
                    isCorrect = userAnswer.toLowerCase().includes(answers[id].toLowerCase()) || 
                               userAnswer.replace(/\s/g, '').toLowerCase() === answers[id].replace(/\s/g, '').toLowerCase();
                }
                
                if (isCorrect) {
                    score++;
                    feedback.innerHTML = `✅ Correct!`;
                    feedback.style.background = 'rgba(76, 175, 80, 0.3)';
                } else {
                    feedback.innerHTML = `❌ Review this topic. Expected: ${answers[id]}`;
                    feedback.style.background = 'rgba(244, 67, 54, 0.3)';
                }
                feedback.style.display = 'block';
            });
            
            const scoreDiv = document.getElementById('finalScore');
            const percentage = Math.round(score/6*100);
            let grade = 'F';
            if (percentage >= 90) grade = 'A';
            else if (percentage >= 80) grade = 'B';
            else if (percentage >= 70) grade = 'C';
            else if (percentage >= 60) grade = 'D';
            
            scoreDiv.innerHTML = `<strong>Final Score: ${score}/6 (${percentage}%) - Grade: ${grade}</strong>`;
            scoreDiv.style.display = 'block';
        }

        function retakeFinalQuiz() {
            document.querySelectorAll('[id^="qf_"]').forEach(input => {
                input.value = '';
            });
            document.querySelectorAll('[id^="feedbackf_"]').forEach(div => {
                div.style.display = 'none';
            });
            document.getElementById('finalScore').style.display = 'none';
        }
    </script>
</body>
</html>
