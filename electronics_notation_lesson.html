<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scientific & Engineering Notation for Electronics</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #ffffff;
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            padding: 40px 0;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .lesson-nav {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }

        .nav-btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
        }

        .nav-btn.active {
            background: linear-gradient(45deg, #ff6b6b, #ee5a52);
        }

        .lesson-section {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
        }

        .lesson-section.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .lesson-section h2 {
            color: #2c3e50;
            font-size: 2em;
            margin-bottom: 20px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }

        .lesson-section h3 {
            color: #34495e;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
        }

        .example-box {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 5px solid #00b894;
        }

        .practice-box {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .important-note {
            background: linear-gradient(135deg, #fdcb6e, #e17055);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: bold;
        }

        .quiz-container {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin: 20px 0;
            border: 2px solid #3498db;
        }

        .quiz-question {
            font-size: 1.2em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .quiz-options {
            display: grid;
            gap: 10px;
            margin-bottom: 20px;
        }

        .quiz-option {
            background: #ecf0f1;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            padding: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #2c3e50;
        }

        .quiz-option:hover {
            background: #d5dbdb;
            border-color: #3498db;
        }

        .quiz-option.selected {
            background: #3498db;
            color: white;
            border-color: #2980b9;
        }

        .quiz-option.correct {
            background: #27ae60;
            color: white;
            border-color: #229954;
        }

        .quiz-option.incorrect {
            background: #e74c3c;
            color: white;
            border-color: #c0392b;
        }

        .quiz-btn {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
            margin: 10px 5px;
        }

        .quiz-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2);
        }

        .quiz-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }

        .score-display {
            background: linear-gradient(45deg, #00b894, #00a085);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            margin: 20px 0;
        }

        .calculator-tool {
            background: #f1c40f;
            color: #2c3e50;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .calculator-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #d35400;
            border-radius: 5px;
            font-size: 16px;
            margin: 10px 0;
        }

        .calculator-result {
            background: #2c3e50;
            color: white;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 1.1em;
        }

        .table-responsive {
            overflow-x: auto;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        th {
            background: linear-gradient(45deg, #3498db, #2980b9);
            color: white;
            font-weight: bold;
        }

        tr:nth-child(even) {
            background: #f8f9fa;
        }

        .progress-bar {
            background: #ecf0f1;
            border-radius: 10px;
            height: 20px;
            margin: 20px 0;
            overflow: hidden;
        }

        .progress-fill {
            background: linear-gradient(45deg, #00b894, #00a085);
            height: 100%;
            transition: width 0.5s ease;
            border-radius: 10px;
        }

        .drag-drop-area {
            background: #f8f9fa;
            border: 3px dashed #3498db;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
            min-height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .draggable-item {
            background: #3498db;
            color: white;
            padding: 10px 15px;
            border-radius: 20px;
            margin: 5px;
            cursor: move;
            display: inline-block;
            transition: all 0.3s ease;
        }

        .draggable-item:hover {
            background: #2980b9;
            transform: scale(1.05);
        }

        .timer-display {
            background: #e74c3c;
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 1.2em;
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
        }

        .worksheet-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            color: #333;
        }

        .worksheet-header {
            background: rgba(255, 255, 255, 0.95);
            color: #333;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .worksheet-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .worksheet-problem {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .worksheet-problem h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .worksheet-input {
            background: #fff;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            padding: 8px 12px;
            font-size: 16px;
            width: 200px;
            margin: 5px;
        }

        .worksheet-input:focus {
            border-color: #3498db;
            outline: none;
        }

        .worksheet-input.correct {
            border-color: #27ae60;
            background-color: #d5f4e6;
        }

        .worksheet-input.incorrect {
            border-color: #e74c3c;
            background-color: #fadbd8;
        }

        .worksheet-solution {
            background: #e8f5e8;
            border: 1px solid #27ae60;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            display: none;
        }

        .worksheet-score {
            background: linear-gradient(45deg, #00b894, #00a085);
            color: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.2em;
            font-weight: bold;
            margin: 20px 0;
            display: none;
        }

        .printable {
            font-family: 'Times New Roman', serif;
        }

        @media print {
            body * {
                visibility: hidden;
            }
            
            .worksheet-container, .worksheet-container * {
                visibility: visible;
            }
            
            .worksheet-container {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                box-shadow: none;
                margin: 0;
                padding: 20px;
            }
            
            .worksheet-controls {
                display: none !important;
            }
            
            .nav-btn, .quiz-btn {
                display: none !important;
            }
            
            .worksheet-header {
                margin-bottom: 30px;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .lesson-nav {
                flex-direction: column;
            }
            
            .nav-btn {
                width: 100%;
                margin: 5px 0;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>📐 Scientific & Engineering Notation for Electronics</h1>
            <p>Master the essential mathematical tools for electronics engineering</p>
            <div class="timer-display" id="lessonTimer">⏱️ Session Time: 00:00</div>
        </div>

        <nav class="lesson-nav">
            <button class="nav-btn active" onclick="showSection('intro')">🚀 Introduction</button>
            <button class="nav-btn" onclick="showSection('scientific')">🔬 Scientific Notation</button>
            <button class="nav-btn" onclick="showSection('engineering')">⚙️ Engineering Notation</button>
            <button class="nav-btn" onclick="showSection('significant')">📏 Significant Figures</button>
            <button class="nav-btn" onclick="showSection('applications')">💡 Applications</button>
            <button class="nav-btn" onclick="showSection('assessment1')">📝 Quiz 1</button>
            <button class="nav-btn" onclick="showSection('practice')">🎯 Practice Tools</button>
            <button class="nav-btn" onclick="showSection('worksheets')">📄 Interactive Worksheets</button>
            <button class="nav-btn" onclick="showSection('assessment2')">📝 Quiz 2</button>
            <button class="nav-btn" onclick="showSection('final')">🏆 Final Assessment</button>
        </nav>

        <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width: 10%"></div>
        </div>

        <!-- Introduction Section -->
        <section id="intro" class="lesson-section active">
            <h2>🚀 Welcome to Scientific & Engineering Notation</h2>
            
            <h3>Course Overview</h3>
            <p>In this comprehensive 2-hour lesson, you'll master the essential mathematical notation systems used throughout electronics engineering. These tools are not just mathematical conveniences – they're fundamental to how engineers communicate, calculate, and think about electronic systems.</p>

            <div class="example-box">
                <h4>Why This Matters in Electronics</h4>
                <p>Consider these real electronic components:</p>
                <ul>
                    <li><strong>CPU Clock Speed:</strong> 3,200,000,000 Hz (3.2 GHz)</li>
                    <li><strong>Capacitor Value:</strong> 0.000000047 Farads (47 nF)</li>
                    <li><strong>Resistor Value:</strong> 4,700,000 Ohms (4.7 MΩ)</li>
                </ul>
                <p>Which would you rather work with? The long numbers or the simplified notation? 🤔</p>
            </div>

            <h3>Learning Objectives</h3>
            <div class="important-note">
                By the end of this lesson, you will be able to:
                <ul>
                    <li>✅ Convert between standard, scientific, and engineering notation</li>
                    <li>✅ Understand when and why to use each notation system</li>
                    <li>✅ Apply significant figures correctly in calculations</li>
                    <li>✅ Interpret and use metric prefixes in electronics</li>
                    <li>✅ Solve real-world electronics problems using proper notation</li>
                </ul>
            </div>

            <h3>Course Structure</h3>
            <p>This lesson is designed as an interactive 2-hour journey:</p>
            <ul>
                <li><strong>Hour 1:</strong> Foundations (Scientific notation, Engineering notation, Significant figures)</li>
                <li><strong>Hour 2:</strong> Applications (Real-world examples, Practice tools, Assessments)</li>
            </ul>

            <div class="practice-box">
                <h4>Get Ready to Practice!</h4>
                <p>This isn't just theory – you'll be actively solving problems, taking quizzes, and using interactive tools. Keep a calculator handy (or use our built-in tools) and prepare to engage with the material!</p>
            </div>
        </section>

        <!-- Scientific Notation Section -->
        <section id="scientific" class="lesson-section">
            <h2>🔬 Scientific Notation Fundamentals</h2>

            <h3>What is Scientific Notation?</h3>
            <p>Scientific notation expresses numbers as a product of a coefficient (between 1 and 10) and a power of 10.</p>

            <div class="example-box">
                <h4>General Form: a × 10ⁿ</h4>
                <p>Where:</p>
                <ul>
                    <li><strong>a</strong> = coefficient (1 ≤ a < 10)</li>
                    <li><strong>n</strong> = exponent (positive or negative integer)</li>
                </ul>
                <p><strong>Examples:</strong></p>
                <ul>
                    <li>1,500,000 = 1.5 × 10⁶</li>
                    <li>0.00042 = 4.2 × 10⁻⁴</li>
                    <li>299,792,458 = 2.99792458 × 10⁸ (speed of light in m/s)</li>
                </ul>
            </div>

            <h3>Converting TO Scientific Notation</h3>
            
            <h4>For Large Numbers (≥ 10):</h4>
            <div class="practice-box">
                <p><strong>Step 1:</strong> Move decimal point left until one non-zero digit remains on the left</p>
                <p><strong>Step 2:</strong> Count the number of places moved (this becomes the positive exponent)</p>
                <p><strong>Step 3:</strong> Write in a × 10ⁿ form</p>
                
                <p><strong>Example:</strong> 47,000</p>
                <p>47,000.0 → 4.7000 × 10⁴ → 4.7 × 10⁴</p>
            </div>

            <h4>For Small Numbers (< 1):</h4>
            <div class="practice-box">
                <p><strong>Step 1:</strong> Move decimal point right until one non-zero digit is on the left</p>
                <p><strong>Step 2:</strong> Count the number of places moved (this becomes the negative exponent)</p>
                <p><strong>Step 3:</strong> Write in a × 10ⁿ form</p>
                
                <p><strong>Example:</strong> 0.0035</p>
                <p>0.0035 → 3.5 × 10⁻³</p>
            </div>

            <h3>Converting FROM Scientific Notation</h3>
            <div class="example-box">
                <h4>Positive Exponents (move decimal right):</h4>
                <p>6.23 × 10⁴ = 62,300</p>
                
                <h4>Negative Exponents (move decimal left):</h4>
                <p>3.7 × 10⁻⁵ = 0.000037</p>
            </div>

            <h3>Operations in Scientific Notation</h3>
            
            <h4>Multiplication:</h4>
            <p>Multiply coefficients, add exponents</p>
            <p>(2.5 × 10³) × (4.0 × 10⁵) = 10.0 × 10⁸ = 1.0 × 10⁹</p>

            <h4>Division:</h4>
            <p>Divide coefficients, subtract exponents</p>
            <p>(8.4 × 10⁶) ÷ (2.1 × 10²) = 4.0 × 10⁴</p>

            <div class="important-note">
                <strong>Calculator Tip:</strong> Most scientific calculators use "E" or "EE" to represent "× 10". So 1.5 × 10⁶ appears as "1.5E6" or "1.5E+06".
            </div>
        </section>

        <!-- Engineering Notation Section -->
        <section id="engineering" class="lesson-section">
            <h2>⚙️ Engineering Notation & Metric Prefixes</h2>

            <h3>What Makes Engineering Notation Different?</h3>
            <p>Engineering notation is a special form of scientific notation where the exponent must be a multiple of 3. This aligns perfectly with metric prefixes used in electronics.</p>

            <div class="example-box">
                <h4>Engineering Form: a × 10ⁿ</h4>
                <p>Where:</p>
                <ul>
                    <li><strong>a</strong> = coefficient (1 ≤ a < 1000)</li>
                    <li><strong>n</strong> = exponent (multiple of 3: ..., -9, -6, -3, 0, 3, 6, 9, ...)</li>
                </ul>
                <p><strong>Compare:</strong></p>
                <ul>
                    <li><strong>Scientific:</strong> 4.7 × 10⁴</li>
                    <li><strong>Engineering:</strong> 47 × 10³</li>
                </ul>
            </div>

            <h3>Metric Prefixes in Electronics</h3>
            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>Prefix</th>
                            <th>Symbol</th>
                            <th>Multiplier</th>
                            <th>Engineering Notation</th>
                            <th>Electronics Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>tera</td>
                            <td>T</td>
                            <td>1,000,000,000,000</td>
                            <td>10¹²</td>
                            <td>THz (Terahertz)</td>
                        </tr>
                        <tr>
                            <td>giga</td>
                            <td>G</td>
                            <td>1,000,000,000</td>
                            <td>10⁹</td>
                            <td>GHz (Gigahertz)</td>
                        </tr>
                        <tr>
                            <td>mega</td>
                            <td>M</td>
                            <td>1,000,000</td>
                            <td>10⁶</td>
                            <td>MHz (Megahertz), MΩ (Megohms)</td>
                        </tr>
                        <tr>
                            <td>kilo</td>
                            <td>k</td>
                            <td>1,000</td>
                            <td>10³</td>
                            <td>kHz (Kilohertz), kΩ (Kilohms)</td>
                        </tr>
                        <tr>
                            <td>(base unit)</td>
                            <td>-</td>
                            <td>1</td>
                            <td>10⁰</td>
                            <td>Hz, V, A, Ω</td>
                        </tr>
                        <tr>
                            <td>milli</td>
                            <td>m</td>
                            <td>0.001</td>
                            <td>10⁻³</td>
                            <td>mA (Milliamps), mV (Millivolts)</td>
                        </tr>
                        <tr>
                            <td>micro</td>
                            <td>μ</td>
                            <td>0.000001</td>
                            <td>10⁻⁶</td>
                            <td>μF (Microfarads), μA (Microamps)</td>
                        </tr>
                        <tr>
                            <td>nano</td>
                            <td>n</td>
                            <td>0.000000001</td>
                            <td>10⁻⁹</td>
                            <td>nF (Nanofarads), ns (Nanoseconds)</td>
                        </tr>
                        <tr>
                            <td>pico</td>
                            <td>p</td>
                            <td>0.000000000001</td>
                            <td>10⁻¹²</td>
                            <td>pF (Picofarads)</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>Converting Between Notations</h3>
            
            <div class="practice-box">
                <h4>Scientific → Engineering</h4>
                <p><strong>Rule:</strong> Adjust the coefficient and exponent so the exponent is a multiple of 3</p>
                
                <p><strong>Example 1:</strong> 4.7 × 10⁴</p>
                <p>Move decimal left 1 place, increase exponent by 1:</p>
                <p>4.7 × 10⁴ = 47 × 10³ = 47 k (kilounits)</p>
                
                <p><strong>Example 2:</strong> 2.3 × 10⁻⁵</p>
                <p>Move decimal right 1 place, decrease exponent by 1:</p>
                <p>2.3 × 10⁻⁵ = 23 × 10⁻⁶ = 23 μ (microunits)</p>
            </div>

            <h3>Real Electronics Examples</h3>
            <div class="example-box">
                <h4>Common Component Values</h4>
                <ul>
                    <li><strong>Resistors:</strong> 4.7kΩ = 4,700Ω = 4.7 × 10³Ω</li>
                    <li><strong>Capacitors:</strong> 47μF = 0.000047F = 47 × 10⁻⁶F</li>
                    <li><strong>Frequencies:</strong> 2.4GHz = 2,400,000,000Hz = 2.4 × 10⁹Hz</li>
                    <li><strong>Current:</strong> 150mA = 0.15A = 150 × 10⁻³A</li>
                </ul>
            </div>

            <div class="important-note">
                <strong>Why Engineering Notation in Electronics?</strong>
                <br>• Aligns with standard component values
                <br>• Makes mental calculations easier
                <br>• Matches industry conventions
                <br>• Reduces errors in communication
            </div>
        </section>

        <!-- Significant Figures Section -->
        <section id="significant" class="lesson-section">
            <h2>📏 Significant Figures & Precision</h2>

            <h3>What Are Significant Figures?</h3>
            <p>Significant figures (sig figs) are the meaningful digits in a number that convey the precision of a measurement. They tell us how accurately we know a value.</p>

            <div class="example-box">
                <h4>Why Significant Figures Matter in Electronics</h4>
                <p>Consider measuring a resistor:</p>
                <ul>
                    <li><strong>Multimeter reading:</strong> 4.7Ω (2 sig figs)</li>
                    <li><strong>Precision resistor:</strong> 4.700Ω (4 sig figs)</li>
                    <li><strong>Laboratory standard:</strong> 4.7000Ω (5 sig figs)</li>
                </ul>
                <p>Each tells us something different about measurement precision!</p>
            </div>

            <h3>Rules for Identifying Significant Figures</h3>

            <h4>1. Non-zero digits are ALWAYS significant</h4>
            <div class="practice-box">
                <p>Examples:</p>
                <ul>
                    <li>123 → 3 sig figs</li>
                    <li>4.56 → 3 sig figs</li>
                    <li>7.89 × 10⁴ → 3 sig figs</li>
                </ul>
            </div>

            <h4>2. Zeros between non-zero digits are ALWAYS significant</h4>
            <div class="practice-box">
                <p>Examples:</p>
                <ul>
                    <li>105 → 3 sig figs</li>
                    <li>2.03 → 3 sig figs</li>
                    <li>10.05 → 4 sig figs</li>
                </ul>
            </div>

            <h4>3. Leading zeros are NEVER significant</h4>
            <div class="practice-box">
                <p>Examples:</p>
                <ul>
                    <li>0.05 → 1 sig fig</li>
                    <li>0.0123 → 3 sig figs</li>
                    <li>0.000456 → 3 sig figs</li>
                </ul>
            </div>

            <h4>4. Trailing zeros after decimal point are ALWAYS significant</h4>
            <div class="practice-box">
                <p>Examples:</p>
                <ul>
                    <li>1.50 → 3 sig figs</li>
                    <li>0.120 → 3 sig figs</li>
                    <li>5.00 → 3 sig figs</li>
                </ul>
            </div>

            <h4>5. Trailing zeros without decimal point are AMBIGUOUS</h4>
            <div class="practice-box">
                <p>Examples (ambiguous):</p>
                <ul>
                    <li>1500 → Could be 2, 3, or 4 sig figs</li>
                    <li>2300 → Could be 2, 3, or 4 sig figs</li>
                </ul>
                <p><strong>Solution:</strong> Use scientific notation!</p>
                <ul>
                    <li>1.5 × 10³ → 2 sig figs</li>
                    <li>1.50 × 10³ → 3 sig figs</li>
                    <li>1.500 × 10³ → 4 sig figs</li>
                </ul>
            </div>

            <h3>Calculations with Significant Figures</h3>

            <h4>Addition and Subtraction</h4>
            <div class="important-note">
                <strong>Rule:</strong> Round to the same decimal place as the measurement with the fewest decimal places.
            </div>
            <div class="practice-box">
                <p><strong>Example:</strong></p>
                <p>12.1 V + 0.0523 V + 1.45 V = ?</p>
                <p>12.1 (1 decimal place) ← limiting factor</p>
                <p>+ 0.0523</p>
                <p>+ 1.45</p>
                <p>= 13.6023 → <strong>13.6 V</strong> (rounded to 1 decimal place)</p>
            </div>

            <h4>Multiplication and Division</h4>
            <div class="important-note">
                <strong>Rule:</strong> Round to the same number of significant figures as the measurement with the fewest sig figs.
            </div>
            <div class="practice-box">
                <p><strong>Example:</strong></p>
                <p>V = I × R = 0.125 A × 47.0 Ω = ?</p>
                <p>0.125 A (3 sig figs) ← limiting factor</p>
                <p>× 47.0 Ω (3 sig figs)</p>
                <p>= 5.875 V → <strong>5.88 V</strong> (rounded to 3 sig figs)</p>
            </div>

            <h3>Significant Figures in Engineering Context</h3>
            <div class="example-box">
                <h4>Component Tolerances and Sig Figs</h4>
                <p>Electronics components have built-in tolerances that affect significant figures:</p>
                <ul>
                    <li><strong>Standard resistor (5% tolerance):</strong> 47kΩ ± 5% → 2 sig figs appropriate</li>
                    <li><strong>Precision resistor (0.1% tolerance):</strong> 47.00kΩ ± 0.1% → 4 sig figs appropriate</li>
                    <li><strong>Multimeter (0.01% accuracy):</strong> Can display many sig figs, but circuit tolerance may limit meaningful precision</li>
                </ul>
            </div>

            <div class="important-note">
                <strong>Engineering Insight:</strong> Don't report more precision than your measurement tools and components can actually provide. It's misleading and unprofessional!
            </div>
        </section>

        <!-- Applications Section -->
        <section id="applications" class="lesson-section">
            <h2>💡 Real-World Applications in Electronics</h2>

            <h3>Circuit Analysis with Proper Notation</h3>
            
            <h4>Ohm's Law Calculations</h4>
            <div class="example-box">
                <h4>Problem: Calculate current in a circuit</h4>
                <p><strong>Given:</strong></p>
                <ul>
                    <li>Voltage: 12.0 V (3 sig figs)</li>
                    <li>Resistance: 2.2 kΩ (2 sig figs) = 2.2 × 10³ Ω</li>
                </ul>
                <p><strong>Find:</strong> Current (I)</p>
                <p><strong>Solution:</strong></p>
                <p>I = V/R = 12.0 V ÷ (2.2 × 10³ Ω)</p>
                <p>I = 5.454... × 10⁻³ A</p>
                <p>I = 5.5 × 10⁻³ A = 5.5 mA (2 sig figs)</p>
            </div>

            <h4>Frequency and Period Relationships</h4>
            <div class="practice-box">
                <h4>Problem: Convert between frequency and period</h4>
                <p><strong>Given:</strong> Clock frequency = 3.2 GHz</p>
                <p><strong>Find:</strong> Period of one clock cycle</p>
                <p><strong>Solution:</strong></p>
                <p>f = 3.2 GHz = 3.2 × 10⁹ Hz</p>
                <p>T = 1/f = 1/(3.2 × 10⁹ Hz)</p>
                <p>T = 3.125 × 10⁻¹⁰ s = 312.5 × 10⁻¹² s = 312.5 ps</p>
            </div>

            <h3>Component Value Reading</h3>
            
            <h4>Resistor Color Codes vs. Digital Readouts</h4>
            <div class="example-box">
                <h4>Standard Resistor Values</h4>
                <p>Resistors come in standard values based on their tolerance:</p>
                <ul>
                    <li><strong>E12 series (10% tolerance):</strong> 1.0, 1.2, 1.5, 1.8, 2.2, 2.7, 3.3, 3.9, 4.7, 5.6, 6.8, 8.2</li>
                    <li><strong>Multiplied by powers of 10:</strong> 47Ω, 470Ω, 4.7kΩ, 47kΩ, 470kΩ, 4.7MΩ</li>
                </ul>
                <p>Note how engineering notation (4.7k, 47k) is naturally used!</p>
            </div>

            <h4>Capacitor Value Markings</h4>
            <div class="practice-box">
                <h4>Common Capacitor Values and Notation</h4>
                <ul>
                    <li><strong>Ceramic capacitors:</strong> Often marked in pF</li>
                    <li>104 → 10 × 10⁴ pF = 100,000 pF = 100 nF = 0.1 μF</li>
                    <li><strong>Electrolytic capacitors:</strong> Often marked in μF</li>
                    <li>470μF = 470 × 10⁻⁶ F = 4.7 × 10⁻⁴ F</li>
                </ul>
            </div>

            <h3>Signal Processing Applications</h3>
            
            <h4>Bandwidth and Data Rates</h4>
            <div class="example-box">
                <h4>Problem: Data transmission calculation</h4>
                <p><strong>Scenario:</strong> USB 3.0 specification</p>
                <p><strong>Data rate:</strong> 5 Gbps (Gigabits per second)</p>
                <p><strong>Calculate time to transfer 1 GB file:</strong></p>
                <p>5 Gbps = 5 × 10⁹ bits/second</p>
                <p>1 GB = 8 × 10⁹ bits (8 bits per byte)</p>
                <p>Time = (8 × 10⁹ bits) ÷ (5 × 10⁹ bits/s) = 1.6 s</p>
            </div>

            <h4>Power Calculations</h4>
            <div class="practice-box">
                <h4>Problem: Power dissipation in a resistor</h4>
                <p><strong>Given:</strong></p>
                <ul>
                    <li>Voltage across resistor: 5.0 V</li>
                    <li>Resistance: 1.2 kΩ = 1.2 × 10³ Ω</li>
                </ul>
                <p><strong>Find:</strong> Power dissipated</p>
                <p><strong>Solution:</strong></p>
                <p>P = V²/R = (5.0 V)² ÷ (1.2 × 10³ Ω)</p>
                <p>P = 25 V² ÷ (1.2 × 10³ Ω)</p>
                <p>P = 20.833... × 10⁻³ W</p>
                <p>P = 21 × 10⁻³ W = 21 mW (2 sig figs)</p>
            </div>

            <h3>When to Use Each Notation</h3>
            <div class="important-note">
                <h4>Decision Guide:</h4>
                <ul>
                    <li><strong>Scientific Notation:</strong> Use for calculations, very large/small numbers, when precise powers of 10 matter</li>
                    <li><strong>Engineering Notation:</strong> Use for component values, specifications, communication with other engineers</li>
                    <li><strong>Standard Notation:</strong> Use for simple values, when precision isn't critical</li>
                </ul>
            </div>

            <div class="example-box">
                <h4>Context Examples</h4>
                <ul>
                    <li><strong>Laboratory report:</strong> "The measured capacitance was 47.3 ± 0.2 nF"</li>
                    <li><strong>Circuit diagram:</strong> "R1 = 4.7kΩ"</li>
                    <li><strong>Calculation:</strong> "f = 1/(2π√LC) = 1.59 × 10⁵ Hz = 159 kHz"</li>
                    <li><strong>Specification sheet:</strong> "Maximum operating frequency: 2.4 GHz"</li>
                </ul>
            </div>
        </section>

        <!-- Assessment 1 Section -->
        <section id="assessment1" class="lesson-section">
            <h2>📝 Quiz 1: Notation Fundamentals</h2>
            <p>Test your understanding of scientific and engineering notation basics!</p>

            <div class="quiz-container">
                <div class="quiz-question" id="q1-question">
                    Question 1: Convert 0.00456 to scientific notation
                </div>
                <div class="quiz-options" id="q1-options">
                    <div class="quiz-option" onclick="selectOption(1, 1, false)">A) 4.56 × 10³</div>
                    <div class="quiz-option" onclick="selectOption(1, 2, false)">B) 45.6 × 10⁻⁴</div>
                    <div class="quiz-option" onclick="selectOption(1, 3, true)">C) 4.56 × 10⁻³</div>
                    <div class="quiz-option" onclick="selectOption(1, 4, false)">D) 0.456 × 10⁻²</div>
                </div>
                <button class="quiz-btn" onclick="submitAnswer(1)" disabled>Submit Answer</button>
                <div id="q1-feedback" style="margin-top: 15px;"></div>
            </div>

            <div class="quiz-container">
                <div class="quiz-question" id="q2-question">
                    Question 2: Convert 3.7 × 10⁴ to engineering notation
                </div>
                <div class="quiz-options" id="q2-options">
                    <div class="quiz-option" onclick="selectOption(2, 1, false)">A) 3.7 × 10⁴</div>
                    <div class="quiz-option" onclick="selectOption(2, 2, true)">B) 37 × 10³</div>
                    <div class="quiz-option" onclick="selectOption(2, 3, false)">C) 370 × 10²</div>
                    <div class="quiz-option" onclick="selectOption(2, 4, false)">D) 0.37 × 10⁵</div>
                </div>
                <button class="quiz-btn" onclick="submitAnswer(2)" disabled>Submit Answer</button>
                <div id="q2-feedback" style="margin-top: 15px;"></div>
            </div>

            <div class="quiz-container">
                <div class="quiz-question" id="q3-question">
                    Question 3: How many significant figures does 0.01200 have?
                </div>
                <div class="quiz-options" id="q3-options">
                    <div class="quiz-option" onclick="selectOption(3, 1, false)">A) 2</div>
                    <div class="quiz-option" onclick="selectOption(3, 2, false)">B) 3</div>
                    <div class="quiz-option" onclick="selectOption(3, 3, true)">C) 4</div>
                    <div class="quiz-option" onclick="selectOption(3, 4, false)">D) 5</div>
                </div>
                <button class="quiz-btn" onclick="submitAnswer(3)" disabled>Submit Answer</button>
                <div id="q3-feedback" style="margin-top: 15px;"></div>
            </div>

            <div class="quiz-container">
                <div class="quiz-question" id="q4-question">
                    Question 4: What is 47 kΩ in standard notation?
                </div>
                <div class="quiz-options" id="q4-options">
                    <div class="quiz-option" onclick="selectOption(4, 1, false)">A) 47,000 Ω</div>
                    <div class="quiz-option" onclick="selectOption(4, 2, false)">B) 4,700 Ω</div>
                    <div class="quiz-option" onclick="selectOption(4, 3, true)">C) 47,000 Ω</div>
                    <div class="quiz-option" onclick="selectOption(4, 4, false)">D) 470,000 Ω</div>
                </div>
                <button class="quiz-btn" onclick="submitAnswer(4)" disabled>Submit Answer</button>
                <div id="q4-feedback" style="margin-top: 15px;"></div>
            </div>

            <div class="score-display" id="quiz1-score" style="display: none;">
                Quiz 1 Score: <span id="quiz1-score-value">0</span>/4
            </div>

            <button class="quiz-btn" onclick="resetQuiz(1)" style="display: none;" id="reset1-btn">Retake Quiz</button>
        </section>

        <!-- Practice Tools Section -->
        <section id="practice" class="lesson-section">
            <h2>🎯 Interactive Practice Tools</h2>

            <h3>Notation Converter Tool</h3>
            <div class="calculator-tool">
                <h4>Number Converter</h4>
                <p>Enter a number to see it in all three notations:</p>
                <input type="text" class="calculator-input" id="converterInput" placeholder="Enter a number (e.g., 0.00456 or 4.7E6)">
                <button class="quiz-btn" onclick="convertNumber()">Convert</button>
                <div class="calculator-result" id="converterResult">
                    Enter a number above to see conversions
                </div>
            </div>

            <h3>Significant Figures Counter</h3>
            <div class="calculator-tool">
                <h4>Sig Fig Analyzer</h4>
                <p>Enter a number to count its significant figures:</p>
                <input type="text" class="calculator-input" id="sigFigInput" placeholder="Enter a number (e.g., 0.01200)">
                <button class="quiz-btn" onclick="countSigFigs()">Analyze</button>
                <div class="calculator-result" id="sigFigResult">
                    Enter a number above to analyze
                </div>
            </div>

            <h3>Engineering Calculation Practice</h3>
            <div class="practice-box">
                <h4>Ohm's Law Calculator with Proper Notation</h4>
                <p>Practice calculations with significant figures and engineering notation:</p>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0;">
                    <div>
                        <label>Voltage (V):</label>
                        <input type="text" class="calculator-input" id="voltageInput" placeholder="e.g., 12.0">
                    </div>
                    <div>
                        <label>Resistance (Ω):</label>
                        <input type="text" class="calculator-input" id="resistanceInput" placeholder="e.g., 4.7k">
                    </div>
                </div>
                
                <button class="quiz-btn" onclick="calculateOhmsLaw()">Calculate Current</button>
                <div class="calculator-result" id="ohmsLawResult">
                    Enter values above to calculate
                </div>
            </div>

            <h3>Component Value Practice</h3>
            <div class="example-box">
                <h4>Common Electronics Conversions</h4>
                <p>Practice these mental conversions:</p>
                <ul>
                    <li>1 kΩ = _____ Ω</li>
                    <li>470 pF = _____ nF</li>
                    <li>2.2 μF = _____ F</li>
                    <li>3.3 GHz = _____ Hz</li>
                    <li>150 mA = _____ A</li>
                </ul>
                
                <button class="quiz-btn" onclick="showConversions()">Show Answers</button>
                <div id="conversionAnswers" style="display: none; margin-top: 15px;">
                    <strong>Answers:</strong>
                    <ul>
                        <li>1 kΩ = 1,000 Ω = 1.0 × 10³ Ω</li>
                        <li>470 pF = 0.47 nF = 4.7 × 10⁻¹⁰ F</li>
                        <li>2.2 μF = 0.0000022 F = 2.2 × 10⁻⁶ F</li>
                        <li>3.3 GHz = 3,300,000,000 Hz = 3.3 × 10⁹ Hz</li>
                        <li>150 mA = 0.15 A = 1.5 × 10⁻¹ A</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Interactive Worksheets Section -->
        <section id="worksheets" class="lesson-section">
            <h2>📄 Interactive Practice Worksheets</h2>
            <p>Complete these randomized worksheets to practice your skills. Each time you load a worksheet, you'll get new problems!</p>

            <div class="worksheet-header">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label><strong>Student Name:</strong></label>
                        <input type="text" class="calculator-input" id="studentName" placeholder="Enter your name">
                    </div>
                    <div>
                        <label><strong>Date:</strong></label>
                        <input type="date" class="calculator-input" id="worksheetDate">
                    </div>
                </div>
                
                <div class="lesson-nav" style="margin-bottom: 30px;">
                    <button class="nav-btn" onclick="selectWorksheet('scientific')">Scientific Notation</button>
                    <button class="nav-btn" onclick="selectWorksheet('engineering')">Engineering Notation</button>
                    <button class="nav-btn" onclick="selectWorksheet('sigfigs')">Significant Figures</button>
                    <button class="nav-btn" onclick="selectWorksheet('electronics')">Electronics Applications</button>
                    <button class="nav-btn" onclick="selectWorksheet('mixed')">Mixed Practice</button>
                </div>

                <div class="worksheet-controls">
                    <button class="quiz-btn" onclick="generateWorksheet()">🔄 Generate New Worksheet</button>
                    <button class="quiz-btn" onclick="printWorksheet()">🖨️ Print Worksheet</button>
                    <button class="quiz-btn" onclick="downloadPDF()">📥 Download PDF</button>
                    <button class="quiz-btn" onclick="checkAnswers()">✅ Check My Answers</button>
                </div>
            </div>

            <div id="worksheet-content" class="worksheet-container">
                <div class="important-note">
                    <h3>🎯 Interactive Worksheet System</h3>
                    <p><strong>How to use:</strong></p>
                    <ol>
                        <li>Enter your name and select today's date above</li>
                        <li>Choose a worksheet type (Scientific Notation, Engineering Notation, etc.)</li>
                        <li>Click "Generate New Worksheet" to create randomized problems</li>
                        <li>Complete the problems in the input fields</li>
                        <li>Click "Check My Answers" for immediate feedback</li>
                        <li>Use "Print" or "Download PDF" to submit to your instructor</li>
                    </ol>
                    <p><strong>✨ Each worksheet is unique!</strong> New problems are generated every time you click "Generate New Worksheet"</p>
                </div>
            </div>
        </section>

        <!-- Assessment 2 Section -->
        <section id="assessment2" class="lesson-section">
            <h2>📝 Quiz 2: Applications & Calculations</h2>
            <p>Apply your knowledge to real electronics problems!</p>

            <div class="quiz-container">
                <div class="quiz-question" id="q2_1-question">
                    Question 1: Calculate I = V/R with proper significant figures.<br>
                    V = 9.0 V, R = 1.5 kΩ
                </div>
                <div class="quiz-options" id="q2_1-options">
                    <div class="quiz-option" onclick="selectOption('2_1', 1, false)">A) 6 mA</div>
                    <div class="quiz-option" onclick="selectOption('2_1', 2, true)">B) 6.0 mA</div>
                    <div class="quiz-option" onclick="selectOption('2_1', 3, false)">C) 6.00 mA</div>
                    <div class="quiz-option" onclick="selectOption('2_1', 4, false)">D) 0.006 A</div>
                </div>
                <button class="quiz-btn" onclick="submitAnswer('2_1')" disabled>Submit Answer</button>
                <div id="q2_1-feedback" style="margin-top: 15px;"></div>
            </div>

            <div class="quiz-container">
                <div class="quiz-question" id="q2_2-question">
                    Question 2: What is the period of a 2.4 GHz signal?
                </div>
                <div class="quiz-options" id="q2_2-options">
                    <div class="quiz-option" onclick="selectOption('2_2', 1, false)">A) 4.17 ns</div>
                    <div class="quiz-option" onclick="selectOption('2_2', 2, true)">B) 417 ps</div>
                    <div class="quiz-option" onclick="selectOption('2_2', 3, false)">C) 0.417 ns</div>
                    <div class="quiz-option" onclick="selectOption('2_2', 4, false)">D) 41.7 ps</div>
                </div>
                <button class="quiz-btn" onclick="submitAnswer('2_2')" disabled>Submit Answer</button>
                <div id="q2_2-feedback" style="margin-top: 15px;"></div>
            </div>

            <div class="quiz-container">
                <div class="quiz-question" id="q2_3-question">
                    Question 3: A capacitor is marked "104". What is its value in microfarads?
                </div>
                <div class="quiz-options" id="q2_3-options">
                    <div class="quiz-option" onclick="selectOption('2_3', 1, true)">A) 0.1 μF</div>
                    <div class="quiz-option" onclick="selectOption('2_3', 2, false)">B) 10.4 μF</div>
                    <div class="quiz-option" onclick="selectOption('2_3', 3, false)">C) 104 μF</div>
                    <div class="quiz-option" onclick="selectOption('2_3', 4, false)">D) 1.04 μF</div>
                </div>
                <button class="quiz-btn" onclick="submitAnswer('2_3')" disabled>Submit Answer</button>
                <div id="q2_3-feedback" style="margin-top: 15px;"></div>
            </div>

            <div class="score-display" id="quiz2-score" style="display: none;">
                Quiz 2 Score: <span id="quiz2-score-value">0</span>/3
            </div>

            <button class="quiz-btn" onclick="resetQuiz(2)" style="display: none;" id="reset2-btn">Retake Quiz</button>
        </section>

        <!-- Final Assessment Section -->
        <section id="final" class="lesson-section">
            <h2>🏆 Final Comprehensive Assessment</h2>
            <p>Demonstrate mastery of all concepts in this challenging final quiz!</p>

            <div class="quiz-container">
                <div class="quiz-question" id="qf1-question">
                    Question 1: Convert 4.7 × 10⁻⁶ F to the most appropriate engineering notation for electronics
                </div>
                <div class="quiz-options" id="qf1-options">
                    <div class="quiz-option" onclick="selectOption('f1', 1, false)">A) 4700 nF</div>
                    <div class="quiz-option" onclick="selectOption('f1', 2, true)">B) 4.7 μF</div>
                    <div class="quiz-option" onclick="selectOption('f1', 3, false)">C) 0.0047 mF</div>
                    <div class="quiz-option" onclick="selectOption('f1', 4, false)">D) 47 × 10⁻⁷ F</div>
                </div>
                <button class="quiz-btn" onclick="submitAnswer('f1')" disabled>Submit Answer</button>
                <div id="qf1-feedback" style="margin-top: 15px;"></div>
            </div>

            <div class="quiz-container">
                <div class="quiz-question" id="qf2-question">
                    Question 2: A precision measurement gives 12.750 V. How many significant figures should be used in calculations?
                </div>
                <div class="quiz-options" id="qf2-options">
                    <div class="quiz-option" onclick="selectOption('f2', 1, false)">A) 3</div>
                    <div class="quiz-option" onclick="selectOption('f2', 2, false)">B) 4</div>
                    <div class="quiz-option" onclick="selectOption('f2', 3, true)">C) 5</div>
                    <div class="quiz-option" onclick="selectOption('f2', 4, false)">D) 6</div>
                </div>
                <button class="quiz-btn" onclick="submitAnswer('f2')" disabled>Submit Answer</button>
                <div id="qf2-feedback" style="margin-top: 15px;"></div>
            </div>

            <div class="quiz-container">
                <div class="quiz-question" id="qf3-question">
                    Question 3: Calculate the power: P = I²R where I = 25.0 mA and R = 2.2 kΩ
                </div>
                <div class="quiz-options" id="qf3-options">
                    <div class="quiz-option" onclick="selectOption('f3', 1, false)">A) 1.4 W</div>
                    <div class="quiz-option" onclick="selectOption('f3', 2, true)">B) 1.4 mW</div>
                    <div class="quiz-option" onclick="selectOption('f3', 3, false)">C) 1.38 mW</div>
                    <div class="quiz-option" onclick="selectOption('f3', 4, false)">D) 0.0014 W</div>
                </div>
                <button class="quiz-btn" onclick="submitAnswer('f3')" disabled>Submit Answer</button>
                <div id="qf3-feedback" style="margin-top: 15px;"></div>
            </div>

            <div class="quiz-container">
                <div class="quiz-question" id="qf4-question">
                    Question 4: Which notation is BEST for communicating a 4,700,000 Hz frequency to another engineer?
                </div>
                <div class="quiz-options" id="qf4-options">
                    <div class="quiz-option" onclick="selectOption('f4', 1, false)">A) 4.7 × 10⁶ Hz</div>
                    <div class="quiz-option" onclick="selectOption('f4', 2, true)">B) 4.7 MHz</div>
                    <div class="quiz-option" onclick="selectOption('f4', 3, false)">C) 4,700,000 Hz</div>
                    <div class="quiz-option" onclick="selectOption('f4', 4, false)">D) 4700 kHz</div>
                </div>
                <button class="quiz-btn" onclick="submitAnswer('f4')" disabled>Submit Answer</button>
                <div id="qf4-feedback" style="margin-top: 15px;"></div>
            </div>

            <div class="quiz-container">
                <div class="quiz-question" id="qf5-question">
                    Question 5: You measure a resistor as 4700 Ω ± 5%. What is the appropriate way to report this value?
                </div>
                <div class="quiz-options" id="qf5-options">
                    <div class="quiz-option" onclick="selectOption('f5', 1, true)">A) 4.7 kΩ</div>
                    <div class="quiz-option" onclick="selectOption('f5', 2, false)">B) 4.70 kΩ</div>
                    <div class="quiz-option" onclick="selectOption('f5', 3, false)">C) 4.700 kΩ</div>
                    <div class="quiz-option" onclick="selectOption('f5', 4, false)">D) 4700.0 Ω</div>
                </div>
                <button class="quiz-btn" onclick="submitAnswer('f5')" disabled>Submit Answer</button>
                <div id="qf5-feedback" style="margin-top: 15px;"></div>
            </div>

            <div class="score-display" id="quiz-final-score" style="display: none;">
                Final Assessment Score: <span id="quiz-final-score-value">0</span>/5
            </div>

            <div id="final-completion" style="display: none; text-align: center; margin-top: 30px;">
                <h3>🎉 Congratulations!</h3>
                <p>You have completed the Scientific & Engineering Notation lesson!</p>
                <div class="important-note">
                    <strong>Your Learning Journey:</strong><br>
                    Total Session Time: <span id="totalTime">--:--</span><br>
                    Overall Performance: <span id="overallGrade">--</span>
                </div>
            </div>

            <button class="quiz-btn" onclick="resetQuiz('final')" style="display: none;" id="reset-final-btn">Retake Final Assessment</button>
        </section>
    </div>

    <script>
        // Global variables
        let selectedAnswers = {};
        let quiz1Score = 0;
        let quiz2Score = 0;
        let finalScore = 0;
        let startTime = Date.now();
        let currentSection = 'intro';

        // Worksheet variables
        let currentWorksheetType = '';
        let worksheetProblems = [];
        let worksheetAnswers = [];

        // Timer functionality
        function updateTimer() {
            const elapsed = Date.now() - startTime;
            const minutes = Math.floor(elapsed / 60000);
            const seconds = Math.floor((elapsed % 60000) / 1000);
            document.getElementById('lessonTimer').textContent = 
                `⏱️ Session Time: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Update timer every second
        setInterval(updateTimer, 1000);

        // Section navigation
        function showSection(sectionId) {
            // Hide all sections
            const sections = document.querySelectorAll('.lesson-section');
            sections.forEach(section => {
                section.classList.remove('active');
            });

            // Show selected section
            document.getElementById(sectionId).classList.add('active');

            // Update navigation buttons
            const navButtons = document.querySelectorAll('.nav-btn');
            navButtons.forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // Update progress bar
            const sectionOrder = ['intro', 'scientific', 'engineering', 'significant', 'applications', 'assessment1', 'practice', 'worksheets', 'assessment2', 'final'];
            const progress = ((sectionOrder.indexOf(sectionId) + 1) / sectionOrder.length) * 100;
            document.getElementById('progressFill').style.width = progress + '%';

            currentSection = sectionId;
        }

        // Quiz functionality
        function selectOption(questionId, optionNum, isCorrect) {
            const questionElement = document.getElementById(`q${questionId}-options`);
            const options = questionElement.querySelectorAll('.quiz-option');
            
            // Clear previous selections
            options.forEach(option => {
                option.classList.remove('selected');
            });
            
            // Mark current selection
            options[optionNum - 1].classList.add('selected');
            
            // Store the answer
            selectedAnswers[questionId] = {
                selected: optionNum,
                correct: isCorrect
            };
            
            // Enable submit button
            document.querySelector(`button[onclick="submitAnswer(${questionId})"], button[onclick="submitAnswer('${questionId}')"]`).disabled = false;
        }

        function submitAnswer(questionId) {
            const answer = selectedAnswers[questionId];
            const feedbackElement = document.getElementById(`q${questionId}-feedback`);
            const questionElement = document.getElementById(`q${questionId}-options`);
            const options = questionElement.querySelectorAll('.quiz-option');
            
            // Disable further selection
            options.forEach(option => {
                option.style.pointerEvents = 'none';
            });
            
            // Show correct/incorrect styling
            options.forEach((option, index) => {
                if (index === answer.selected - 1) {
                    option.classList.add(answer.correct ? 'correct' : 'incorrect');
                }
            });
            
            // Disable submit button
            document.querySelector(`button[onclick="submitAnswer(${questionId})"], button[onclick="submitAnswer('${questionId}')"]`).disabled = true;
            
            // Show feedback
            if (answer.correct) {
                feedbackElement.innerHTML = '<div style="color: #27ae60; font-weight: bold;">✅ Correct!</div>';
                
                // Update scores based on quiz
                if (questionId <= 4) {
                    quiz1Score++;
                } else if (questionId.startsWith('2_')) {
                    quiz2Score++;
                } else if (questionId.startsWith('f')) {
                    finalScore++;
                }
            } else {
                feedbackElement.innerHTML = '<div style="color: #e74c3c; font-weight: bold;">❌ Incorrect. The correct answer is highlighted above.</div>';
                
                // Highlight correct answer
                const correctAnswers = {
                    1: 3, 2: 2, 3: 3, 4: 1,
                    '2_1': 2, '2_2': 2, '2_3': 1,
                    'f1': 2, 'f2': 3, 'f3': 2, 'f4': 2, 'f5': 1
                };
                if (correctAnswers[questionId]) {
                    options[correctAnswers[questionId] - 1].classList.add('correct');
                }
            }
            
            // Check if quiz is complete
            checkQuizCompletion(questionId);
        }

        function checkQuizCompletion(questionId) {
            if (questionId <= 4) {
                // Quiz 1
                const answeredQuestions = Object.keys(selectedAnswers).filter(q => q <= 4).length;
                if (answeredQuestions === 4) {
                    document.getElementById('quiz1-score').style.display = 'block';
                    document.getElementById('quiz1-score-value').textContent = quiz1Score;
                    document.getElementById('reset1-btn').style.display = 'inline-block';
                }
            } else if (questionId.startsWith('2_')) {
                // Quiz 2
                const answeredQuestions = Object.keys(selectedAnswers).filter(q => q.startsWith('2_')).length;
                if (answeredQuestions === 3) {
                    document.getElementById('quiz2-score').style.display = 'block';
                    document.getElementById('quiz2-score-value').textContent = quiz2Score;
                    document.getElementById('reset2-btn').style.display = 'inline-block';
                }
            } else if (questionId.startsWith('f')) {
                // Final quiz
                const answeredQuestions = Object.keys(selectedAnswers).filter(q => q.startsWith('f')).length;
                if (answeredQuestions === 5) {
                    document.getElementById('quiz-final-score').style.display = 'block';
                    document.getElementById('quiz-final-score-value').textContent = finalScore;
                    document.getElementById('reset-final-btn').style.display = 'inline-block';
                    document.getElementById('final-completion').style.display = 'block';
                    
                    // Calculate final statistics
                    const totalQuestions = 12;
                    const totalCorrect = quiz1Score + quiz2Score + finalScore;
                    const percentage = Math.round((totalCorrect / totalQuestions) * 100);
                    
                    let grade = 'F';
                    if (percentage >= 90) grade = 'A';
                    else if (percentage >= 80) grade = 'B';
                    else if (percentage >= 70) grade = 'C';
                    else if (percentage >= 60) grade = 'D';
                    
                    document.getElementById('overallGrade').textContent = `${totalCorrect}/${totalQuestions} (${percentage}%) - Grade: ${grade}`;
                    
                    const elapsed = Date.now() - startTime;
                    const minutes = Math.floor(elapsed / 60000);
                    const seconds = Math.floor((elapsed % 60000) / 1000);
                    document.getElementById('totalTime').textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                }
            }
        }

        function resetQuiz(quizNum) {
            if (quizNum === 1) {
                // Reset Quiz 1
                for (let i = 1; i <= 4; i++) {
                    delete selectedAnswers[i];
                    const options = document.getElementById(`q${i}-options`).querySelectorAll('.quiz-option');
                    options.forEach(option => {
                        option.classList.remove('selected', 'correct', 'incorrect');
                        option.style.pointerEvents = 'auto';
                    });
                    document.querySelector(`button[onclick="submitAnswer(${i})"]`).disabled = true;
                    document.getElementById(`q${i}-feedback`).innerHTML = '';
                }
                document.getElementById('quiz1-score').style.display = 'none';
                document.getElementById('reset1-btn').style.display = 'none';
                quiz1Score = 0;
            } else if (quizNum === 2) {
                // Reset Quiz 2
                ['2_1', '2_2', '2_3'].forEach(qId => {
                    delete selectedAnswers[qId];
                    const options = document.getElementById(`q${qId}-options`).querySelectorAll('.quiz-option');
                    options.forEach(option => {
                        option.classList.remove('selected', 'correct', 'incorrect');
                        option.style.pointerEvents = 'auto';
                    });
                    document.querySelector(`button[onclick="submitAnswer('${qId}')"]`).disabled = true;
                    document.getElementById(`q${qId}-feedback`).innerHTML = '';
                });
                document.getElementById('quiz2-score').style.display = 'none';
                document.getElementById('reset2-btn').style.display = 'none';
                quiz2Score = 0;
            } else if (quizNum === 'final') {
                // Reset Final Quiz
                ['f1', 'f2', 'f3', 'f4', 'f5'].forEach(qId => {
                    delete selectedAnswers[qId];
                    const options = document.getElementById(`q${qId}-options`).querySelectorAll('.quiz-option');
                    options.forEach(option => {
                        option.classList.remove('selected', 'correct', 'incorrect');
                        option.style.pointerEvents = 'auto';
                    });
                    document.querySelector(`button[onclick="submitAnswer('${qId}')"]`).disabled = true;
                    document.getElementById(`q${qId}-feedback`).innerHTML = '';
                });
                document.getElementById('quiz-final-score').style.display = 'none';
                document.getElementById('reset-final-btn').style.display = 'none';
                document.getElementById('final-completion').style.display = 'none';
                finalScore = 0;
            }
        }

        // Practice tools
        function convertNumber() {
            const input = document.getElementById('converterInput').value;
            const result = document.getElementById('converterResult');
            
            if (!input) {
                result.innerHTML = 'Please enter a number';
                return;
            }
            
            try {
                let num = parseFloat(input.replace(/[Ee]/g, 'e'));
                
                if (isNaN(num)) {
                    result.innerHTML = 'Invalid number format';
                    return;
                }
                
                // Standard notation
                const standard = num.toString();
                
                // Scientific notation
                const scientific = num.toExponential(3);
                
                // Engineering notation
                let engExp = Math.floor(Math.log10(Math.abs(num)) / 3) * 3;
                let engCoeff = num / Math.pow(10, engExp);
                const engineering = `${engCoeff.toFixed(3)} × 10^${engExp}`;
                
                result.innerHTML = `
                    <strong>Standard:</strong> ${standard}<br>
                    <strong>Scientific:</strong> ${scientific}<br>
                    <strong>Engineering:</strong> ${engineering}
                `;
            } catch (error) {
                result.innerHTML = 'Error processing number';
            }
        }

        function countSigFigs() {
            const input = document.getElementById('sigFigInput').value.trim();
            const result = document.getElementById('sigFigResult');
            
            if (!input) {
                result.innerHTML = 'Please enter a number';
                return;
            }
            
            // Basic significant figures counting algorithm
            let sigFigs = 0;
            let inDecimal = false;
            let foundNonZero = false;
            
            for (let i = 0; i < input.length; i++) {
                const char = input[i];
                
                if (char === '.') {
                    inDecimal = true;
                    continue;
                }
                
                if (char >= '0' && char <= '9') {
                    if (char !== '0') {
                        foundNonZero = true;
                        sigFigs++;
                    } else if (foundNonZero) {
                        sigFigs++;
                    } else if (inDecimal && !foundNonZero) {
                        // Leading zeros after decimal point are not significant
                        continue;
                    }
                }
            }
            
            result.innerHTML = `
                <strong>Number:</strong> ${input}<br>
                <strong>Significant Figures:</strong> ${sigFigs}<br>
                <strong>Scientific Notation:</strong> ${parseFloat(input).toExponential(sigFigs - 1)}
            `;
        }

        function calculateOhmsLaw() {
            const voltageStr = document.getElementById('voltageInput').value.trim();
            const resistanceStr = document.getElementById('resistanceInput').value.trim();
            const result = document.getElementById('ohmsLawResult');
            
            if (!voltageStr || !resistanceStr) {
                result.innerHTML = 'Please enter both voltage and resistance values';
                return;
            }
            
            try {
                // Parse voltage
                const voltage = parseFloat(voltageStr);
                
                // Parse resistance (handle k, M, etc.)
                let resistance;
                if (resistanceStr.includes('k') || resistanceStr.includes('K')) {
                    resistance = parseFloat(resistanceStr) * 1000;
                } else if (resistanceStr.includes('M')) {
                    resistance = parseFloat(resistanceStr) * 1000000;
                } else {
                    resistance = parseFloat(resistanceStr);
                }
                
                // Calculate current
                const current = voltage / resistance;
                
                // Convert to appropriate units
                let currentStr;
                if (current >= 1) {
                    currentStr = current.toPrecision(3) + ' A';
                } else if (current >= 0.001) {
                    currentStr = (current * 1000).toPrecision(3) + ' mA';
                } else if (current >= 0.000001) {
                    currentStr = (current * 1000000).toPrecision(3) + ' μA';
                } else {
                    currentStr = current.toExponential(2) + ' A';
                }
                
                result.innerHTML = `
                    <strong>Calculation:</strong> I = V/R<br>
                    <strong>I = ${voltage} V ÷ ${resistance} Ω</strong><br>
                    <strong>Current:</strong> ${currentStr}<br>
                    <strong>Scientific:</strong> ${current.toExponential(2)} A
                `;
            } catch (error) {
                result.innerHTML = 'Error in calculation. Check your input format.';
            }
        }

        function showConversions() {
            document.getElementById('conversionAnswers').style.display = 'block';
        }

        // Worksheet functionality - completely rewritten
        function selectWorksheet(type) {
            currentWorksheetType = type;
            
            // Update button styling
            const buttons = document.querySelectorAll('.worksheet-header .nav-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            // Set current date
            document.getElementById('worksheetDate').value = new Date().toISOString().split('T')[0];
        }

        function generateWorksheet() {
            if (!currentWorksheetType) {
                alert('Please select a worksheet type first!');
                return;
            }

            worksheetProblems = [];
            worksheetAnswers = [];
            
            const content = document.getElementById('worksheet-content');
            
            let html = `
                <div class="printable">
                    <div style="text-align: center; margin-bottom: 30px;">
                        <h2>Scientific & Engineering Notation Practice</h2>
                        <h3>${getWorksheetTitle(currentWorksheetType)}</h3>
                        <p><strong>Name:</strong> <span id="print-name">${document.getElementById('studentName').value || '_________________________'}</span> &nbsp;&nbsp;&nbsp; <strong>Date:</strong> <span id="print-date">${document.getElementById('worksheetDate').value || '_____________'}</span></p>
                    </div>
            `;

            // Generate problems based on type with EXPLICIT significant figures guidance
            switch (currentWorksheetType) {
                case 'scientific':
                    html += generateScientificWorksheet();
                    break;
                case 'engineering':
                    html += generateEngineeringWorksheet();
                    break;
                case 'sigfigs':
                    html += generateSigFigsWorksheet();
                    break;
                case 'electronics':
                    html += generateElectronicsWorksheet();
                    break;
                case 'mixed':
                    html += generateMixedWorksheet();
                    break;
            }

            html += `
                <div class="worksheet-score" id="worksheet-score">
                    Score: <span id="score-display">Not yet calculated</span>
                </div>
                </div>
            `;

            content.innerHTML = html;
        }

        function generateScientificWorksheet() {
            let html = `
                <h3>Part A: Convert to Scientific Notation</h3>
                <div class="important-note">
                    <strong>INSTRUCTIONS:</strong> Convert each number to scientific notation. <strong>Maintain the same number of significant figures as shown in the original number.</strong>
                </div>
            `;
            
            const problems = [
                {
                    number: '45,000',
                    sigfigs: 2,
                    answer: '4.5 × 10^4',
                    explanation: 'The original number 45,000 has 2 significant figures (4 and 5). Moving the decimal point 4 places to the left gives 4.5 × 10^4.'
                },
                {
                    number: '123,000',
                    sigfigs: 3,
                    answer: '1.23 × 10^5',
                    explanation: 'The original number 123,000 has 3 significant figures (1, 2, and 3). Moving the decimal point 5 places to the left gives 1.23 × 10^5.'
                },
                {
                    number: '7,500,000',
                    sigfigs: 2,
                    answer: '7.5 × 10^6',
                    explanation: 'The original number 7,500,000 has 2 significant figures (7 and 5). Moving the decimal point 6 places to the left gives 7.5 × 10^6.'
                },
                {
                    number: '2,340,000',
                    sigfigs: 3,
                    answer: '2.34 × 10^6',
                    explanation: 'The original number 2,340,000 has 3 significant figures (2, 3, and 4). Moving the decimal point 6 places to the left gives 2.34 × 10^6.'
                },
                {
                    number: '56,700',
                    sigfigs: 3,
                    answer: '5.67 × 10^4',
                    explanation: 'The original number 56,700 has 3 significant figures (5, 6, and 7). Moving the decimal point 4 places to the left gives 5.67 × 10^4.'
                }
            ];

            for (let i = 0; i < 5; i++) {
                const prob = problems[i];
                worksheetProblems.push({problem: prob.number, answer: prob.answer});
                
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 1}:</h4>
                        <p><strong>Convert to scientific notation:</strong> ${prob.number}</p>
                        <p style="background: #fff3cd; padding: 10px; border-radius: 5px; margin: 10px 0;">
                            <strong>📏 Significant Figures Guidance:</strong> This number has <strong>${prob.sigfigs} significant figures</strong>. 
                            Your scientific notation answer must maintain exactly <strong>${prob.sigfigs} significant figures</strong>.
                        </p>
                        <p>Answer: <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="e.g., 1.23 × 10^4"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${prob.answer}<br>
                            <em>Explanation: ${prob.explanation}</em>
                        </div>
                    </div>
                `;
            }

            html += `
                <h3>Part B: Convert from Scientific Notation</h3>
                <div class="important-note">
                    <strong>INSTRUCTIONS:</strong> Convert from scientific notation to standard form. <strong>Maintain the same number of significant figures shown in the scientific notation.</strong>
                </div>
            `;

            const sciProblems = [
                {
                    scientific: '3.45 × 10^3',
                    sigfigs: 3,
                    answer: '3,450',
                    explanation: 'The scientific notation 3.45 × 10^3 has 3 significant figures. Moving the decimal point 3 places to the right gives 3,450.'
                },
                {
                    scientific: '7.2 × 10^-4',
                    sigfigs: 2,
                    answer: '0.00072',
                    explanation: 'The scientific notation 7.2 × 10^-4 has 2 significant figures. Moving the decimal point 4 places to the left gives 0.00072.'
                },
                {
                    scientific: '1.234 × 10^2',
                    sigfigs: 4,
                    answer: '123.4',
                    explanation: 'The scientific notation 1.234 × 10^2 has 4 significant figures. Moving the decimal point 2 places to the right gives 123.4.'
                },
                {
                    scientific: '6.78 × 10^-3',
                    sigfigs: 3,
                    answer: '0.00678',
                    explanation: 'The scientific notation 6.78 × 10^-3 has 3 significant figures. Moving the decimal point 3 places to the left gives 0.00678.'
                },
                {
                    scientific: '2.5 × 10^5',
                    sigfigs: 2,
                    answer: '250,000',
                    explanation: 'The scientific notation 2.5 × 10^5 has 2 significant figures. Moving the decimal point 5 places to the right gives 250,000.'
                }
            ];

            for (let i = 0; i < 5; i++) {
                const prob = sciProblems[i];
                worksheetProblems.push({problem: prob.scientific, answer: prob.answer});
                
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 6}:</h4>
                        <p><strong>Convert to standard notation:</strong> ${prob.scientific}</p>
                        <p style="background: #fff3cd; padding: 10px; border-radius: 5px; margin: 10px 0;">
                            <strong>📏 Significant Figures Guidance:</strong> This scientific notation has <strong>${prob.sigfigs} significant figures</strong>. 
                            Your standard notation answer must show exactly <strong>${prob.sigfigs} significant figures</strong>.
                        </p>
                        <p>Answer: <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Enter in standard form"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${prob.answer}<br>
                            <em>Explanation: ${prob.explanation}</em>
                        </div>
                    </div>
                `;
            }

            return html;
        }

        function generateEngineeringWorksheet() {
            let html = `
                <h3>Part A: Convert to Engineering Notation</h3>
                <div class="important-note">
                    <strong>INSTRUCTIONS:</strong> Convert to engineering notation where the exponent must be a multiple of 3. <strong>Maintain the same number of significant figures as the original number.</strong>
                </div>
            `;

            const problems = [
                {
                    number: '0.00047',
                    sigfigs: 2,
                    answer: '47 × 10^-6',
                    explanation: 'The original 0.00047 has 2 significant figures. For engineering notation, use exponent -6 (multiple of 3), giving coefficient 47.'
                },
                {
                    number: '4700',
                    sigfigs: 2,
                    answer: '4.7 × 10^3',
                    explanation: 'The original 4700 has 2 significant figures. For engineering notation, use exponent 3 (multiple of 3), giving coefficient 4.7.'
                },
                {
                    number: '0.0012',
                    sigfigs: 2,
                    answer: '1.2 × 10^-3',
                    explanation: 'The original 0.0012 has 2 significant figures. The exponent -3 is already a multiple of 3, giving coefficient 1.2.'
                },
                {
                    number: '47,000',
                    sigfigs: 2,
                    answer: '47 × 10^3',
                    explanation: 'The original 47,000 has 2 significant figures. For engineering notation, use exponent 3, giving coefficient 47.'
                },
                {
                    number: '0.000000047',
                    sigfigs: 2,
                    answer: '47 × 10^-9',
                    explanation: 'The original has 2 significant figures. For engineering notation, use exponent -9 (multiple of 3), giving coefficient 47.'
                }
            ];

            for (let i = 0; i < 5; i++) {
                const prob = problems[i];
                worksheetProblems.push({problem: prob.number, answer: prob.answer});
                
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 1}:</h4>
                        <p><strong>Convert to engineering notation:</strong> ${prob.number}</p>
                        <p style="background: #d1ecf1; padding: 10px; border-radius: 5px; margin: 10px 0;">
                            <strong>⚙️ Engineering Notation Rules:</strong> This number has <strong>${prob.sigfigs} significant figures</strong>. 
                            The exponent must be a multiple of 3, and you must maintain <strong>${prob.sigfigs} significant figures</strong>.
                        </p>
                        <p>Answer: <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="e.g., 47 × 10^3"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${prob.answer}<br>
                            <em>Explanation: ${prob.explanation}</em>
                        </div>
                    </div>
                `;
            }

            return html;
        }

        function generateSigFigsWorksheet() {
            let html = `
                <h3>Part A: Count Significant Figures</h3>
                <div class="important-note">
                    <strong>RULES REMINDER:</strong><br>
                    • All non-zero digits are significant<br>
                    • Zeros between non-zero digits are significant<br>
                    • Leading zeros are NOT significant<br>
                    • Trailing zeros after decimal point ARE significant<br>
                    • Trailing zeros without decimal point are ambiguous
                </div>
            `;

            const sigProblems = [
                {
                    number: '0.0056',
                    sigfigs: 2,
                    explanation: 'Leading zeros are not significant. Only the digits 5 and 6 are significant.'
                },
                {
                    number: '1.200',
                    sigfigs: 4,
                    explanation: 'All digits are significant. The trailing zeros after the decimal point are significant.'
                },
                {
                    number: '100',
                    sigfigs: 1,
                    explanation: 'Ambiguous case. Without context, assume minimum significant figures (just the 1).'
                },
                {
                    number: '1.05',
                    sigfigs: 3,
                    explanation: 'All digits are significant. The zero between non-zero digits is significant.'
                },
                {
                    number: '0.000120',
                    sigfigs: 3,
                    explanation: 'Leading zeros are not significant. The digits 1, 2, and the trailing 0 after decimal are significant.'
                }
            ];

            for (let i = 0; i < 5; i++) {
                const prob = sigProblems[i];
                worksheetProblems.push({problem: prob.number, answer: prob.sigfigs.toString()});
                
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 1}:</h4>
                        <p><strong>How many significant figures does <span style="font-family: monospace; background: #f0f0f0; padding: 2px; font-size: 1.2em;">${prob.number}</span> have?</strong></p>
                        <p style="background: #f8d7da; padding: 10px; border-radius: 5px; margin: 10px 0;">
                            <strong>🔍 Think carefully:</strong> Apply the significant figures rules to count only the meaningful digits.
                        </p>
                        <p>Answer: <input type="number" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Number" style="width: 100px;"> significant figures</p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${prob.sigfigs} significant figures<br>
                            <em>Explanation: ${prob.explanation}</em>
                        </div>
                    </div>
                `;
            }

            return html;
        }

        function generateElectronicsWorksheet() {
            let html = `
                <h3>Electronics Component Values and Calculations</h3>
                <div class="important-note">
                    <strong>ELECTRONICS CONTEXT:</strong> Component tolerances determine meaningful precision. Standard resistors (5% tolerance) justify 2 significant figures. Precision components (0.1% tolerance) justify 3-4 significant figures.
                </div>
            `;

            const problems = [
                {
                    type: 'ohms_law',
                    description: 'Calculate Current (I = V/R)',
                    given: 'V = 12.0 V, R = 2.2 kΩ',
                    vSigFigs: 3,
                    rSigFigs: 2,
                    limitingSigFigs: 2,
                    answer: '5.5 mA',
                    explanation: 'I = 12.0V ÷ 2200Ω = 0.00545A = 5.5 mA. Limited to 2 sig figs by the resistor value.'
                },
                {
                    type: 'capacitor',
                    description: 'Capacitor Value Interpretation',
                    given: 'Capacitor marked "104"',
                    answer: '0.10 μF',
                    explanation: '104 means 10 × 10^4 pF = 100,000 pF = 0.10 μF. The "10" gives us 2 significant figures.'
                },
                {
                    type: 'frequency',
                    description: 'Calculate Period (T = 1/f)',
                    given: 'f = 2.4 GHz',
                    sigfigs: 2,
                    answer: '417 ps',
                    explanation: 'T = 1/(2.4×10^9 Hz) = 4.17×10^-10 s = 417 ps. Limited to 2 sig figs by the frequency specification.'
                }
            ];

            for (let i = 0; i < 3; i++) {
                const prob = problems[i];
                worksheetProblems.push({problem: prob.given, answer: prob.answer});
                
                let guidanceText = '';
                if (prob.type === 'ohms_law') {
                    guidanceText = `Voltage has ${prob.vSigFigs} sig figs, resistance has ${prob.rSigFigs} sig figs. Result limited to ${prob.limitingSigFigs} sig figs.`;
                } else if (prob.type === 'capacitor') {
                    guidanceText = 'Capacitor codes: first two digits give significant figures, third digit is the multiplier.';
                } else if (prob.type === 'frequency') {
                    guidanceText = `Frequency specification has ${prob.sigfigs} sig figs. Period calculation must maintain this precision.`;
                }
                
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 1}: ${prob.description}</h4>
                        <p><strong>Given:</strong> ${prob.given}</p>
                        <p style="background: #d4edda; padding: 10px; border-radius: 5px; margin: 10px 0;">
                            <strong>🔧 Engineering Precision:</strong> ${guidanceText}
                        </p>
                        <p>Answer: <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Include units and proper sig figs"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${prob.answer}<br>
                            <em>Explanation: ${prob.explanation}</em>
                        </div>
                    </div>
                `;
            }

            return html;
        }

        function generateMixedWorksheet() {
            let html = `
                <h3>Mixed Practice Problems</h3>
                <div class="important-note">
                    <strong>MIXED REVIEW:</strong> Each problem includes specific guidance about significant figures. Read the instructions carefully for each problem.
                </div>
            `;

            const problems = [
                {
                    type: 'Scientific Notation',
                    problem: '45,000',
                    sigfigs: 2,
                    answer: '4.5 × 10^4',
                    guidance: 'Convert to scientific notation maintaining 2 significant figures'
                },
                {
                    type: 'Engineering Notation',
                    problem: '0.00047',
                    sigfigs: 2,
                    answer: '47 × 10^-6',
                    guidance: 'Convert to engineering notation (exponent multiple of 3) with 2 sig figs'
                },
                {
                    type: 'Sig Fig Count',
                    problem: '1.200',
                    answer: '4',
                    guidance: 'Count significant figures (remember trailing zeros after decimal are significant)'
                },
                {
                    type: 'Electronics Calculation',
                    problem: 'V = 9.0 V, R = 4.7 kΩ, find I',
                    answer: '1.9 mA',
                    guidance: 'Calculate current with proper significant figures (limited by least precise measurement)'
                }
            ];

            for (let i = 0; i < 4; i++) {
                const prob = problems[i];
                worksheetProblems.push({problem: prob.problem, answer: prob.answer});
                
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 1}: ${prob.type}</h4>
                        <p><strong>Problem:</strong> ${prob.problem}</p>
                        <p style="background: #e7f3ff; padding: 10px; border-radius: 5px; margin: 10px 0;">
                            <strong>📋 Instructions:</strong> ${prob.guidance}
                        </p>
                        <p>Answer: <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Your answer with proper precision"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${prob.answer}
                        </div>
                    </div>
                `;
            }

            return html;
        }

        function getWorksheetTitle(type) {
            const titles = {
                'scientific': 'Scientific Notation Conversions',
                'engineering': 'Engineering Notation & Metric Prefixes',
                'sigfigs': 'Significant Figures Practice',
                'electronics': 'Electronics Applications',
                'mixed': 'Mixed Practice Problems'
            };
            return titles[type] || 'Practice Worksheet';
        }

        function generateScientificNotationProblems() {
            let html = '<h3>Part A: Convert to Scientific Notation</h3>';
            
            // Large numbers
            for (let i = 0; i < 5; i++) {
                const num = generateRandomLargeNumber();
                const answer = num.toExponential(2);
                worksheetProblems.push({type: 'sci_large', problem: num, answer: answer});
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 1}:</h4>
                        <p>${num.toLocaleString()} = <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Enter in scientific notation"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${answer}
                        </div>
                    </div>
                `;
            }

            html += '<h3>Part B: Convert to Standard Notation</h3>';
            
            // Scientific to standard
            for (let i = 0; i < 5; i++) {
                const coeff = (Math.random() * 9 + 1).toFixed(2);
                const exp = Math.floor(Math.random() * 8) - 4;
                const sciNotation = `${coeff} × 10^${exp}`;
                const answer = (parseFloat(coeff) * Math.pow(10, exp)).toString();
                worksheetProblems.push({type: 'sci_standard', problem: sciNotation, answer: answer});
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 6}:</h4>
                        <p>${sciNotation} = <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Enter in standard notation"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${answer}
                        </div>
                    </div>
                `;
            }

            return html;
        }

        function generateEngineeringNotationProblems() {
            let html = '<h3>Part A: Convert to Engineering Notation</h3>';
            
            for (let i = 0; i < 5; i++) {
                const num = generateRandomElectronicsValue();
                const engNotation = convertToEngineering(num);
                worksheetProblems.push({type: 'eng_convert', problem: num, answer: engNotation});
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 1}:</h4>
                        <p>${num} = <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Enter in engineering notation"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${engNotation}
                        </div>
                    </div>
                `;
            }

            html += '<h3>Part B: Metric Prefix Practice</h3>';
            
            const prefixes = [
                {name: 'kilo', symbol: 'k', value: 1000},
                {name: 'mega', symbol: 'M', value: 1000000},
                {name: 'milli', symbol: 'm', value: 0.001},
                {name: 'micro', symbol: 'μ', value: 0.000001},
                {name: 'nano', symbol: 'n', value: 0.000000001}
            ];

            for (let i = 0; i < 5; i++) {
                const prefix = prefixes[Math.floor(Math.random() * prefixes.length)];
                const baseValue = (Math.random() * 9 + 1).toFixed(1);
                const prefixedValue = `${baseValue}${prefix.symbol}`;
                const standardValue = (parseFloat(baseValue) * prefix.value).toExponential(2);
                worksheetProblems.push({type: 'prefix', problem: prefixedValue, answer: standardValue});
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 6}:</h4>
                        <p>${prefixedValue} = <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Enter in scientific notation"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${standardValue}
                        </div>
                    </div>
                `;
            }

            return html;
        }

        function generateSigFigsProblems() {
            let html = '<h3>Part A: Count Significant Figures</h3>';
            
            const testNumbers = [
                '0.0056', '1.200', '100', '1.05', '0.000120',
                '4.70 × 10³', '0.08000', '1500', '2.0', '0.00030'
            ];

            for (let i = 0; i < 5; i++) {
                const num = testNumbers[Math.floor(Math.random() * testNumbers.length)];
                const sigFigs = countSignificantFigures(num);
                worksheetProblems.push({type: 'sigfig_count', problem: num, answer: sigFigs.toString()});
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 1}:</h4>
                        <p>How many significant figures does <strong>${num}</strong> have? <input type="number" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Number of sig figs" style="width: 100px;"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${sigFigs} significant figures
                        </div>
                    </div>
                `;
            }

            html += '<h3>Part B: Calculations with Significant Figures</h3>';
            
            for (let i = 0; i < 5; i++) {
                const prob = generateSigFigCalculation();
                worksheetProblems.push({type: 'sigfig_calc', problem: prob.problem, answer: prob.answer});
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 6}:</h4>
                        <p>${prob.problem} = <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Answer with proper sig figs"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${prob.answer}
                        </div>
                    </div>
                `;
            }

            return html;
        }

        function generateElectronicsProblems() {
            let html = '<h3>Electronics Component Values and Calculations</h3>';
            
            // Ohm's law problems
            for (let i = 0; i < 3; i++) {
                const voltage = (Math.random() * 15 + 3).toFixed(1);
                const resistance = generateRandomResistorValue();
                const current = (parseFloat(voltage) / parseFloat(resistance.value)).toExponential(2);
                const problem = `V = ${voltage} V, R = ${resistance.display}`;
                const answer = `${current} A`;
                
                worksheetProblems.push({type: 'ohms_law', problem: problem, answer: answer});
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 1}: Calculate Current (I = V/R)</h4>
                        <p>${problem}</p>
                        <p>I = <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Current with units"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${answer}
                        </div>
                    </div>
                `;
            }

            // Capacitor value problems
            for (let i = 0; i < 3; i++) {
                const capCode = generateCapacitorCode();
                worksheetProblems.push({type: 'capacitor', problem: capCode.code, answer: capCode.value});
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 4}: Capacitor Value</h4>
                        <p>A capacitor is marked "${capCode.code}". What is its value in microfarads (μF)?</p>
                        <p>Value = <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Value in μF"> μF</p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${capCode.value} μF
                        </div>
                    </div>
                `;
            }

            // Frequency/Period problems
            for (let i = 0; i < 4; i++) {
                const freq = generateRandomFrequency();
                const period = (1 / parseFloat(freq.value)).toExponential(2);
                worksheetProblems.push({type: 'frequency', problem: freq.display, answer: `${period} s`});
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 7}: Calculate Period (T = 1/f)</h4>
                        <p>Frequency = ${freq.display}</p>
                        <p>Period = <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Period with units"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${period} s
                        </div>
                    </div>
                `;
            }

            return html;
        }

        function generateMixedProblems() {
            let html = '<h3>Mixed Practice Problems</h3>';
            
            // Mix of all problem types
            const problemTypes = ['scientific', 'engineering', 'sigfigs', 'electronics'];
            
            for (let i = 0; i < 10; i++) {
                const type = problemTypes[Math.floor(Math.random() * problemTypes.length)];
                let problem, answer, description;
                
                switch (type) {
                    case 'scientific':
                        const num = generateRandomLargeNumber();
                        problem = num.toLocaleString();
                        answer = num.toExponential(2);
                        description = 'Convert to scientific notation:';
                        break;
                    case 'engineering':
                        const engNum = generateRandomElectronicsValue();
                        problem = engNum;
                        answer = convertToEngineering(engNum);
                        description = 'Convert to engineering notation:';
                        break;
                    case 'sigfigs':
                        const testNum = ['0.0056', '1.200', '4.70 × 10³', '0.000120'][Math.floor(Math.random() * 4)];
                        problem = testNum;
                        answer = countSignificantFigures(testNum).toString();
                        description = 'Count significant figures in:';
                        break;
                    case 'electronics':
                        const res = generateRandomResistorValue();
                        const volt = (Math.random() * 10 + 5).toFixed(1);
                        problem = `V = ${volt} V, R = ${res.display}`;
                        answer = ((parseFloat(volt) / parseFloat(res.value)) * 1000).toFixed(1) + ' mA';
                        description = 'Calculate current (I = V/R):';
                        break;
                }
                
                worksheetProblems.push({type: 'mixed', problem: problem, answer: answer});
                html += `
                    <div class="worksheet-problem">
                        <h4>Problem ${i + 1}:</h4>
                        <p>${description} ${problem}</p>
                        <p>Answer: <input type="text" class="worksheet-input" id="prob_${worksheetProblems.length - 1}" placeholder="Your answer"> </p>
                        <div class="worksheet-solution" id="sol_${worksheetProblems.length - 1}">
                            <strong>Solution:</strong> ${answer}
                        </div>
                    </div>
                `;
            }

            return html;
        }

        // Helper functions for worksheet generation
        function generateRandomLargeNumber() {
            const base = Math.random() * 900 + 100;
            const exp = Math.floor(Math.random() * 6) + 3;
            return Math.round(base * Math.pow(10, exp));
        }

        function generateRandomElectronicsValue() {
            const values = [0.00047, 0.0012, 0.033, 4700, 47000, 470000, 0.000000047, 0.0000012];
            return values[Math.floor(Math.random() * values.length)];
        }

        function convertToEngineering(num) {
            if (num === 0) return '0';
            
            const exp = Math.floor(Math.log10(Math.abs(num)) / 3) * 3;
            const coeff = num / Math.pow(10, exp);
            
            return `${coeff.toFixed(2)} × 10^${exp}`;
        }

        function countSignificantFigures(numStr) {
            // Simplified sig fig counting for backward compatibility
            const str = numStr.replace(/[×\s]/g, '').replace(/10\^-?\d+/, '');
            let sigFigs = 0;
            let foundNonZero = false;
            let inDecimal = false;
            
            for (let char of str) {
                if (char === '.') {
                    inDecimal = true;
                } else if (char >= '0' && char <= '9') {
                    if (char !== '0') {
                        foundNonZero = true;
                        sigFigs++;
                    } else if (foundNonZero) {
                        sigFigs++;
                    }
                }
            }
            
            return sigFigs;
        }

        function generateSigFigCalculation() {
            // Backward compatibility function
            const a = (Math.random() * 9 + 1).toFixed(2);
            const b = (Math.random() * 9 + 1).toFixed(1);
            const operation = Math.random() < 0.5 ? '+' : '×';
            
            if (operation === '+') {
                const result = (parseFloat(a) + parseFloat(b)).toFixed(1);
                return {
                    problem: `${a} + ${b}`,
                    answer: result
                };
            } else {
                const result = (parseFloat(a) * parseFloat(b)).toFixed(2);
                return {
                    problem: `${a} × ${b}`,
                    answer: result
                };
            }
        }

        function generateRandomResistorValue() {
            const values = [
                {value: '1000', display: '1.0 kΩ'},
                {value: '2200', display: '2.2 kΩ'},
                {value: '4700', display: '4.7 kΩ'},
                {value: '10000', display: '10 kΩ'},
                {value: '47000', display: '47 kΩ'},
                {value: '100000', display: '100 kΩ'}
            ];
            return values[Math.floor(Math.random() * values.length)];
        }

        function generateCapacitorCode() {
            const codes = [
                {code: '104', value: '0.1'},
                {code: '223', value: '0.022'},
                {code: '474', value: '0.47'},
                {code: '105', value: '1.0'},
                {code: '225', value: '2.2'}
            ];
            return codes[Math.floor(Math.random() * codes.length)];
        }

        function generateRandomFrequency() {
            const freqs = [
                {value: '1000000', display: '1.0 MHz'},
                {value: '2400000000', display: '2.4 GHz'},
                {value: '100000', display: '100 kHz'},
                {value: '50000000', display: '50 MHz'},
                {value: '3200000000', display: '3.2 GHz'}
            ];
            return freqs[Math.floor(Math.random() * freqs.length)];
        }

        function checkAnswers() {
            if (worksheetProblems.length === 0) {
                alert('Please generate a worksheet first!');
                return;
            }

            let correct = 0;
            let total = worksheetProblems.length;

            for (let i = 0; i < total; i++) {
                const input = document.getElementById(`prob_${i}`);
                const solution = document.getElementById(`sol_${i}`);
                
                if (input && solution) {
                    const userAnswer = input.value.trim().toLowerCase().replace(/\s+/g, '');
                    const correctAnswer = worksheetProblems[i].answer.toLowerCase().replace(/\s+/g, '');
                    
                    if (isAnswerCorrect(userAnswer, correctAnswer)) {
                        input.classList.add('correct');
                        input.classList.remove('incorrect');
                        correct++;
                    } else {
                        input.classList.add('incorrect');
                        input.classList.remove('correct');
                        solution.style.display = 'block';
                    }
                }
            }

            const percentage = Math.round((correct / total) * 100);
            const scoreDisplay = document.getElementById('worksheet-score');
            const scoreValue = document.getElementById('score-display');
            
            scoreValue.textContent = `${correct}/${total} (${percentage}%)`;
            scoreDisplay.style.display = 'block';

            // Show all solutions after checking
            setTimeout(() => {
                for (let i = 0; i < total; i++) {
                    const solution = document.getElementById(`sol_${i}`);
                    if (solution) {
                        solution.style.display = 'block';
                    }
                }
            }, 2000);
        }

        function isAnswerCorrect(userAnswer, correctAnswer) {
            // Remove common variations and normalize
            const normalize = (str) => str.replace(/[×*]/g, 'x')
                .replace(/\^/g, '')
                .replace(/e\+?/g, 'x10')
                .replace(/\s/g, '');
            
            const user = normalize(userAnswer);
            const correct = normalize(correctAnswer);
            
            // Check exact match
            if (user === correct) return true;
            
            // Check numerical equivalence for simple numbers
            const userNum = parseFloat(userAnswer);
            const correctNum = parseFloat(correctAnswer);
            
            if (!isNaN(userNum) && !isNaN(correctNum)) {
                return Math.abs(userNum - correctNum) < 0.01 * correctNum;
            }
            
            return false;
        }

        function printWorksheet() {
            if (worksheetProblems.length === 0) {
                alert('Please generate a worksheet first!');
                return;
            }

            // Update print fields
            document.getElementById('print-name').textContent = document.getElementById('studentName').value || '_________________________';
            document.getElementById('print-date').textContent = document.getElementById('worksheetDate').value || '_____________';

            // Hide solutions before printing
            const solutions = document.querySelectorAll('.worksheet-solution');
            solutions.forEach(sol => sol.style.display = 'none');

            window.print();
        }

        async function downloadPDF() {
            if (worksheetProblems.length === 0) {
                alert('Please generate a worksheet first!');
                return;
            }

            // Check if jsPDF is loaded
            if (typeof window.jsPDF === 'undefined') {
                alert('PDF library not loaded. Please try again or use the print function.');
                return;
            }

            const { jsPDF } = window.jsPDF;
            const doc = new jsPDF();
            
            // Title
            doc.setFontSize(20);
            doc.text('Scientific & Engineering Notation Practice', 20, 30);
            
            doc.setFontSize(16);
            doc.text(getWorksheetTitle(currentWorksheetType), 20, 45);
            
            doc.setFontSize(12);
            const studentName = document.getElementById('studentName').value || '_________________________';
            const worksheetDate = document.getElementById('worksheetDate').value || '_____________';
            doc.text(`Name: ${studentName}`, 20, 65);
            doc.text(`Date: ${worksheetDate}`, 120, 65);
            
            // Problems
            let yPosition = 85;
            const problems = document.querySelectorAll('.worksheet-problem');
            
            problems.forEach((problem, index) => {
                if (yPosition > 250) {
                    doc.addPage();
                    yPosition = 30;
                }
                
                const h4 = problem.querySelector('h4');
                const p = problem.querySelector('p');
                
                if (h4) {
                    doc.setFontSize(12);
                    doc.text(h4.textContent, 20, yPosition);
                    yPosition += 8;
                }
                
                if (p) {
                    doc.setFontSize(10);
                    const lines = doc.splitTextToSize(p.textContent.replace(/\s+/g, ' '), 170);
                    doc.text(lines, 20, yPosition);
                    yPosition += lines.length * 6 + 5;
                }
                
                // Add answer line
                doc.text('Answer: ____________________________', 20, yPosition);
                yPosition += 15;
            });
            
            // Save the PDF
            const fileName = `${currentWorksheetType}_worksheet_${new Date().toISOString().split('T')[0]}.pdf`;
            doc.save(fileName);
        }

        // Initialize the lesson
        window.addEventListener('load', function() {
            updateTimer();
            // Set today's date by default
            document.getElementById('worksheetDate').value = new Date().toISOString().split('T')[0];
        });
    </script>
</body>
</html>
