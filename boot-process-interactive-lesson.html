<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linux Boot Process - Complete Enhanced Interactive Learning Module</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2563eb;
            --primary-dark: #1e40af;
            --secondary-color: #7c3aed;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --bg-primary: #ffffff;
            --bg-secondary: #f3f4f6;
            --bg-tertiary: #e5e7eb;
            --text-primary: #111827;
            --text-secondary: #6b7280;
            --border-color: #d1d5db;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode {
            --bg-primary: #1f2937;
            --bg-secondary: #111827;
            --bg-tertiary: #374151;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --border-color: #4b5563;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 280px;
            background-color: var(--bg-primary);
            border-right: 1px solid var(--border-color);
            padding: 20px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: transform 0.3s;
            z-index: 1000;
        }

        .sidebar-header {
            margin-bottom: 30px;
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .sidebar-header p {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .nav-section {
            margin-bottom: 25px;
        }

        .nav-section-title {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--text-secondary);
            font-weight: 600;
            margin-bottom: 10px;
            letter-spacing: 0.05em;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            margin-bottom: 5px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
            color: var(--text-primary);
            text-decoration: none;
        }

        .nav-item:hover {
            background-color: var(--bg-secondary);
        }

        .nav-item.active {
            background-color: var(--primary-color);
            color: white;
        }

        .nav-item-icon {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .progress-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        .progress-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .progress-bar {
            height: 8px;
            background-color: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--success-color);
            transition: width 0.5s;
            border-radius: 4px;
        }

        .progress-text {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 5px;
            text-align: right;
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 30px;
            max-width: 1400px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background-color: var(--bg-primary);
            padding: 20px;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        .header-title {
            font-size: 2rem;
            font-weight: 700;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background-color: var(--border-color);
        }

        .content-section {
            display: none;
            animation: fadeIn 0.3s;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background-color: var(--bg-primary);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .card-header {
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .card-subtitle {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Boot Process Visualization */
        .boot-path-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .path-btn {
            flex: 1;
            padding: 15px;
            border: 2px solid var(--border-color);
            background-color: var(--bg-secondary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }

        .path-btn.active {
            border-color: var(--primary-color);
            background-color: var(--primary-color);
            color: white;
        }

        .boot-stage {
            background-color: var(--bg-secondary);
            border-left: 4px solid var(--border-color);
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .boot-stage:hover {
            border-left-color: var(--primary-color);
            transform: translateX(5px);
        }

        .boot-stage.active {
            border-left-color: var(--success-color);
            background-color: rgba(16, 185, 129, 0.1);
        }

        .boot-stage.current {
            border-left-color: var(--primary-color);
            background-color: rgba(37, 99, 235, 0.1);
            box-shadow: var(--shadow-lg);
        }

        .boot-stage.expanded .stage-details {
            display: block;
            animation: slideDown 0.3s;
        }

        .stage-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: 600;
            margin-right: 10px;
        }

        .stage-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .stage-description {
            color: var(--text-secondary);
            font-size: 0.875rem;
            line-height: 1.6;
        }

        .stage-details {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
            display: none;
        }

        @keyframes slideDown {
            from { opacity: 0; max-height: 0; }
            to { opacity: 1; max-height: 2000px; }
        }

        .detail-list {
            list-style: none;
            padding-left: 0;
        }

        .detail-list li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .detail-list li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: var(--primary-color);
            font-weight: bold;
        }

        .code-block {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            overflow-x: auto;
            margin: 10px 0;
            white-space: pre-wrap;
        }

        .inline-code {
            background-color: var(--bg-secondary);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            border: 1px solid var(--border-color);
        }

        /* Info Boxes */
        .info-box {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid;
        }

        .info-box.note {
            background-color: rgba(37, 99, 235, 0.1);
            border-left-color: var(--primary-color);
        }

        .info-box.warning {
            background-color: rgba(245, 158, 11, 0.1);
            border-left-color: var(--warning-color);
        }

        .info-box.important {
            background-color: rgba(239, 68, 68, 0.1);
            border-left-color: var(--danger-color);
        }

        .info-box.tip {
            background-color: rgba(16, 185, 129, 0.1);
            border-left-color: var(--success-color);
        }

        .info-box-title {
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .concept-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .key-term-box {
            background-color: var(--bg-primary);
            padding: 10px;
            border-radius: 6px;
            border-left: 3px solid var(--primary-color);
            margin: 8px 0;
        }

        .key-term-box strong {
            color: var(--primary-color);
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th {
            background-color: var(--primary-color);
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .comparison-table tr:hover {
            background-color: var(--bg-secondary);
        }

        /* Target Cards */
        .target-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .target-card {
            background-color: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .target-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .target-card.expanded {
            border-color: var(--primary-color);
        }

        .target-icon {
            width: 50px;
            height: 50px;
            background-color: var(--primary-color);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            margin-bottom: 15px;
        }

        .target-name {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .target-description {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 15px;
        }

        .target-details {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }

        .target-card.expanded .target-details {
            display: block;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
        }

        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border: none;
            background: none;
            color: var(--text-secondary);
            font-weight: 500;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            transition: all 0.2s;
        }

        .tab:hover {
            color: var(--primary-color);
        }

        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        .command-item {
            background-color: var(--bg-secondary);
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .command-item:hover {
            background-color: var(--bg-tertiary);
            transform: translateX(5px);
        }

        .command-syntax {
            font-family: 'Courier New', monospace;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--primary-color);
        }

        .command-category {
            background-color: var(--bg-secondary);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .category-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cmd-box {
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 10px;
        }

        .cmd-syntax {
            font-family: 'Courier New', monospace;
            color: var(--primary-color);
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.95rem;
        }

        .cmd-description {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 8px;
        }

        .cmd-example {
            background-color: var(--bg-secondary);
            border-left: 3px solid var(--success-color);
            padding: 10px;
            margin-top: 8px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
        }

        /* Troubleshooting Styles */
        .scenario-card {
            background-color: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .scenario-card:hover {
            border-color: var(--danger-color);
            box-shadow: var(--shadow-lg);
        }

        .scenario-card.expanded {
            border-color: var(--danger-color);
        }

        .scenario-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .scenario-icon {
            width: 40px;
            height: 40px;
            background-color: var(--danger-color);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
        }

        .scenario-title {
            font-size: 1.125rem;
            font-weight: 600;
            color: var(--danger-color);
        }

        .scenario-description {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 15px;
        }

        .scenario-solution {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }

        .scenario-card.expanded .scenario-solution {
            display: block;
        }

        .step-list {
            list-style: none;
            padding: 0;
            counter-reset: step-counter;
        }

        .step-list li {
            counter-increment: step-counter;
            padding: 15px;
            margin-bottom: 10px;
            background-color: var(--bg-primary);
            border-left: 4px solid var(--success-color);
            border-radius: 6px;
            position: relative;
            padding-left: 50px;
        }

        .step-list li:before {
            content: counter(step-counter);
            position: absolute;
            left: 15px;
            top: 15px;
            width: 25px;
            height: 25px;
            background-color: var(--success-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.875rem;
        }

        .flowchart {
            background-color: var(--bg-secondary);
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }

        .flowchart-step {
            background-color: var(--bg-primary);
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
            border-left: 4px solid var(--primary-color);
        }

        .flowchart-decision {
            background-color: rgba(245, 158, 11, 0.1);
            padding: 15px;
            margin: 10px 0;
            border-radius: 6px;
            border-left: 4px solid var(--warning-color);
        }

        .flowchart-arrow {
            text-align: center;
            color: var(--primary-color);
            font-size: 1.5rem;
            margin: 5px 0;
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.mobile-open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 15px;
            }

            .target-grid {
                grid-template-columns: 1fr;
            }

            .header-title {
                font-size: 1.5rem;
            }
        }

        .toggle-sidebar {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            z-index: 999;
            font-size: 1.5rem;
        }

        @media (max-width: 768px) {
            .toggle-sidebar {
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>Boot Process</h1>
                <p>Enhanced Learning Module</p>
            </div>

            <nav>
                <div class="nav-section">
                    <div class="nav-section-title">Learning Modules</div>
                    <a class="nav-item active" data-section="boot-visualization">
                        <span class="nav-item-icon">üöÄ</span>
                        <span>Boot Visualization</span>
                    </a>
                    <a class="nav-item" data-section="target-explorer">
                        <span class="nav-item-icon">üéØ</span>
                        <span>Target Explorer</span>
                    </a>
                    <a class="nav-item" data-section="troubleshooting">
                        <span class="nav-item-icon">üîß</span>
                        <span>Troubleshooting</span>
                    </a>
                    <a class="nav-item" data-section="command-reference">
                        <span class="nav-item-icon">üíª</span>
                        <span>Command Reference</span>
                    </a>
                    <a class="nav-item" data-section="quick-reference">
                        <span class="nav-item-icon">‚ö°</span>
                        <span>Quick Reference</span>
                    </a>
                </div>
            </nav>

            <div class="progress-section">
                <div class="progress-label">Overall Progress</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <div class="progress-text" id="progressText">0% Complete</div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div>
                    <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 5px;">
                        <span id="breadcrumb">Module 1 of 5</span>
                    </div>
                    <h2 class="header-title" id="sectionTitle">Boot Process Visualization</h2>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" id="themeToggle">
                        <span id="themeIcon">üåô</span>
                        <span>Dark Mode</span>
                    </button>
                    <button class="btn btn-primary" id="resetProgress">
                        <span>‚Üª</span>
                        <span>Reset</span>
                    </button>
                </div>
            </header>

            <!-- Boot Visualization Section -->
            <section class="content-section active" id="boot-visualization">
                <div class="info-box tip">
                    <div class="info-box-title">üéì Enhanced Edition</div>
                    <p>This enhanced version includes detailed technical explanations, 50+ key terms, boot time analysis, comprehensive troubleshooting scenarios, and complete coverage from power-on to login prompt.</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Understanding the Linux Boot Process</h3>
                        <p class="card-subtitle">Complete journey from hardware power-on to user login</p>
                    </div>

                    <div class="concept-box">
                        <div class="concept-title">üîë Key Concept: What is "Booting"?</div>
                        <p style="color: var(--text-secondary); margin-bottom: 10px;">
                            "Booting" (short for bootstrapping) refers to the process of starting a computer system. The term comes from "pulling oneself up by one's bootstraps" - illustrating how a computer must start itself using minimal initial instructions.
                        </p>
                        <p style="color: var(--text-secondary);">
                            The challenge: When powered on, RAM is empty and the CPU has no OS to execute. The boot process solves this through a series of small programs, each loading the next, until the full OS is running.
                        </p>
                    </div>

                    <div class="boot-path-selector">
                        <button class="path-btn active" data-path="bios">
                            <div style="font-size: 1.2rem; margin-bottom: 5px;">üíæ</div>
                            <div style="font-weight: 600;">BIOS Boot Path</div>
                            <div style="font-size: 0.75rem; margin-top: 5px;">Legacy Systems (Pre-2012)</div>
                        </button>
                        <button class="path-btn" data-path="uefi">
                            <div style="font-size: 1.2rem; margin-bottom: 5px;">‚ö°</div>
                            <div style="font-weight: 600;">UEFI Boot Path</div>
                            <div style="font-size: 0.75rem; margin-top: 5px;">Modern Systems (2012+)</div>
                        </button>
                    </div>

                    <div id="bootStagesContainer"></div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">BIOS vs UEFI: Detailed Comparison</h3>
                        <p class="card-subtitle">Understanding fundamental differences between legacy and modern firmware</p>
                    </div>

                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Aspect</th>
                                <th>BIOS</th>
                                <th>UEFI</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Age</strong></td>
                                <td>1975, standardized 1980s</td>
                                <td>Late 1990s, widespread 2012+</td>
                            </tr>
                            <tr>
                                <td><strong>Architecture</strong></td>
                                <td>16-bit real mode</td>
                                <td>32/64-bit protected mode</td>
                            </tr>
                            <tr>
                                <td><strong>Boot Record</strong></td>
                                <td>MBR (512 bytes)</td>
                                <td>GPT (flexible, modern)</td>
                            </tr>
                            <tr>
                                <td><strong>Partition Limit</strong></td>
                                <td>4 primary partitions</td>
                                <td>Up to 128 partitions</td>
                            </tr>
                            <tr>
                                <td><strong>Disk Size</strong></td>
                                <td>Up to 2TB</td>
                                <td>Over 2TB (9.4 ZB theoretically)</td>
                            </tr>
                            <tr>
                                <td><strong>Secure Boot</strong></td>
                                <td>Not supported</td>
                                <td>Cryptographic signatures required</td>
                            </tr>
                            <tr>
                                <td><strong>Boot Speed</strong></td>
                                <td>Slower (sequential init)</td>
                                <td>Faster (parallel init possible)</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box important">
                        <div class="info-box-title">‚ö†Ô∏è Critical: UEFI Secure Boot</div>
                        <p>When Secure Boot is enabled, the system requires signed bootloaders. The prebuilt <code class="inline-code">/boot/efi/EFI/redhat/grubx64.efi</code> contains required signatures. NEVER run <code class="inline-code">grub2-install</code> on UEFI systems as it generates unsigned bootloaders that will fail to boot.</p>
                    </div>
                </div>

                <div class="card" style="text-align: center; background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);">
                    <p style="color: var(--text-secondary); margin-bottom: 15px;">Ready to explore systemd targets?</p>
                    <button class="btn btn-primary" onclick="navigateToSection('target-explorer')" style="font-size: 1.1rem; padding: 15px 40px;">
                        Next Module: Target Explorer ‚Üí
                    </button>
                </div>
            </section>

            <!-- Target Explorer Section -->
            <section class="content-section" id="target-explorer">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">systemd Targets</h3>
                        <p class="card-subtitle">Understanding system states and management</p>
                    </div>

                    <div class="info-box note">
                        <div class="info-box-title">üìò What are systemd Targets?</div>
                        <p>A systemd target is a grouping mechanism defining a specific system state. Think of targets as "milestones" the system reaches during boot. When you boot to a target, systemd starts all required units automatically.</p>
                    </div>

                    <div id="targetGrid" class="target-grid"></div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Managing Targets</h3>
                        <p class="card-subtitle">Commands for switching and configuring targets</p>
                    </div>

                    <div class="tabs">
                        <button class="tab active" data-tab="runtime">Runtime Changes</button>
                        <button class="tab" data-tab="persistent">Persistent Changes</button>
                    </div>

                    <div class="tab-content active" data-tab-content="runtime">
                        <h4 style="margin-bottom: 15px;">Switching Targets at Runtime</h4>
                        
                        <div class="command-item">
                            <div class="command-syntax">systemctl isolate multi-user.target</div>
                            <p style="color: var(--text-secondary); font-size: 0.875rem;">Switch to text mode immediately</p>
                        </div>

                        <div class="command-item">
                            <div class="command-syntax">systemctl isolate graphical.target</div>
                            <p style="color: var(--text-secondary); font-size: 0.875rem;">Switch to graphical mode immediately</p>
                        </div>

                        <div class="info-box warning">
                            <div class="info-box-title">‚ö†Ô∏è Warning</div>
                            <p>Isolating a target stops all units not required by that target and starts required units. This can disrupt running applications and active user sessions.</p>
                        </div>
                    </div>

                    <div class="tab-content" data-tab-content="persistent">
                        <h4 style="margin-bottom: 15px;">Setting the Default Target</h4>
                        
                        <div class="command-item">
                            <div class="command-syntax">systemctl get-default</div>
                            <p style="color: var(--text-secondary); font-size: 0.875rem;">Display current default target</p>
                        </div>

                        <div class="command-item">
                            <div class="command-syntax">systemctl set-default graphical.target</div>
                            <p style="color: var(--text-secondary); font-size: 0.875rem;">Set graphical.target as default</p>
                        </div>

                        <div class="info-box tip">
                            <div class="info-box-title">üí° How It Works</div>
                            <p>The default target is a symbolic link at <code class="inline-code">/etc/systemd/system/default.target</code> pointing to the desired target file.</p>
                        </div>
                    </div>
                </div>

                <div class="card" style="text-align: center;">
                    <button class="btn btn-secondary" onclick="navigateToSection('boot-visualization')">
                        ‚Üê Previous: Boot Visualization
                    </button>
                    <button class="btn btn-primary" onclick="navigateToSection('troubleshooting')" style="margin-left: 15px;">
                        Next: Troubleshooting ‚Üí
                    </button>
                </div>
            </section>

            <!-- Troubleshooting Section -->
            <section class="content-section" id="troubleshooting">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Boot Troubleshooting Guide</h3>
                        <p class="card-subtitle">Diagnose and fix common boot problems</p>
                    </div>

                    <div class="info-box important">
                        <div class="info-box-title">üö® When Things Go Wrong</div>
                        <p>Boot failures can be intimidating, but following a systematic approach makes most problems solvable. This guide covers the most common scenarios you'll encounter in real-world Linux administration.</p>
                    </div>

                    <!-- Decision Flowchart -->
                    <div class="concept-box">
                        <div class="concept-title">üîÄ Boot Failure Decision Tree</div>
                        <div class="flowchart">
                            <div class="flowchart-decision">
                                <strong>Does the GRUB menu appear?</strong>
                            </div>
                            <div class="flowchart-arrow">‚Üì YES</div>
                            <div class="flowchart-step">
                                System can find bootloader ‚Üí Check kernel/initramfs issues
                            </div>
                            <div class="flowchart-arrow">‚Üì NO</div>
                            <div class="flowchart-step">
                                GRUB not loading ‚Üí Check BIOS/UEFI boot order, MBR/GPT issues
                            </div>
                            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border-color);">
                                <div class="flowchart-decision">
                                    <strong>Does the system boot to emergency/rescue mode?</strong>
                                </div>
                                <div class="flowchart-arrow">‚Üì YES</div>
                                <div class="flowchart-step">
                                    systemd initialized ‚Üí Check /etc/fstab, failed services
                                </div>
                                <div class="flowchart-arrow">‚Üì NO</div>
                                <div class="flowchart-step">
                                    Kernel panic or initramfs failure ‚Üí Check kernel parameters, initramfs
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Common Scenarios -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Common Boot Failure Scenarios</h3>
                        <p class="card-subtitle">Click each scenario to see the solution</p>
                    </div>

                    <!-- Scenario 1: GRUB Error -->
                    <div class="scenario-card">
                        <div class="scenario-header">
                            <div class="scenario-icon">‚ùå</div>
                            <div>
                                <div class="scenario-title">Scenario 1: GRUB Error - "file not found"</div>
                                <div class="scenario-description">Error: "error: file '/grub2/i386-pc/normal.mod' not found"</div>
                            </div>
                        </div>
                        <div class="scenario-solution">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">Root Cause</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                                GRUB cannot find its modules. This usually happens after disk changes, partition resizing, or incomplete GRUB installation.
                            </p>
                            
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">Solution Steps</h4>
                            <ul class="step-list">
                                <li>
                                    <strong>Boot from rescue media</strong><br>
                                    Use a Linux LiveCD/USB or installation media
                                </li>
                                <li>
                                    <strong>Mount your root filesystem</strong><br>
                                    <code class="inline-code">mount /dev/sdaX /mnt</code> (replace sdaX with your root partition)
                                </li>
                                <li>
                                    <strong>Mount required filesystems</strong><br>
                                    <div class="code-block">mount --bind /dev /mnt/dev
mount --bind /proc /mnt/proc
mount --bind /sys /mnt/sys</div>
                                </li>
                                <li>
                                    <strong>For UEFI, mount ESP</strong><br>
                                    <code class="inline-code">mount /dev/sdaY /mnt/boot/efi</code>
                                </li>
                                <li>
                                    <strong>Chroot into your system</strong><br>
                                    <code class="inline-code">chroot /mnt</code>
                                </li>
                                <li>
                                    <strong>Regenerate GRUB configuration</strong><br>
                                    <strong>For BIOS:</strong> <code class="inline-code">grub2-mkconfig -o /boot/grub2/grub.cfg</code><br>
                                    <strong>For UEFI:</strong> <code class="inline-code">grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg</code>
                                </li>
                                <li>
                                    <strong>For BIOS only: Reinstall GRUB to MBR</strong><br>
                                    <code class="inline-code">grub2-install /dev/sda</code><br>
                                    <div class="info-box warning" style="margin-top: 10px; font-size: 0.875rem;">
                                        ‚ö†Ô∏è <strong>NEVER</strong> run grub2-install on UEFI systems with Secure Boot!
                                    </div>
                                </li>
                                <li>
                                    <strong>Exit and reboot</strong><br>
                                    <code class="inline-code">exit</code> then <code class="inline-code">reboot</code>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Scenario 2: GRUB Prompt -->
                    <div class="scenario-card">
                        <div class="scenario-header">
                            <div class="scenario-icon">‚ö†Ô∏è</div>
                            <div>
                                <div class="scenario-title">Scenario 2: Minimal GRUB Shell "grub>"</div>
                                <div class="scenario-description">System boots to "grub>" prompt instead of boot menu</div>
                            </div>
                        </div>
                        <div class="scenario-solution">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">Root Cause</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                                GRUB Stage 1.5 loaded but cannot find grub.cfg. Often caused by partition UUID changes or deleted configuration.
                            </p>
                            
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">Temporary Boot Solution</h4>
                            <ul class="step-list">
                                <li>
                                    <strong>Find your Linux partition</strong><br>
                                    At grub> prompt: <code class="inline-code">ls</code> shows available partitions
                                </li>
                                <li>
                                    <strong>Identify partition with Linux</strong><br>
                                    <code class="inline-code">ls (hd0,1)/</code> (try each until you find /boot)
                                </li>
                                <li>
                                    <strong>Set root partition</strong><br>
                                    <code class="inline-code">set root=(hd0,1)</code>
                                </li>
                                <li>
                                    <strong>Load Linux kernel</strong><br>
                                    <code class="inline-code">linux /boot/vmlinuz-<version> root=/dev/sda1</code>
                                </li>
                                <li>
                                    <strong>Load initramfs</strong><br>
                                    <code class="inline-code">initrd /boot/initramfs-<version>.img</code>
                                </li>
                                <li>
                                    <strong>Boot</strong><br>
                                    <code class="inline-code">boot</code>
                                </li>
                                <li>
                                    <strong>Once booted, regenerate grub.cfg</strong><br>
                                    <code class="inline-code">grub2-mkconfig -o /boot/grub2/grub.cfg</code>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Scenario 3: Kernel Panic -->
                    <div class="scenario-card">
                        <div class="scenario-header">
                            <div class="scenario-icon">üí•</div>
                            <div>
                                <div class="scenario-title">Scenario 3: Kernel Panic</div>
                                <div class="scenario-description">"Kernel panic - not syncing: VFS: Unable to mount root fs"</div>
                            </div>
                        </div>
                        <div class="scenario-solution">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">Root Cause</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                                Kernel cannot find or mount the root filesystem. Common causes: incorrect root= parameter, missing drivers in initramfs, corrupted filesystem.
                            </p>
                            
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">Solution Steps</h4>
                            <ul class="step-list">
                                <li>
                                    <strong>At GRUB menu, press 'e' to edit boot entry</strong>
                                </li>
                                <li>
                                    <strong>Find the linux line and check root= parameter</strong><br>
                                    Should be: <code class="inline-code">root=/dev/sdaX</code> or <code class="inline-code">root=UUID=xxxxx</code>
                                </li>
                                <li>
                                    <strong>Verify correct partition</strong><br>
                                    Use <code class="inline-code">root=/dev/sda1</code> format if UUID is wrong
                                </li>
                                <li>
                                    <strong>Press Ctrl+X to boot with changes</strong>
                                </li>
                                <li>
                                    <strong>If successful, update /etc/default/grub permanently</strong><br>
                                    Edit GRUB_CMDLINE_LINUX with correct root= parameter
                                </li>
                                <li>
                                    <strong>If problem persists, regenerate initramfs</strong><br>
                                    <code class="inline-code">dracut --force</code> (regenerates for current kernel)
                                </li>
                                <li>
                                    <strong>Update GRUB configuration</strong><br>
                                    <code class="inline-code">grub2-mkconfig -o /boot/grub2/grub.cfg</code>
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Scenario 4: Emergency Mode -->
                    <div class="scenario-card">
                        <div class="scenario-header">
                            <div class="scenario-icon">üö®</div>
                            <div>
                                <div class="scenario-title">Scenario 4: System Boots to Emergency Mode</div>
                                <div class="scenario-description">"Welcome to emergency mode! Type 'systemctl default' or 'exit' to continue"</div>
                            </div>
                        </div>
                        <div class="scenario-solution">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">Root Cause</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                                Critical system failure during boot. Most common: /etc/fstab errors, filesystem corruption, or critical service failures.
                            </p>
                            
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">Diagnosis and Solution</h4>
                            <ul class="step-list">
                                <li>
                                    <strong>Enter root password when prompted</strong>
                                </li>
                                <li>
                                    <strong>Check journal for errors</strong><br>
                                    <code class="inline-code">journalctl -xb</code> (shows boot errors)
                                </li>
                                <li>
                                    <strong>Check filesystem mounts</strong><br>
                                    <code class="inline-code">mount</code> (see what's mounted)
                                </li>
                                <li>
                                    <strong>Common fix: Check /etc/fstab</strong><br>
                                    <div class="code-block">cat /etc/fstab
# Look for incorrect UUIDs or device names
# Comment out (#) problematic entries temporarily</div>
                                </li>
                                <li>
                                    <strong>Remount root as read-write if needed</strong><br>
                                    <code class="inline-code">mount -o remount,rw /</code>
                                </li>
                                <li>
                                    <strong>Edit /etc/fstab</strong><br>
                                    <code class="inline-code">vi /etc/fstab</code> or <code class="inline-code">nano /etc/fstab</code>
                                </li>
                                <li>
                                    <strong>Fix issues and reboot</strong><br>
                                    <code class="inline-code">systemctl reboot</code>
                                </li>
                            </ul>

                            <div class="info-box tip" style="margin-top: 15px;">
                                <div class="info-box-title">üí° Common /etc/fstab Issues</div>
                                <ul style="padding-left: 20px; color: var(--text-secondary); margin-top: 10px;">
                                    <li>Wrong UUID after disk cloning or reinstallation</li>
                                    <li>Removed device still referenced in fstab</li>
                                    <li>Typo in filesystem type or mount options</li>
                                    <li>Network filesystems (NFS) failing without _netdev option</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <!-- Scenario 5: Password Reset -->
                    <div class="scenario-card">
                        <div class="scenario-header">
                            <div class="scenario-icon">üîê</div>
                            <div>
                                <div class="scenario-title">Scenario 5: Root Password Reset</div>
                                <div class="scenario-description">Forgot root password and need to regain access</div>
                            </div>
                        </div>
                        <div class="scenario-solution">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">Using rd.break Method</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                                The rd.break parameter interrupts the boot process in initramfs, before the system fully boots, allowing you to reset the password.
                            </p>
                            
                            <ul class="step-list">
                                <li>
                                    <strong>Reboot and press 'e' at GRUB menu</strong><br>
                                    Must do this quickly before auto-boot
                                </li>
                                <li>
                                    <strong>Find the linux line</strong><br>
                                    Look for line starting with "linux" or "linux16"
                                </li>
                                <li>
                                    <strong>Add rd.break at the end of the linux line</strong><br>
                                    Navigate to end of line, add space, type: <code class="inline-code">rd.break</code>
                                </li>
                                <li>
                                    <strong>Press Ctrl+X to boot</strong><br>
                                    System will stop at switch_root prompt
                                </li>
                                <li>
                                    <strong>Remount /sysroot as read-write</strong><br>
                                    <code class="inline-code">mount -o remount,rw /sysroot</code>
                                </li>
                                <li>
                                    <strong>Change root into /sysroot</strong><br>
                                    <code class="inline-code">chroot /sysroot</code>
                                </li>
                                <li>
                                    <strong>Reset root password</strong><br>
                                    <code class="inline-code">passwd root</code><br>
                                    Enter new password twice
                                </li>
                                <li>
                                    <strong>CRITICAL: Create SELinux relabel file</strong><br>
                                    <code class="inline-code">touch /.autorelabel</code><br>
                                    <div class="info-box important" style="margin-top: 10px; font-size: 0.875rem;">
                                        ‚ö†Ô∏è Skipping this step will cause boot failure due to SELinux context mismatch!
                                    </div>
                                </li>
                                <li>
                                    <strong>Exit chroot</strong><br>
                                    <code class="inline-code">exit</code>
                                </li>
                                <li>
                                    <strong>Exit initramfs</strong><br>
                                    <code class="inline-code">exit</code>
                                </li>
                                <li>
                                    <strong>System will reboot and relabel</strong><br>
                                    First boot will take longer (1-2 minutes) due to SELinux relabeling
                                </li>
                            </ul>
                        </div>
                    </div>

                    <!-- Scenario 6: Failed Service -->
                    <div class="scenario-card">
                        <div class="scenario-header">
                            <div class="scenario-icon">‚öôÔ∏è</div>
                            <div>
                                <div class="scenario-title">Scenario 6: Service Prevents Boot</div>
                                <div class="scenario-description">A failing service stops the system from reaching default target</div>
                            </div>
                        </div>
                        <div class="scenario-solution">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">Diagnosis and Solution</h4>
                            
                            <ul class="step-list">
                                <li>
                                    <strong>Boot to rescue mode</strong><br>
                                    Add <code class="inline-code">systemd.unit=rescue.target</code> to kernel parameters
                                </li>
                                <li>
                                    <strong>Enter root password</strong>
                                </li>
                                <li>
                                    <strong>Check failed units</strong><br>
                                    <code class="inline-code">systemctl --failed</code>
                                </li>
                                <li>
                                    <strong>View detailed service status</strong><br>
                                    <code class="inline-code">systemctl status SERVICE_NAME</code>
                                </li>
                                <li>
                                    <strong>Check service logs</strong><br>
                                    <code class="inline-code">journalctl -u SERVICE_NAME</code>
                                </li>
                                <li>
                                    <strong>Temporarily disable problematic service</strong><br>
                                    <code class="inline-code">systemctl mask SERVICE_NAME</code>
                                </li>
                                <li>
                                    <strong>Reboot normally</strong><br>
                                    <code class="inline-code">systemctl reboot</code>
                                </li>
                                <li>
                                    <strong>After boot, fix the service and re-enable</strong><br>
                                    <div class="code-block">systemctl unmask SERVICE_NAME
systemctl enable SERVICE_NAME
systemctl start SERVICE_NAME</div>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Emergency vs Rescue Mode -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Emergency vs Rescue Mode</h3>
                        <p class="card-subtitle">When to use which recovery mode</p>
                    </div>

                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Feature</th>
                                <th>Emergency Mode</th>
                                <th>Rescue Mode</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Boot Parameter</strong></td>
                                <td><code>systemd.unit=emergency.target</code></td>
                                <td><code>systemd.unit=rescue.target</code></td>
                            </tr>
                            <tr>
                                <td><strong>Services Started</strong></td>
                                <td>Absolute minimum</td>
                                <td>Most system services</td>
                            </tr>
                            <tr>
                                <td><strong>Filesystems</strong></td>
                                <td>Only root (read-only initially)</td>
                                <td>All local filesystems</td>
                            </tr>
                            <tr>
                                <td><strong>Network</strong></td>
                                <td>No</td>
                                <td>Usually yes</td>
                            </tr>
                            <tr>
                                <td><strong>Logging</strong></td>
                                <td>No</td>
                                <td>Yes (journald)</td>
                            </tr>
                            <tr>
                                <td><strong>Use Case</strong></td>
                                <td>Critical repairs, filesystem corruption, fstab errors</td>
                                <td>Service troubleshooting, configuration fixes</td>
                            </tr>
                            <tr>
                                <td><strong>Must Remount RW</strong></td>
                                <td>Yes: <code>mount -o remount,rw /</code></td>
                                <td>No (usually mounted RW)</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box tip">
                        <div class="info-box-title">üí° Quick Decision Guide</div>
                        <ul style="padding-left: 20px; color: var(--text-secondary); margin-top: 10px;">
                            <li><strong>Use Emergency Mode when:</strong> /etc/fstab is broken, filesystem corruption, need minimal environment</li>
                            <li><strong>Use Rescue Mode when:</strong> Service failures, need to troubleshoot with most tools available, network diagnostics needed</li>
                        </ul>
                    </div>
                </div>

                <!-- Quick Troubleshooting Commands -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Quick Troubleshooting Commands</h3>
                        <p class="card-subtitle">Essential commands for diagnosing boot issues</p>
                    </div>

                    <div class="command-category">
                        <div class="category-title">üîç Diagnosis Commands</div>
                        
                        <div class="cmd-box">
                            <div class="cmd-syntax">journalctl -xb</div>
                            <div class="cmd-description">View detailed boot logs with explanations</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl --failed</div>
                            <div class="cmd-description">List all failed units</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemd-analyze blame</div>
                            <div class="cmd-description">Show slow-starting services</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">dmesg | grep -i error</div>
                            <div class="cmd-description">Check kernel messages for errors</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">lsblk -f</div>
                            <div class="cmd-description">List block devices with UUIDs and filesystems</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">blkid</div>
                            <div class="cmd-description">Show partition UUIDs (useful for /etc/fstab fixes)</div>
                        </div>
                    </div>
                </div>

                <!-- Service Failure at Boot -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Service Failure at Boot</h3>
                        <p class="card-subtitle">Identifying and fixing failed services that prevent normal boot</p>
                    </div>

                    <div class="info-box important">
                        <div class="info-box-title">‚öôÔ∏è Understanding Service Failures</div>
                        <p>Not all service failures prevent boot completion, but critical services (like networking, storage, or graphical environment) can block the system from reaching its default target. Learn to identify and resolve these issues.</p>
                    </div>

                    <div class="concept-box">
                        <div class="concept-title">üîç Identifying Failed Services</div>
                        <p style="color: var(--text-secondary); margin-bottom: 15px;">
                            When a system boots but doesn't reach the expected target, or drops to emergency/rescue mode, service failures are often the cause.
                        </p>

                        <div class="command-category">
                            <div class="category-title">Primary Diagnostic Commands</div>
                            
                            <div class="cmd-box">
                                <div class="cmd-syntax">systemctl --failed</div>
                                <div class="cmd-description">List all units that failed to load or start</div>
                                <div class="cmd-example">$ systemctl --failed
  UNIT                    LOAD   ACTIVE SUB    DESCRIPTION
‚óè network.service         loaded failed failed Network Service
‚óè custom-app.service      loaded failed failed Custom Application

LOAD   = Reflects whether the unit definition was properly loaded.
ACTIVE = The high-level unit activation state, i.e. generalization of SUB.
SUB    = The low-level unit activation state, values depend on unit type.
2 loaded units listed.</div>
                            </div>

                            <div class="cmd-box">
                                <div class="cmd-syntax">systemctl status SERVICE_NAME</div>
                                <div class="cmd-description">Get detailed status of a specific service</div>
                                <div class="cmd-example">$ systemctl status network.service
‚óè network.service - Network Service
     Loaded: loaded (/usr/lib/systemd/system/network.service; enabled; vendor preset: disabled)
     Active: failed (Result: exit-code) since Mon 2024-01-15 09:30:22 EST; 2min ago
    Process: 1234 ExecStart=/usr/bin/network-start (code=exited, status=1/FAILURE)
   Main PID: 1234 (code=exited, status=1/FAILURE)</div>
                            </div>

                            <div class="cmd-box">
                                <div class="cmd-syntax">journalctl -u SERVICE_NAME -b</div>
                                <div class="cmd-description">View service logs from current boot</div>
                                <div class="cmd-example">$ journalctl -u network.service -b
Jan 15 09:30:22 server systemd[1]: Starting Network Service...
Jan 15 09:30:22 server network-start[1234]: Error: Interface eth0 not found
Jan 15 09:30:22 server systemd[1]: network.service: Main process exited, code=exited, status=1/FAILURE
Jan 15 09:30:22 server systemd[1]: network.service: Failed with result 'exit-code'.</div>
                            </div>

                            <div class="cmd-box">
                                <div class="cmd-syntax">systemctl list-dependencies TARGET</div>
                                <div class="cmd-description">Show all services required by a target</div>
                                <div class="cmd-example">$ systemctl list-dependencies graphical.target
graphical.target
‚óè ‚îú‚îÄaccounts-daemon.service
‚óè ‚îú‚îÄgdm.service
‚óè ‚îú‚îÄsystemd-update-utmp-runlevel.service
‚óè ‚îî‚îÄmulti-user.target
‚óè   ‚îú‚îÄbasic.target
‚óè   ‚îÇ ‚îú‚îÄ-.mount
‚óè   ‚îÇ ‚îú‚îÄmicrocode.service</div>
                            </div>
                        </div>
                    </div>

                    <div class="concept-box">
                        <div class="concept-title">üõ†Ô∏è Resolving Service Failures</div>
                        
                        <div style="margin-top: 20px;">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">Strategy 1: Disable Non-Critical Services</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                                If a non-essential service is preventing boot, you can disable it to allow the system to start, then fix it later.
                            </p>

                            <div class="step-list">
                                <div style="margin-bottom: 15px;">
                                    <strong>1. Boot to rescue or emergency mode</strong><br>
                                    Add <code class="inline-code">systemd.unit=rescue.target</code> to kernel parameters
                                </div>
                                
                                <div style="margin-bottom: 15px;">
                                    <strong>2. Identify the failed service</strong><br>
                                    <code class="inline-code">systemctl --failed</code>
                                </div>
                                
                                <div style="margin-bottom: 15px;">
                                    <strong>3. Check if service is required for boot</strong><br>
                                    <div class="code-block">systemctl show -p WantedBy,RequiredBy SERVICE_NAME
# If listed by critical targets, investigate further
# If only wanted by non-critical targets, safe to disable</div>
                                </div>
                                
                                <div style="margin-bottom: 15px;">
                                    <strong>4. Disable the service</strong><br>
                                    <div class="code-block">systemctl disable SERVICE_NAME
# This prevents it from starting at boot</div>
                                </div>
                                
                                <div style="margin-bottom: 15px;">
                                    <strong>5. Optionally mask the service (stronger than disable)</strong><br>
                                    <div class="code-block">systemctl mask SERVICE_NAME
# Creates symlink to /dev/null
# Cannot be started manually or by dependencies</div>
                                </div>
                                
                                <div>
                                    <strong>6. Reboot and verify</strong><br>
                                    <code class="inline-code">systemctl reboot</code>
                                </div>
                            </div>

                            <div class="info-box warning" style="margin-top: 15px;">
                                <div class="info-box-title">‚ö†Ô∏è Critical Services Warning</div>
                                <p>Never disable critical system services like:</p>
                                <ul style="padding-left: 20px; margin-top: 10px; color: var(--text-secondary);">
                                    <li><strong>systemd-journald.service</strong> - System logging</li>
                                    <li><strong>dbus.service</strong> - Inter-process communication</li>
                                    <li><strong>systemd-logind.service</strong> - Login management</li>
                                    <li><strong>systemd-udevd.service</strong> - Device management</li>
                                </ul>
                            </div>
                        </div>

                        <div style="margin-top: 30px;">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">Strategy 2: Fix Configuration Issues</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                                Many service failures are due to configuration errors. Use systemd's validation tools.
                            </p>

                            <div class="cmd-box">
                                <div class="cmd-syntax">systemd-analyze verify SERVICE_NAME.service</div>
                                <div class="cmd-description">Validate service unit file for errors</div>
                                <div class="cmd-example">$ systemd-analyze verify /etc/systemd/system/custom.service
/etc/systemd/system/custom.service:5: Missing '='
/etc/systemd/system/custom.service:8: Unknown key 'Restart' in section [Service]</div>
                            </div>

                            <div class="cmd-box">
                                <div class="cmd-syntax">systemctl edit --full SERVICE_NAME</div>
                                <div class="cmd-description">Edit service unit file (creates override in /etc)</div>
                                <div class="cmd-example">$ systemctl edit --full custom.service
# Opens editor with full service file
# Saves to /etc/systemd/system/custom.service</div>
                            </div>

                            <div class="cmd-box">
                                <div class="cmd-syntax">systemctl daemon-reload</div>
                                <div class="cmd-description">Reload systemd configuration after changes</div>
                                <div class="cmd-example">$ systemctl daemon-reload
# Always run after editing unit files</div>
                            </div>
                        </div>

                        <div style="margin-top: 30px;">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">Strategy 3: Use systemd Debug Shell</h4>
                            <p style="color: var(--text-secondary); margin-bottom: 15px;">
                                For severe boot issues, enable a debug shell that starts very early in the boot process.
                            </p>

                            <div class="step-list">
                                <div style="margin-bottom: 15px;">
                                    <strong>1. Add debug shell to kernel parameters</strong><br>
                                    At GRUB menu, press 'e' and add: <code class="inline-code">systemd.debug-shell=1</code>
                                </div>
                                
                                <div style="margin-bottom: 15px;">
                                    <strong>2. During boot, switch to TTY9</strong><br>
                                    Press <code class="inline-code">Ctrl+Alt+F9</code><br>
                                    <span style="color: var(--text-secondary); font-size: 0.875rem;">You'll get a root shell without password</span>
                                </div>
                                
                                <div style="margin-bottom: 15px;">
                                    <strong>3. Diagnose and fix issues</strong><br>
                                    <div class="code-block">journalctl -xb          # View boot logs
systemctl --failed      # Check failed services
systemctl status        # Overall system status</div>
                                </div>
                                
                                <div>
                                    <strong>4. Security note</strong><br>
                                    <div class="info-box warning" style="margin-top: 10px; font-size: 0.875rem;">
                                        ‚ö†Ô∏è Debug shell provides root access without authentication. Always remove <code>systemd.debug-shell=1</code> after troubleshooting!
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="concept-box">
                        <div class="concept-title">üìä Advanced Debugging Tools</div>
                        
                        <div class="command-category">
                            <div class="category-title">Deep Diagnostics</div>
                            
                            <div class="cmd-box">
                                <div class="cmd-syntax">systemd-analyze critical-chain</div>
                                <div class="cmd-description">Show the critical path that delays boot</div>
                                <div class="cmd-example">$ systemd-analyze critical-chain
The time when unit became active or started is printed after the "@" character.
The time the unit took to start is printed after the "+" character.

graphical.target @5.120s
‚îî‚îÄmulti-user.target @5.119s
  ‚îî‚îÄnetwork.target @5.118s
    ‚îî‚îÄNetworkManager.service @2.456s +2.661s
      ‚îî‚îÄbasic.target @2.450s
        ‚îî‚îÄsockets.target @2.449s</div>
                            </div>

                            <div class="cmd-box">
                                <div class="cmd-syntax">systemd-analyze plot > boot.svg</div>
                                <div class="cmd-description">Generate visual timeline of boot process</div>
                                <div class="cmd-example">$ systemd-analyze plot > boot.svg
# Creates SVG diagram showing when each service started
# View in web browser to analyze boot timeline</div>
                            </div>

                            <div class="cmd-box">
                                <div class="cmd-syntax">systemctl list-jobs</div>
                                <div class="cmd-description">Show currently running or pending jobs</div>
                                <div class="cmd-example">$ systemctl list-jobs
JOB  UNIT                      TYPE  STATE
123  network.service           start waiting
456  multi-user.target         start running
789  systemd-user-sessions.service start waiting

3 jobs listed.</div>
                            </div>

                            <div class="cmd-box">
                                <div class="cmd-syntax">systemctl show SERVICE_NAME</div>
                                <div class="cmd-description">Show all properties of a service</div>
                                <div class="cmd-example">$ systemctl show sshd.service
Id=sshd.service
Names=sshd.service
Requires=sysinit.target system.slice
WantedBy=multi-user.target
Conflicts=shutdown.target
Type=notify
Restart=on-failure
...</div>
                            </div>
                        </div>
                    </div>

                    <div class="info-box tip">
                        <div class="info-box-title">üí° Best Practices</div>
                        <ul style="padding-left: 20px; color: var(--text-secondary); margin-top: 10px;">
                            <li><strong>Test after fixing:</strong> Always reboot after fixing service issues to ensure they don't recur</li>
                            <li><strong>Keep backups:</strong> Before editing unit files, back them up: <code>cp service.service service.service.bak</code></li>
                            <li><strong>Check dependencies:</strong> Use <code>systemctl list-dependencies</code> to understand service relationships</li>
                            <li><strong>Monitor logs:</strong> Set up persistent journald logging to preserve boot logs across reboots</li>
                            <li><strong>Document changes:</strong> Keep notes on services you've disabled and why</li>
                        </ul>
                    </div>
                </div>

                <div class="card" style="text-align: center;">
                    <button class="btn btn-secondary" onclick="navigateToSection('target-explorer')">
                        ‚Üê Previous: Target Explorer
                    </button>
                    <button class="btn btn-primary" onclick="navigateToSection('command-reference')" style="margin-left: 15px;">
                        Next: Command Reference ‚Üí
                    </button>
                </div>
            </section>

            <!-- Command Reference Section -->
            <section class="content-section" id="command-reference">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Complete Command Reference</h3>
                        <p class="card-subtitle">All essential commands for boot management and systemd targets</p>
                    </div>

                    <!-- Target Management Commands -->
                    <div class="command-category">
                        <div class="category-title">üéØ Target Management</div>
                        
                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl get-default</div>
                            <div class="cmd-description">Display the current default target</div>
                            <div class="cmd-example">$ systemctl get-default
graphical.target</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl set-default TARGET</div>
                            <div class="cmd-description">Set the default target for future boots (requires root)</div>
                            <div class="cmd-example">$ sudo systemctl set-default multi-user.target
Removed /etc/systemd/system/default.target.
Created symlink /etc/systemd/system/default.target ‚Üí /usr/lib/systemd/system/multi-user.target.</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl isolate TARGET</div>
                            <div class="cmd-description">Switch to a different target immediately (runtime change only)</div>
                            <div class="cmd-example">$ sudo systemctl isolate graphical.target</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl list-units --type=target</div>
                            <div class="cmd-description">List all currently loaded targets</div>
                            <div class="cmd-example">$ systemctl list-units --type=target
UNIT                   LOAD   ACTIVE SUB    DESCRIPTION
basic.target          loaded active active Basic System
graphical.target      loaded active active Graphical Interface</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl list-dependencies TARGET</div>
                            <div class="cmd-description">Show all dependencies required by a target</div>
                            <div class="cmd-example">$ systemctl list-dependencies graphical.target</div>
                        </div>
                    </div>

                    <!-- System Power Commands -->
                    <div class="command-category">
                        <div class="category-title">‚ö° System Power Management</div>
                        
                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl poweroff</div>
                            <div class="cmd-description">Shut down and power off the system</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl reboot</div>
                            <div class="cmd-description">Reboot the system</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl suspend</div>
                            <div class="cmd-description">Suspend the system (sleep mode - RAM powered)</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl hibernate</div>
                            <div class="cmd-description">Hibernate the system (save state to disk, power off)</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl rescue</div>
                            <div class="cmd-description">Enter rescue mode (single-user maintenance mode)</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl emergency</div>
                            <div class="cmd-description">Enter emergency mode (minimal system for repairs)</div>
                        </div>
                    </div>

                    <!-- GRUB Configuration Commands -->
                    <div class="command-category">
                        <div class="category-title">üîß GRUB Configuration</div>
                        
                        <div class="cmd-box">
                            <div class="cmd-syntax">grub2-mkconfig -o /boot/grub2/grub.cfg</div>
                            <div class="cmd-description">Regenerate GRUB configuration (BIOS systems)</div>
                            <div class="cmd-example">$ sudo grub2-mkconfig -o /boot/grub2/grub.cfg
Generating grub configuration file ...</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg</div>
                            <div class="cmd-description">Regenerate GRUB configuration (UEFI systems)</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">grub2-set-default N</div>
                            <div class="cmd-description">Set default boot entry by index (0 = first entry)</div>
                            <div class="cmd-example">$ sudo grub2-set-default 0</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">grub2-editenv list</div>
                            <div class="cmd-description">Display GRUB environment variables including saved_entry</div>
                            <div class="cmd-example">$ sudo grub2-editenv list
saved_entry=0</div>
                        </div>

                        <div class="info-box warning">
                            <div class="info-box-title">‚ö†Ô∏è Critical Warning</div>
                            <p><strong>NEVER</strong> run <code class="inline-code">grub2-install</code> on UEFI systems with Secure Boot enabled! This creates unsigned bootloaders that will fail to boot. The signed bootloader at <code class="inline-code">/boot/efi/EFI/redhat/grubx64.efi</code> is preinstalled and should not be regenerated.</p>
                        </div>
                    </div>

                    <!-- Boot Troubleshooting Commands -->
                    <div class="command-category">
                        <div class="category-title">üîç Boot Troubleshooting</div>
                        
                        <div class="cmd-box">
                            <div class="cmd-syntax">journalctl -b</div>
                            <div class="cmd-description">Show all logs from current boot</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">journalctl -b -1</div>
                            <div class="cmd-description">Show logs from previous boot</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemd-analyze</div>
                            <div class="cmd-description">Show time taken to reach default target</div>
                            <div class="cmd-example">$ systemd-analyze
Startup finished in 2.347s (kernel) + 8.023s (userspace) = 10.370s</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemd-analyze blame</div>
                            <div class="cmd-description">List services by initialization time (slowest first)</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemd-analyze critical-chain</div>
                            <div class="cmd-description">Show critical path to default target</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">dmesg</div>
                            <div class="cmd-description">Display kernel ring buffer messages (hardware initialization)</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">lsinitrd</div>
                            <div class="cmd-description">List contents of initramfs image</div>
                            <div class="cmd-example">$ lsinitrd /boot/initramfs-$(uname -r).img</div>
                        </div>
                    </div>

                    <!-- Service Management Commands -->
                    <div class="command-category">
                        <div class="category-title">üîÑ Service Management</div>
                        
                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl status SERVICE</div>
                            <div class="cmd-description">Show detailed status of a service</div>
                            <div class="cmd-example">$ systemctl status sshd.service</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl start SERVICE</div>
                            <div class="cmd-description">Start a service immediately</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl stop SERVICE</div>
                            <div class="cmd-description">Stop a running service</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl restart SERVICE</div>
                            <div class="cmd-description">Restart a service (stop then start)</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl enable SERVICE</div>
                            <div class="cmd-description">Enable service to start at boot</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl disable SERVICE</div>
                            <div class="cmd-description">Disable service from starting at boot</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl is-enabled SERVICE</div>
                            <div class="cmd-description">Check if service is enabled at boot</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl is-active SERVICE</div>
                            <div class="cmd-description">Check if service is currently running</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl list-units --type=service</div>
                            <div class="cmd-description">List all loaded services</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemctl list-unit-files --type=service</div>
                            <div class="cmd-description">List all available service unit files</div>
                        </div>
                    </div>

                    <!-- Boot Parameters -->
                    <div class="command-category">
                        <div class="category-title">‚å®Ô∏è Kernel Boot Parameters</div>
                        
                        <div class="info-box note">
                            <div class="info-box-title">üìò How to Add Boot Parameters</div>
                            <p>At GRUB menu, press 'e' to edit. Find the line starting with 'linux' or 'linux16'. Add parameters at the end of that line. Press Ctrl+X to boot with modified parameters.</p>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemd.unit=rescue.target</div>
                            <div class="cmd-description">Boot to rescue mode</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemd.unit=emergency.target</div>
                            <div class="cmd-description">Boot to emergency mode</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemd.unit=multi-user.target</div>
                            <div class="cmd-description">Boot to text mode (non-graphical)</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">rd.break</div>
                            <div class="cmd-description">Break into initramfs shell (for password reset)</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">systemd.debug-shell</div>
                            <div class="cmd-description">Enable debug shell on TTY9 (Ctrl+Alt+F9)</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">quiet</div>
                            <div class="cmd-description">Suppress most boot messages (default)</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">Remove "quiet" and "rhgb"</div>
                            <div class="cmd-description">Show verbose boot messages (for troubleshooting)</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">single</div>
                            <div class="cmd-description">Boot to single-user mode (legacy parameter)</div>
                        </div>
                    </div>

                    <!-- File Locations -->
                    <div class="command-category">
                        <div class="category-title">üìÇ Important File Locations</div>
                        
                        <div class="cmd-box">
                            <div class="cmd-syntax">/etc/default/grub</div>
                            <div class="cmd-description">GRUB configuration file (edit this, then run grub2-mkconfig)</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">/boot/grub2/grub.cfg</div>
                            <div class="cmd-description">Generated GRUB config (BIOS) - DO NOT EDIT DIRECTLY</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">/boot/efi/EFI/redhat/grub.cfg</div>
                            <div class="cmd-description">Generated GRUB config (UEFI) - DO NOT EDIT DIRECTLY</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">/etc/systemd/system/default.target</div>
                            <div class="cmd-description">Symlink pointing to the default target</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">/usr/lib/systemd/system/</div>
                            <div class="cmd-description">Distribution-provided unit files</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">/etc/systemd/system/</div>
                            <div class="cmd-description">Administrator-created or modified unit files (highest priority)</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">/etc/fstab</div>
                            <div class="cmd-description">Filesystem mount table</div>
                        </div>

                        <div class="cmd-box">
                            <div class="cmd-syntax">/proc/cmdline</div>
                            <div class="cmd-description">View kernel command line parameters used for current boot</div>
                            <div class="cmd-example">$ cat /proc/cmdline</div>
                        </div>
                    </div>
                </div>

                <div class="card" style="text-align: center;">
                    <button class="btn btn-secondary" onclick="navigateToSection('troubleshooting')">
                        ‚Üê Previous: Troubleshooting
                    </button>
                    <button class="btn btn-primary" onclick="navigateToSection('quick-reference')" style="margin-left: 15px;">
                        Next: Quick Reference ‚Üí
                    </button>
                </div>
            </section>

            <!-- Quick Reference Section -->
            <section class="content-section" id="quick-reference">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Quick Reference Cards</h3>
                        <p class="card-subtitle">Essential information at your fingertips</p>
                    </div>

                    <div class="target-grid">
                        <div class="card" style="margin: 0;">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">üéØ Common Targets</h4>
                            <div class="code-block">graphical.target  ‚Üí GUI login
multi-user.target ‚Üí Text login
rescue.target     ‚Üí Rescue mode
emergency.target  ‚Üí Emergency mode</div>
                        </div>

                        <div class="card" style="margin: 0;">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">‚ö° Quick Commands</h4>
                            <div class="code-block">systemctl reboot
systemctl poweroff
systemctl get-default
systemctl rescue</div>
                        </div>

                        <div class="card" style="margin: 0;">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">üîß Boot Parameters</h4>
                            <div class="code-block">rd.break          ‚Üí Password reset
systemd.unit=...  ‚Üí Select target
systemd.debug-shell ‚Üí Debug shell</div>
                        </div>

                        <div class="card" style="margin: 0;">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">üìÇ Important Paths</h4>
                            <div class="code-block">/boot/grub2/      ‚Üí BIOS GRUB
/boot/efi/EFI/    ‚Üí UEFI GRUB
/etc/systemd/     ‚Üí systemd config
/etc/fstab        ‚Üí Filesystems</div>
                        </div>
                    </div>
                </div>

                <div class="card" style="background: linear-gradient(135deg, var(--success-color) 0%, var(--primary-color) 100%); color: white;">
                    <h3 style="margin-bottom: 15px;">üéâ Congratulations!</h3>
                    <p style="margin-bottom: 20px; opacity: 0.9;">You've completed the Boot Process Interactive Lesson with Troubleshooting!</p>
                    <button class="btn" style="background-color: white; color: var(--primary-color);" onclick="navigateToSection('boot-visualization')">
                        ‚Üª Start Over
                    </button>
                </div>
            </section>
        </main>

        <!-- Mobile Menu Toggle -->
        <button class="toggle-sidebar" id="toggleSidebar">‚ò∞</button>
    </div>

    <script>
        // Boot Process Data - BIOS and UEFI paths
        const bootStages = {
            bios: [
                {
                    number: 1,
                    title: "Power-On Self-Test (POST)",
                    description: "Hardware initialization and verification",
                    details: [
                        "CPU begins execution at reset vector (fixed memory address)",
                        "BIOS chip ROM contains the first code to execute",
                        "Tests CPU registers, memory chips, I/O devices",
                        "Checks for bootable devices in configured order",
                        "Beep codes indicate hardware problems detected"
                    ],
                    technicalDetails: "The BIOS resides in non-volatile ROM/flash memory on the motherboard. When power is applied, the CPU's reset vector points to the BIOS entry point. POST runs entirely before any OS code loads.",
                    keyTerms: {
                        "Reset Vector": "Fixed memory address (typically 0xFFFF0) where CPU begins execution on power-on",
                        "ROM": "Read-Only Memory containing BIOS firmware, persists without power",
                        "POST": "Power-On Self-Test - diagnostic testing sequence run by BIOS"
                    }
                },
                {
                    number: 2,
                    title: "BIOS Boot",
                    description: "First-stage bootloader execution",
                    details: [
                        "BIOS reads Master Boot Record (first 512 bytes of disk)",
                        "MBR contains Stage 1 bootloader and partition table",
                        "MBR bootloader is limited to 446 bytes of code",
                        "Stage 1 loads Stage 1.5 from gap after MBR (before first partition)",
                        "Stage 1.5 understands filesystems, loads Stage 2 GRUB"
                    ],
                    technicalDetails: "Legacy BIOS can only load 512 bytes initially. GRUB uses a 3-stage approach: Stage 1 (MBR), Stage 1.5 (filesystem driver), Stage 2 (full bootloader). This overcomes the 512-byte limitation.",
                    keyTerms: {
                        "MBR": "Master Boot Record - first 512 bytes of disk containing bootloader and partition table",
                        "Stage 1.5": "Intermediate bootloader with filesystem support, stored between MBR and first partition",
                        "446 bytes": "Maximum size for bootloader code in MBR (66 bytes used by partition table)"
                    }
                },
                {
                    number: 3,
                    title: "GRUB2 Bootloader",
                    description: "Boot menu and kernel selection",
                    details: [
                        "GRUB2 Stage 2 presents boot menu from /boot/grub2/grub.cfg",
                        "Configuration generated by grub2-mkconfig command",
                        "User can edit boot parameters by pressing 'e'",
                        "Loads selected kernel into memory",
                        "Passes kernel parameters and loads initial RAM disk"
                    ],
                    technicalDetails: "GRUB2 config at /boot/grub2/grub.cfg is auto-generated. Manual edits should go in /etc/default/grub and /etc/grub.d/ scripts. grub2-mkconfig combines these to generate the final config.",
                    keyTerms: {
                        "grub.cfg": "Main GRUB configuration file - auto-generated, don't edit directly",
                        "menuentry": "Defines a boot option in GRUB menu",
                        "GRUB_TIMEOUT": "Seconds to wait before auto-booting default entry"
                    }
                },
                {
                    number: 4,
                    title: "Kernel Initialization",
                    description: "Linux kernel starts and takes control",
                    details: [
                        "Kernel decompresses itself in memory",
                        "Initializes essential hardware (CPU, memory controller)",
                        "Mounts initramfs (initial RAM filesystem) as temporary root",
                        "Executes /init from initramfs (not the real /sbin/init yet)",
                        "Loads critical drivers needed to mount real root filesystem"
                    ],
                    technicalDetails: "The kernel image is compressed (vmlinuz). It contains a small decompressor that runs first. Early kernel initialization happens without a filesystem - only basic memory management and CPU features are available.",
                    keyTerms: {
                        "vmlinuz": "Compressed Linux kernel image",
                        "initramfs": "Initial RAM filesystem containing drivers needed for boot",
                        "Early Boot": "Kernel initialization phase before mounting real root filesystem"
                    }
                },
                {
                    number: 5,
                    title: "initramfs Stage",
                    description: "Temporary filesystem prepares for root mount",
                    details: [
                        "Loads device drivers from initramfs modules",
                        "Discovers storage devices (SCSI, SATA, NVMe drivers)",
                        "Activates LVM volumes and RAID arrays if needed",
                        "Decrypts LUKS encrypted volumes if configured",
                        "Mounts the real root filesystem (usually ext4, xfs)"
                    ],
                    technicalDetails: "initramfs is created by dracut command and stored as /boot/initramfs-<version>.img. It's a compressed CPIO archive containing minimal Linux environment with drivers needed to access root filesystem.",
                    keyTerms: {
                        "dracut": "Tool that generates initramfs images",
                        "CPIO": "Archive format used for initramfs",
                        "Pivot Root": "Operation that switches from initramfs to real root filesystem"
                    }
                },
                {
                    number: 6,
                    title: "systemd Initialization",
                    description: "First process starts and manages system",
                    details: [
                        "Kernel executes /sbin/init ‚Üí symlink to systemd",
                        "systemd becomes PID 1 (first userspace process)",
                        "Reads configuration from /etc/systemd/system/",
                        "Determines default target (usually graphical.target)",
                        "Begins parallel activation of required units"
                    ],
                    technicalDetails: "systemd replaces the older SysV init system. It uses 'units' (services, targets, mounts, etc.) instead of runlevels. Units are defined in .service, .target, .mount files with dependency relationships.",
                    keyTerms: {
                        "PID 1": "Process ID 1 - the first process, parent of all others",
                        "Unit": "systemd's configurable system resource (service, target, mount, etc.)",
                        "Target": "Group of units that represent a system state (like SysV runlevels)"
                    }
                },
                {
                    number: 7,
                    title: "Target Activation",
                    description: "System reaches operational state",
                    details: [
                        "systemd processes dependency tree from default.target",
                        "Starts required services in parallel where possible",
                        "Activates basic.target (fundamental system services)",
                        "Starts multi-user.target (networking, login)",
                        "Launches graphical.target (display manager) if configured"
                    ],
                    technicalDetails: "Default target is a symlink at /etc/systemd/system/default.target pointing to graphical.target or multi-user.target. 'systemctl set-default' changes this symlink.",
                    keyTerms: {
                        "Dependency Tree": "Graph of which units require or want other units",
                        "Parallel Startup": "systemd starts independent services simultaneously for faster boot",
                        "graphical.target": "Target that starts GUI environment (requires multi-user.target)"
                    }
                },
                {
                    number: 8,
                    title: "Login Prompt",
                    description: "System ready for user interaction",
                    details: [
                        "Display manager (GDM/LightDM) starts for graphical login",
                        "Or getty processes provide text console login on TTYs",
                        "PAM (Pluggable Authentication Modules) handles authentication",
                        "User session starts with their shell and environment",
                        "User's .bash_profile or .bashrc executes"
                    ],
                    technicalDetails: "Getty processes are managed by systemd (getty@tty1.service). Display managers are services that provide graphical login. Both use PAM for authentication, which can integrate LDAP, Kerberos, etc.",
                    keyTerms: {
                        "getty": "Program that manages a terminal line and login prompt",
                        "Display Manager": "Graphical login screen (GDM for GNOME, SDDM for KDE)",
                        "PAM": "Pluggable Authentication Modules - framework for authentication methods"
                    }
                }
            ],
            uefi: [
                {
                    number: 1,
                    title: "UEFI Firmware Initialization",
                    description: "Modern firmware replaces BIOS POST",
                    details: [
                        "UEFI firmware is more advanced than BIOS",
                        "Supports secure boot with cryptographic signatures",
                        "Can access full disk, not just first 512 bytes",
                        "Provides graphical setup interface with mouse support",
                        "Includes network boot capabilities (PXE) natively"
                    ],
                    technicalDetails: "UEFI firmware runs in protected mode (32-bit or 64-bit) from the start, unlike BIOS which starts in 16-bit real mode. This allows larger, more sophisticated firmware with modern features.",
                    keyTerms: {
                        "UEFI": "Unified Extensible Firmware Interface - modern replacement for BIOS",
                        "Secure Boot": "UEFI feature requiring signed bootloaders, prevents rootkits",
                        "EFI System Partition (ESP)": "FAT32 partition containing bootloaders and firmware"
                    }
                },
                {
                    number: 2,
                    title: "EFI System Partition",
                    description: "Dedicated boot partition accessed directly",
                    details: [
                        "ESP is FAT32 formatted partition (usually 200-500 MB)",
                        "Mounted at /boot/efi on running system",
                        "UEFI firmware can read FAT32 filesystem natively",
                        "Contains bootloader at /boot/efi/EFI/redhat/",
                        "No MBR or multi-stage bootloader needed"
                    ],
                    technicalDetails: "ESP uses GPT partition table (GUID Partition Table) instead of MBR. GPT supports disks >2TB and 128+ partitions. ESP typically has type GUID C12A7328-F81F-11D2-BA4B-00A0C93EC93B.",
                    keyTerms: {
                        "ESP": "EFI System Partition - FAT32 partition containing bootloaders",
                        "GPT": "GUID Partition Table - modern replacement for MBR partition table",
                        "Boot Entry": "UEFI firmware setting pointing to bootloader on ESP"
                    }
                },
                {
                    number: 3,
                    title: "UEFI Bootloader Execution",
                    description: "Signed GRUB2 loads from ESP",
                    details: [
                        "UEFI loads shimx64.efi (signed Microsoft shim for Secure Boot)",
                        "Shim verifies and loads grubx64.efi (signed GRUB2)",
                        "GRUB2 reads config from /boot/efi/EFI/redhat/grub.cfg",
                        "Bootloader can be graphical with mouse support",
                        "Secure Boot validates all components in chain"
                    ],
                    technicalDetails: "Secure Boot requires a chain of trust: Microsoft signs shim, shim verifies GRUB, GRUB verifies kernel. Keys stored in UEFI NVRAM. Disabling Secure Boot allows unsigned code but reduces security.",
                    keyTerms: {
                        "shim": "Small bootloader signed by Microsoft, loads GRUB on Secure Boot systems",
                        "Signature Verification": "Cryptographic check ensuring bootloader hasn't been tampered with",
                        "MOK": "Machine Owner Key - user-added keys for Secure Boot"
                    }
                },
                {
                    number: 4,
                    title: "Kernel Loading",
                    description: "Kernel initialization identical to BIOS",
                    details: [
                        "Kernel loaded into memory by GRUB2",
                        "Kernel decompression and initialization",
                        "No difference in kernel operation between BIOS and UEFI",
                        "Kernel receives boot parameters from GRUB",
                        "initramfs loaded as temporary root filesystem"
                    ],
                    technicalDetails: "After bootloader hands control to kernel, BIOS and UEFI systems are identical. The kernel doesn't know or care about the firmware type - it only sees the initialized hardware state and boot parameters.",
                    keyTerms: {
                        "Kernel Command Line": "Parameters passed to kernel (visible in /proc/cmdline)",
                        "Boot Protocol": "Linux kernel boot parameter specification",
                        "Hand-off": "Transfer of control from bootloader to kernel"
                    }
                },
                {
                    number: 5,
                    title: "initramfs Processing",
                    description: "Initial ramdisk prepares system (same as BIOS)",
                    details: [
                        "Load drivers for disk controllers",
                        "Discover and activate storage devices",
                        "Handle encrypted volumes (LUKS)",
                        "Activate LVM and RAID if configured",
                        "Mount real root filesystem"
                    ],
                    technicalDetails: "initramfs creation (dracut) is firmware-agnostic. The same initramfs works on both BIOS and UEFI systems. Only the bootloader loading process differs.",
                    keyTerms: {
                        "Device Discovery": "Process of detecting and initializing storage hardware",
                        "LUKS": "Linux Unified Key Setup - disk encryption system",
                        "Root Pivot": "Switching from initramfs to real root filesystem"
                    }
                },
                {
                    number: 6,
                    title: "systemd Startup",
                    description: "Init system takes control (identical to BIOS)",
                    details: [
                        "/sbin/init (systemd) starts as PID 1",
                        "Processes unit configuration files",
                        "Builds dependency tree",
                        "Determines default target",
                        "Begins service activation"
                    ],
                    technicalDetails: "systemd operation is completely independent of firmware type. All systemd features, targets, and services work identically on BIOS and UEFI systems.",
                    keyTerms: {
                        "systemd": "Modern init system and service manager",
                        "Unit Files": "Configuration files defining services, targets, mounts, etc.",
                        "Dependency Resolution": "Determining correct order to start services"
                    }
                },
                {
                    number: 7,
                    title: "System Services",
                    description: "Required services start in parallel",
                    details: [
                        "Start basic system services (logging, device management)",
                        "Initialize networking",
                        "Mount filesystems from /etc/fstab",
                        "Start multi-user target services",
                        "Launch graphical environment if configured"
                    ],
                    technicalDetails: "Service startup order is determined by dependencies in unit files. systemd starts services in parallel when no dependencies prevent it, significantly reducing boot time compared to SysV init's serial approach.",
                    keyTerms: {
                        "Socket Activation": "Starting services on-demand when first accessed",
                        "D-Bus": "Message bus system for inter-process communication",
                        "Target Unit": "Synchronization point grouping multiple services"
                    }
                },
                {
                    number: 8,
                    title: "User Login",
                    description: "System ready for users (same as BIOS)",
                    details: [
                        "Display manager presents graphical login",
                        "Or getty provides console login prompts",
                        "User authentication via PAM",
                        "Session initialization",
                        "Desktop environment starts (GNOME, KDE, etc.)"
                    ],
                    technicalDetails: "The login process is firmware-independent. Whether the system booted via BIOS or UEFI, the login experience is identical once systemd reaches the default target.",
                    keyTerms: {
                        "Session Manager": "systemd-logind - manages user sessions and seats",
                        "Desktop Environment": "Complete GUI environment (GNOME, KDE, Xfce)",
                        "TTY": "Text terminal interface (Ctrl+Alt+F1 through F6)"
                    }
                }
            ]
        };

        // systemd Targets Data
        const targets = [
            {
                name: "poweroff.target",
                icon: "üî¥",
                description: "System shutdown and power off",
                details: {
                    typical_use: "Triggered when shutting down the system with 'systemctl poweroff'",
                    characteristics: [
                        "Stops all services gracefully",
                        "Unmounts filesystems",
                        "Powers off the hardware",
                        "Similar to 'halt' or 'shutdown -h now'"
                    ],
                    runlevel_equivalent: "Runlevel 0"
                }
            },
            {
                name: "rescue.target",
                icon: "üöë",
                description: "Single-user rescue/maintenance mode",
                details: {
                    typical_use: "Emergency system repairs and maintenance when multi-user mode won't start",
                    characteristics: [
                        "Minimal number of services",
                        "Single-user mode",
                        "Local filesystems mounted",
                        "Network usually available",
                        "No GUI, root shell provided"
                    ],
                    runlevel_equivalent: "Runlevel 1 (Single User Mode)"
                }
            },
            {
                name: "multi-user.target",
                icon: "üë•",
                description: "Multi-user text mode (no GUI)",
                details: {
                    typical_use: "Servers and systems without graphical interface",
                    characteristics: [
                        "All essential system services running",
                        "Network services active",
                        "Multiple user logins supported",
                        "Text console only (no X/Wayland)",
                        "Remote SSH access available"
                    ],
                    runlevel_equivalent: "Runlevel 3"
                }
            },
            {
                name: "graphical.target",
                icon: "üñ•Ô∏è",
                description: "Multi-user graphical mode",
                details: {
                    typical_use: "Desktop systems and workstations with GUI",
                    characteristics: [
                        "Includes everything from multi-user.target",
                        "Display manager running (GDM, SDDM, LightDM)",
                        "Graphical login screen",
                        "Full desktop environment available",
                        "Requires multi-user.target first"
                    ],
                    runlevel_equivalent: "Runlevel 5"
                }
            },
            {
                name: "reboot.target",
                icon: "üîÑ",
                description: "System reboot",
                details: {
                    typical_use: "Triggered when rebooting with 'systemctl reboot'",
                    characteristics: [
                        "Gracefully stops all services",
                        "Unmounts filesystems",
                        "Restarts the system",
                        "Equivalent to 'shutdown -r now'"
                    ],
                    runlevel_equivalent: "Runlevel 6"
                }
            },
            {
                name: "emergency.target",
                icon: "üÜò",
                description: "Emergency shell - absolute minimal mode",
                details: {
                    typical_use: "Critical system repairs when rescue mode fails",
                    characteristics: [
                        "Absolute minimum processes",
                        "Root filesystem mounted read-only",
                        "No services started (not even logging)",
                        "Must remount root RW manually",
                        "Most bare-bones recovery environment"
                    ],
                    runlevel_equivalent: "None (more minimal than runlevel 1)"
                }
            }
        ];

        // Application State
        const appState = {
            currentSection: 'boot-visualization',
            bootPath: 'bios',
            completedModules: new Set()
        };

        // Helper Functions
        window.navigateToSection = function(sectionId) {
            const targetNav = document.querySelector(`[data-section="${sectionId}"]`);
            if (targetNav) {
                targetNav.click();
            }
        };

        // Initialize Application
        document.addEventListener('DOMContentLoaded', function() {
            initializeNavigation();
            initializeTheme();
            renderBootStages();
            renderTargets();
            initializeScenarios();
            loadProgress();
            initializeTabs();
        });

        // Navigation
        function initializeNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            const sections = document.querySelectorAll('.content-section');
            const sectionTitle = document.getElementById('sectionTitle');
            const breadcrumb = document.getElementById('breadcrumb');

            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const targetSection = this.getAttribute('data-section');
                    
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    sections.forEach(section => section.classList.remove('active'));
                    document.getElementById(targetSection).classList.add('active');
                    
                    const titles = {
                        'boot-visualization': 'Boot Process Visualization',
                        'target-explorer': 'systemd Target Explorer',
                        'troubleshooting': 'Boot Troubleshooting',
                        'command-reference': 'Command Reference',
                        'quick-reference': 'Quick Reference'
                    };
                    
                    const moduleNumbers = {
                        'boot-visualization': 1,
                        'target-explorer': 2,
                        'troubleshooting': 3,
                        'command-reference': 4,
                        'quick-reference': 5
                    };
                    
                    sectionTitle.textContent = titles[targetSection];
                    breadcrumb.textContent = `Module ${moduleNumbers[targetSection]} of 5`;
                    appState.currentSection = targetSection;
                    
                    markModuleComplete(targetSection);
                    updateProgress();
                    
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });

            const toggleSidebar = document.getElementById('toggleSidebar');
            const sidebar = document.getElementById('sidebar');
            
            if (toggleSidebar) {
                toggleSidebar.addEventListener('click', function() {
                    sidebar.classList.toggle('mobile-open');
                });
            }
        }

        // Theme Toggle
        function initializeTheme() {
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = document.getElementById('themeIcon');
            const savedTheme = localStorage.getItem('theme');
            
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                themeIcon.textContent = '‚òÄÔ∏è';
            }
            
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                const isDark = document.body.classList.contains('dark-mode');
                themeIcon.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
            });
        }

        // Render Boot Stages
        function renderBootStages() {
            const container = document.getElementById('bootStagesContainer');
            const stages = bootStages[appState.bootPath];
            
            container.innerHTML = stages.map((stage, index) => `
                <div class="boot-stage" data-stage="${index}">
                    <div style="display: flex; align-items: start;">
                        <span class="stage-number">${stage.number}</span>
                        <div style="flex: 1;">
                            <div class="stage-title">${stage.title}</div>
                            <div class="stage-description">${stage.description}</div>
                        </div>
                    </div>
                    <div class="stage-details">
                        <h4 style="margin-bottom: 10px; color: var(--primary-color);">Detailed Process:</h4>
                        <ul class="detail-list">
                            ${stage.details.map(detail => `<li>${detail}</li>`).join('')}
                        </ul>
                        <div style="margin-top: 15px;">
                            <h4 style="margin-bottom: 10px; color: var(--primary-color);">Technical Details:</h4>
                            <p style="color: var(--text-secondary);">${stage.technicalDetails}</p>
                        </div>
                        ${stage.keyTerms ? `
                            <div style="margin-top: 15px;">
                                <h4 style="margin-bottom: 10px; color: var(--primary-color);">Key Terms:</h4>
                                ${Object.entries(stage.keyTerms).map(([term, definition]) => `
                                    <div class="key-term-box">
                                        <strong>${term}:</strong> <span style="color: var(--text-secondary); font-size: 0.875rem;">${definition}</span>
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `).join('');
            
            document.querySelectorAll('.boot-stage').forEach(stage => {
                stage.addEventListener('click', function() {
                    this.classList.toggle('expanded');
                });
            });
            
            document.querySelectorAll('.path-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.path-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    appState.bootPath = this.getAttribute('data-path');
                    renderBootStages();
                });
            });
        }

        // Render Targets
        function renderTargets() {
            const grid = document.getElementById('targetGrid');
            
            grid.innerHTML = targets.map(target => `
                <div class="target-card">
                    <div class="target-icon">${target.icon}</div>
                    <div class="target-name">${target.name}</div>
                    <div class="target-description">${target.description}</div>
                    <div class="target-details">
                        <h4 style="margin-bottom: 10px; color: var(--primary-color);">Purpose:</h4>
                        <p style="color: var(--text-secondary); margin-bottom: 15px;">${target.details.typical_use}</p>
                        
                        <h4 style="margin-bottom: 10px; color: var(--primary-color);">Characteristics:</h4>
                        <ul style="padding-left: 20px; color: var(--text-secondary);">
                            ${target.details.characteristics.map(char => `<li style="margin-bottom: 5px;">${char}</li>`).join('')}
                        </ul>
                        
                        ${target.details.runlevel_equivalent ? `
                            <div class="info-box note" style="margin-top: 15px; font-size: 0.875rem;">
                                <strong>SysV Equivalent:</strong> ${target.details.runlevel_equivalent}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `).join('');
            
            document.querySelectorAll('.target-card').forEach(card => {
                card.addEventListener('click', function() {
                    this.classList.toggle('expanded');
                });
            });
        }

        // Initialize Scenarios (for troubleshooting section)
        function initializeScenarios() {
            document.querySelectorAll('.scenario-card').forEach(card => {
                card.addEventListener('click', function() {
                    this.classList.toggle('expanded');
                });
            });
        }

        // Initialize Tabs
        function initializeTabs() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    const container = this.closest('.card');
                    
                    container.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    container.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
                    container.querySelector(`[data-tab-content="${tabName}"]`).classList.add('active');
                });
            });
        }

        // Progress Tracking
        function markModuleComplete(module) {
            appState.completedModules.add(module);
            saveProgress();
        }

        function updateProgress() {
            const totalModules = 5;
            const completed = appState.completedModules.size;
            const percentage = Math.round((completed / totalModules) * 100);
            
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressText').textContent = percentage + '% Complete';
        }

        function saveProgress() {
            localStorage.setItem('completedModules', JSON.stringify([...appState.completedModules]));
        }

        function loadProgress() {
            const saved = localStorage.getItem('completedModules');
            if (saved) {
                appState.completedModules = new Set(JSON.parse(saved));
                updateProgress();
            }
        }

        document.getElementById('resetProgress').addEventListener('click', function() {
            if (confirm('Are you sure you want to reset all progress?')) {
                appState.completedModules.clear();
                localStorage.removeItem('completedModules');
                updateProgress();
            }
        });
    </script>
</body>
</html>
