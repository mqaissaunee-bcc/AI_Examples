<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linux Boot Process - Interactive Learning Module</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2563eb;
            --primary-dark: #1e40af;
            --secondary-color: #7c3aed;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --bg-primary: #ffffff;
            --bg-secondary: #f3f4f6;
            --bg-tertiary: #e5e7eb;
            --text-primary: #111827;
            --text-secondary: #6b7280;
            --border-color: #d1d5db;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode {
            --bg-primary: #1f2937;
            --bg-secondary: #111827;
            --bg-tertiary: #374151;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --border-color: #4b5563;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 280px;
            background-color: var(--bg-primary);
            border-right: 1px solid var(--border-color);
            padding: 20px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: transform 0.3s;
            z-index: 1000;
        }

        .sidebar-header {
            margin-bottom: 30px;
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .sidebar-header p {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .nav-section {
            margin-bottom: 25px;
        }

        .nav-section-title {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--text-secondary);
            font-weight: 600;
            margin-bottom: 10px;
            letter-spacing: 0.05em;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            margin-bottom: 5px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
            color: var(--text-primary);
            text-decoration: none;
        }

        .nav-item:hover {
            background-color: var(--bg-secondary);
        }

        .nav-item.active {
            background-color: var(--primary-color);
            color: white;
        }

        .nav-item-icon {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .progress-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        .progress-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .progress-bar {
            height: 8px;
            background-color: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--success-color);
            transition: width 0.5s;
            border-radius: 4px;
        }

        .progress-text {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 5px;
            text-align: right;
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 30px;
            max-width: 1400px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background-color: var(--bg-primary);
            padding: 20px;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        .header-title {
            font-size: 2rem;
            font-weight: 700;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background-color: var(--border-color);
        }

        .content-section {
            display: none;
            animation: fadeIn 0.3s;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background-color: var(--bg-primary);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .card-header {
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .card-subtitle {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Boot Process Visualization */
        .boot-process-container {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }

        .boot-path-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .path-btn {
            flex: 1;
            padding: 15px;
            border: 2px solid var(--border-color);
            background-color: var(--bg-secondary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }

        .path-btn.active {
            border-color: var(--primary-color);
            background-color: var(--primary-color);
            color: white;
        }

        .boot-stage {
            background-color: var(--bg-secondary);
            border-left: 4px solid var(--border-color);
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .boot-stage:hover {
            border-left-color: var(--primary-color);
            transform: translateX(5px);
        }

        .boot-stage.active {
            border-left-color: var(--success-color);
            background-color: rgba(16, 185, 129, 0.1);
        }

        .boot-stage.current {
            border-left-color: var(--primary-color);
            background-color: rgba(37, 99, 235, 0.1);
            box-shadow: var(--shadow-lg);
        }

        .stage-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: 600;
            margin-right: 10px;
        }

        .stage-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .stage-description {
            color: var(--text-secondary);
            font-size: 0.875rem;
            line-height: 1.6;
        }

        .stage-details {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
            display: none;
        }

        .boot-stage.expanded .stage-details {
            display: block;
            animation: slideDown 0.3s;
        }

        @keyframes slideDown {
            from { opacity: 0; max-height: 0; }
            to { opacity: 1; max-height: 500px; }
        }

        .detail-list {
            list-style: none;
            padding-left: 0;
        }

        .detail-list li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .detail-list li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: var(--primary-color);
            font-weight: bold;
        }

        .code-block {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            overflow-x: auto;
            margin: 10px 0;
        }

        .inline-code {
            background-color: var(--bg-secondary);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            border: 1px solid var(--border-color);
        }

        /* Timeline Controls */
        .timeline-controls {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 20px;
            padding: 20px;
            background-color: var(--bg-secondary);
            border-radius: 8px;
        }

        .play-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: var(--primary-color);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .play-btn:hover {
            background-color: var(--primary-dark);
            transform: scale(1.1);
        }

        .timeline-slider {
            flex: 1;
            height: 6px;
            border-radius: 3px;
            background-color: var(--bg-tertiary);
            position: relative;
            cursor: pointer;
        }

        .timeline-progress {
            height: 100%;
            background-color: var(--primary-color);
            border-radius: 3px;
            transition: width 0.3s;
        }

        .timeline-thumb {
            width: 16px;
            height: 16px;
            background-color: var(--primary-color);
            border: 2px solid white;
            border-radius: 50%;
            position: absolute;
            top: -5px;
            transform: translateX(-50%);
            cursor: grab;
            box-shadow: var(--shadow);
        }

        .timeline-thumb:active {
            cursor: grabbing;
        }

        .speed-control {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .speed-btn {
            padding: 5px 10px;
            border: 1px solid var(--border-color);
            background-color: var(--bg-primary);
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.75rem;
        }

        .speed-btn.active {
            background-color: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }

        /* Target Explorer */
        .target-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .target-card {
            background-color: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .target-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .target-card.selected {
            border-color: var(--primary-color);
            background-color: rgba(37, 99, 235, 0.1);
        }

        .target-icon {
            width: 50px;
            height: 50px;
            background-color: var(--primary-color);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            margin-bottom: 15px;
        }

        .target-name {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .target-description {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 15px;
        }

        .target-details {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }

        .target-card.expanded .target-details {
            display: block;
        }

        .dependency-graph {
            margin-top: 20px;
            padding: 20px;
            background-color: var(--bg-secondary);
            border-radius: 8px;
            min-height: 300px;
        }

        .graph-node {
            display: inline-block;
            padding: 10px 15px;
            background-color: var(--bg-primary);
            border: 2px solid var(--primary-color);
            border-radius: 6px;
            margin: 5px;
            position: relative;
        }

        .graph-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: center;
        }

        .graph-level {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .graph-connector {
            width: 2px;
            height: 20px;
            background-color: var(--border-color);
            margin: 0 auto;
        }

        /* Command Reference */
        .command-search {
            margin-bottom: 20px;
        }

        .search-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            font-size: 1rem;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            transition: border-color 0.2s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .command-category {
            margin-bottom: 25px;
        }

        .category-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .command-item {
            background-color: var(--bg-secondary);
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .command-item:hover {
            background-color: var(--bg-tertiary);
            transform: translateX(5px);
        }

        .command-syntax {
            font-family: 'Courier New', monospace;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--primary-color);
        }

        .command-desc {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 10px;
        }

        .command-examples {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }

        .command-item.expanded .command-examples {
            display: block;
        }

        .example-title {
            font-size: 0.875rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .example-code {
            background-color: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            margin-bottom: 8px;
        }

        .example-explanation {
            color: var(--text-secondary);
            font-size: 0.8rem;
            font-style: italic;
            margin-bottom: 10px;
        }

        /* Info Boxes */
        .info-box {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid;
        }

        .info-box.note {
            background-color: rgba(37, 99, 235, 0.1);
            border-left-color: var(--primary-color);
        }

        .info-box.warning {
            background-color: rgba(245, 158, 11, 0.1);
            border-left-color: var(--warning-color);
        }

        .info-box.important {
            background-color: rgba(239, 68, 68, 0.1);
            border-left-color: var(--danger-color);
        }

        .info-box.tip {
            background-color: rgba(16, 185, 129, 0.1);
            border-left-color: var(--success-color);
        }

        .info-box-title {
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
        }

        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border: none;
            background: none;
            color: var(--text-secondary);
            font-weight: 500;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            transition: all 0.2s;
        }

        .tab:hover {
            color: var(--primary-color);
        }

        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th {
            background-color: var(--primary-color);
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .comparison-table tr:hover {
            background-color: var(--bg-secondary);
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.mobile-open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 15px;
            }

            .target-grid {
                grid-template-columns: 1fr;
            }

            .boot-process-container {
                flex-direction: column;
            }

            .header-title {
                font-size: 1.5rem;
            }
        }

        .toggle-sidebar {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            z-index: 999;
        }

        @media (max-width: 768px) {
            .toggle-sidebar {
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }

        /* Badge */
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-left: 8px;
        }

        .badge-primary {
            background-color: rgba(37, 99, 235, 0.2);
            color: var(--primary-color);
        }

        .badge-success {
            background-color: rgba(16, 185, 129, 0.2);
            color: var(--success-color);
        }

        .badge-warning {
            background-color: rgba(245, 158, 11, 0.2);
            color: var(--warning-color);
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
            border-bottom: 1px dotted var(--text-secondary);
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
            text-align: center;
            border-radius: 6px;
            padding: 8px 12px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            white-space: nowrap;
            font-size: 0.875rem;
            box-shadow: var(--shadow);
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Loading animation */
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .spinner {
            border: 3px solid var(--bg-tertiary);
            border-top: 3px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>Boot Process</h1>
                <p>Interactive Learning Module</p>
            </div>

            <nav>
                <div class="nav-section">
                    <div class="nav-section-title">Learning Modules</div>
                    <a class="nav-item active" data-section="boot-visualization">
                        <span class="nav-item-icon">üöÄ</span>
                        <span>Boot Visualization</span>
                    </a>
                    <a class="nav-item" data-section="target-explorer">
                        <span class="nav-item-icon">üéØ</span>
                        <span>Target Explorer</span>
                    </a>
                    <a class="nav-item" data-section="command-reference">
                        <span class="nav-item-icon">üìö</span>
                        <span>Command Reference</span>
                    </a>
                </div>

                <div class="nav-section">
                    <div class="nav-section-title">Resources</div>
                    <a class="nav-item" data-section="quick-reference">
                        <span class="nav-item-icon">‚ö°</span>
                        <span>Quick Reference</span>
                    </a>
                </div>
            </nav>

            <div class="progress-section">
                <div class="progress-label">Overall Progress</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <div class="progress-text" id="progressText">0% Complete</div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div>
                    <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 5px;">
                        <span id="breadcrumb">Module 1 of 4</span>
                    </div>
                    <h2 class="header-title" id="sectionTitle">Boot Process Visualization</h2>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" id="themeToggle">
                        <span id="themeIcon">üåô</span>
                        <span>Dark Mode</span>
                    </button>
                    <button class="btn btn-primary" id="resetProgress">
                        <span>‚Üª</span>
                        <span>Reset Progress</span>
                    </button>
                </div>
            </header>

            <!-- Boot Visualization Section -->
            <section class="content-section active" id="boot-visualization">
                <div class="info-box tip" style="margin-bottom: 20px;">
                    <div class="info-box-title">üëã Welcome to the Interactive Boot Process Lesson!</div>
                    <p>This lesson has <strong>4 interactive modules</strong>. Use the sidebar navigation on the left to explore:</p>
                    <ul style="margin-top: 10px; padding-left: 20px;">
                        <li><strong>üöÄ Boot Visualization</strong> - Explore the complete boot process</li>
                        <li><strong>üéØ Target Explorer</strong> - Learn about systemd targets</li>
                        <li><strong>üìö Command Reference</strong> - Complete command guide</li>
                        <li><strong>‚ö° Quick Reference</strong> - At-a-glance information</li>
                    </ul>
                    <p style="margin-top: 10px;"><em>On mobile? Tap the menu button (‚ò∞) in the bottom right to open navigation.</em></p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Understanding the Linux Boot Process</h3>
                        <p class="card-subtitle">Explore how a Linux system boots from power-on to login prompt</p>
                    </div>

                    <div class="info-box note">
                        <div class="info-box-title">üí° Learning Objective</div>
                        <p>By the end of this module, you'll understand each stage of the boot process, the difference between BIOS and UEFI systems, and how components like GRUB2, the kernel, and systemd work together to bring your system to life.</p>
                    </div>

                    <div class="boot-path-selector">
                        <button class="path-btn active" data-path="bios">
                            <div style="font-size: 1.2rem; margin-bottom: 5px;">üíæ</div>
                            <div style="font-weight: 600;">BIOS Boot Path</div>
                            <div style="font-size: 0.75rem; margin-top: 5px;">Legacy Systems</div>
                        </button>
                        <button class="path-btn" data-path="uefi">
                            <div style="font-size: 1.2rem; margin-bottom: 5px;">‚ö°</div>
                            <div style="font-weight: 600;">UEFI Boot Path</div>
                            <div style="font-size: 0.75rem; margin-top: 5px;">Modern Systems</div>
                        </button>
                    </div>

                    <div id="bootStagesContainer"></div>

                    <div class="timeline-controls">
                        <button class="play-btn" id="playBootAnimation">‚ñ∂</button>
                        <div class="timeline-slider" id="timelineSlider">
                            <div class="timeline-progress" id="timelineProgress"></div>
                            <div class="timeline-thumb" id="timelineThumb"></div>
                        </div>
                        <div class="speed-control">
                            <span style="font-size: 0.875rem; color: var(--text-secondary);">Speed:</span>
                            <button class="speed-btn active" data-speed="1">1x</button>
                            <button class="speed-btn" data-speed="2">2x</button>
                            <button class="speed-btn" data-speed="0.5">0.5x</button>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">BIOS vs UEFI Comparison</h3>
                        <p class="card-subtitle">Understanding the differences between legacy and modern firmware</p>
                    </div>

                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Aspect</th>
                                <th>BIOS</th>
                                <th>UEFI</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Firmware Type</strong></td>
                                <td>Basic Input/Output System</td>
                                <td>Unified Extensible Firmware Interface</td>
                            </tr>
                            <tr>
                                <td><strong>Boot Record</strong></td>
                                <td>MBR (Master Boot Record)</td>
                                <td>GPT (GUID Partition Table)</td>
                            </tr>
                            <tr>
                                <td><strong>Disk Support</strong></td>
                                <td>Up to 2TB</td>
                                <td>Over 2TB (virtually unlimited)</td>
                            </tr>
                            <tr>
                                <td><strong>Boot Loader Location</strong></td>
                                <td>/boot/grub2/grub.cfg</td>
                                <td>/boot/efi/EFI/redhat/grub.cfg</td>
                            </tr>
                            <tr>
                                <td><strong>Secure Boot</strong></td>
                                <td>Not supported</td>
                                <td>Supported (requires signed boot loaders)</td>
                            </tr>
                            <tr>
                                <td><strong>Boot Speed</strong></td>
                                <td>Slower</td>
                                <td>Faster</td>
                            </tr>
                            <tr>
                                <td><strong>Interface</strong></td>
                                <td>Text-based</td>
                                <td>Can be graphical with mouse support</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box important">
                        <div class="info-box-title">‚ö†Ô∏è Important: UEFI Secure Boot</div>
                        <p>When Secure Boot is enabled, the system requires signed bootloaders and kernels. The prebuilt file <code class="inline-code">/boot/efi/EFI/redhat/grubx64.efi</code> contains the required authentication signatures. Running <code class="inline-code">grub2-install</code> directly on a UEFI system generates a new grubx64.efi without these signatures, which will fail to boot on systems with Secure Boot enabled.</p>
                    </div>
                </div>

                <div class="card" style="text-align: center; background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);">
                    <p style="color: var(--text-secondary); margin-bottom: 15px;">Ready to learn about systemd targets?</p>
                    <button class="btn btn-primary" onclick="navigateToSection('target-explorer')" style="font-size: 1.1rem; padding: 15px 40px;">
                        Next Module: systemd Target Explorer ‚Üí
                    </button>
                </div>
            </section>

            <!-- Target Explorer Section -->
            <section class="content-section" id="target-explorer">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">systemd Targets</h3>
                        <p class="card-subtitle">Understanding system states and how to manage them</p>
                    </div>

                    <div class="info-box note">
                        <div class="info-box-title">üìò What are systemd Targets?</div>
                        <p>A systemd target is a grouping of units that the system needs to reach a particular state. Targets are similar to runlevels in older init systems but are more flexible. When you boot to a target, systemd starts (and stops) all the units required to reach that target state, automatically handling dependencies between units.</p>
                    </div>

                    <div class="target-grid" id="targetGrid"></div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Target Dependencies</h3>
                        <p class="card-subtitle">Visualizing how targets depend on each other</p>
                    </div>

                    <div class="dependency-graph" id="dependencyGraph">
                        <p style="text-align: center; color: var(--text-secondary);">Select a target above to view its dependency tree</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Managing Targets</h3>
                        <p class="card-subtitle">Commands for switching and configuring targets</p>
                    </div>

                    <div class="tabs">
                        <button class="tab active" data-tab="runtime">Runtime Changes</button>
                        <button class="tab" data-tab="persistent">Persistent Changes</button>
                        <button class="tab" data-tab="boot-time">Boot-Time Selection</button>
                    </div>

                    <div class="tab-content active" data-tab-content="runtime">
                        <h4 style="margin-bottom: 15px;">Switching Targets at Runtime</h4>
                        <p style="color: var(--text-secondary); margin-bottom: 15px;">These commands immediately change the system to a different target without requiring a reboot:</p>
                        
                        <div class="command-item">
                            <div class="command-syntax">systemctl isolate multi-user.target</div>
                            <div class="command-desc">Switch to multi-user mode (text-based, no GUI)</div>
                        </div>

                        <div class="command-item">
                            <div class="command-syntax">systemctl isolate graphical.target</div>
                            <div class="command-desc">Switch to graphical mode (GUI login)</div>
                        </div>

                        <div class="command-item">
                            <div class="command-syntax">systemctl rescue</div>
                            <div class="command-desc">Enter rescue mode (single-user, minimal services)</div>
                        </div>

                        <div class="command-item">
                            <div class="command-syntax">systemctl emergency</div>
                            <div class="command-desc">Enter emergency mode (most minimal system)</div>
                        </div>

                        <div class="info-box warning">
                            <div class="info-box-title">‚ö†Ô∏è Warning</div>
                            <p>Isolating a target stops all services that the target doesn't require and starts any required services that aren't yet started. This can disrupt running applications and active user sessions.</p>
                        </div>

                        <div class="info-box note">
                            <div class="info-box-title">üí° Target Isolation Explained</div>
                            <p>Not all targets can be isolated. Only targets with <code class="inline-code">AllowIsolate=yes</code> in their unit files can be used with the <code class="inline-code">isolate</code> command. You can check this by running:</p>
                            <div class="code-block">systemctl cat graphical.target</div>
                        </div>
                    </div>

                    <div class="tab-content" data-tab-content="persistent">
                        <h4 style="margin-bottom: 15px;">Setting the Default Target</h4>
                        <p style="color: var(--text-secondary); margin-bottom: 15px;">These commands change which target the system boots to by default:</p>
                        
                        <div class="command-item">
                            <div class="command-syntax">systemctl get-default</div>
                            <div class="command-desc">Display the current default target</div>
                        </div>

                        <div class="command-item">
                            <div class="command-syntax">systemctl set-default graphical.target</div>
                            <div class="command-desc">Set graphical.target as the default boot target</div>
                        </div>

                        <div class="command-item">
                            <div class="command-syntax">systemctl set-default multi-user.target</div>
                            <div class="command-desc">Set multi-user.target as the default boot target</div>
                        </div>

                        <div class="info-box tip">
                            <div class="info-box-title">üí° How It Works</div>
                            <p>The default target is actually a symbolic link at <code class="inline-code">/etc/systemd/system/default.target</code> that points to the desired target file (usually <code class="inline-code">/usr/lib/systemd/system/graphical.target</code> or <code class="inline-code">multi-user.target</code>).</p>
                            <p style="margin-top: 10px;">The <code class="inline-code">systemctl set-default</code> command simply updates this symbolic link. You could also do this manually, but using systemctl is the recommended approach.</p>
                        </div>

                        <div class="code-block"># View the current symbolic link
ls -l /etc/systemd/system/default.target

# Example output:
# /etc/systemd/system/default.target -> /usr/lib/systemd/system/graphical.target</div>
                    </div>

                    <div class="tab-content" data-tab-content="boot-time">
                        <h4 style="margin-bottom: 15px;">Selecting a Target at Boot Time</h4>
                        <p style="color: var(--text-secondary); margin-bottom: 15px;">You can override the default target for a single boot by editing the kernel command line:</p>
                        
                        <ol style="padding-left: 20px; margin-bottom: 20px;">
                            <li style="margin-bottom: 10px;">Reboot the system</li>
                            <li style="margin-bottom: 10px;">Interrupt the boot loader menu countdown (press any key except <strong>Enter</strong>)</li>
                            <li style="margin-bottom: 10px;">Select the kernel entry to boot</li>
                            <li style="margin-bottom: 10px;">Press <strong>e</strong> to edit the entry</li>
                            <li style="margin-bottom: 10px;">Navigate to the line starting with <code class="inline-code">linux</code></li>
                            <li style="margin-bottom: 10px;">Append the desired parameter (examples below)</li>
                            <li style="margin-bottom: 10px;">Press <strong>Ctrl+x</strong> to boot with these changes</li>
                        </ol>

                        <h4 style="margin-bottom: 10px;">Common Boot Parameters:</h4>

                        <div class="command-item">
                            <div class="command-syntax">systemd.unit=rescue.target</div>
                            <div class="command-desc">Boot into rescue mode (single-user with most services)</div>
                        </div>

                        <div class="command-item">
                            <div class="command-syntax">systemd.unit=emergency.target</div>
                            <div class="command-desc">Boot into emergency mode (minimal system, root filesystem mounted read-only)</div>
                        </div>

                        <div class="command-item">
                            <div class="command-syntax">systemd.unit=multi-user.target</div>
                            <div class="command-desc">Boot into multi-user mode (override graphical default)</div>
                        </div>

                        <div class="info-box important">
                            <div class="info-box-title">üîí Root Password Required</div>
                            <p>Both rescue and emergency targets require the root password to access the shell. If you've lost the root password, you'll need to use the <code class="inline-code">rd.break</code> parameter instead to reset it.</p>
                        </div>

                        <div class="info-box note">
                            <div class="info-box-title">üí° Temporary Change Only</div>
                            <p>Kernel parameters appended at boot time only affect that single boot. The system will use the default target on the next boot unless you change it with <code class="inline-code">systemctl set-default</code>.</p>
                        </div>
                    </div>
                </div>

                <div class="card" style="text-align: center; background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);">
                    <div style="display: flex; justify-content: space-between; align-items: center; gap: 20px; flex-wrap: wrap;">
                        <button class="btn btn-secondary" onclick="navigateToSection('boot-visualization')" style="font-size: 1rem; padding: 12px 30px;">
                            ‚Üê Previous: Boot Visualization
                        </button>
                        <button class="btn btn-primary" onclick="navigateToSection('command-reference')" style="font-size: 1rem; padding: 12px 30px;">
                            Next: Command Reference ‚Üí
                        </button>
                    </div>
                </div>
            </section>

            <!-- Command Reference Section -->
            <section class="content-section" id="command-reference">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Command Reference</h3>
                        <p class="card-subtitle">Comprehensive guide to boot-related commands</p>
                    </div>

                    <div class="command-search">
                        <input type="text" class="search-input" id="commandSearch" placeholder="Search commands...">
                    </div>

                    <div id="commandList"></div>
                </div>

                <div class="card" style="text-align: center; background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);">
                    <div style="display: flex; justify-content: space-between; align-items: center; gap: 20px; flex-wrap: wrap;">
                        <button class="btn btn-secondary" onclick="navigateToSection('target-explorer')" style="font-size: 1rem; padding: 12px 30px;">
                            ‚Üê Previous: Target Explorer
                        </button>
                        <button class="btn btn-primary" onclick="navigateToSection('quick-reference')" style="font-size: 1rem; padding: 12px 30px;">
                            Next: Quick Reference ‚Üí
                        </button>
                    </div>
                </div>
            </section>

            <!-- Quick Reference Section -->
            <section class="content-section" id="quick-reference">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Quick Reference Cards</h3>
                        <p class="card-subtitle">Essential information at your fingertips</p>
                    </div>

                    <div class="target-grid">
                        <div class="card" style="margin: 0;">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">üéØ Common Targets</h4>
                            <table style="width: 100%; font-size: 0.875rem;">
                                <tr>
                                    <td style="padding: 5px 0;"><code class="inline-code">graphical.target</code></td>
                                    <td style="padding: 5px 0; color: var(--text-secondary);">GUI login</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><code class="inline-code">multi-user.target</code></td>
                                    <td style="padding: 5px 0; color: var(--text-secondary);">Text login</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><code class="inline-code">rescue.target</code></td>
                                    <td style="padding: 5px 0; color: var(--text-secondary);">Rescue mode</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><code class="inline-code">emergency.target</code></td>
                                    <td style="padding: 5px 0; color: var(--text-secondary);">Emergency mode</td>
                                </tr>
                            </table>
                        </div>

                        <div class="card" style="margin: 0;">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">‚ö° Quick Commands</h4>
                            <table style="width: 100%; font-size: 0.875rem;">
                                <tr>
                                    <td style="padding: 5px 0;"><code class="inline-code">systemctl reboot</code></td>
                                    <td style="padding: 5px 0; color: var(--text-secondary);">Reboot</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><code class="inline-code">systemctl poweroff</code></td>
                                    <td style="padding: 5px 0; color: var(--text-secondary);">Shutdown</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><code class="inline-code">systemctl get-default</code></td>
                                    <td style="padding: 5px 0; color: var(--text-secondary);">View default</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><code class="inline-code">systemctl rescue</code></td>
                                    <td style="padding: 5px 0; color: var(--text-secondary);">Enter rescue</td>
                                </tr>
                            </table>
                        </div>

                        <div class="card" style="margin: 0;">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">üîß Boot Parameters</h4>
                            <table style="width: 100%; font-size: 0.875rem;">
                                <tr>
                                    <td style="padding: 5px 0;"><code class="inline-code">rd.break</code></td>
                                    <td style="padding: 5px 0; color: var(--text-secondary);">Password reset</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><code class="inline-code">systemd.unit=...</code></td>
                                    <td style="padding: 5px 0; color: var(--text-secondary);">Select target</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><code class="inline-code">systemd.debug-shell</code></td>
                                    <td style="padding: 5px 0; color: var(--text-secondary);">Debug shell</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><code class="inline-code">init=/bin/bash</code></td>
                                    <td style="padding: 5px 0; color: var(--text-secondary);">Emergency shell</td>
                                </tr>
                            </table>
                        </div>

                        <div class="card" style="margin: 0;">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">üìÇ Important Paths</h4>
                            <table style="width: 100%; font-size: 0.875rem;">
                                <tr>
                                    <td style="padding: 5px 0;"><code class="inline-code">/boot/grub2/</code></td>
                                    <td style="padding: 5px 0; color: var(--text-secondary);">BIOS GRUB</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><code class="inline-code">/boot/efi/EFI/</code></td>
                                    <td style="padding: 5px 0; color: var(--text-secondary);">UEFI GRUB</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><code class="inline-code">/etc/systemd/system/</code></td>
                                    <td style="padding: 5px 0; color: var(--text-secondary);">Custom units</td>
                                </tr>
                                <tr>
                                    <td style="padding: 5px 0;"><code class="inline-code">/etc/fstab</code></td>
                                    <td style="padding: 5px 0; color: var(--text-secondary);">Filesystems</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <div class="info-box tip" style="margin-top: 20px;">
                        <div class="info-box-title">üí° Pro Tip</div>
                        <p>Save this page as a bookmark or export it for offline reference. All the information is self-contained and doesn't require an internet connection.</p>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Troubleshooting Flowchart</h3>
                        <p class="card-subtitle">Decision tree for common boot issues</p>
                    </div>

                    <div style="background-color: var(--bg-secondary); padding: 30px; border-radius: 8px; text-align: center;">
                        <div style="background-color: var(--bg-primary); border: 2px solid var(--primary-color); border-radius: 8px; padding: 15px; max-width: 300px; margin: 0 auto 20px;">
                            <strong>Boot Issue Detected</strong>
                        </div>
                        
                        <div style="color: var(--text-secondary); margin-bottom: 20px;">‚Üì</div>
                        
                        <div style="background-color: var(--bg-primary); border: 2px solid var(--warning-color); border-radius: 8px; padding: 15px; max-width: 350px; margin: 0 auto 20px;">
                            <strong>Can you interrupt GRUB?</strong>
                        </div>

                        <div style="display: flex; justify-content: center; gap: 50px; margin-bottom: 20px;">
                            <div style="text-align: center;">
                                <div style="color: var(--text-secondary); margin-bottom: 10px;">Yes ‚úì</div>
                                <div style="background-color: var(--bg-primary); border: 2px solid var(--success-color); border-radius: 8px; padding: 15px; max-width: 250px;">
                                    Try:<br>
                                    <code class="inline-code" style="display: block; margin-top: 5px;">systemd.unit=rescue.target</code>
                                    <code class="inline-code" style="display: block; margin-top: 5px;">rd.break</code>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: var(--text-secondary); margin-bottom: 10px;">No ‚úó</div>
                                <div style="background-color: var(--bg-primary); border: 2px solid var(--danger-color); border-radius: 8px; padding: 15px; max-width: 250px;">
                                    Hardware issue or<br>
                                    GRUB corruption<br>
                                    <small style="color: var(--text-secondary);">(Requires rescue media)</small>
                                </div>
                            </div>
                        </div>

                        <div style="color: var(--text-secondary); margin: 20px 0;">‚Üì</div>

                        <div style="background-color: var(--bg-primary); border: 2px solid var(--warning-color); border-radius: 8px; padding: 15px; max-width: 350px; margin: 0 auto 20px;">
                            <strong>Does it reach emergency shell?</strong>
                        </div>

                        <div style="display: flex; justify-content: center; gap: 50px;">
                            <div style="text-align: center;">
                                <div style="color: var(--text-secondary); margin-bottom: 10px;">Yes ‚úì</div>
                                <div style="background-color: var(--bg-primary); border: 2px solid var(--success-color); border-radius: 8px; padding: 15px; max-width: 250px;">
                                    Check:<br>
                                    <code class="inline-code" style="display: block; margin-top: 5px;">journalctl -xb</code>
                                    <code class="inline-code" style="display: block; margin-top: 5px;">/etc/fstab</code>
                                </div>
                            </div>
                            <div style="text-align: center;">
                                <div style="color: var(--text-secondary); margin-bottom: 10px;">No ‚úó</div>
                                <div style="background-color: var(--bg-primary); border: 2px solid var(--danger-color); border-radius: 8px; padding: 15px; max-width: 250px;">
                                    Kernel panic or<br>
                                    initramfs issue<br>
                                    <small style="color: var(--text-secondary);">(Check kernel parameters)</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card" style="text-align: center; background: linear-gradient(135deg, var(--success-color) 0%, var(--primary-color) 100%); color: white;">
                    <h3 style="margin-bottom: 15px;">üéâ Congratulations!</h3>
                    <p style="margin-bottom: 20px; opacity: 0.9;">You've completed all four modules of the Boot Process Interactive Lesson.</p>
                    <div style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;">
                        <button class="btn" style="background-color: white; color: var(--primary-color);" onclick="navigateToSection('boot-visualization')">
                            ‚Üª Start Over
                        </button>
                        <button class="btn" style="background-color: rgba(255,255,255,0.2); color: white; border: 2px solid white;" onclick="navigateToSection('command-reference')">
                            ‚Üê Previous: Commands
                        </button>
                    </div>
                </div>
            </section>
        </main>

        <!-- Mobile Menu Toggle -->
        <button class="toggle-sidebar" id="toggleSidebar">‚ò∞</button>
    </div>

    <script>
        // Application State
        const appState = {
            currentSection: 'boot-visualization',
            bootPath: 'bios',
            selectedTarget: null,
            completedModules: new Set(),
            animationPlaying: false,
            animationSpeed: 1,
            currentStage: 0
        };

        // Boot Process Data
        const bootStages = {
            bios: [
                {
                    number: 1,
                    title: 'Hardware Power-On and POST',
                    description: 'System firmware initializes and tests hardware components',
                    details: [
                        'System powers on and firmware (BIOS) performs POST (Power-On Self Test)',
                        'Tests memory, CPU, and essential hardware components',
                        'Initializes hardware devices and configures basic settings',
                        'Displays manufacturer logo or diagnostic information',
                        'Checks for bootable devices in configured boot order'
                    ],
                    technicalDetails: 'The BIOS is stored in non-volatile memory on the motherboard. Press F2, Del, or other keys during POST to access BIOS setup. The POST process typically takes 1-5 seconds on modern systems.',
                    commands: []
                },
                {
                    number: 2,
                    title: 'BIOS Searches for Boot Device',
                    description: 'Firmware locates the Master Boot Record on bootable disk',
                    details: [
                        'BIOS searches configured boot devices (hard drive, USB, network, etc.)',
                        'Looks for a valid Master Boot Record (MBR) in the first 512 bytes of each disk',
                        'MBR contains bootloader code and partition table',
                        'Loads the bootloader code from MBR into memory',
                        'Transfers control to the bootloader'
                    ],
                    technicalDetails: 'The MBR is located in the first sector (sector 0) of the boot disk. It contains 446 bytes of bootloader code, 64 bytes of partition table, and a 2-byte boot signature (0x55AA). BIOS systems are limited to 2TB disks due to MBR constraints.',
                    commands: []
                },
                {
                    number: 3,
                    title: 'GRUB2 Boot Loader',
                    description: 'GRUB2 loads its configuration and displays boot menu',
                    details: [
                        'GRUB2 (GRand Unified Bootloader version 2) takes control',
                        'Reads configuration from /boot/grub2/grub.cfg',
                        'Displays menu of available kernels (if timeout > 0)',
                        'Waits for user selection or proceeds automatically after timeout',
                        'Loads the selected kernel and initramfs into memory',
                        'Passes kernel parameters and control to the kernel'
                    ],
                    technicalDetails: 'GRUB2 configuration is generated by grub2-mkconfig and should not be edited directly. Use /etc/default/grub for persistent changes and run grub2-mkconfig -o /boot/grub2/grub.cfg to regenerate the configuration.',
                    commands: [
                        'grub2-mkconfig -o /boot/grub2/grub.cfg',
                        'grub2-install /dev/sda',
                        'grub2-editenv list'
                    ]
                },
                {
                    number: 4,
                    title: 'Kernel Initialization',
                    description: 'Linux kernel loads and initializes system hardware',
                    details: [
                        'Kernel decompresses itself into memory',
                        'Initializes memory management and basic system structures',
                        'Detects and initializes hardware (CPU, memory, storage controllers)',
                        'Loads built-in drivers from the kernel image',
                        'Mounts the initramfs (initial RAM filesystem) as temporary root',
                        'Executes /sbin/init from initramfs (which links to systemd on modern systems)'
                    ],
                    technicalDetails: 'The kernel receives parameters from GRUB via the kernel command line. Common parameters include root= (root filesystem), ro (mount read-only initially), and quiet (suppress verbose output). View current kernel parameters with: cat /proc/cmdline',
                    commands: [
                        'uname -r',
                        'cat /proc/cmdline',
                        'dmesg | less',
                        'lsmod'
                    ]
                },
                {
                    number: 5,
                    title: 'initramfs Execution',
                    description: 'Initial RAM filesystem prepares the system for root filesystem',
                    details: [
                        'initramfs contains kernel modules, scripts, and tools needed for boot',
                        'Loads necessary kernel modules (storage drivers, filesystem drivers, etc.)',
                        'Initializes udev for device management',
                        'Assembles software RAID or LVM volumes if present',
                        'Unlocks encrypted volumes (LUKS) if configured',
                        'Locates and mounts the real root filesystem',
                        'Pivots from initramfs to the real root filesystem'
                    ],
                    technicalDetails: 'The initramfs is an archive containing a minimal root filesystem. It\'s created by dracut (or mkinitramfs on some distributions). Regenerate with: dracut --force. Inspect contents with: lsinitrd /boot/initramfs-$(uname -r).img',
                    commands: [
                        'lsinitrd',
                        'dracut --force',
                        'dracut --add-drivers "module_name"'
                    ]
                },
                {
                    number: 6,
                    title: 'systemd Initialization',
                    description: 'systemd starts as PID 1 and manages system initialization',
                    details: [
                        'Kernel executes /sbin/init (symlinked to systemd) as process ID 1',
                        'systemd reads its configuration from /etc/systemd/',
                        'Determines the default target from /etc/systemd/system/default.target',
                        'Activates all units required by the default target',
                        'Starts services in parallel where possible (dependency-based)',
                        'Mounts additional filesystems defined in /etc/fstab',
                        'Continues until the target and all dependencies are reached'
                    ],
                    technicalDetails: 'systemd is both an init system and a system manager. It manages services (daemons), mount points, devices, sockets, and more. Each managed component is called a "unit". Use systemctl to interact with systemd.',
                    commands: [
                        'systemctl list-units',
                        'systemctl get-default',
                        'systemd-analyze',
                        'systemd-analyze blame'
                    ]
                },
                {
                    number: 7,
                    title: 'Target Achievement',
                    description: 'System reaches configured target and presents login',
                    details: [
                        'All required services for the target are started',
                        'For multi-user.target: text-based login prompts appear',
                        'For graphical.target: display manager starts (gdm, sddm, etc.)',
                        'System is ready for user interaction',
                        'Login services (getty, display manager) wait for credentials'
                    ],
                    technicalDetails: 'The default target is typically either multi-user.target (text mode) or graphical.target (GUI mode). Graphical target depends on multi-user target, so it includes all its services plus the display manager.',
                    commands: [
                        'systemctl status',
                        'systemctl list-units --type=target',
                        'loginctl list-sessions'
                    ]
                }
            ],
            uefi: [
                {
                    number: 1,
                    title: 'Hardware Power-On and UEFI POST',
                    description: 'UEFI firmware initializes and tests hardware components',
                    details: [
                        'System powers on and UEFI firmware performs POST',
                        'Tests memory, CPU, and essential hardware components',
                        'UEFI has more advanced diagnostics than traditional BIOS',
                        'Can display graphical interface with mouse support',
                        'Reads NVRAM boot entries to determine boot order',
                        'Supports Secure Boot verification of bootloader signatures'
                    ],
                    technicalDetails: 'UEFI (Unified Extensible Firmware Interface) is a modern replacement for BIOS. It supports GPT partition tables, allowing disks larger than 2TB. UEFI can boot from partitions formatted with FAT32 filesystem (EFI System Partition).',
                    commands: []
                },
                {
                    number: 2,
                    title: 'UEFI Locates EFI Partition',
                    description: 'Firmware reads boot entries and mounts EFI System Partition',
                    details: [
                        'UEFI reads boot configuration from NVRAM',
                        'Locates the EFI System Partition (ESP) on the boot disk',
                        'ESP is a FAT32 partition with specific partition type GUID',
                        'Mounts the ESP (typically mounted at /boot/efi in running system)',
                        'Reads boot entries that point to .efi bootloader files',
                        'If Secure Boot is enabled, verifies bootloader signature'
                    ],
                    technicalDetails: 'The EFI System Partition contains bootloader files in /boot/efi/EFI/ directory. Each OS has its own subdirectory. Boot entries are managed with efibootmgr command. UEFI boot entries are stored in NVRAM and persist across disk replacements.',
                    commands: [
                        'efibootmgr -v',
                        'efibootmgr -o 0001,0000',
                        'mount | grep efi'
                    ]
                },
                {
                    number: 3,
                    title: 'GRUB2 UEFI Boot Loader',
                    description: 'GRUB2 EFI application loads configuration and displays menu',
                    details: [
                        'UEFI loads grubx64.efi (or other EFI bootloader) from ESP',
                        'GRUB2 reads configuration from /boot/efi/EFI/redhat/grub.cfg',
                        'This config file typically sources the main config at /boot/grub2/grub.cfg',
                        'Displays menu of available kernels',
                        'User can edit kernel parameters or select boot options',
                        'Loads selected kernel and initramfs into memory',
                        'Transfers control to kernel with specified parameters'
                    ],
                    technicalDetails: 'On UEFI systems with Secure Boot, the bootloader must be signed. The prebuilt /boot/efi/EFI/redhat/grubx64.efi contains required signatures. NEVER run grub2-install on UEFI systems as it generates an unsigned bootloader. To update GRUB: grub2-mkconfig -o /boot/grub2/grub.cfg',
                    commands: [
                        'grub2-mkconfig -o /boot/grub2/grub.cfg',
                        'grub2-editenv list',
                        'mokutil --sb-state'
                    ]
                },
                {
                    number: 4,
                    title: 'Kernel Initialization',
                    description: 'Linux kernel loads and initializes system hardware',
                    details: [
                        'Kernel decompresses itself into memory',
                        'Initializes memory management and basic system structures',
                        'Detects and initializes hardware (CPU, memory, storage controllers)',
                        'Loads built-in drivers from the kernel image',
                        'On UEFI systems, kernel can access UEFI runtime services',
                        'Mounts the initramfs (initial RAM filesystem) as temporary root',
                        'Executes /sbin/init from initramfs (systemd)'
                    ],
                    technicalDetails: 'UEFI provides runtime services to the kernel, including variable access and time services. The kernel can query UEFI for system information. UEFI variables can be viewed in /sys/firmware/efi/efivars/',
                    commands: [
                        'uname -r',
                        'cat /proc/cmdline',
                        'ls /sys/firmware/efi/efivars/',
                        'dmesg | grep -i efi'
                    ]
                },
                {
                    number: 5,
                    title: 'initramfs Execution',
                    description: 'Initial RAM filesystem prepares the system for root filesystem',
                    details: [
                        'initramfs contains kernel modules, scripts, and tools needed for boot',
                        'Loads necessary kernel modules (storage drivers, filesystem drivers, etc.)',
                        'Initializes udev for device management',
                        'Assembles software RAID or LVM volumes if present',
                        'Unlocks encrypted volumes (LUKS) if configured',
                        'Locates and mounts the real root filesystem',
                        'Pivots from initramfs to the real root filesystem'
                    ],
                    technicalDetails: 'The initramfs process is identical between BIOS and UEFI systems. The difference lies only in how the bootloader and kernel are loaded. Once the kernel is running, the boot process is the same.',
                    commands: [
                        'lsinitrd',
                        'dracut --force',
                        'dracut --add-drivers "module_name"'
                    ]
                },
                {
                    number: 6,
                    title: 'systemd Initialization',
                    description: 'systemd starts as PID 1 and manages system initialization',
                    details: [
                        'Kernel executes /sbin/init (symlinked to systemd) as process ID 1',
                        'systemd reads its configuration from /etc/systemd/',
                        'Determines the default target from /etc/systemd/system/default.target',
                        'Activates all units required by the default target',
                        'Starts services in parallel where possible (dependency-based)',
                        'Mounts additional filesystems defined in /etc/fstab',
                        'Continues until the target and all dependencies are reached'
                    ],
                    technicalDetails: 'systemd manages the entire system after kernel initialization. It handles service startup, dependency resolution, and system state management. UEFI-specific services may be started to manage UEFI variables and firmware updates.',
                    commands: [
                        'systemctl list-units',
                        'systemctl get-default',
                        'systemd-analyze',
                        'systemd-analyze critical-chain'
                    ]
                },
                {
                    number: 7,
                    title: 'Target Achievement',
                    description: 'System reaches configured target and presents login',
                    details: [
                        'All required services for the target are started',
                        'For multi-user.target: text-based login prompts appear',
                        'For graphical.target: display manager starts (gdm, sddm, etc.)',
                        'System is ready for user interaction',
                        'Login services (getty, display manager) wait for credentials',
                        'On UEFI systems, firmware variables may be accessible to applications'
                    ],
                    technicalDetails: 'Once the target is reached, the system is fully operational. UEFI systems may have additional services for managing firmware settings and updates through the OS.',
                    commands: [
                        'systemctl status',
                        'systemctl list-units --type=target',
                        'loginctl list-sessions'
                    ]
                }
            ]
        };

        // Target Data
        const targets = [
            {
                name: 'graphical.target',
                icon: 'üñ•Ô∏è',
                description: 'Multi-user system with graphical interface (GUI login)',
                purpose: 'Full multi-user system with network services and graphical desktop environment',
                details: {
                    services: ['display-manager.service', 'network.target', 'multi-user.target'],
                    typical_use: 'Desktop systems, workstations, systems requiring GUI',
                    characteristics: [
                        'Includes all services from multi-user.target',
                        'Additionally starts a display manager (gdm, sddm, lightdm, etc.)',
                        'Provides graphical login screen',
                        'Supports multiple simultaneous GUI sessions',
                        'Highest resource consumption of standard targets'
                    ]
                },
                dependencies: ['multi-user.target']
            },
            {
                name: 'multi-user.target',
                icon: 'üë•',
                description: 'Multi-user system with text-based interface (no GUI)',
                purpose: 'Full-featured multi-user system without graphical interface',
                details: {
                    services: ['basic.target', 'network.target', 'sshd.service', 'various system services'],
                    typical_use: 'Servers, headless systems, systems accessed via SSH',
                    characteristics: [
                        'All networking services are available',
                        'Multiple users can log in simultaneously',
                        'Text-based login prompts (getty)',
                        'SSH access is available',
                        'Lower resource usage than graphical.target',
                        'Suitable for servers and systems without display'
                    ]
                },
                dependencies: ['basic.target']
            },
            {
                name: 'rescue.target',
                icon: 'üîß',
                description: 'Single-user mode with basic system services for maintenance',
                purpose: 'Troubleshoot system issues with most services available',
                details: {
                    services: ['sysinit.target', 'rescue.service', 'essential system services'],
                    typical_use: 'System repair, service troubleshooting, filesystem repairs',
                    characteristics: [
                        'Requires root password to access',
                        'Single-user environment (root only)',
                        'Most system services are started',
                        'Filesystems are mounted',
                        'Network services are typically available',
                        'More services than emergency.target',
                        'Suitable for service troubleshooting'
                    ],
                    important: 'If rescue.target fails to start, system falls back to emergency.target'
                },
                dependencies: ['sysinit.target']
            },
            {
                name: 'emergency.target',
                icon: 'üö®',
                description: 'Minimal system environment for critical repairs',
                purpose: 'Most basic operational state for emergency repairs',
                details: {
                    services: ['Absolute minimum services', 'emergency.service'],
                    typical_use: 'Critical system repairs, filesystem corruption fixes, password resets',
                    characteristics: [
                        'Requires root password to access',
                        'Minimal system initialization',
                        'Root filesystem mounted read-only initially',
                        'No network services',
                        'Fewest possible services running',
                        'Use when rescue.target fails',
                        'Must remount root filesystem as read-write for modifications: mount -o remount,rw /'
                    ],
                    important: 'This is the last resort before using rescue media or rd.break'
                },
                dependencies: []
            }
        ];

        // Command Reference Data
        const commands = {
            'systemctl': [
                {
                    syntax: 'systemctl poweroff',
                    description: 'Shut down the system gracefully',
                    examples: [
                        {
                            code: 'systemctl poweroff',
                            explanation: 'Stops all services, unmounts filesystems, and powers off'
                        },
                        {
                            code: 'poweroff',
                            explanation: 'Symbolic link to systemctl poweroff (same effect)'
                        }
                    ],
                    details: 'This command stops all running services in the correct order, unmounts all filesystems (or remounts them read-only if they cannot be unmounted), and then powers down the system. On systems without power management, it halts the system instead.'
                },
                {
                    syntax: 'systemctl reboot',
                    description: 'Restart the system gracefully',
                    examples: [
                        {
                            code: 'systemctl reboot',
                            explanation: 'Performs a clean restart of the system'
                        },
                        {
                            code: 'reboot',
                            explanation: 'Symbolic link to systemctl reboot'
                        }
                    ],
                    details: 'Performs a graceful shutdown and restart. All services are stopped properly, filesystems are unmounted, and the system reboots.'
                },
                {
                    syntax: 'systemctl halt',
                    description: 'Halt the system without powering off',
                    examples: [
                        {
                            code: 'systemctl halt',
                            explanation: 'Stops the system but does not power it off (safe to power off manually)'
                        },
                        {
                            code: 'halt',
                            explanation: 'Symbolic link to systemctl halt'
                        }
                    ],
                    details: 'Unlike poweroff, halt does not send an ACPI power-off signal. The system stops all processes and unmounts filesystems but remains powered on. Useful for systems without power management or when you need to keep hardware powered.'
                },
                {
                    syntax: 'systemctl get-default',
                    description: 'Display the current default boot target',
                    examples: [
                        {
                            code: 'systemctl get-default',
                            explanation: 'Shows which target the system boots to by default (e.g., graphical.target)'
                        }
                    ],
                    details: 'Returns the target that systemd will boot to by default. This is determined by the symbolic link at /etc/systemd/system/default.target.'
                },
                {
                    syntax: 'systemctl set-default TARGET',
                    description: 'Set the default boot target',
                    examples: [
                        {
                            code: 'systemctl set-default graphical.target',
                            explanation: 'Configure system to boot into GUI mode by default'
                        },
                        {
                            code: 'systemctl set-default multi-user.target',
                            explanation: 'Configure system to boot into text mode by default'
                        }
                    ],
                    details: 'Changes the default.target symbolic link to point to the specified target. This persists across reboots. The change takes effect on the next boot, unless you also isolate to that target immediately.'
                },
                {
                    syntax: 'systemctl isolate TARGET',
                    description: 'Switch to a different target immediately',
                    examples: [
                        {
                            code: 'systemctl isolate multi-user.target',
                            explanation: 'Switch to text mode immediately (stops GUI if running)'
                        },
                        {
                            code: 'systemctl isolate graphical.target',
                            explanation: 'Switch to graphical mode immediately (starts GUI if not running)'
                        },
                        {
                            code: 'systemctl isolate rescue.target',
                            explanation: 'Enter rescue mode (requires root password)'
                        }
                    ],
                    details: 'Isolating a target stops all units not required by that target and starts all units that are required. This is a runtime change and does not affect the default target. Only targets with AllowIsolate=yes can be isolated.'
                },
                {
                    syntax: 'systemctl rescue',
                    description: 'Enter rescue mode (single-user)',
                    examples: [
                        {
                            code: 'systemctl rescue',
                            explanation: 'Immediately switch to rescue mode'
                        }
                    ],
                    details: 'Shortcut for systemctl isolate rescue.target. Stops most services and provides a single-user root shell for system maintenance. Requires root password.'
                },
                {
                    syntax: 'systemctl emergency',
                    description: 'Enter emergency mode (minimal system)',
                    examples: [
                        {
                            code: 'systemctl emergency',
                            explanation: 'Switch to the most minimal operational state'
                        }
                    ],
                    details: 'Shortcut for systemctl isolate emergency.target. Provides the most minimal system possible with only essential services. Root filesystem is mounted read-only. Requires root password.'
                },
                {
                    syntax: 'systemctl list-units --type=target',
                    description: 'List all loaded targets',
                    examples: [
                        {
                            code: 'systemctl list-units --type=target',
                            explanation: 'Show all currently loaded targets and their states'
                        },
                        {
                            code: 'systemctl list-units --type=target --all',
                            explanation: 'Show all targets, including inactive ones'
                        }
                    ],
                    details: 'Displays all target units currently loaded by systemd. Targets can be active or inactive. This helps understand which system states are currently achieved.'
                },
                {
                    syntax: 'systemctl list-dependencies TARGET',
                    description: 'Show dependencies of a target',
                    examples: [
                        {
                            code: 'systemctl list-dependencies graphical.target',
                            explanation: 'Show all units required by graphical.target'
                        },
                        {
                            code: 'systemctl list-dependencies graphical.target | grep target',
                            explanation: 'Show only target dependencies'
                        }
                    ],
                    details: 'Displays a tree of all units required by the specified target. This helps understand what will be started when you boot to or isolate a target.'
                },
                {
                    syntax: 'systemctl cat TARGET',
                    description: 'Display the unit file for a target',
                    examples: [
                        {
                            code: 'systemctl cat graphical.target',
                            explanation: 'View the configuration of graphical.target'
                        },
                        {
                            code: 'systemctl cat multi-user.target',
                            explanation: 'View the configuration of multi-user.target'
                        }
                    ],
                    details: 'Shows the complete unit file including any drop-in configurations. Useful for understanding target configuration and dependencies.'
                },
                {
                    syntax: 'systemctl list-jobs',
                    description: 'Show currently active jobs',
                    examples: [
                        {
                            code: 'systemctl list-jobs',
                            explanation: 'Display jobs currently queued or running'
                        }
                    ],
                    details: 'Jobs represent pending or running systemd operations. If a job is stuck, it may prevent the system from booting or changing targets. Useful for troubleshooting boot issues.'
                },
                {
                    syntax: 'systemctl daemon-reload',
                    description: 'Reload systemd configuration',
                    examples: [
                        {
                            code: 'systemctl daemon-reload',
                            explanation: 'Reload systemd after editing unit files'
                        }
                    ],
                    details: 'Reloads all unit files and regenerates dependency trees. Required after modifying unit files, drop-ins, or when adding new unit files. Does not restart services.'
                }
            ],
            'systemd-analyze': [
                {
                    syntax: 'systemd-analyze',
                    description: 'Show boot time statistics',
                    examples: [
                        {
                            code: 'systemd-analyze',
                            explanation: 'Display total time taken to boot'
                        }
                    ],
                    details: 'Shows breakdown of time spent in firmware, loader, kernel, initrd, and userspace during boot. Useful for identifying boot performance bottlenecks.'
                },
                {
                    syntax: 'systemd-analyze blame',
                    description: 'List services by boot time',
                    examples: [
                        {
                            code: 'systemd-analyze blame',
                            explanation: 'Show which services took longest to start'
                        },
                        {
                            code: 'systemd-analyze blame | head -20',
                            explanation: 'Show top 20 slowest services'
                        }
                    ],
                    details: 'Lists all services sorted by initialization time. The slowest services appear first. Note that this shows initialization time, not dependency wait time.'
                },
                {
                    syntax: 'systemd-analyze critical-chain',
                    description: 'Show critical boot path',
                    examples: [
                        {
                            code: 'systemd-analyze critical-chain',
                            explanation: 'Display the chain of services that delayed boot the most'
                        },
                        {
                            code: 'systemd-analyze critical-chain graphical.target',
                            explanation: 'Show critical path to reach graphical.target'
                        }
                    ],
                    details: 'Shows the dependency chain that took the longest to complete during boot. This is the actual bottleneck, accounting for dependencies. Services shown here have the most impact on boot time.'
                },
                {
                    syntax: 'systemd-analyze plot > boot.svg',
                    description: 'Generate boot timeline diagram',
                    examples: [
                        {
                            code: 'systemd-analyze plot > boot.svg',
                            explanation: 'Create SVG visualization of boot process'
                        }
                    ],
                    details: 'Generates a detailed SVG timeline showing when each service started and stopped during boot. View in a web browser for detailed analysis.'
                }
            ],
            'journalctl': [
                {
                    syntax: 'journalctl -b',
                    description: 'Show logs from current boot',
                    examples: [
                        {
                            code: 'journalctl -b',
                            explanation: 'View all logs since the current boot'
                        },
                        {
                            code: 'journalctl -b -1',
                            explanation: 'View logs from the previous boot'
                        },
                        {
                            code: 'journalctl -b -p err',
                            explanation: 'Show only errors from current boot'
                        }
                    ],
                    details: 'The -b option limits output to the current boot. Use negative numbers to view previous boots (requires persistent journal storage).'
                },
                {
                    syntax: 'journalctl -u UNIT',
                    description: 'Show logs for specific unit',
                    examples: [
                        {
                            code: 'journalctl -u sshd.service',
                            explanation: 'View logs for SSH service'
                        },
                        {
                            code: 'journalctl -u NetworkManager -f',
                            explanation: 'Follow NetworkManager logs in real-time'
                        }
                    ],
                    details: 'Filter journal entries to show only messages from the specified systemd unit. Very useful for troubleshooting specific services.'
                },
                {
                    syntax: 'journalctl -p PRIORITY',
                    description: 'Filter by log priority',
                    examples: [
                        {
                            code: 'journalctl -p err',
                            explanation: 'Show only errors and higher priority'
                        },
                        {
                            code: 'journalctl -p warning -b',
                            explanation: 'Show warnings and errors from current boot'
                        }
                    ],
                    details: 'Priorities: emerg (0), alert (1), crit (2), err (3), warning (4), notice (5), info (6), debug (7). Specifying a priority shows that level and higher (more severe).'
                },
                {
                    syntax: 'journalctl -f',
                    description: 'Follow journal in real-time',
                    examples: [
                        {
                            code: 'journalctl -f',
                            explanation: 'Watch new journal entries as they appear (like tail -f)'
                        },
                        {
                            code: 'journalctl -f -u httpd',
                            explanation: 'Follow only Apache logs'
                        }
                    ],
                    details: 'Similar to tail -f, this shows new journal entries as they are written. Press Ctrl+C to exit.'
                },
                {
                    syntax: 'journalctl -x',
                    description: 'Show explanatory messages',
                    examples: [
                        {
                            code: 'journalctl -xb',
                            explanation: 'Show current boot logs with helpful explanations'
                        },
                        {
                            code: 'journalctl -xeu sshd',
                            explanation: 'Show SSH errors with explanations'
                        }
                    ],
                    details: 'Augments log messages with explanatory help text from the systemd catalog when available. Very helpful for understanding error messages.'
                }
            ],
            'grub2': [
                {
                    syntax: 'grub2-mkconfig -o /boot/grub2/grub.cfg',
                    description: 'Regenerate GRUB configuration (BIOS)',
                    examples: [
                        {
                            code: 'grub2-mkconfig -o /boot/grub2/grub.cfg',
                            explanation: 'Rebuild GRUB menu after kernel updates or changes'
                        }
                    ],
                    details: 'Scans for installed kernels and generates a new GRUB configuration. Run this after installing/removing kernels or changing /etc/default/grub. For BIOS systems only.'
                },
                {
                    syntax: 'grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg',
                    description: 'Regenerate GRUB configuration (UEFI)',
                    examples: [
                        {
                            code: 'grub2-mkconfig -o /boot/efi/EFI/redhat/grub.cfg',
                            explanation: 'Rebuild GRUB menu for UEFI systems'
                        }
                    ],
                    details: 'UEFI version of the previous command. The configuration location differs from BIOS systems. Some distributions may use /boot/grub2/grub.cfg even on UEFI (check your system).'
                },
                {
                    syntax: 'grub2-editenv list',
                    description: 'Show GRUB environment variables',
                    examples: [
                        {
                            code: 'grub2-editenv list',
                            explanation: 'Display saved GRUB variables like saved_entry'
                        }
                    ],
                    details: 'GRUB can save variables between boots in /boot/grub2/grubenv. This shows the current values. The saved_entry variable determines which menu entry boots by default.'
                },
                {
                    syntax: 'grub2-set-default INDEX',
                    description: 'Set default boot menu entry',
                    examples: [
                        {
                            code: 'grub2-set-default 0',
                            explanation: 'Set first menu entry as default'
                        },
                        {
                            code: 'grub2-set-default 1',
                            explanation: 'Set second menu entry as default'
                        }
                    ],
                    details: 'Changes which GRUB menu entry boots by default. Index starts at 0. This only works if GRUB_DEFAULT=saved in /etc/default/grub. Run grub2-mkconfig after changing /etc/default/grub.'
                }
            ],
            'boot-parameters': [
                {
                    syntax: 'systemd.unit=TARGET',
                    description: 'Override default boot target',
                    examples: [
                        {
                            code: 'systemd.unit=rescue.target',
                            explanation: 'Boot into rescue mode for this boot only'
                        },
                        {
                            code: 'systemd.unit=emergency.target',
                            explanation: 'Boot into emergency mode'
                        },
                        {
                            code: 'systemd.unit=multi-user.target',
                            explanation: 'Boot to text mode instead of GUI'
                        }
                    ],
                    details: 'Append to kernel command line in GRUB to boot to a different target. This is temporary for one boot only. Press \'e\' in GRUB menu, add to linux line, press Ctrl+x to boot.'
                },
                {
                    syntax: 'rd.break',
                    description: 'Break into emergency shell during initramfs',
                    examples: [
                        {
                            code: 'rd.break',
                            explanation: 'Stop boot before switching to real root filesystem (for password reset)'
                        }
                    ],
                    details: 'Breaks into a shell before the system pivots from initramfs to the real root filesystem. Used primarily for password recovery. Root filesystem will be mounted at /sysroot and will be read-only until remounted.'
                },
                {
                    syntax: 'systemd.debug-shell',
                    description: 'Enable early debug shell',
                    examples: [
                        {
                            code: 'systemd.debug-shell',
                            explanation: 'Start root shell on TTY9 early in boot (Ctrl+Alt+F9)'
                        }
                    ],
                    details: 'Spawns a root shell on TTY9 very early in the boot process. Access with Ctrl+Alt+F9. SECURITY WARNING: This provides unauthenticated root access. Disable when done debugging.'
                },
                {
                    syntax: 'quiet / verbose',
                    description: 'Control boot message verbosity',
                    examples: [
                        {
                            code: 'quiet',
                            explanation: 'Suppress most boot messages (default on many systems)'
                        },
                        {
                            code: '(remove quiet)',
                            explanation: 'Show detailed boot messages for troubleshooting'
                        }
                    ],
                    details: 'The quiet parameter suppresses most kernel messages during boot. Remove it to see detailed output useful for diagnosing boot problems.'
                }
            ]
        };

        // Navigation helper for next/previous buttons
        window.navigateToSection = function(sectionId) {
            const targetNav = document.querySelector(`[data-section="${sectionId}"]`);
            if (targetNav) {
                targetNav.click();
            }
        };

        // Initialize Application
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Initializing Boot Process Interactive Lesson...');
            
            try {
                initializeNavigation();
                console.log('‚úì Navigation initialized');
                
                initializeTheme();
                console.log('‚úì Theme initialized');
                
                renderBootStages();
                console.log('‚úì Boot stages rendered');
                
                renderTargets();
                console.log('‚úì Targets rendered');
                
                renderCommands();
                console.log('‚úì Commands rendered');
                
                initializeTimeline();
                console.log('‚úì Timeline initialized');
                
                loadProgress();
                console.log('‚úì Progress loaded');
                
                initializeTabs();
                console.log('‚úì Tabs initialized');
                
                console.log('Application fully loaded!');
                console.log('Click sidebar items to navigate between sections.');
            } catch (error) {
                console.error('Initialization error:', error);
            }
        });

        // Navigation
        function initializeNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            const sections = document.querySelectorAll('.content-section');
            const sectionTitle = document.getElementById('sectionTitle');
            const breadcrumb = document.getElementById('breadcrumb');

            navItems.forEach((item, index) => {
                item.addEventListener('click', function() {
                    const targetSection = this.getAttribute('data-section');
                    
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    sections.forEach(section => section.classList.remove('active'));
                    const targetElement = document.getElementById(targetSection);
                    if (targetElement) {
                        targetElement.classList.add('active');
                    }
                    
                    const titles = {
                        'boot-visualization': 'Boot Process Visualization',
                        'target-explorer': 'systemd Target Explorer',
                        'command-reference': 'Command Reference',
                        'quick-reference': 'Quick Reference'
                    };
                    
                    const moduleNumbers = {
                        'boot-visualization': 1,
                        'target-explorer': 2,
                        'command-reference': 3,
                        'quick-reference': 4
                    };
                    
                    sectionTitle.textContent = titles[targetSection];
                    breadcrumb.textContent = `Module ${moduleNumbers[targetSection]} of 4`;
                    appState.currentSection = targetSection;
                    
                    markModuleComplete(targetSection);
                    updateProgress();
                    
                    // Scroll to top of content
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });

            // Mobile sidebar toggle
            const toggleSidebar = document.getElementById('toggleSidebar');
            const sidebar = document.getElementById('sidebar');
            
            if (toggleSidebar) {
                toggleSidebar.addEventListener('click', function() {
                    sidebar.classList.toggle('mobile-open');
                });
            }
            
            // Close sidebar when clicking a nav item on mobile
            if (window.innerWidth <= 768) {
                navItems.forEach(item => {
                    item.addEventListener('click', function() {
                        sidebar.classList.remove('mobile-open');
                    });
                });
            }
        }

        // Theme Toggle
        function initializeTheme() {
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = document.getElementById('themeIcon');
            const savedTheme = localStorage.getItem('theme');
            
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                themeIcon.textContent = '‚òÄÔ∏è';
            }
            
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                const isDark = document.body.classList.contains('dark-mode');
                themeIcon.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
            });
        }

        // Boot Stages Rendering
        function renderBootStages() {
            const container = document.getElementById('bootStagesContainer');
            const stages = bootStages[appState.bootPath];
            
            container.innerHTML = stages.map((stage, index) => `
                <div class="boot-stage" data-stage="${index}">
                    <div class="stage-header">
                        <span class="stage-number">${stage.number}</span>
                        <div style="flex: 1;">
                            <div class="stage-title">${stage.title}</div>
                            <div class="stage-description">${stage.description}</div>
                        </div>
                    </div>
                    <div class="stage-details">
                        <h4 style="margin-bottom: 10px; color: var(--primary-color);">Detailed Process:</h4>
                        <ul class="detail-list">
                            ${stage.details.map(detail => `<li>${detail}</li>`).join('')}
                        </ul>
                        <div style="margin-top: 15px;">
                            <h4 style="margin-bottom: 10px; color: var(--primary-color);">Technical Details:</h4>
                            <p style="color: var(--text-secondary);">${stage.technicalDetails}</p>
                        </div>
                        ${stage.commands && stage.commands.length > 0 ? `
                            <div style="margin-top: 15px;">
                                <h4 style="margin-bottom: 10px; color: var(--primary-color);">Related Commands:</h4>
                                <div class="code-block">${stage.commands.join('\n')}</div>
                            </div>
                        ` : ''}
                    </div>
                </div>
            `).join('');
            
            // Add click handlers
            document.querySelectorAll('.boot-stage').forEach(stage => {
                stage.addEventListener('click', function() {
                    this.classList.toggle('expanded');
                });
            });
            
            // Path selector
            document.querySelectorAll('.path-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.path-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    appState.bootPath = this.getAttribute('data-path');
                    renderBootStages();
                });
            });
        }

        // Timeline Animation
        function initializeTimeline() {
            const playBtn = document.getElementById('playBootAnimation');
            const timelineSlider = document.getElementById('timelineSlider');
            const timelineProgress = document.getElementById('timelineProgress');
            const timelineThumb = document.getElementById('timelineThumb');
            
            let animationInterval;
            
            playBtn.addEventListener('click', function() {
                if (appState.animationPlaying) {
                    stopAnimation();
                } else {
                    startAnimation();
                }
            });
            
            function startAnimation() {
                appState.animationPlaying = true;
                playBtn.textContent = '‚è∏';
                
                const stages = bootStages[appState.bootPath];
                const totalStages = stages.length;
                const duration = 10000 / appState.animationSpeed; // 10 seconds total
                const intervalTime = 100;
                const progressPerInterval = (100 / (duration / intervalTime));
                
                let currentProgress = 0;
                
                animationInterval = setInterval(() => {
                    currentProgress += progressPerInterval;
                    
                    if (currentProgress >= 100) {
                        currentProgress = 100;
                        stopAnimation();
                    }
                    
                    updateTimelinePosition(currentProgress);
                    highlightCurrentStage(currentProgress, totalStages);
                }, intervalTime);
            }
            
            function stopAnimation() {
                appState.animationPlaying = false;
                playBtn.textContent = '‚ñ∂';
                clearInterval(animationInterval);
            }
            
            function updateTimelinePosition(progress) {
                timelineProgress.style.width = progress + '%';
                timelineThumb.style.left = progress + '%';
            }
            
            function highlightCurrentStage(progress, totalStages) {
                const stageIndex = Math.floor((progress / 100) * totalStages);
                const bootStageElements = document.querySelectorAll('.boot-stage');
                
                bootStageElements.forEach((stage, index) => {
                    stage.classList.remove('current', 'active');
                    if (index < stageIndex) {
                        stage.classList.add('active');
                    } else if (index === stageIndex) {
                        stage.classList.add('current');
                    }
                });
                
                appState.currentStage = stageIndex;
            }
            
            // Speed controls
            document.querySelectorAll('.speed-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.speed-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    appState.animationSpeed = parseFloat(this.getAttribute('data-speed'));
                    
                    if (appState.animationPlaying) {
                        stopAnimation();
                        startAnimation();
                    }
                });
            });
            
            // Manual timeline control
            timelineSlider.addEventListener('click', function(e) {
                const rect = this.getBoundingClientRect();
                const clickX = e.clientX - rect.left;
                const progress = (clickX / rect.width) * 100;
                
                stopAnimation();
                updateTimelinePosition(progress);
                highlightCurrentStage(progress, bootStages[appState.bootPath].length);
            });
        }

        // Target Rendering
        function renderTargets() {
            const grid = document.getElementById('targetGrid');
            
            grid.innerHTML = targets.map(target => `
                <div class="target-card" data-target="${target.name}">
                    <div class="target-icon">${target.icon}</div>
                    <div class="target-name">${target.name}</div>
                    <div class="target-description">${target.description}</div>
                    <div class="target-details">
                        <h4 style="margin-bottom: 10px; color: var(--primary-color);">Purpose:</h4>
                        <p style="color: var(--text-secondary); margin-bottom: 15px;">${target.details.typical_use}</p>
                        
                        <h4 style="margin-bottom: 10px; color: var(--primary-color);">Characteristics:</h4>
                        <ul style="padding-left: 20px; color: var(--text-secondary);">
                            ${target.details.characteristics.map(char => `<li style="margin-bottom: 5px;">${char}</li>`).join('')}
                        </ul>
                        
                        ${target.details.important ? `
                            <div class="info-box warning" style="margin-top: 15px;">
                                <div class="info-box-title">‚ö†Ô∏è Important</div>
                                <p>${target.details.important}</p>
                            </div>
                        ` : ''}
                        
                        <button class="btn btn-primary" style="margin-top: 15px; width: 100%;" onclick="showDependencies('${target.name}')">
                            View Dependencies
                        </button>
                    </div>
                </div>
            `).join('');
            
            // Add click handlers
            document.querySelectorAll('.target-card').forEach(card => {
                card.addEventListener('click', function(e) {
                    if (!e.target.classList.contains('btn')) {
                        this.classList.toggle('expanded');
                        this.classList.toggle('selected');
                    }
                });
            });
        }

        // Show Target Dependencies
        window.showDependencies = function(targetName) {
            const target = targets.find(t => t.name === targetName);
            const graph = document.getElementById('dependencyGraph');
            
            if (!target) return;
            
            let html = '<div class="graph-container">';
            
            // Current target
            html += '<div class="graph-level">';
            html += `<div class="graph-node" style="background-color: var(--primary-color); color: white; font-weight: 600;">${targetName}</div>`;
            html += '</div>';
            
            // Dependencies
            if (target.dependencies && target.dependencies.length > 0) {
                html += '<div class="graph-connector"></div>';
                html += '<div class="graph-level">';
                target.dependencies.forEach(dep => {
                    html += `<div class="graph-node">${dep}</div>`;
                });
                html += '</div>';
                
                // Sub-dependencies
                const subDeps = new Set();
                target.dependencies.forEach(depName => {
                    const depTarget = targets.find(t => t.name === depName);
                    if (depTarget && depTarget.dependencies) {
                        depTarget.dependencies.forEach(subDep => subDeps.add(subDep));
                    }
                });
                
                if (subDeps.size > 0) {
                    html += '<div class="graph-connector"></div>';
                    html += '<div class="graph-level">';
                    subDeps.forEach(subDep => {
                        html += `<div class="graph-node" style="font-size: 0.875rem;">${subDep}</div>`;
                    });
                    html += '</div>';
                }
            } else {
                html += '<p style="text-align: center; color: var(--text-secondary); margin-top: 20px;">This target has no dependencies on other targets.</p>';
            }
            
            html += '</div>';
            
            html += `
                <div class="info-box note" style="margin-top: 20px;">
                    <div class="info-box-title">üí° Understanding Dependencies</div>
                    <p>When you boot to or isolate ${targetName}, systemd automatically ensures all required dependencies are started. Dependencies form a tree structure, with more basic services at the bottom.</p>
                </div>
            `;
            
            graph.innerHTML = html;
            
            // Scroll to graph
            graph.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // Tabs
        function initializeTabs() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    const container = this.closest('.card');
                    
                    container.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    container.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
                    container.querySelector(`[data-tab-content="${tabName}"]`).classList.add('active');
                });
            });
        }

        // Command Reference
        function renderCommands() {
            const container = document.getElementById('commandList');
            const searchInput = document.getElementById('commandSearch');
            
            function render(filter = '') {
                let html = '';
                
                Object.keys(commands).forEach(category => {
                    const categoryCommands = commands[category].filter(cmd => 
                        !filter || 
                        cmd.syntax.toLowerCase().includes(filter.toLowerCase()) ||
                        cmd.description.toLowerCase().includes(filter.toLowerCase())
                    );
                    
                    if (categoryCommands.length > 0) {
                        const categoryTitles = {
                            'systemctl': 'üéØ systemctl Commands',
                            'systemd-analyze': 'üìä systemd-analyze Commands',
                            'journalctl': 'üìã journalctl Commands',
                            'grub2': 'üîß GRUB2 Commands',
                            'boot-parameters': '‚öôÔ∏è Boot Parameters'
                        };
                        
                        html += `<div class="command-category">`;
                        html += `<div class="category-title">${categoryTitles[category] || category}</div>`;
                        
                        categoryCommands.forEach((cmd, index) => {
                            html += `
                                <div class="command-item" data-category="${category}" data-index="${index}">
                                    <div class="command-syntax">${cmd.syntax}</div>
                                    <div class="command-desc">${cmd.description}</div>
                                    ${cmd.examples ? `
                                        <div class="command-examples">
                                            <div class="example-title">Examples:</div>
                                            ${cmd.examples.map(ex => `
                                                <div class="example-code">${ex.code}</div>
                                                <div class="example-explanation">${ex.explanation}</div>
                                            `).join('')}
                                            ${cmd.details ? `
                                                <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--border-color);">
                                                    <div class="example-title">Additional Details:</div>
                                                    <p style="color: var(--text-secondary); font-size: 0.875rem;">${cmd.details}</p>
                                                </div>
                                            ` : ''}
                                        </div>
                                    ` : ''}
                                </div>
                            `;
                        });
                        
                        html += `</div>`;
                    }
                });
                
                container.innerHTML = html;
                
                // Add click handlers
                document.querySelectorAll('.command-item').forEach(item => {
                    item.addEventListener('click', function() {
                        this.classList.toggle('expanded');
                    });
                });
            }
            
            render();
            
            searchInput.addEventListener('input', function() {
                render(this.value);
            });
        }

        // Progress Tracking
        function markModuleComplete(module) {
            appState.completedModules.add(module);
            saveProgress();
        }

        function updateProgress() {
            const totalModules = 4; // boot-visualization, target-explorer, command-reference, quick-reference
            const completed = appState.completedModules.size;
            const percentage = Math.round((completed / totalModules) * 100);
            
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            
            progressFill.style.width = percentage + '%';
            progressText.textContent = percentage + '% Complete';
        }

        function saveProgress() {
            localStorage.setItem('completedModules', JSON.stringify([...appState.completedModules]));
        }

        function loadProgress() {
            const saved = localStorage.getItem('completedModules');
            if (saved) {
                appState.completedModules = new Set(JSON.parse(saved));
                updateProgress();
            }
        }

        // Reset Progress
        document.getElementById('resetProgress').addEventListener('click', function() {
            if (confirm('Are you sure you want to reset all progress?')) {
                appState.completedModules.clear();
                localStorage.removeItem('completedModules');
                updateProgress();
            }
        });
    </script>
</body>
</html>
