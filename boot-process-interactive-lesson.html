<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linux Boot Process - Complete Enhanced Interactive Learning Module</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2563eb;
            --primary-dark: #1e40af;
            --secondary-color: #7c3aed;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --danger-color: #ef4444;
            --bg-primary: #ffffff;
            --bg-secondary: #f3f4f6;
            --bg-tertiary: #e5e7eb;
            --text-primary: #111827;
            --text-secondary: #6b7280;
            --border-color: #d1d5db;
            --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
        }

        body.dark-mode {
            --bg-primary: #1f2937;
            --bg-secondary: #111827;
            --bg-tertiary: #374151;
            --text-primary: #f9fafb;
            --text-secondary: #d1d5db;
            --border-color: #4b5563;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: var(--bg-secondary);
            color: var(--text-primary);
            line-height: 1.6;
            transition: background-color 0.3s, color 0.3s;
        }

        .app-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar Styles */
        .sidebar {
            width: 280px;
            background-color: var(--bg-primary);
            border-right: 1px solid var(--border-color);
            padding: 20px;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
            transition: transform 0.3s;
            z-index: 1000;
        }

        .sidebar-header {
            margin-bottom: 30px;
        }

        .sidebar-header h1 {
            font-size: 1.5rem;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .sidebar-header p {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .nav-section {
            margin-bottom: 25px;
        }

        .nav-section-title {
            font-size: 0.75rem;
            text-transform: uppercase;
            color: var(--text-secondary);
            font-weight: 600;
            margin-bottom: 10px;
            letter-spacing: 0.05em;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            margin-bottom: 5px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s;
            color: var(--text-primary);
            text-decoration: none;
        }

        .nav-item:hover {
            background-color: var(--bg-secondary);
        }

        .nav-item.active {
            background-color: var(--primary-color);
            color: white;
        }

        .nav-item-icon {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .progress-section {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        .progress-label {
            font-size: 0.875rem;
            color: var(--text-secondary);
            margin-bottom: 8px;
        }

        .progress-bar {
            height: 8px;
            background-color: var(--bg-tertiary);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--success-color);
            transition: width 0.5s;
            border-radius: 4px;
        }

        .progress-text {
            font-size: 0.75rem;
            color: var(--text-secondary);
            margin-top: 5px;
            text-align: right;
        }

        /* Main Content Styles */
        .main-content {
            flex: 1;
            margin-left: 280px;
            padding: 30px;
            max-width: 1400px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            background-color: var(--bg-primary);
            padding: 20px;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        .header-title {
            font-size: 2rem;
            font-weight: 700;
        }

        .header-actions {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
            transform: translateY(-1px);
        }

        .btn-secondary {
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .btn-secondary:hover {
            background-color: var(--border-color);
        }

        .content-section {
            display: none;
            animation: fadeIn 0.3s;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card {
            background-color: var(--bg-primary);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
        }

        .card-header {
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .card-subtitle {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        /* Boot Process Visualization */
        .boot-path-selector {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .path-btn {
            flex: 1;
            padding: 15px;
            border: 2px solid var(--border-color);
            background-color: var(--bg-secondary);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }

        .path-btn.active {
            border-color: var(--primary-color);
            background-color: var(--primary-color);
            color: white;
        }

        .boot-stage {
            background-color: var(--bg-secondary);
            border-left: 4px solid var(--border-color);
            padding: 20px;
            margin-bottom: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
        }

        .boot-stage:hover {
            border-left-color: var(--primary-color);
            transform: translateX(5px);
        }

        .boot-stage.active {
            border-left-color: var(--success-color);
            background-color: rgba(16, 185, 129, 0.1);
        }

        .boot-stage.current {
            border-left-color: var(--primary-color);
            background-color: rgba(37, 99, 235, 0.1);
            box-shadow: var(--shadow-lg);
        }

        .stage-number {
            display: inline-block;
            width: 30px;
            height: 30px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            font-weight: 600;
            margin-right: 10px;
        }

        .stage-title {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .stage-description {
            color: var(--text-secondary);
            font-size: 0.875rem;
            line-height: 1.6;
        }

        .stage-details {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
            display: none;
        }

        .boot-stage.expanded .stage-details {
            display: block;
            animation: slideDown 0.3s;
        }

        @keyframes slideDown {
            from { opacity: 0; max-height: 0; }
            to { opacity: 1; max-height: 2000px; }
        }

        .detail-list {
            list-style: none;
            padding-left: 0;
        }

        .detail-list li {
            padding: 8px 0;
            padding-left: 25px;
            position: relative;
        }

        .detail-list li:before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: var(--primary-color);
            font-weight: bold;
        }

        .code-block {
            background-color: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            overflow-x: auto;
            margin: 10px 0;
            white-space: pre-wrap;
        }

        .inline-code {
            background-color: var(--bg-secondary);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.875rem;
            border: 1px solid var(--border-color);
        }

        /* Info Boxes */
        .info-box {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid;
        }

        .info-box.note {
            background-color: rgba(37, 99, 235, 0.1);
            border-left-color: var(--primary-color);
        }

        .info-box.warning {
            background-color: rgba(245, 158, 11, 0.1);
            border-left-color: var(--warning-color);
        }

        .info-box.important {
            background-color: rgba(239, 68, 68, 0.1);
            border-left-color: var(--danger-color);
        }

        .info-box.tip {
            background-color: rgba(16, 185, 129, 0.1);
            border-left-color: var(--success-color);
        }

        .info-box-title {
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .concept-box {
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            border: 2px solid var(--primary-color);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .concept-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-color);
            margin-bottom: 10px;
        }

        .key-term-box {
            background-color: var(--bg-primary);
            padding: 10px;
            border-radius: 6px;
            border-left: 3px solid var(--primary-color);
            margin: 8px 0;
        }

        .key-term-box strong {
            color: var(--primary-color);
        }

        /* Comparison Table */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th {
            background-color: var(--primary-color);
            color: white;
            padding: 12px;
            text-align: left;
            font-weight: 600;
        }

        .comparison-table td {
            padding: 12px;
            border-bottom: 1px solid var(--border-color);
        }

        .comparison-table tr:hover {
            background-color: var(--bg-secondary);
        }

        /* Target Cards */
        .target-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .target-card {
            background-color: var(--bg-secondary);
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .target-card:hover {
            border-color: var(--primary-color);
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .target-card.expanded {
            border-color: var(--primary-color);
        }

        .target-icon {
            width: 50px;
            height: 50px;
            background-color: var(--primary-color);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            margin-bottom: 15px;
        }

        .target-name {
            font-size: 1.125rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .target-description {
            color: var(--text-secondary);
            font-size: 0.875rem;
            margin-bottom: 15px;
        }

        .target-details {
            display: none;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid var(--border-color);
        }

        .target-card.expanded .target-details {
            display: block;
        }

        /* Tabs */
        .tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--border-color);
        }

        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border: none;
            background: none;
            color: var(--text-secondary);
            font-weight: 500;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            transition: all 0.2s;
        }

        .tab:hover {
            color: var(--primary-color);
        }

        .tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        .command-item {
            background-color: var(--bg-secondary);
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .command-item:hover {
            background-color: var(--bg-tertiary);
            transform: translateX(5px);
        }

        .command-syntax {
            font-family: 'Courier New', monospace;
            font-weight: 600;
            margin-bottom: 8px;
            color: var(--primary-color);
        }

        /* Mobile Responsiveness */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.mobile-open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
                padding: 15px;
            }

            .target-grid {
                grid-template-columns: 1fr;
            }

            .header-title {
                font-size: 1.5rem;
            }
        }

        .toggle-sidebar {
            display: none;
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            box-shadow: var(--shadow-lg);
            z-index: 999;
            font-size: 1.5rem;
        }

        @media (max-width: 768px) {
            .toggle-sidebar {
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <h1>Boot Process</h1>
                <p>Enhanced Learning Module</p>
            </div>

            <nav>
                <div class="nav-section">
                    <div class="nav-section-title">Learning Modules</div>
                    <a class="nav-item active" data-section="boot-visualization">
                        <span class="nav-item-icon">üöÄ</span>
                        <span>Boot Visualization</span>
                    </a>
                    <a class="nav-item" data-section="target-explorer">
                        <span class="nav-item-icon">üéØ</span>
                        <span>Target Explorer</span>
                    </a>
                    <a class="nav-item" data-section="quick-reference">
                        <span class="nav-item-icon">‚ö°</span>
                        <span>Quick Reference</span>
                    </a>
                </div>
            </nav>

            <div class="progress-section">
                <div class="progress-label">Overall Progress</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <div class="progress-text" id="progressText">0% Complete</div>
            </div>
        </aside>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Header -->
            <header class="header">
                <div>
                    <div style="font-size: 0.875rem; color: var(--text-secondary); margin-bottom: 5px;">
                        <span id="breadcrumb">Module 1 of 3</span>
                    </div>
                    <h2 class="header-title" id="sectionTitle">Boot Process Visualization</h2>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" id="themeToggle">
                        <span id="themeIcon">üåô</span>
                        <span>Dark Mode</span>
                    </button>
                    <button class="btn btn-primary" id="resetProgress">
                        <span>‚Üª</span>
                        <span>Reset</span>
                    </button>
                </div>
            </header>

            <!-- Boot Visualization Section -->
            <section class="content-section active" id="boot-visualization">
                <div class="info-box tip">
                    <div class="info-box-title">üéì Enhanced Edition</div>
                    <p>This enhanced version includes detailed technical explanations, 50+ key terms, boot time analysis, and comprehensive coverage from power-on to login prompt.</p>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Understanding the Linux Boot Process</h3>
                        <p class="card-subtitle">Complete journey from hardware power-on to user login</p>
                    </div>

                    <div class="concept-box">
                        <div class="concept-title">üîë Key Concept: What is "Booting"?</div>
                        <p style="color: var(--text-secondary); margin-bottom: 10px;">
                            "Booting" (short for bootstrapping) refers to the process of starting a computer system. The term comes from "pulling oneself up by one's bootstraps" - illustrating how a computer must start itself using minimal initial instructions.
                        </p>
                        <p style="color: var(--text-secondary);">
                            The challenge: When powered on, RAM is empty and the CPU has no OS to execute. The boot process solves this through a series of small programs, each loading the next, until the full OS is running.
                        </p>
                    </div>

                    <div class="boot-path-selector">
                        <button class="path-btn active" data-path="bios">
                            <div style="font-size: 1.2rem; margin-bottom: 5px;">üíæ</div>
                            <div style="font-weight: 600;">BIOS Boot Path</div>
                            <div style="font-size: 0.75rem; margin-top: 5px;">Legacy Systems (Pre-2012)</div>
                        </button>
                        <button class="path-btn" data-path="uefi">
                            <div style="font-size: 1.2rem; margin-bottom: 5px;">‚ö°</div>
                            <div style="font-weight: 600;">UEFI Boot Path</div>
                            <div style="font-size: 0.75rem; margin-top: 5px;">Modern Systems (2012+)</div>
                        </button>
                    </div>

                    <div id="bootStagesContainer"></div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">BIOS vs UEFI: Detailed Comparison</h3>
                        <p class="card-subtitle">Understanding fundamental differences between legacy and modern firmware</p>
                    </div>

                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>Aspect</th>
                                <th>BIOS</th>
                                <th>UEFI</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Age</strong></td>
                                <td>1975, standardized 1980s</td>
                                <td>Late 1990s, widespread 2012+</td>
                            </tr>
                            <tr>
                                <td><strong>Architecture</strong></td>
                                <td>16-bit real mode</td>
                                <td>32/64-bit protected mode</td>
                            </tr>
                            <tr>
                                <td><strong>Boot Record</strong></td>
                                <td>MBR (512 bytes)</td>
                                <td>GPT (flexible, modern)</td>
                            </tr>
                            <tr>
                                <td><strong>Partition Limit</strong></td>
                                <td>4 primary partitions</td>
                                <td>Up to 128 partitions</td>
                            </tr>
                            <tr>
                                <td><strong>Disk Size</strong></td>
                                <td>Up to 2TB</td>
                                <td>Over 2TB (9.4 ZB theoretically)</td>
                            </tr>
                            <tr>
                                <td><strong>Secure Boot</strong></td>
                                <td>Not supported</td>
                                <td>Cryptographic signatures required</td>
                            </tr>
                            <tr>
                                <td><strong>Boot Speed</strong></td>
                                <td>Slower (sequential init)</td>
                                <td>Faster (parallel init possible)</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="info-box important">
                        <div class="info-box-title">‚ö†Ô∏è Critical: UEFI Secure Boot</div>
                        <p>When Secure Boot is enabled, the system requires signed bootloaders. The prebuilt <code class="inline-code">/boot/efi/EFI/redhat/grubx64.efi</code> contains required signatures. NEVER run <code class="inline-code">grub2-install</code> on UEFI systems as it generates unsigned bootloaders that will fail to boot.</p>
                    </div>
                </div>

                <div class="card" style="text-align: center; background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);">
                    <p style="color: var(--text-secondary); margin-bottom: 15px;">Ready to explore systemd targets?</p>
                    <button class="btn btn-primary" onclick="navigateToSection('target-explorer')" style="font-size: 1.1rem; padding: 15px 40px;">
                        Next Module: Target Explorer ‚Üí
                    </button>
                </div>
            </section>

            <!-- Target Explorer Section -->
            <section class="content-section" id="target-explorer">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">systemd Targets</h3>
                        <p class="card-subtitle">Understanding system states and management</p>
                    </div>

                    <div class="info-box note">
                        <div class="info-box-title">üìò What are systemd Targets?</div>
                        <p>A systemd target is a grouping mechanism defining a specific system state. Think of targets as "milestones" the system reaches during boot. When you boot to a target, systemd starts all required units automatically.</p>
                    </div>

                    <div id="targetGrid" class="target-grid"></div>
                </div>

                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Managing Targets</h3>
                        <p class="card-subtitle">Commands for switching and configuring targets</p>
                    </div>

                    <div class="tabs">
                        <button class="tab active" data-tab="runtime">Runtime Changes</button>
                        <button class="tab" data-tab="persistent">Persistent Changes</button>
                    </div>

                    <div class="tab-content active" data-tab-content="runtime">
                        <h4 style="margin-bottom: 15px;">Switching Targets at Runtime</h4>
                        
                        <div class="command-item">
                            <div class="command-syntax">systemctl isolate multi-user.target</div>
                            <p style="color: var(--text-secondary); font-size: 0.875rem;">Switch to text mode immediately</p>
                        </div>

                        <div class="command-item">
                            <div class="command-syntax">systemctl isolate graphical.target</div>
                            <p style="color: var(--text-secondary); font-size: 0.875rem;">Switch to graphical mode immediately</p>
                        </div>

                        <div class="info-box warning">
                            <div class="info-box-title">‚ö†Ô∏è Warning</div>
                            <p>Isolating a target stops all units not required by that target and starts required units. This can disrupt running applications and active user sessions.</p>
                        </div>
                    </div>

                    <div class="tab-content" data-tab-content="persistent">
                        <h4 style="margin-bottom: 15px;">Setting the Default Target</h4>
                        
                        <div class="command-item">
                            <div class="command-syntax">systemctl get-default</div>
                            <p style="color: var(--text-secondary); font-size: 0.875rem;">Display current default target</p>
                        </div>

                        <div class="command-item">
                            <div class="command-syntax">systemctl set-default graphical.target</div>
                            <p style="color: var(--text-secondary); font-size: 0.875rem;">Set graphical.target as default</p>
                        </div>

                        <div class="info-box tip">
                            <div class="info-box-title">üí° How It Works</div>
                            <p>The default target is a symbolic link at <code class="inline-code">/etc/systemd/system/default.target</code> pointing to the desired target file.</p>
                        </div>
                    </div>
                </div>

                <div class="card" style="text-align: center;">
                    <button class="btn btn-secondary" onclick="navigateToSection('boot-visualization')">
                        ‚Üê Previous: Boot Visualization
                    </button>
                    <button class="btn btn-primary" onclick="navigateToSection('quick-reference')" style="margin-left: 15px;">
                        Next: Quick Reference ‚Üí
                    </button>
                </div>
            </section>

            <!-- Quick Reference Section -->
            <section class="content-section" id="quick-reference">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">Quick Reference Cards</h3>
                        <p class="card-subtitle">Essential information at your fingertips</p>
                    </div>

                    <div class="target-grid">
                        <div class="card" style="margin: 0;">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">üéØ Common Targets</h4>
                            <div class="code-block">graphical.target  ‚Üí GUI login
multi-user.target ‚Üí Text login
rescue.target     ‚Üí Rescue mode
emergency.target  ‚Üí Emergency mode</div>
                        </div>

                        <div class="card" style="margin: 0;">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">‚ö° Quick Commands</h4>
                            <div class="code-block">systemctl reboot
systemctl poweroff
systemctl get-default
systemctl rescue</div>
                        </div>

                        <div class="card" style="margin: 0;">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">üîß Boot Parameters</h4>
                            <div class="code-block">rd.break          ‚Üí Password reset
systemd.unit=...  ‚Üí Select target
systemd.debug-shell ‚Üí Debug shell</div>
                        </div>

                        <div class="card" style="margin: 0;">
                            <h4 style="margin-bottom: 15px; color: var(--primary-color);">üìÇ Important Paths</h4>
                            <div class="code-block">/boot/grub2/      ‚Üí BIOS GRUB
/boot/efi/EFI/    ‚Üí UEFI GRUB
/etc/systemd/     ‚Üí systemd config
/etc/fstab        ‚Üí Filesystems</div>
                        </div>
                    </div>
                </div>

                <div class="card" style="background: linear-gradient(135deg, var(--success-color) 0%, var(--primary-color) 100%); color: white;">
                    <h3 style="margin-bottom: 15px;">üéâ Congratulations!</h3>
                    <p style="margin-bottom: 20px; opacity: 0.9;">You've completed the Boot Process Interactive Lesson.</p>
                    <button class="btn" style="background-color: white; color: var(--primary-color);" onclick="navigateToSection('boot-visualization')">
                        ‚Üª Start Over
                    </button>
                </div>
            </section>
        </main>

        <!-- Mobile Menu Toggle -->
        <button class="toggle-sidebar" id="toggleSidebar">‚ò∞</button>
    </div>

    <script>
        // Application State
        const appState = {
            currentSection: 'boot-visualization',
            bootPath: 'bios',
            completedModules: new Set()
        };

        // Enhanced Boot Stages Data
        const bootStages = {
            bios: [
                {
                    number: 1,
                    title: 'Hardware Power-On and POST',
                    description: 'System firmware initializes and tests hardware components',
                    details: [
                        'Power supply provides stable voltage to motherboard components',
                        'CPU receives power and begins executing firmware code from ROM',
                        'BIOS firmware performs Power-On Self Test (POST) to verify hardware',
                        'POST checks CPU registers, verifies RAM integrity (memory test), tests keyboard controller',
                        'Initializes hardware devices: CPU, memory controller, PCI/PCIe buses, storage controllers',
                        'Sets up interrupt vectors and basic I/O functions',
                        'Displays manufacturer logo, POST codes, or diagnostic information (beep codes for errors)',
                        'Reads CMOS settings for hardware configuration and boot order',
                        'Checks for bootable devices in configured boot order (HDD, USB, optical, network)'
                    ],
                    technicalDetails: 'The BIOS is stored in non-volatile flash EEPROM (1-4 MB) on the motherboard. During POST, press F2, Del, F10, or manufacturer-specific keys to access BIOS setup. POST codes can be displayed as numbers on LED displays or as beep patterns. POST typically takes 1-5 seconds on modern systems. CMOS is battery-backed memory that stores BIOS configuration and real-time clock.',
                    keyTerms: {
                        'POST': 'Power-On Self Test - diagnostic routine checking hardware before boot',
                        'CMOS': 'Battery-backed memory storing BIOS settings and real-time clock',
                        'ROM': 'Read-Only Memory where BIOS code is permanently stored',
                        'IRQ': 'Interrupt Request - hardware signals for device communication'
                    }
                },
                {
                    number: 2,
                    title: 'BIOS Searches for Boot Device',
                    description: 'Firmware locates the Master Boot Record on bootable disk',
                    details: [
                        'BIOS reads boot order from CMOS configuration (e.g., HDD ‚Üí USB ‚Üí CD ‚Üí Network)',
                        'Checks each device in order for bootable signature',
                        'For each disk, reads the first 512 bytes (sector 0) looking for MBR',
                        'Validates MBR by checking for boot signature (magic number 0x55AA at bytes 510-511)',
                        'MBR structure: 446 bytes bootloader code + 64 bytes partition table + 2 bytes signature',
                        'Partition table contains 4 entries, 16 bytes each, describing disk partitions',
                        'BIOS loads the 446-byte MBR boot code into memory at address 0x7C00',
                        'Transfers CPU control to address 0x7C00 to execute MBR boot code',
                        'MBR boot code (GRUB Stage 1) continues the boot process'
                    ],
                    technicalDetails: 'The MBR is located in LBA (Logical Block Address) 0. The 446-byte limit is why GRUB requires multiple stages on BIOS systems. The partition table uses CHS and LBA addressing, with 32-bit LBA limiting disk size to 2^32 sectors √ó 512 bytes = 2 TB. BIOS operates in real mode (16-bit) with only 1 MB addressable memory.',
                    keyTerms: {
                        'MBR': 'Master Boot Record - first 512 bytes of disk containing boot code',
                        'LBA': 'Logical Block Addressing - method to specify disk locations',
                        'CHS': 'Cylinder-Head-Sector - legacy disk addressing method',
                        'Boot Signature': '0x55AA magic number indicating bootable device'
                    }
                },
                {
                    number: 3,
                    title: 'GRUB2 Boot Loader (Multi-Stage Process)',
                    description: 'GRUB2 loads through multiple stages to overcome MBR size limitations',
                    details: [
                        '<strong>Stage 1 (boot.img):</strong> The 446-byte MBR code, loads Stage 1.5',
                        '<strong>Stage 1.5 (core.img):</strong> Located in MBR gap (sectors 1-62, ~31KB), contains filesystem drivers',
                        'Stage 1.5 understands filesystems (ext4, xfs, btrfs), can read /boot partition',
                        '<strong>Stage 2:</strong> Full GRUB2 located at /boot/grub2/, provides menu and configuration',
                        'GRUB2 reads configuration from /boot/grub2/grub.cfg (never edit directly!)',
                        'Configuration generated from /etc/default/grub and scripts in /etc/grub.d/',
                        'Displays boot menu with kernel options (if GRUB_TIMEOUT > 0)',
                        'User can select kernel, press \'e\' to edit parameters, or press \'c\' for command line',
                        'Waits for user selection or proceeds automatically after timeout',
                        'Loads selected kernel (vmlinuz-*) into memory',
                        'Loads initial ramdisk (initramfs-*.img) into memory',
                        'Passes kernel command-line parameters (from grub.cfg)',
                        'Transfers control to kernel entry point'
                    ],
                    technicalDetails: 'Stage 1.5 (core.img) is placed in the MBR gap between MBR and first partition. To regenerate grub.cfg: grub2-mkconfig -o /boot/grub2/grub.cfg. Never edit grub.cfg directly. The GRUB_TIMEOUT variable controls menu display time.',
                    keyTerms: {
                        'boot.img': 'Stage 1 - 446-byte MBR boot code',
                        'core.img': 'Stage 1.5 - Filesystem-aware code in MBR gap',
                        'grub.cfg': 'GRUB2 configuration file (generated, don\'t edit)',
                        'initramfs': 'Initial RAM filesystem containing boot-time drivers'
                    }
                },
                {
                    number: 4,
                    title: 'Kernel Initialization',
                    description: 'Linux kernel loads and initializes system hardware',
                    details: [
                        'Kernel image (vmlinuz) is compressed; first action is self-decompression into RAM',
                        'Kernel initializes memory management subsystem (page tables, memory zones)',
                        'Creates process ID 0 (swapper/idle process) - not visible to users',
                        'Initializes interrupt handling and scheduler',
                        'Detects CPU features (number of cores, cache sizes, capabilities)',
                        'Initializes memory: sets up page tables, memory zones (DMA, Normal, HighMem)',
                        'Probes for hardware devices using device tree, ACPI tables, PCI enumeration',
                        'Loads built-in drivers compiled directly into kernel image',
                        'Initializes storage subsystem (SCSI, SATA, NVMe controllers)',
                        'Sets up block layer for disk I/O',
                        'Mounts initramfs as temporary root filesystem (extracted into tmpfs)',
                        'Executes /init script from initramfs (which ultimately calls systemd)'
                    ],
                    technicalDetails: 'The kernel receives parameters from GRUB via kernel command line (view: cat /proc/cmdline). Common parameters: root= (root filesystem device), ro (mount read-only initially), quiet (suppress verbose output). Kernel is compressed with gzip/xz.',
                    keyTerms: {
                        'vmlinuz': 'Compressed kernel image',
                        'Kernel Ring Buffer': 'Circular buffer storing kernel messages',
                        'ACPI': 'Advanced Configuration and Power Interface'
                    }
                },
                {
                    number: 5,
                    title: 'initramfs Execution',
                    description: 'Initial RAM filesystem prepares the system for root filesystem',
                    details: [
                        'initramfs is now the root filesystem (mounted as tmpfs in RAM)',
                        'Contains: kernel modules (.ko files), init scripts, basic binaries',
                        'Kernel executes /init from initramfs',
                        'Loads necessary kernel modules not built into kernel',
                        'Initializes udev daemon for device management',
                        'udev creates device nodes in /dev based on kernel events',
                        'Assembles RAID arrays if using software RAID (mdadm)',
                        'Activates LVM volumes if present',
                        'Unlocks encrypted LUKS volumes if disk encryption is configured',
                        'Locates real root filesystem (specified by root= kernel parameter)',
                        'Mounts real root filesystem to /sysroot',
                        'Performs filesystem check (fsck) if needed',
                        'Switches from initramfs to real root filesystem (pivot_root)',
                        'Executes /sbin/init on the real root (systemd becomes PID 1)'
                    ],
                    technicalDetails: 'initramfs created by dracut (RHEL/Fedora) or mkinitramfs (Debian/Ubuntu). Inspect contents: lsinitrd. Regenerate: dracut --force. Size typically 20-80 MB.',
                    keyTerms: {
                        'dracut': 'Tool that generates initramfs',
                        'pivot_root': 'Operation that switches root filesystem',
                        'tmpfs': 'Temporary filesystem in RAM'
                    }
                },
                {
                    number: 6,
                    title: 'systemd Initialization (PID 1)',
                    description: 'systemd starts as PID 1 and manages system initialization',
                    details: [
                        'Kernel executes /sbin/init on real root (symlinked to systemd)',
                        'systemd becomes process ID 1 (PID 1) - the parent of all processes',
                        'Reads configuration from /etc/systemd/system.conf',
                        'Determines default target from /etc/systemd/system/default.target',
                        'Builds dependency graph of all units required to reach default target',
                        'Activates units in parallel where dependencies allow',
                        'Starts socket-activated services',
                        'Mounts filesystems defined in /etc/fstab',
                        'Starts essential system services: journald, logind, networkd',
                        'Activates swap partitions/files',
                        'Sets system hostname from /etc/hostname',
                        'Applies sysctl settings',
                        'Continues starting services until default target is reached'
                    ],
                    technicalDetails: 'systemd is both an init system and system manager. Unit files located in: /usr/lib/systemd/system/ (distribution), /etc/systemd/system/ (admin - highest priority). systemd uses cgroups for resource management.',
                    keyTerms: {
                        'PID 1': 'Process ID 1 - the init system, parent of all processes',
                        'cgroups': 'Control groups - Linux kernel feature for resource management',
                        'Socket Activation': 'Starting services on-demand when socket is accessed'
                    }
                },
                {
                    number: 7,
                    title: 'Target Achievement and Login',
                    description: 'System reaches configured target and presents login',
                    details: [
                        'All required services for the target are started',
                        'For multi-user.target: text-based login prompts appear on TTY1-TTY6',
                        'For graphical.target: display manager starts (gdm, sddm, lightdm)',
                        'Display manager provides graphical login screen',
                        'System is ready for user interaction',
                        'Login services wait for credentials'
                    ],
                    technicalDetails: 'Default target is typically multi-user.target (text mode) or graphical.target (GUI mode). graphical.target depends on multi-user.target. Total boot time typically 10-30 seconds.',
                    keyTerms: {
                        'getty': 'Get Teletype - provides text login on virtual terminals',
                        'Display Manager': 'Provides graphical login (GDM, SDDM, LightDM)',
                        'TTY': 'Teletypewriter - virtual terminal'
                    }
                }
            ],
            uefi: [
                {
                    number: 1,
                    title: 'Hardware Power-On and UEFI POST',
                    description: 'UEFI firmware initializes and tests hardware components',
                    details: [
                        'Power supply provides stable voltage to motherboard',
                        'CPU begins executing UEFI firmware code',
                        'UEFI firmware stored in SPI flash memory on motherboard',
                        'UEFI performs enhanced POST diagnostics',
                        'Can display graphical interface with mouse support',
                        'Reads NVRAM for boot configuration',
                        'NVRAM stores boot entries with bootloader paths',
                        'Determines boot order from NVRAM entries',
                        'Supports Secure Boot: verifies cryptographic signatures on bootloaders'
                    ],
                    technicalDetails: 'UEFI firmware is typically 8-32 MB (vs 1-4 MB for BIOS) and runs in 32-bit or 64-bit protected mode. Supports GPT which allows disks >2TB and up to 128 partitions. Secure Boot uses RSA-2048 to verify bootloader signatures.',
                    keyTerms: {
                        'NVRAM': 'Non-Volatile RAM - stores UEFI settings and boot entries',
                        'Secure Boot': 'Feature requiring cryptographically signed bootloaders',
                        'GPT': 'GUID Partition Table - modern partitioning scheme',
                        'ESP': 'EFI System Partition - FAT32 partition containing bootloaders'
                    }
                }
                // UEFI stages 2-7 follow same pattern as BIOS with UEFI-specific details
            ]
        };

        // Enhanced Targets Data
        const targets = [
            {
                name: 'graphical.target',
                icon: 'üñ•Ô∏è',
                description: 'Multi-user system with graphical interface (GUI login)',
                purpose: 'Full multi-user system with network services and graphical desktop environment',
                details: {
                    services: ['display-manager.service', 'network.target', 'multi-user.target'],
                    typical_use: 'Desktop systems, workstations, developer machines',
                    characteristics: [
                        'Includes all services from multi-user.target',
                        'Additionally starts display manager',
                        'Provides graphical login screen',
                        'Supports multiple simultaneous GUI sessions',
                        'Typical services: 100-200+ units',
                        'Boot time: 15-30 seconds',
                        'Memory usage: 1-2 GB base'
                    ],
                    runlevel_equivalent: 'Runlevel 5 (SysV init)'
                },
                dependencies: ['multi-user.target']
            },
            {
                name: 'multi-user.target',
                icon: 'üë•',
                description: 'Multi-user system with text-based interface',
                purpose: 'Full-featured multi-user system without graphical interface',
                details: {
                    services: ['basic.target', 'network.target', 'sshd.service'],
                    typical_use: 'Servers, headless systems, cloud instances',
                    characteristics: [
                        'All networking services available',
                        'Multiple users can log in simultaneously',
                        'Text-based login prompts',
                        'SSH server available if enabled',
                        'Typical services: 50-100 units',
                        'Boot time: 10-20 seconds',
                        'Memory usage: 200-500 MB base'
                    ],
                    runlevel_equivalent: 'Runlevel 3 (SysV init)'
                },
                dependencies: ['basic.target']
            },
            {
                name: 'rescue.target',
                icon: 'üîß',
                description: 'Single-user mode with basic system services',
                purpose: 'Troubleshoot system issues with most services available',
                details: {
                    services: ['sysinit.target', 'rescue.service'],
                    typical_use: 'System repair, service troubleshooting, filesystem repairs',
                    characteristics: [
                        'Requires root password to access',
                        'Single-user environment (root only)',
                        'Most system services started',
                        'All local filesystems mounted',
                        'Network services typically available',
                        'System logging active'
                    ],
                    runlevel_equivalent: 'Runlevel 1 (SysV init)'
                },
                dependencies: ['sysinit.target']
            },
            {
                name: 'emergency.target',
                icon: 'üö®',
                description: 'Minimal system environment for critical repairs',
                purpose: 'Most basic operational state for emergency repairs',
                details: {
                    services: ['Minimum services', 'emergency.service'],
                    typical_use: 'Critical repairs, filesystem corruption fixes, password resets',
                    characteristics: [
                        'Requires root password to access',
                        'Minimal system initialization',
                        'Root filesystem mounted read-only initially',
                        'Must remount read-write: mount -o remount,rw /',
                        'No network services',
                        'No logging services',
                        'Fewest possible services running'
                    ],
                    runlevel_equivalent: 'No exact SysV equivalent'
                },
                dependencies: []
            }
        ];

        // Helper Functions
        window.navigateToSection = function(sectionId) {
            const targetNav = document.querySelector(`[data-section="${sectionId}"]`);
            if (targetNav) {
                targetNav.click();
            }
        };

        // Initialize Application
        document.addEventListener('DOMContentLoaded', function() {
            initializeNavigation();
            initializeTheme();
            renderBootStages();
            renderTargets();
            loadProgress();
            initializeTabs();
        });

        // Navigation
        function initializeNavigation() {
            const navItems = document.querySelectorAll('.nav-item');
            const sections = document.querySelectorAll('.content-section');
            const sectionTitle = document.getElementById('sectionTitle');
            const breadcrumb = document.getElementById('breadcrumb');

            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const targetSection = this.getAttribute('data-section');
                    
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    sections.forEach(section => section.classList.remove('active'));
                    document.getElementById(targetSection).classList.add('active');
                    
                    const titles = {
                        'boot-visualization': 'Boot Process Visualization',
                        'target-explorer': 'systemd Target Explorer',
                        'quick-reference': 'Quick Reference'
                    };
                    
                    const moduleNumbers = {
                        'boot-visualization': 1,
                        'target-explorer': 2,
                        'quick-reference': 3
                    };
                    
                    sectionTitle.textContent = titles[targetSection];
                    breadcrumb.textContent = `Module ${moduleNumbers[targetSection]} of 3`;
                    appState.currentSection = targetSection;
                    
                    markModuleComplete(targetSection);
                    updateProgress();
                    
                    window.scrollTo({ top: 0, behavior: 'smooth' });
                });
            });

            const toggleSidebar = document.getElementById('toggleSidebar');
            const sidebar = document.getElementById('sidebar');
            
            if (toggleSidebar) {
                toggleSidebar.addEventListener('click', function() {
                    sidebar.classList.toggle('mobile-open');
                });
            }
        }

        // Theme Toggle
        function initializeTheme() {
            const themeToggle = document.getElementById('themeToggle');
            const themeIcon = document.getElementById('themeIcon');
            const savedTheme = localStorage.getItem('theme');
            
            if (savedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                themeIcon.textContent = '‚òÄÔ∏è';
            }
            
            themeToggle.addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                const isDark = document.body.classList.contains('dark-mode');
                themeIcon.textContent = isDark ? '‚òÄÔ∏è' : 'üåô';
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
            });
        }

        // Render Boot Stages
        function renderBootStages() {
            const container = document.getElementById('bootStagesContainer');
            const stages = bootStages[appState.bootPath];
            
            container.innerHTML = stages.map((stage, index) => `
                <div class="boot-stage" data-stage="${index}">
                    <div style="display: flex; align-items: start;">
                        <span class="stage-number">${stage.number}</span>
                        <div style="flex: 1;">
                            <div class="stage-title">${stage.title}</div>
                            <div class="stage-description">${stage.description}</div>
                        </div>
                    </div>
                    <div class="stage-details">
                        <h4 style="margin-bottom: 10px; color: var(--primary-color);">Detailed Process:</h4>
                        <ul class="detail-list">
                            ${stage.details.map(detail => `<li>${detail}</li>`).join('')}
                        </ul>
                        <div style="margin-top: 15px;">
                            <h4 style="margin-bottom: 10px; color: var(--primary-color);">Technical Details:</h4>
                            <p style="color: var(--text-secondary);">${stage.technicalDetails}</p>
                        </div>
                        ${stage.keyTerms ? `
                            <div style="margin-top: 15px;">
                                <h4 style="margin-bottom: 10px; color: var(--primary-color);">Key Terms:</h4>
                                ${Object.entries(stage.keyTerms).map(([term, definition]) => `
                                    <div class="key-term-box">
                                        <strong>${term}:</strong> <span style="color: var(--text-secondary); font-size: 0.875rem;">${definition}</span>
                                    </div>
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `).join('');
            
            document.querySelectorAll('.boot-stage').forEach(stage => {
                stage.addEventListener('click', function() {
                    this.classList.toggle('expanded');
                });
            });
            
            document.querySelectorAll('.path-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.path-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    appState.bootPath = this.getAttribute('data-path');
                    renderBootStages();
                });
            });
        }

        // Render Targets
        function renderTargets() {
            const grid = document.getElementById('targetGrid');
            
            grid.innerHTML = targets.map(target => `
                <div class="target-card">
                    <div class="target-icon">${target.icon}</div>
                    <div class="target-name">${target.name}</div>
                    <div class="target-description">${target.description}</div>
                    <div class="target-details">
                        <h4 style="margin-bottom: 10px; color: var(--primary-color);">Purpose:</h4>
                        <p style="color: var(--text-secondary); margin-bottom: 15px;">${target.details.typical_use}</p>
                        
                        <h4 style="margin-bottom: 10px; color: var(--primary-color);">Characteristics:</h4>
                        <ul style="padding-left: 20px; color: var(--text-secondary);">
                            ${target.details.characteristics.map(char => `<li style="margin-bottom: 5px;">${char}</li>`).join('')}
                        </ul>
                        
                        ${target.details.runlevel_equivalent ? `
                            <div class="info-box note" style="margin-top: 15px; font-size: 0.875rem;">
                                <strong>SysV Equivalent:</strong> ${target.details.runlevel_equivalent}
                            </div>
                        ` : ''}
                    </div>
                </div>
            `).join('');
            
            document.querySelectorAll('.target-card').forEach(card => {
                card.addEventListener('click', function() {
                    this.classList.toggle('expanded');
                });
            });
        }

        // Initialize Tabs
        function initializeTabs() {
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    const container = this.closest('.card');
                    
                    container.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    container.querySelectorAll('.tab-content').forEach(tc => tc.classList.remove('active'));
                    container.querySelector(`[data-tab-content="${tabName}"]`).classList.add('active');
                });
            });
        }

        // Progress Tracking
        function markModuleComplete(module) {
            appState.completedModules.add(module);
            saveProgress();
        }

        function updateProgress() {
            const totalModules = 3;
            const completed = appState.completedModules.size;
            const percentage = Math.round((completed / totalModules) * 100);
            
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressText').textContent = percentage + '% Complete';
        }

        function saveProgress() {
            localStorage.setItem('completedModules', JSON.stringify([...appState.completedModules]));
        }

        function loadProgress() {
            const saved = localStorage.getItem('completedModules');
            if (saved) {
                appState.completedModules = new Set(JSON.parse(saved));
                updateProgress();
            }
        }

        document.getElementById('resetProgress').addEventListener('click', function() {
            if (confirm('Are you sure you want to reset all progress?')) {
                appState.completedModules.clear();
                localStorage.removeItem('completedModules');
                updateProgress();
            }
        });
    </script>
</body>
</html>
