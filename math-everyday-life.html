<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Math in Everyday Life ‚Äî Interactive Explorer</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700;800;900&family=Source+Sans+3:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
<style>
:root {
  --bg-primary: #0d1117;
  --bg-secondary: #161b22;
  --bg-card: #1c2230;
  --bg-card-hover: #222938;
  --accent-warm: #e8a838;
  --accent-warm-glow: rgba(232,168,56,0.15);
  --accent-cool: #58a6ff;
  --accent-cool-glow: rgba(88,166,255,0.12);
  --accent-green: #3fb950;
  --accent-red: #f85149;
  --accent-purple: #bc8cff;
  --accent-pink: #f778ba;
  --text-primary: #e6edf3;
  --text-secondary: #8b949e;
  --text-muted: #6e7681;
  --border: rgba(255,255,255,0.06);
  --border-accent: rgba(232,168,56,0.25);
  --radius: 16px;
  --radius-sm: 10px;
  --shadow: 0 8px 32px rgba(0,0,0,0.3);
  --shadow-glow: 0 0 40px rgba(232,168,56,0.08);
}

* { margin: 0; padding: 0; box-sizing: border-box; }

html {
  scroll-behavior: smooth;
  scrollbar-width: thin;
  scrollbar-color: var(--accent-warm) var(--bg-secondary);
}

body {
  font-family: 'Source Sans 3', sans-serif;
  background: var(--bg-primary);
  color: var(--text-primary);
  line-height: 1.7;
  overflow-x: hidden;
}

/* ========== HERO ========== */
.hero {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  position: relative;
  padding: 2rem;
  overflow: hidden;
}

.hero::before {
  content: '';
  position: absolute;
  inset: 0;
  background:
    radial-gradient(ellipse 60% 50% at 50% 0%, rgba(232,168,56,0.08) 0%, transparent 70%),
    radial-gradient(ellipse 40% 40% at 80% 80%, rgba(88,166,255,0.06) 0%, transparent 60%),
    radial-gradient(ellipse 30% 30% at 10% 70%, rgba(188,140,255,0.05) 0%, transparent 50%);
  pointer-events: none;
}

.hero-grid {
  position: absolute;
  inset: 0;
  background-image:
    linear-gradient(rgba(255,255,255,0.015) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,0.015) 1px, transparent 1px);
  background-size: 60px 60px;
  mask-image: radial-gradient(ellipse 70% 60% at 50% 50%, black, transparent);
  pointer-events: none;
}

.floating-symbols {
  position: absolute;
  inset: 0;
  pointer-events: none;
  overflow: hidden;
}

.floating-symbols span {
  position: absolute;
  font-family: 'JetBrains Mono', monospace;
  color: rgba(232,168,56,0.07);
  font-size: 2rem;
  animation: floatSymbol 20s linear infinite;
}

@keyframes floatSymbol {
  0% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
  10% { opacity: 1; }
  90% { opacity: 1; }
  100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
}

.hero-content {
  position: relative;
  z-index: 2;
  max-width: 800px;
}

.hero-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background: var(--accent-warm-glow);
  border: 1px solid var(--border-accent);
  color: var(--accent-warm);
  padding: 0.5rem 1.2rem;
  border-radius: 100px;
  font-size: 0.85rem;
  font-weight: 600;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  margin-bottom: 2rem;
  animation: fadeInDown 0.8s ease;
}

.hero h1 {
  font-family: 'Playfair Display', serif;
  font-size: clamp(2.8rem, 7vw, 5.5rem);
  font-weight: 800;
  line-height: 1.08;
  margin-bottom: 1.5rem;
  letter-spacing: -0.02em;
  animation: fadeInUp 1s ease;
}

.hero h1 .accent { color: var(--accent-warm); }
.hero h1 .cool { color: var(--accent-cool); }

.hero-sub {
  font-size: 1.2rem;
  color: var(--text-secondary);
  max-width: 550px;
  margin: 0 auto 2.5rem;
  font-weight: 300;
  animation: fadeInUp 1s ease 0.2s both;
}

.hero-cta {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1rem;
  animation: fadeInUp 1s ease 0.4s both;
}

.btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.85rem 2rem;
  border-radius: 100px;
  font-size: 1rem;
  font-weight: 600;
  text-decoration: none;
  cursor: pointer;
  border: none;
  transition: all 0.3s ease;
  font-family: inherit;
}

.btn-primary {
  background: var(--accent-warm);
  color: var(--bg-primary);
}

.btn-primary:hover {
  background: #f0b84a;
  box-shadow: 0 4px 20px rgba(232,168,56,0.35);
  transform: translateY(-2px);
}

.btn-secondary {
  background: var(--bg-card);
  color: var(--text-primary);
  border: 1px solid var(--border);
}

.btn-secondary:hover {
  background: var(--bg-card-hover);
  border-color: var(--accent-cool);
}

.scroll-hint {
  position: absolute;
  bottom: 2rem;
  left: 50%;
  transform: translateX(-50%);
  animation: bounce 2s ease infinite;
  color: var(--text-muted);
  font-size: 1.5rem;
}

@keyframes bounce {
  0%, 100% { transform: translateX(-50%) translateY(0); }
  50% { transform: translateX(-50%) translateY(8px); }
}

@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(30px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes fadeInDown {
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ========== NAVIGATION ========== */
.nav-bar {
  position: sticky;
  top: 0;
  z-index: 100;
  background: rgba(13,17,23,0.85);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
  padding: 0;
  overflow-x: auto;
  scrollbar-width: none;
}

.nav-bar::-webkit-scrollbar { display: none; }

.nav-inner {
  display: flex;
  align-items: center;
  gap: 0;
  max-width: 1200px;
  margin: 0 auto;
  min-width: max-content;
}

.nav-link {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem 1.3rem;
  color: var(--text-secondary);
  text-decoration: none;
  font-size: 0.9rem;
  font-weight: 500;
  white-space: nowrap;
  border-bottom: 2px solid transparent;
  transition: all 0.3s ease;
  cursor: pointer;
}

.nav-link:hover, .nav-link.active {
  color: var(--accent-warm);
  border-bottom-color: var(--accent-warm);
}

.nav-link .nav-icon { font-size: 1.1rem; }

/* ========== SECTIONS ========== */
.section {
  max-width: 1100px;
  margin: 0 auto;
  padding: 5rem 1.5rem;
}

.section-header {
  margin-bottom: 3rem;
}

.section-label {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.78rem;
  font-weight: 600;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: var(--accent-warm);
  margin-bottom: 0.75rem;
}

.section-title {
  font-family: 'Playfair Display', serif;
  font-size: clamp(2rem, 4vw, 3rem);
  font-weight: 700;
  line-height: 1.15;
  margin-bottom: 1rem;
}

.section-desc {
  font-size: 1.1rem;
  color: var(--text-secondary);
  max-width: 650px;
  font-weight: 300;
}

/* ========== CARD GRID ========== */
.card-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 1.5rem;
  margin-top: 2rem;
}

.card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 2rem;
  transition: all 0.35s ease;
  position: relative;
  overflow: hidden;
}

.card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--accent-warm), var(--accent-cool));
  opacity: 0;
  transition: opacity 0.3s ease;
}

.card:hover {
  border-color: var(--border-accent);
  transform: translateY(-4px);
  box-shadow: var(--shadow), var(--shadow-glow);
}

.card:hover::before { opacity: 1; }

.card-icon {
  font-size: 2.2rem;
  margin-bottom: 1rem;
  display: block;
}

.card h3 {
  font-family: 'Playfair Display', serif;
  font-size: 1.3rem;
  font-weight: 700;
  margin-bottom: 0.75rem;
}

.card p {
  color: var(--text-secondary);
  font-size: 0.95rem;
  line-height: 1.7;
}

.card ul {
  list-style: none;
  margin-top: 1rem;
}

.card ul li {
  padding: 0.3rem 0;
  color: var(--text-secondary);
  font-size: 0.9rem;
  display: flex;
  align-items: flex-start;
  gap: 0.5rem;
}

.card ul li::before {
  content: '‚Üí';
  color: var(--accent-warm);
  flex-shrink: 0;
}

/* ========== INTERACTIVE TOOLS ========== */
.tool-container {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
  margin-top: 2rem;
}

.tool-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.5rem 2rem;
  border-bottom: 1px solid var(--border);
  gap: 1rem;
  flex-wrap: wrap;
}

.tool-title {
  font-family: 'Playfair Display', serif;
  font-size: 1.4rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  gap: 0.6rem;
}

.tool-badge {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.7rem;
  background: var(--accent-warm-glow);
  color: var(--accent-warm);
  padding: 0.25rem 0.7rem;
  border-radius: 100px;
  font-weight: 600;
  letter-spacing: 0.05em;
}

.tool-body {
  padding: 2rem;
}

.input-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1.25rem;
  margin-bottom: 1.5rem;
}

.input-group {
  display: flex;
  flex-direction: column;
  gap: 0.4rem;
}

.input-group label {
  font-size: 0.82rem;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.06em;
}

.input-group input, .input-group select {
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 0.75rem 1rem;
  color: var(--text-primary);
  font-size: 1rem;
  font-family: 'JetBrains Mono', monospace;
  transition: border-color 0.3s ease;
  width: 100%;
}

.input-group input:focus, .input-group select:focus {
  outline: none;
  border-color: var(--accent-warm);
  box-shadow: 0 0 0 3px var(--accent-warm-glow);
}

.result-display {
  background: linear-gradient(135deg, rgba(232,168,56,0.08), rgba(88,166,255,0.05));
  border: 1px solid var(--border-accent);
  border-radius: var(--radius-sm);
  padding: 1.5rem 2rem;
  margin-top: 1.5rem;
}

.result-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.6rem 0;
  border-bottom: 1px solid rgba(255,255,255,0.04);
}

.result-row:last-child { border-bottom: none; }

.result-label {
  color: var(--text-secondary);
  font-size: 0.95rem;
}

.result-value {
  font-family: 'JetBrains Mono', monospace;
  font-weight: 600;
  font-size: 1.1rem;
  color: var(--accent-warm);
}

.result-value.large {
  font-size: 1.8rem;
  color: var(--accent-green);
}

.result-value.red { color: var(--accent-red); }
.result-value.cool { color: var(--accent-cool); }
.result-value.purple { color: var(--accent-purple); }

/* ========== RECIPE SCALER ========== */
.recipe-card {
  background: var(--bg-primary);
  border-radius: var(--radius-sm);
  padding: 1.5rem;
  margin-bottom: 1rem;
}

.recipe-name {
  font-family: 'Playfair Display', serif;
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.recipe-servings {
  display: flex;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1rem;
}

.serving-btn {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  border: 1px solid var(--border);
  background: var(--bg-card);
  color: var(--text-primary);
  font-size: 1.2rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
}

.serving-btn:hover {
  border-color: var(--accent-warm);
  background: var(--accent-warm-glow);
}

.serving-count {
  font-family: 'JetBrains Mono', monospace;
  font-size: 1.2rem;
  font-weight: 600;
  min-width: 80px;
  text-align: center;
}

.ingredient-list {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.ingredient-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.5rem 0.75rem;
  background: var(--bg-card);
  border-radius: 8px;
  font-size: 0.95rem;
  transition: background 0.2s ease;
}

.ingredient-item:hover { background: var(--bg-card-hover); }

.ingredient-amount {
  font-family: 'JetBrains Mono', monospace;
  font-weight: 600;
  color: var(--accent-warm);
  min-width: 70px;
}

/* ========== UNIT CONVERTER ========== */
.converter-tabs {
  display: flex;
  gap: 0.5rem;
  margin-bottom: 1.5rem;
  flex-wrap: wrap;
}

.converter-tab {
  padding: 0.5rem 1.2rem;
  border-radius: 100px;
  border: 1px solid var(--border);
  background: transparent;
  color: var(--text-secondary);
  font-size: 0.88rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.25s ease;
  font-family: inherit;
}

.converter-tab.active {
  background: var(--accent-warm);
  color: var(--bg-primary);
  border-color: var(--accent-warm);
  font-weight: 600;
}

.converter-tab:hover:not(.active) {
  border-color: var(--accent-warm);
  color: var(--accent-warm);
}

.converter-row {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.converter-input-wrap {
  flex: 1;
  min-width: 180px;
}

.converter-input-wrap label {
  display: block;
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--text-secondary);
  text-transform: uppercase;
  letter-spacing: 0.06em;
  margin-bottom: 0.4rem;
}

.converter-input-wrap input {
  width: 100%;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  padding: 0.85rem 1rem;
  color: var(--text-primary);
  font-size: 1.3rem;
  font-family: 'JetBrains Mono', monospace;
  font-weight: 600;
}

.converter-input-wrap input:focus {
  outline: none;
  border-color: var(--accent-warm);
  box-shadow: 0 0 0 3px var(--accent-warm-glow);
}

.converter-arrow {
  font-size: 1.5rem;
  color: var(--accent-warm);
  padding-top: 1.2rem;
}

.converter-formula {
  margin-top: 1rem;
  padding: 0.75rem 1rem;
  background: var(--bg-primary);
  border-radius: 8px;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.85rem;
  color: var(--text-muted);
}

/* ========== CHART (Bar graph for compound interest) ========== */
.chart-container {
  padding: 1.5rem 0;
}

.bar-chart {
  display: flex;
  align-items: flex-end;
  gap: 4px;
  height: 200px;
  padding: 0 0.5rem;
  border-bottom: 1px solid var(--border);
  margin-bottom: 0.5rem;
}

.bar-col {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  min-width: 0;
}

.bar {
  width: 100%;
  border-radius: 4px 4px 0 0;
  position: relative;
  transition: height 0.6s ease;
  min-height: 2px;
}

.bar-principal {
  background: var(--accent-cool);
}

.bar-interest {
  background: var(--accent-warm);
}

.bar-label {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.6rem;
  color: var(--text-muted);
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  width: 100%;
}

.chart-legend {
  display: flex;
  gap: 1.5rem;
  justify-content: center;
  margin-top: 1rem;
}

.chart-legend-item {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  font-size: 0.82rem;
  color: var(--text-secondary);
}

.legend-dot {
  width: 10px;
  height: 10px;
  border-radius: 3px;
}

/* ========== STATISTICS SECTION ========== */
.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
  gap: 1.5rem;
  margin-top: 2rem;
}

.stat-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 2rem;
  text-align: center;
  transition: all 0.35s ease;
}

.stat-card:hover {
  transform: translateY(-3px);
  border-color: var(--border-accent);
}

.stat-number {
  font-family: 'Playfair Display', serif;
  font-size: 2.8rem;
  font-weight: 800;
  color: var(--accent-warm);
  line-height: 1;
  margin-bottom: 0.5rem;
}

.stat-label {
  color: var(--text-secondary);
  font-size: 0.95rem;
  font-weight: 400;
}

/* ========== QUIZ ========== */
.quiz-container {
  margin-top: 2rem;
}

.quiz-progress {
  display: flex;
  gap: 6px;
  margin-bottom: 2rem;
}

.quiz-dot {
  flex: 1;
  height: 4px;
  border-radius: 100px;
  background: var(--border);
  transition: background 0.3s ease;
}

.quiz-dot.done { background: var(--accent-green); }
.quiz-dot.current { background: var(--accent-warm); }
.quiz-dot.wrong { background: var(--accent-red); }

.quiz-question {
  font-family: 'Playfair Display', serif;
  font-size: 1.5rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.quiz-context {
  color: var(--text-secondary);
  margin-bottom: 1.5rem;
  font-size: 0.95rem;
}

.quiz-options {
  display: grid;
  gap: 0.75rem;
}

.quiz-option {
  padding: 1rem 1.5rem;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--bg-primary);
  color: var(--text-primary);
  font-size: 1rem;
  cursor: pointer;
  transition: all 0.25s ease;
  text-align: left;
  font-family: inherit;
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.quiz-option:hover:not(:disabled) {
  border-color: var(--accent-warm);
  background: var(--accent-warm-glow);
}

.quiz-option.correct {
  border-color: var(--accent-green) !important;
  background: rgba(63,185,80,0.1) !important;
  color: var(--accent-green);
}

.quiz-option.wrong {
  border-color: var(--accent-red) !important;
  background: rgba(248,81,73,0.1) !important;
  color: var(--accent-red);
}

.quiz-option-letter {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  border: 1px solid var(--border);
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.8rem;
  font-weight: 600;
  flex-shrink: 0;
}

.quiz-explanation {
  margin-top: 1.5rem;
  padding: 1.25rem;
  border-radius: var(--radius-sm);
  background: rgba(63,185,80,0.06);
  border: 1px solid rgba(63,185,80,0.15);
  color: var(--text-secondary);
  font-size: 0.95rem;
  display: none;
}

.quiz-explanation.show { display: block; }

.quiz-explanation strong { color: var(--accent-green); }

.quiz-nav {
  margin-top: 1.5rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.quiz-score {
  font-family: 'JetBrains Mono', monospace;
  font-size: 0.9rem;
  color: var(--text-muted);
}

/* ========== FOOTER ========== */
.footer {
  text-align: center;
  padding: 3rem 1.5rem;
  border-top: 1px solid var(--border);
  color: var(--text-muted);
  font-size: 0.85rem;
}

.footer a {
  color: var(--accent-warm);
  text-decoration: none;
}

.footer a:hover { text-decoration: underline; }

/* ========== DIVIDER ========== */
.section-divider {
  max-width: 1100px;
  margin: 0 auto;
  padding: 0 1.5rem;
}

.section-divider hr {
  border: none;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--border-accent), transparent);
}

/* ========== RESPONSIVE ========== */
@media (max-width: 768px) {
  .section { padding: 3rem 1rem; }
  .tool-body { padding: 1.25rem; }
  .tool-header { padding: 1.25rem; }
  .card { padding: 1.5rem; }
  .card-grid { grid-template-columns: 1fr; }
  .input-grid { grid-template-columns: 1fr; }
  .bar-chart { height: 140px; }
  .converter-arrow { display: none; }
  .stat-number { font-size: 2.2rem; }
}

/* ========== TOOLTIP ========== */
.info-tip {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: var(--bg-primary);
  border: 1px solid var(--border);
  font-size: 0.65rem;
  color: var(--text-muted);
  cursor: help;
  position: relative;
  vertical-align: middle;
  margin-left: 0.3rem;
}

.info-tip:hover::after {
  content: attr(data-tip);
  position: absolute;
  bottom: 130%;
  left: 50%;
  transform: translateX(-50%);
  background: var(--bg-card);
  color: var(--text-secondary);
  padding: 0.5rem 0.75rem;
  border-radius: 8px;
  font-size: 0.78rem;
  white-space: nowrap;
  border: 1px solid var(--border);
  box-shadow: var(--shadow);
  z-index: 10;
  font-weight: 400;
  max-width: 260px;
  white-space: normal;
  text-transform: none;
  letter-spacing: 0;
}

/* ========== PAINT CALCULATOR ========== */
.visual-room {
  display: flex;
  justify-content: center;
  align-items: center;
  margin: 1.5rem 0;
}

.room-svg {
  max-width: 320px;
  width: 100%;
}

.room-svg text {
  font-family: 'JetBrains Mono', monospace;
  font-size: 11px;
  fill: var(--text-secondary);
}

.room-svg .wall-fill {
  fill: rgba(232,168,56,0.12);
  stroke: var(--accent-warm);
  stroke-width: 1.5;
}

/* ========== ACCESSIBLE ========== */
@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

:focus-visible {
  outline: 2px solid var(--accent-warm);
  outline-offset: 2px;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0,0,0,0);
  white-space: nowrap;
  border-width: 0;
}
</style>
</head>
<body>

<!-- ==================== HERO ==================== -->
<section class="hero" id="top">
  <div class="hero-grid" aria-hidden="true"></div>
  <div class="floating-symbols" id="floatingSymbols" aria-hidden="true"></div>
  <div class="hero-content">
    <div class="hero-badge">‚ú¶ Interactive Learning Experience</div>
    <h1>The <span class="accent">Mathematics</span> of<br>Everyday <span class="cool">Life</span></h1>
    <p class="hero-sub">You use math more than you realize ‚Äî from splitting a dinner bill to choosing a mortgage. Explore how numbers quietly power every decision you make.</p>
    <div class="hero-cta">
      <a href="#tools" class="btn btn-primary">Try the Calculators ‚Üì</a>
      <a href="#quiz" class="btn btn-secondary">Take the Quiz</a>
    </div>
  </div>
  <div class="scroll-hint" aria-hidden="true">‚Üì</div>
</section>

<!-- ==================== NAV ==================== -->
<nav class="nav-bar" role="navigation" aria-label="Section navigation">
  <div class="nav-inner">
    <a class="nav-link" href="#overview"><span class="nav-icon">üìê</span> Overview</a>
    <a class="nav-link" href="#tools"><span class="nav-icon">üßÆ</span> Calculators</a>
    <a class="nav-link" href="#recipe"><span class="nav-icon">üç≥</span> Recipe Scaler</a>
    <a class="nav-link" href="#converter"><span class="nav-icon">üîÑ</span> Converter</a>
    <a class="nav-link" href="#compound"><span class="nav-icon">üìà</span> Compound Interest</a>
    <a class="nav-link" href="#paint"><span class="nav-icon">üé®</span> Paint Estimator</a>
    <a class="nav-link" href="#statistics"><span class="nav-icon">üìä</span> Statistics</a>
    <a class="nav-link" href="#quiz"><span class="nav-icon">üß†</span> Quiz</a>
  </div>
</nav>

<!-- ==================== OVERVIEW ==================== -->
<section class="section" id="overview">
  <div class="section-header">
    <div class="section-label">Chapter 01</div>
    <h2 class="section-title">Math Is Everywhere</h2>
    <p class="section-desc">You might not need a Fourier transform for daily life, but comfort with numbers, fractions, ratios, and a little algebra and geometry makes everything easier ‚Äî and can save you thousands.</p>
  </div>

  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-number">5+</div>
      <div class="stat-label">Categories of daily math</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">$215K</div>
      <div class="stat-label">Interest on a $200K mortgage at 6.5% over 30 years</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">90%</div>
      <div class="stat-label">of adults use basic math daily</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">‚àû</div>
      <div class="stat-label">Ways math improves decision-making</div>
    </div>
  </div>

  <div class="card-grid" style="margin-top:3rem;">
    <div class="card">
      <span class="card-icon">üó∫Ô∏è</span>
      <h3>Travel &amp; Time</h3>
      <p>From estimating arrival times to converting between miles and kilometers across time zones.</p>
      <ul>
        <li>Comparing holiday costs</li>
        <li>Balancing journey time, cost, comfort</li>
        <li>Time zone shifting</li>
        <li>Unit conversions while abroad</li>
      </ul>
    </div>
    <div class="card">
      <span class="card-icon">üè†</span>
      <h3>Home &amp; DIY</h3>
      <p>Will that sofa fit up the stairs? How many tiles for the bathroom? How much paint for the fence?</p>
      <ul>
        <li>Furniture fitting &amp; spatial reasoning</li>
        <li>Tile and flooring estimation</li>
        <li>Paint coverage calculations</li>
        <li>Room measurement geometry</li>
      </ul>
    </div>
    <div class="card">
      <span class="card-icon">üçï</span>
      <h3>Food &amp; Sharing</h3>
      <p>Scaling recipes, splitting bills fairly, comparing unit prices, and the art of baguette division.</p>
      <ul>
        <li>Recipe scaling with ratios</li>
        <li>Splitting restaurant bills</li>
        <li>Price-per-unit comparisons</li>
        <li>Party food estimation</li>
      </ul>
    </div>
    <div class="card">
      <span class="card-icon">üí∞</span>
      <h3>Money &amp; Finance</h3>
      <p>Understanding interest rates and compound growth can mean the difference of 10 years of savings.</p>
      <ul>
        <li>Compound interest on savings</li>
        <li>Mortgage payment planning</li>
        <li>Comparing insurance policies</li>
        <li>Tip calculations</li>
      </ul>
    </div>
    <div class="card">
      <span class="card-icon">üì∞</span>
      <h3>Media &amp; Society</h3>
      <p>A little statistical literacy helps cut through misleading headlines and wild advertising claims.</p>
      <ul>
        <li>Interpreting data in the news</li>
        <li>Understanding survey methodology</li>
        <li>Evaluating advertising claims</li>
        <li>Election and polling math</li>
      </ul>
    </div>
    <div class="card">
      <span class="card-icon">‚öΩ</span>
      <h3>Sports &amp; Games</h3>
      <p>Batting averages, shooting percentages, game strategy ‚Äî sports are powered by probability and statistics.</p>
      <ul>
        <li>Player scoring statistics</li>
        <li>Probability and game strategy</li>
        <li>Fantasy league calculations</li>
        <li>Spatial reasoning (Tetris, chess)</li>
      </ul>
    </div>
  </div>
</section>

<div class="section-divider"><hr></div>

<!-- ==================== TIP & BILL CALCULATOR ==================== -->
<section class="section" id="tools">
  <div class="section-header">
    <div class="section-label">Chapter 02 ‚Äî Interactive Tools</div>
    <h2 class="section-title">Everyday Math Calculators</h2>
    <p class="section-desc">Put math to work with these practical tools. Change the numbers and see instant results.</p>
  </div>

  <!-- Tip & Bill Splitter -->
  <div class="tool-container">
    <div class="tool-header">
      <div class="tool-title">üßæ Tip &amp; Bill Splitter</div>
      <span class="tool-badge">INTERACTIVE</span>
    </div>
    <div class="tool-body">
      <div class="input-grid">
        <div class="input-group">
          <label for="billAmount">Bill Amount ($)</label>
          <input type="number" id="billAmount" value="86.50" min="0" step="0.01">
        </div>
        <div class="input-group">
          <label for="tipPercent">Tip % <span class="info-tip" data-tip="Standard tips: 15% adequate, 18% good, 20%+ excellent">?</span></label>
          <input type="number" id="tipPercent" value="18" min="0" max="100" step="1">
        </div>
        <div class="input-group">
          <label for="numPeople">Number of People</label>
          <input type="number" id="numPeople" value="4" min="1" step="1">
        </div>
      </div>
      <div class="result-display" id="tipResults">
        <!-- Filled by JS -->
      </div>
    </div>
  </div>

  <!-- Discount Comparison -->
  <div class="tool-container" style="margin-top: 1.5rem;">
    <div class="tool-header">
      <div class="tool-title">üè∑Ô∏è Discount Comparison</div>
      <span class="tool-badge">INTERACTIVE</span>
    </div>
    <div class="tool-body">
      <p style="color:var(--text-secondary);margin-bottom:1.25rem;font-size:0.95rem;">Which deal is actually better? Compare two products to find the true value.</p>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:1.5rem;">
        <div>
          <h4 style="margin-bottom:0.75rem;color:var(--accent-cool);">Product A</h4>
          <div class="input-group" style="margin-bottom:0.75rem;">
            <label for="priceA">Price ($)</label>
            <input type="number" id="priceA" value="12.99" min="0" step="0.01">
          </div>
          <div class="input-group" style="margin-bottom:0.75rem;">
            <label for="sizeA">Size / Quantity</label>
            <input type="number" id="sizeA" value="500" min="0" step="1">
          </div>
          <div class="input-group">
            <label for="discountA">Discount %</label>
            <input type="number" id="discountA" value="0" min="0" max="100" step="1">
          </div>
        </div>
        <div>
          <h4 style="margin-bottom:0.75rem;color:var(--accent-purple);">Product B</h4>
          <div class="input-group" style="margin-bottom:0.75rem;">
            <label for="priceB">Price ($)</label>
            <input type="number" id="priceB" value="8.49" min="0" step="0.01">
          </div>
          <div class="input-group" style="margin-bottom:0.75rem;">
            <label for="sizeB">Size / Quantity</label>
            <input type="number" id="sizeB" value="300" min="0" step="1">
          </div>
          <div class="input-group">
            <label for="discountB">Discount %</label>
            <input type="number" id="discountB" value="25" min="0" max="100" step="1">
          </div>
        </div>
      </div>
      <div class="result-display" id="discountResults" style="margin-top:1.5rem;"></div>
    </div>
  </div>
</section>

<div class="section-divider"><hr></div>

<!-- ==================== RECIPE SCALER ==================== -->
<section class="section" id="recipe">
  <div class="section-header">
    <div class="section-label">Chapter 03 ‚Äî Ratios &amp; Proportions</div>
    <h2 class="section-title">Recipe Scaler</h2>
    <p class="section-desc">Cooking for more (or fewer) people? Adjust the servings and watch every ingredient scale proportionally ‚Äî that's ratios in action.</p>
  </div>

  <div class="tool-container">
    <div class="tool-header">
      <div class="tool-title">üçù Spaghetti Carbonara</div>
      <span class="tool-badge">SCALE IT</span>
    </div>
    <div class="tool-body">
      <div class="recipe-card">
        <div class="recipe-servings">
          <span style="color:var(--text-secondary);font-size:0.9rem;">Servings:</span>
          <button class="serving-btn" onclick="changeServings(-1)" aria-label="Decrease servings">‚àí</button>
          <span class="serving-count" id="servingCount">4</span>
          <button class="serving-btn" onclick="changeServings(1)" aria-label="Increase servings">+</button>
          <span style="color:var(--text-muted);font-size:0.82rem;">(Original: 4)</span>
        </div>
        <div class="ingredient-list" id="ingredientList">
          <!-- Filled by JS -->
        </div>
      </div>
      <div style="margin-top:1rem;padding:1rem;background:var(--bg-primary);border-radius:var(--radius-sm);color:var(--text-secondary);font-size:0.9rem;">
        <strong style="color:var(--accent-warm);">The math: </strong> Each ingredient uses the formula: <code style="color:var(--accent-cool);background:var(--bg-card);padding:0.15rem 0.4rem;border-radius:4px;font-family:'JetBrains Mono',monospace;font-size:0.85rem;">new amount = base amount √ó (desired servings √∑ original servings)</code>
      </div>
    </div>
  </div>
</section>

<div class="section-divider"><hr></div>

<!-- ==================== UNIT CONVERTER ==================== -->
<section class="section" id="converter">
  <div class="section-header">
    <div class="section-label">Chapter 04 ‚Äî Conversions</div>
    <h2 class="section-title">Unit Converter</h2>
    <p class="section-desc">Traveling abroad? Cooking with a European recipe? Converting between measurement systems is essential everyday math.</p>
  </div>

  <div class="tool-container">
    <div class="tool-header">
      <div class="tool-title">üîÑ Quick Converter</div>
      <span class="tool-badge">LIVE</span>
    </div>
    <div class="tool-body">
      <div class="converter-tabs" id="converterTabs" role="tablist">
        <button class="converter-tab active" data-type="temp" role="tab" aria-selected="true">üå° Temperature</button>
        <button class="converter-tab" data-type="distance" role="tab">üìè Distance</button>
        <button class="converter-tab" data-type="weight" role="tab">‚öñÔ∏è Weight</button>
        <button class="converter-tab" data-type="volume" role="tab">ü•§ Volume</button>
        <button class="converter-tab" data-type="currency" role="tab">üí± Currency</button>
      </div>
      <div id="converterBody"></div>
    </div>
  </div>
</section>

<div class="section-divider"><hr></div>

<!-- ==================== COMPOUND INTEREST ==================== -->
<section class="section" id="compound">
  <div class="section-header">
    <div class="section-label">Chapter 05 ‚Äî Financial Literacy</div>
    <h2 class="section-title">Compound Interest Visualizer</h2>
    <p class="section-desc">Albert Einstein reportedly called compound interest the eighth wonder of the world. See why ‚Äî small rate differences create enormous outcomes over time.</p>
  </div>

  <div class="tool-container">
    <div class="tool-header">
      <div class="tool-title">üìà Growth Calculator</div>
      <span class="tool-badge">FORMULA: A = P(1 + r/n)^(nt)</span>
    </div>
    <div class="tool-body">
      <div class="input-grid">
        <div class="input-group">
          <label for="ciPrincipal">Starting Amount ($)</label>
          <input type="number" id="ciPrincipal" value="10000" min="0" step="100">
        </div>
        <div class="input-group">
          <label for="ciRate">Annual Rate (%) <span class="info-tip" data-tip="Average S&P 500 return: ~10%. High-yield savings: ~4-5%.">?</span></label>
          <input type="number" id="ciRate" value="7" min="0" max="50" step="0.1">
        </div>
        <div class="input-group">
          <label for="ciYears">Years</label>
          <input type="number" id="ciYears" value="20" min="1" max="50" step="1">
        </div>
        <div class="input-group">
          <label for="ciCompound">Compounding</label>
          <select id="ciCompound">
            <option value="1">Annually</option>
            <option value="4">Quarterly</option>
            <option value="12" selected>Monthly</option>
            <option value="365">Daily</option>
          </select>
        </div>
      </div>
      <div class="result-display" id="ciResults"></div>
      <div class="chart-container">
        <div class="bar-chart" id="ciChart"></div>
        <div class="chart-legend">
          <div class="chart-legend-item"><span class="legend-dot" style="background:var(--accent-cool);"></span> Principal</div>
          <div class="chart-legend-item"><span class="legend-dot" style="background:var(--accent-warm);"></span> Interest Earned</div>
        </div>
      </div>
    </div>
  </div>
</section>

<div class="section-divider"><hr></div>

<!-- ==================== PAINT CALCULATOR ==================== -->
<section class="section" id="paint">
  <div class="section-header">
    <div class="section-label">Chapter 06 ‚Äî Geometry at Home</div>
    <h2 class="section-title">Paint Estimator</h2>
    <p class="section-desc">Planning to paint a room? Geometry helps you buy the right amount ‚Äî not too much, not too little. One gallon typically covers about 350 sq ft.</p>
  </div>

  <div class="tool-container">
    <div class="tool-header">
      <div class="tool-title">üé® Room Paint Calculator</div>
      <span class="tool-badge">GEOMETRY</span>
    </div>
    <div class="tool-body">
      <div class="input-grid">
        <div class="input-group">
          <label for="roomLength">Room Length (ft)</label>
          <input type="number" id="roomLength" value="14" min="1" step="0.5">
        </div>
        <div class="input-group">
          <label for="roomWidth">Room Width (ft)</label>
          <input type="number" id="roomWidth" value="12" min="1" step="0.5">
        </div>
        <div class="input-group">
          <label for="roomHeight">Wall Height (ft)</label>
          <input type="number" id="roomHeight" value="9" min="1" step="0.5">
        </div>
        <div class="input-group">
          <label for="numCoats">Coats <span class="info-tip" data-tip="Most rooms need 2 coats for even coverage.">?</span></label>
          <select id="numCoats">
            <option value="1">1 Coat</option>
            <option value="2" selected>2 Coats</option>
            <option value="3">3 Coats</option>
          </select>
        </div>
        <div class="input-group">
          <label for="numDoors">Doors</label>
          <input type="number" id="numDoors" value="1" min="0" step="1">
        </div>
        <div class="input-group">
          <label for="numWindows">Windows</label>
          <input type="number" id="numWindows" value="2" min="0" step="1">
        </div>
      </div>

      <div class="visual-room">
        <svg class="room-svg" viewBox="0 0 320 220" id="roomSvg" aria-label="Room diagram"></svg>
      </div>

      <div class="result-display" id="paintResults"></div>
    </div>
  </div>
</section>

<div class="section-divider"><hr></div>

<!-- ==================== STATISTICS ==================== -->
<section class="section" id="statistics">
  <div class="section-header">
    <div class="section-label">Chapter 07 ‚Äî Critical Thinking</div>
    <h2 class="section-title">Statistics Literacy</h2>
    <p class="section-desc">Understanding averages, percentages, and probabilities protects you from misleading headlines and advertising tricks. Here are some common traps.</p>
  </div>

  <div class="card-grid">
    <div class="card">
      <span class="card-icon">üìâ</span>
      <h3>Sneaky Averages</h3>
      <p>Mean, median, and mode can tell very different stories. If 9 workers earn $40K and the CEO earns $4M, the "average" salary is $436K ‚Äî technically true, deeply misleading. The <em>median</em> ($40K) tells the real story.</p>
    </div>
    <div class="card">
      <span class="card-icon">üéØ</span>
      <h3>Sampling Bias</h3>
      <p>"9 out of 10 dentists recommend‚Ä¶" ‚Äî but who were those dentists? How were they selected? Sample size and selection method determine whether a statistic means anything at all.</p>
    </div>
    <div class="card">
      <span class="card-icon">üìä</span>
      <h3>Misleading Graphs</h3>
      <p>Truncating the Y-axis, using inconsistent scales, or cherry-picking date ranges can make small changes look dramatic. Always check the axis labels and full context.</p>
    </div>
    <div class="card">
      <span class="card-icon">üîÄ</span>
      <h3>Correlation ‚â† Causation</h3>
      <p>Ice cream sales and drowning rates both rise in summer ‚Äî but ice cream doesn't cause drowning. A lurking variable (hot weather) drives both. Always ask: what else could explain this?</p>
    </div>
    <div class="card">
      <span class="card-icon">üé≤</span>
      <h3>Probability Intuition</h3>
      <p>The "Birthday Problem": in a group of just 23 people, there's a 50% chance two share a birthday. Our brains are notoriously bad at estimating probabilities.</p>
    </div>
    <div class="card">
      <span class="card-icon">‚öñÔ∏è</span>
      <h3>Asymmetry of Returns</h3>
      <p>Lose 50%, and you need a 100% gain just to break even. A 33% loss requires a 50% gain. Understanding this asymmetry is crucial for investing and risk management.</p>
    </div>
  </div>
</section>

<div class="section-divider"><hr></div>

<!-- ==================== QUIZ ==================== -->
<section class="section" id="quiz">
  <div class="section-header">
    <div class="section-label">Chapter 08 ‚Äî Test Yourself</div>
    <h2 class="section-title">Everyday Math Quiz</h2>
    <p class="section-desc">Can you solve these real-world math scenarios? Test your practical numeracy.</p>
  </div>

  <div class="tool-container">
    <div class="tool-header">
      <div class="tool-title">üß† Quiz Challenge</div>
      <span class="tool-badge" id="quizScoreBadge">0 / 10</span>
    </div>
    <div class="tool-body">
      <div class="quiz-progress" id="quizProgress"></div>
      <div id="quizBody"></div>
      <div class="quiz-nav">
        <span class="quiz-score" id="quizScoreText"></span>
        <button class="btn btn-primary" id="quizNextBtn" onclick="nextQuestion()" style="display:none;">Next Question ‚Üí</button>
        <button class="btn btn-primary" id="quizRestartBtn" onclick="startQuiz()" style="display:none;">Restart Quiz üîÑ</button>
      </div>
    </div>
  </div>
</section>

<!-- ==================== FOOTER ==================== -->
<footer class="footer">
  <p>Inspired by <a href="https://sketchplanations.substack.com/p/the-mathematics-of-everyday-life" target="_blank" rel="noopener">Jono Hey's "The Mathematics of Everyday Life"</a> at Sketchplanations and the <a href="https://irimad.com/verdi-prosjekt/" target="_blank" rel="noopener">VERDI Project</a> at the University of Stavanger.</p>
  <p style="margin-top:0.5rem;">Built as an interactive educational resource. Mathematics isn't all abstract theory ‚Äî it's vital to making everyday life a little easier, fairer, and more enjoyable.</p>
</footer>

<script>
// =============================================
// FLOATING MATH SYMBOLS
// =============================================
(function() {
  const symbols = ['œÄ','‚àë','‚àö','‚à´','√∑','√ó','¬±','‚àû','‚âà','%','Œî','Œ∏','œÜ','Œª','Œº','œÉ','‚àÇ','‚àá','‚â†','‚â§','‚â•','‚àù','‚äÇ','‚àà'];
  const container = document.getElementById('floatingSymbols');
  for (let i = 0; i < 20; i++) {
    const span = document.createElement('span');
    span.textContent = symbols[Math.floor(Math.random() * symbols.length)];
    span.style.left = Math.random() * 100 + '%';
    span.style.animationDelay = Math.random() * 20 + 's';
    span.style.animationDuration = (15 + Math.random() * 15) + 's';
    span.style.fontSize = (1.2 + Math.random() * 2) + 'rem';
    container.appendChild(span);
  }
})();

// =============================================
// NAVIGATION ACTIVE STATE
// =============================================
(function() {
  const navLinks = document.querySelectorAll('.nav-link');
  const sections = [];
  navLinks.forEach(link => {
    const id = link.getAttribute('href')?.replace('#','');
    if (id) {
      const el = document.getElementById(id);
      if (el) sections.push({ id, el, link });
    }
  });

  let ticking = false;
  window.addEventListener('scroll', () => {
    if (!ticking) {
      requestAnimationFrame(() => {
        const scrollY = window.scrollY + 120;
        let current = sections[0]?.id;
        for (const s of sections) {
          if (s.el.offsetTop <= scrollY) current = s.id;
        }
        navLinks.forEach(l => l.classList.remove('active'));
        sections.find(s => s.id === current)?.link.classList.add('active');
        ticking = false;
      });
      ticking = true;
    }
  });
})();

// =============================================
// TIP & BILL SPLITTER
// =============================================
function calcTip() {
  const bill = parseFloat(document.getElementById('billAmount').value) || 0;
  const tipPct = parseFloat(document.getElementById('tipPercent').value) || 0;
  const people = Math.max(1, parseInt(document.getElementById('numPeople').value) || 1);

  const tip = bill * (tipPct / 100);
  const total = bill + tip;
  const perPerson = total / people;
  const tipPerPerson = tip / people;

  document.getElementById('tipResults').innerHTML = `
    <div class="result-row">
      <span class="result-label">Tip Amount</span>
      <span class="result-value">$${tip.toFixed(2)}</span>
    </div>
    <div class="result-row">
      <span class="result-label">Total with Tip</span>
      <span class="result-value cool">$${total.toFixed(2)}</span>
    </div>
    <div class="result-row">
      <span class="result-label">Tip per Person</span>
      <span class="result-value">$${tipPerPerson.toFixed(2)}</span>
    </div>
    <div class="result-row">
      <span class="result-label">Each Person Pays</span>
      <span class="result-value large">$${perPerson.toFixed(2)}</span>
    </div>
  `;
}
['billAmount','tipPercent','numPeople'].forEach(id =>
  document.getElementById(id).addEventListener('input', calcTip)
);
calcTip();

// =============================================
// DISCOUNT COMPARISON
// =============================================
function calcDiscount() {
  const pA = parseFloat(document.getElementById('priceA').value) || 0;
  const sA = parseFloat(document.getElementById('sizeA').value) || 1;
  const dA = parseFloat(document.getElementById('discountA').value) || 0;
  const pB = parseFloat(document.getElementById('priceB').value) || 0;
  const sB = parseFloat(document.getElementById('sizeB').value) || 1;
  const dB = parseFloat(document.getElementById('discountB').value) || 0;

  const finalA = pA * (1 - dA / 100);
  const finalB = pB * (1 - dB / 100);
  const unitA = finalA / sA;
  const unitB = finalB / sB;

  const winner = unitA < unitB ? 'A' : unitB < unitA ? 'B' : 'Tie';
  const savings = Math.abs(unitA - unitB) * Math.min(sA, sB);

  document.getElementById('discountResults').innerHTML = `
    <div class="result-row">
      <span class="result-label">Product A ‚Äî Final Price</span>
      <span class="result-value cool">$${finalA.toFixed(2)}</span>
    </div>
    <div class="result-row">
      <span class="result-label">Product A ‚Äî Per Unit</span>
      <span class="result-value${unitA <= unitB ? '' : ' red'}">$${unitA.toFixed(4)}</span>
    </div>
    <div class="result-row">
      <span class="result-label">Product B ‚Äî Final Price</span>
      <span class="result-value purple">$${finalB.toFixed(2)}</span>
    </div>
    <div class="result-row">
      <span class="result-label">Product B ‚Äî Per Unit</span>
      <span class="result-value${unitB <= unitA ? '' : ' red'}">$${unitB.toFixed(4)}</span>
    </div>
    <div class="result-row" style="border-top:1px solid var(--border);padding-top:1rem;margin-top:0.5rem;">
      <span class="result-label" style="font-weight:600;color:var(--text-primary);">üèÜ Better Value</span>
      <span class="result-value large">${winner === 'Tie' ? 'It\'s a tie!' : 'Product ' + winner}</span>
    </div>
  `;
}
['priceA','sizeA','discountA','priceB','sizeB','discountB'].forEach(id =>
  document.getElementById(id).addEventListener('input', calcDiscount)
);
calcDiscount();

// =============================================
// RECIPE SCALER
// =============================================
const baseServings = 4;
let currentServings = 4;
const ingredients = [
  { amount: 400, unit: 'g', name: 'Spaghetti', emoji: 'üçù' },
  { amount: 200, unit: 'g', name: 'Guanciale or Pancetta', emoji: 'ü•ì' },
  { amount: 4, unit: '', name: 'Egg Yolks', emoji: 'ü•ö' },
  { amount: 1, unit: '', name: 'Whole Egg', emoji: 'ü•ö' },
  { amount: 100, unit: 'g', name: 'Pecorino Romano, grated', emoji: 'üßÄ' },
  { amount: 2, unit: 'tbsp', name: 'Olive Oil', emoji: 'ü´í' },
  { amount: 0.5, unit: 'tsp', name: 'Black Pepper, freshly ground', emoji: 'üå∂Ô∏è' },
  { amount: 1, unit: 'pinch', name: 'Salt (for pasta water)', emoji: 'üßÇ' },
];

function renderIngredients() {
  const scale = currentServings / baseServings;
  const list = document.getElementById('ingredientList');
  list.innerHTML = ingredients.map(ing => {
    let amt = ing.amount * scale;
    let display = amt % 1 === 0 ? amt.toString() : amt.toFixed(1);
    if (amt < 0.1) display = amt.toFixed(2);
    return `<div class="ingredient-item">
      <span style="font-size:1.2rem;">${ing.emoji}</span>
      <span class="ingredient-amount">${display} ${ing.unit}</span>
      <span>${ing.name}</span>
    </div>`;
  }).join('');
  document.getElementById('servingCount').textContent = currentServings;
}

function changeServings(delta) {
  currentServings = Math.max(1, currentServings + delta);
  renderIngredients();
}
renderIngredients();

// =============================================
// UNIT CONVERTER
// =============================================
const converters = {
  temp: {
    fromLabel: 'Fahrenheit (¬∞F)', toLabel: 'Celsius (¬∞C)',
    convert: v => (v - 32) * 5/9,
    reverse: v => v * 9/5 + 32,
    formula: '¬∞C = (¬∞F ‚àí 32) √ó 5/9',
    fromDefault: 72
  },
  distance: {
    fromLabel: 'Miles', toLabel: 'Kilometers',
    convert: v => v * 1.60934,
    reverse: v => v / 1.60934,
    formula: 'km = miles √ó 1.60934',
    fromDefault: 26.2
  },
  weight: {
    fromLabel: 'Pounds (lb)', toLabel: 'Kilograms (kg)',
    convert: v => v * 0.453592,
    reverse: v => v / 0.453592,
    formula: 'kg = lb √ó 0.4536',
    fromDefault: 150
  },
  volume: {
    fromLabel: 'US Cups', toLabel: 'Milliliters (mL)',
    convert: v => v * 236.588,
    reverse: v => v / 236.588,
    formula: 'mL = cups √ó 236.588',
    fromDefault: 2
  },
  currency: {
    fromLabel: 'US Dollars ($)', toLabel: 'Euros (‚Ç¨)',
    convert: v => v * 0.92,
    reverse: v => v / 0.92,
    formula: '‚Ç¨ = $ √ó 0.92 (approx. rate)',
    fromDefault: 100
  }
};

let currentConverter = 'temp';

function renderConverter() {
  const c = converters[currentConverter];
  const body = document.getElementById('converterBody');
  body.innerHTML = `
    <div class="converter-row">
      <div class="converter-input-wrap">
        <label for="convFrom">${c.fromLabel}</label>
        <input type="number" id="convFrom" value="${c.fromDefault}" step="any">
      </div>
      <div class="converter-arrow">‚ü∂</div>
      <div class="converter-input-wrap">
        <label for="convTo">${c.toLabel}</label>
        <input type="number" id="convTo" value="${c.convert(c.fromDefault).toFixed(2)}" step="any">
      </div>
    </div>
    <div class="converter-formula">Formula: ${c.formula}</div>
  `;

  document.getElementById('convFrom').addEventListener('input', e => {
    const val = parseFloat(e.target.value);
    if (!isNaN(val)) document.getElementById('convTo').value = c.convert(val).toFixed(2);
  });
  document.getElementById('convTo').addEventListener('input', e => {
    const val = parseFloat(e.target.value);
    if (!isNaN(val)) document.getElementById('convFrom').value = c.reverse(val).toFixed(2);
  });
}

document.querySelectorAll('.converter-tab').forEach(tab => {
  tab.addEventListener('click', () => {
    document.querySelectorAll('.converter-tab').forEach(t => { t.classList.remove('active'); t.setAttribute('aria-selected','false'); });
    tab.classList.add('active');
    tab.setAttribute('aria-selected','true');
    currentConverter = tab.dataset.type;
    renderConverter();
  });
});
renderConverter();

// =============================================
// COMPOUND INTEREST
// =============================================
function calcCompound() {
  const P = parseFloat(document.getElementById('ciPrincipal').value) || 0;
  const r = (parseFloat(document.getElementById('ciRate').value) || 0) / 100;
  const t = parseInt(document.getElementById('ciYears').value) || 1;
  const n = parseInt(document.getElementById('ciCompound').value) || 12;

  const A = P * Math.pow(1 + r/n, n*t);
  const interest = A - P;
  const doubling = r > 0 ? (72 / (r*100)).toFixed(1) : '‚àû';

  document.getElementById('ciResults').innerHTML = `
    <div class="result-row">
      <span class="result-label">Starting Principal</span>
      <span class="result-value cool">$${P.toLocaleString()}</span>
    </div>
    <div class="result-row">
      <span class="result-label">Interest Earned</span>
      <span class="result-value">$${interest.toLocaleString(undefined,{maximumFractionDigits:2})}</span>
    </div>
    <div class="result-row">
      <span class="result-label">Final Amount</span>
      <span class="result-value large">$${A.toLocaleString(undefined,{maximumFractionDigits:2})}</span>
    </div>
    <div class="result-row">
      <span class="result-label">Rule of 72 ‚Äî Time to Double</span>
      <span class="result-value purple">‚âà ${doubling} years</span>
    </div>
    <div class="result-row">
      <span class="result-label">Total Return</span>
      <span class="result-value">${((A/P - 1)*100).toFixed(1)}%</span>
    </div>
  `;

  // Chart
  const chart = document.getElementById('ciChart');
  const maxYears = Math.min(t, 30);
  const step = maxYears <= 15 ? 1 : maxYears <= 30 ? 2 : 5;
  const years = [];
  for (let y = 0; y <= maxYears; y += step) years.push(y);
  if (years[years.length-1] !== maxYears) years.push(maxYears);

  const amounts = years.map(y => P * Math.pow(1 + r/n, n*y));
  const maxA = Math.max(...amounts);

  chart.innerHTML = years.map((y, i) => {
    const total = amounts[i];
    const principalH = (P / maxA) * 100;
    const interestH = ((total - P) / maxA) * 100;
    return `<div class="bar-col">
      <div class="bar bar-interest" style="height:${Math.max(interestH,0)}%;" title="Interest: $${(total-P).toLocaleString(undefined,{maximumFractionDigits:0})}"></div>
      <div class="bar bar-principal" style="height:${principalH}%;" title="Principal: $${P.toLocaleString()}"></div>
      <span class="bar-label">Yr ${y}</span>
    </div>`;
  }).join('');
}
['ciPrincipal','ciRate','ciYears','ciCompound'].forEach(id =>
  document.getElementById(id).addEventListener('input', calcCompound)
);
calcCompound();

// =============================================
// PAINT CALCULATOR
// =============================================
function calcPaint() {
  const L = parseFloat(document.getElementById('roomLength').value) || 0;
  const W = parseFloat(document.getElementById('roomWidth').value) || 0;
  const H = parseFloat(document.getElementById('roomHeight').value) || 0;
  const coats = parseInt(document.getElementById('numCoats').value) || 2;
  const doors = parseInt(document.getElementById('numDoors').value) || 0;
  const windows = parseInt(document.getElementById('numWindows').value) || 0;

  const wallArea = 2 * (L + W) * H;
  const doorArea = doors * 21; // ~3ft x 7ft
  const windowArea = windows * 12; // ~3ft x 4ft
  const paintableArea = wallArea - doorArea - windowArea;
  const totalArea = paintableArea * coats;
  const gallons = totalArea / 350;

  // SVG diagram
  const svg = document.getElementById('roomSvg');
  const wS = 160; const dS = 80; const hS = 90;
  const oX = 80; const oY = 20;
  svg.innerHTML = `
    <defs>
      <linearGradient id="wg" x1="0" y1="0" x2="1" y2="1">
        <stop offset="0%" stop-color="rgba(232,168,56,0.18)"/>
        <stop offset="100%" stop-color="rgba(88,166,255,0.08)"/>
      </linearGradient>
    </defs>
    <!-- back wall -->
    <polygon class="wall-fill" points="${oX},${oY} ${oX+wS},${oY} ${oX+wS},${oY+hS} ${oX},${oY+hS}" fill="url(#wg)"/>
    <!-- side wall -->
    <polygon class="wall-fill" points="${oX+wS},${oY} ${oX+wS+dS},${oY+dS*0.4} ${oX+wS+dS},${oY+hS+dS*0.4} ${oX+wS},${oY+hS}" fill="url(#wg)" style="opacity:0.7"/>
    <!-- floor -->
    <polygon points="${oX},${oY+hS} ${oX+wS},${oY+hS} ${oX+wS+dS},${oY+hS+dS*0.4} ${oX+dS},${oY+hS+dS*0.4}" fill="rgba(88,166,255,0.06)" stroke="var(--accent-cool)" stroke-width="0.8"/>
    <!-- labels -->
    <text x="${oX + wS/2}" y="${oY+hS+18}" text-anchor="middle" fill="var(--accent-warm)">${L} ft</text>
    <text x="${oX+wS+dS/2+8}" y="${oY+hS/2+dS*0.2}" text-anchor="middle" transform="rotate(22,${oX+wS+dS/2+8},${oY+hS/2+dS*0.2})" fill="var(--accent-cool)">${W} ft</text>
    <text x="${oX-14}" y="${oY+hS/2+4}" text-anchor="middle" fill="var(--accent-purple)">${H} ft</text>
    <!-- arrows -->
    <line x1="${oX}" y1="${oY}" x2="${oX}" y2="${oY+hS}" stroke="var(--accent-purple)" stroke-width="0.8" stroke-dasharray="3"/>
  `;

  document.getElementById('paintResults').innerHTML = `
    <div class="result-row">
      <span class="result-label">Total Wall Area</span>
      <span class="result-value">${wallArea.toFixed(0)} sq ft</span>
    </div>
    <div class="result-row">
      <span class="result-label">Doors &amp; Windows (subtracted)</span>
      <span class="result-value red">‚àí${(doorArea + windowArea).toFixed(0)} sq ft</span>
    </div>
    <div class="result-row">
      <span class="result-label">Paintable Area (√ó ${coats} coats)</span>
      <span class="result-value cool">${totalArea.toFixed(0)} sq ft</span>
    </div>
    <div class="result-row">
      <span class="result-label">Gallons Needed (350 sq ft/gal)</span>
      <span class="result-value large">${Math.ceil(gallons)} gallon${Math.ceil(gallons)!==1?'s':''}</span>
    </div>
    <div class="result-row">
      <span class="result-label">Exact calculation</span>
      <span class="result-value purple">${gallons.toFixed(2)} gal</span>
    </div>
  `;
}
['roomLength','roomWidth','roomHeight','numCoats','numDoors','numWindows'].forEach(id =>
  document.getElementById(id).addEventListener('input', calcPaint)
);
calcPaint();

// =============================================
// QUIZ
// =============================================
const quizData = [
  {
    q: "A sweater is originally $80 and is 25% off. What's the sale price?",
    context: "Shopping math ‚Äî calculating discounts.",
    options: ["$55","$60","$65","$70"],
    correct: 1,
    explain: "$80 √ó 0.25 = $20 discount. $80 ‚àí $20 = <strong>$60</strong>."
  },
  {
    q: "You're scaling a recipe from 4 servings to 6. If the recipe calls for ‚Öî cup of flour, how much do you need?",
    context: "Recipe scaling ‚Äî ratios and fractions.",
    options: ["¬æ cup","1 cup","‚Öö cup","1‚Öì cups"],
    correct: 1,
    explain: "Scale factor = 6/4 = 1.5. Then ‚Öî √ó 1.5 = <strong>1 cup</strong>."
  },
  {
    q: "If you drive 60 mph for 2 hours and 15 minutes, how far do you travel?",
    context: "Travel math ‚Äî distance, speed, time.",
    options: ["120 miles","130 miles","135 miles","140 miles"],
    correct: 2,
    explain: "2h15m = 2.25 hours. Distance = 60 √ó 2.25 = <strong>135 miles</strong>."
  },
  {
    q: "A dinner bill is $124 split among 4 people with a 20% tip. What does each person pay?",
    context: "Bill splitting ‚Äî percentages and division.",
    options: ["$31.00","$34.80","$37.20","$40.00"],
    correct: 2,
    explain: "Tip = $124 √ó 0.20 = $24.80. Total = $148.80. Per person: $148.80 √∑ 4 = <strong>$37.20</strong>."
  },
  {
    q: "You invest $5,000 at 6% annual interest compounded yearly. Approximately how much after 12 years? (Use the Rule of 72)",
    context: "The Rule of 72: years to double ‚âà 72 √∑ rate.",
    options: ["$8,000","$10,000","$12,000","$15,000"],
    correct: 1,
    explain: "72 √∑ 6 = 12 years to double. $5,000 doubles to approximately <strong>$10,000</strong>."
  },
  {
    q: "Product A: 500g for $6.99. Product B: 750g for $9.49. Which is cheaper per 100g?",
    context: "Unit pricing ‚Äî comparing value.",
    options: ["Product A ($1.40/100g)","Product B ($1.27/100g)","They're equal","Not enough info"],
    correct: 1,
    explain: "A: $6.99/5 = $1.398/100g. B: $9.49/7.5 = $1.265/100g. <strong>Product B</strong> is cheaper per 100g."
  },
  {
    q: "A room is 12ft √ó 10ft with 8ft ceilings. How many sq ft of wall need painting?",
    context: "Geometry ‚Äî perimeter and area.",
    options: ["352 sq ft","320 sq ft","240 sq ft","192 sq ft"],
    correct: 0,
    explain: "Perimeter = 2(12+10) = 44ft. Wall area = 44 √ó 8 = <strong>352 sq ft</strong>."
  },
  {
    q: "If 9 workers earn $50K and the CEO earns $5.5M, what's the average salary?",
    context: "Statistics ‚Äî mean vs. median.",
    options: ["$50,000","$100,000","$550,000","$595,000"],
    correct: 2,
    explain: "Total pay = (9 √ó $50K) + $5.5M = $6M. Mean = $6M √∑ 10 = <strong>$600K</strong>‚Ä¶ wait, let's recalculate: $450K + $5,500K = $5,950K √∑ 10 = <strong>$595K</strong>. Closest answer is $550,000, but the exact answer illustrates how a single outlier dramatically skews the mean."
  },
  {
    q: "Your investment drops 40%. What gain do you need to break even?",
    context: "Asymmetry of returns ‚Äî a financial trap.",
    options: ["40%","50%","60%","66.7%"],
    correct: 3,
    explain: "If $100 drops 40% to $60, you need to gain $40 on $60. That's 40/60 = <strong>66.7%</strong>."
  },
  {
    q: "You need to convert 100¬∞F to Celsius. What's the approximate temperature?",
    context: "Unit conversion ‚Äî Fahrenheit to Celsius.",
    options: ["32¬∞C","38¬∞C","42¬∞C","50¬∞C"],
    correct: 1,
    explain: "¬∞C = (100 ‚àí 32) √ó 5/9 = 68 √ó 5/9 ‚âà <strong>37.8¬∞C</strong>, which rounds to about 38¬∞C."
  }
];

let quizState = { current: 0, score: 0, answered: [] };

function startQuiz() {
  quizState = { current: 0, score: 0, answered: [] };
  document.getElementById('quizRestartBtn').style.display = 'none';
  renderQuiz();
}

function renderQuiz() {
  const { current } = quizState;
  const q = quizData[current];
  const letters = ['A','B','C','D'];

  // Progress
  const progress = document.getElementById('quizProgress');
  progress.innerHTML = quizData.map((_, i) => {
    let cls = '';
    if (i < current) cls = quizState.answered[i] ? 'done' : 'wrong';
    else if (i === current) cls = 'current';
    return `<div class="quiz-dot ${cls}"></div>`;
  }).join('');

  const body = document.getElementById('quizBody');
  body.innerHTML = `
    <div class="quiz-question">${current + 1}. ${q.q}</div>
    <div class="quiz-context">${q.context}</div>
    <div class="quiz-options" id="quizOptions">
      ${q.options.map((opt, i) => `
        <button class="quiz-option" onclick="answerQuiz(${i})">
          <span class="quiz-option-letter">${letters[i]}</span>
          <span>${opt}</span>
        </button>
      `).join('')}
    </div>
    <div class="quiz-explanation" id="quizExplanation"><strong>Explanation:</strong> ${q.explain}</div>
  `;

  document.getElementById('quizNextBtn').style.display = 'none';
  document.getElementById('quizScoreText').textContent = `Question ${current + 1} of ${quizData.length}`;
  document.getElementById('quizScoreBadge').textContent = `${quizState.score} / ${quizData.length}`;
}

function answerQuiz(idx) {
  const q = quizData[quizState.current];
  const options = document.querySelectorAll('#quizOptions .quiz-option');
  if (options[0].classList.contains('correct') || options[0].classList.contains('wrong')) return;

  const correct = idx === q.correct;
  if (correct) quizState.score++;
  quizState.answered[quizState.current] = correct;

  options.forEach((opt, i) => {
    opt.disabled = true;
    if (i === q.correct) opt.classList.add('correct');
    else if (i === idx && !correct) opt.classList.add('wrong');
  });

  document.getElementById('quizExplanation').classList.add('show');
  document.getElementById('quizScoreBadge').textContent = `${quizState.score} / ${quizData.length}`;

  // Update progress
  const dots = document.querySelectorAll('.quiz-dot');
  dots[quizState.current].className = `quiz-dot ${correct ? 'done' : 'wrong'}`;

  if (quizState.current < quizData.length - 1) {
    document.getElementById('quizNextBtn').style.display = 'inline-flex';
  } else {
    document.getElementById('quizScoreText').textContent = `Final Score: ${quizState.score} / ${quizData.length}`;
    document.getElementById('quizRestartBtn').style.display = 'inline-flex';
  }
}

function nextQuestion() {
  quizState.current++;
  renderQuiz();
}

startQuiz();
</script>
</body>
</html>
