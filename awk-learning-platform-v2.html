<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linux AWK Interactive Learning Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-blue: #1446A0;
            --accent-pink: #DB3069;
            --accent-yellow: #F5D547;
            --light-bg: #EBEBD3;
            --dark-gray: #3C3C3B;
            --white: #FFFFFF;
            --success: #28a745;
            --error: #dc3545;
            --code-bg: #2d3748;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--primary-blue) 0%, var(--dark-gray) 100%);
            color: var(--dark-gray);
            line-height: 1.6;
            min-height: 100vh;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: var(--dark-gray);
            color: var(--light-bg);
            padding: 30px 20px;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .awk-logo {
            display: inline-block;
            background: var(--primary-blue);
            color: var(--light-bg);
            padding: 5px 15px;
            border-radius: 5px;
            font-weight: bold;
            margin-right: 10px;
        }

        .nav-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            background: var(--light-bg);
            padding: 15px;
            border-radius: 10px;
        }

        .nav-tab {
            flex: 1;
            min-width: 130px;
            padding: 15px 20px;
            background: var(--dark-gray);
            color: var(--light-bg);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .nav-tab:hover {
            background: var(--primary-blue);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .nav-tab.active {
            background: var(--accent-pink);
            color: var(--white);
        }

        .content-section {
            display: none;
            background: var(--white);
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            animation: fadeIn 0.5s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h2 {
            color: var(--primary-blue);
            margin-bottom: 20px;
            font-size: 2em;
            border-bottom: 3px solid var(--accent-yellow);
            padding-bottom: 10px;
        }

        h3 {
            color: var(--accent-pink);
            margin: 25px 0 15px;
            font-size: 1.5em;
        }

        h4 {
            color: var(--primary-blue);
            margin: 20px 0 10px;
            font-size: 1.2em;
        }

        .lesson-card {
            background: var(--light-bg);
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 5px solid var(--accent-pink);
        }

        .code-block {
            background: var(--code-bg);
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
            line-height: 1.5;
            position: relative;
        }

        .code-block code {
            color: #e2e8f0;
        }

        .keyword {
            color: #f472b6;
            font-weight: bold;
        }

        .string {
            color: var(--accent-yellow);
        }

        .variable {
            color: #5dd9ff;
        }

        .comment {
            color: #94a3b8;
            font-style: italic;
        }

        .simulator {
            background: var(--light-bg);
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .simulator-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        .input-group {
            margin: 15px 0;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--dark-gray);
        }

        .input-group textarea,
        .input-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--primary-blue);
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            background: var(--white);
        }

        .input-group textarea {
            min-height: 100px;
            resize: vertical;
        }

        .btn {
            padding: 12px 30px;
            background: var(--primary-blue);
            color: var(--white);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .btn:hover {
            background: var(--accent-pink);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .btn-success {
            background: var(--success);
        }

        .btn-success:hover {
            background: #218838;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9em;
        }

        .output {
            background: var(--code-bg);
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            min-height: 60px;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }

        .quiz-question {
            background: var(--light-bg);
            padding: 25px;
            margin: 20px 0;
            border-radius: 8px;
            border-left: 5px solid var(--primary-blue);
        }

        .quiz-options {
            margin: 15px 0;
        }

        .quiz-option {
            display: block;
            padding: 12px;
            margin: 10px 0;
            background: var(--white);
            border: 2px solid var(--primary-blue);
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quiz-option:hover {
            background: var(--accent-yellow);
            border-color: var(--accent-pink);
        }

        .quiz-option input[type="radio"] {
            margin-right: 10px;
        }

        .result {
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            font-weight: 600;
        }

        .result.success {
            background: #d4edda;
            color: #155724;
            border: 2px solid var(--success);
        }

        .result.error {
            background: #f8d7da;
            color: #721c24;
            border: 2px solid var(--error);
        }

        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .example-card {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 8px;
            border-top: 4px solid var(--accent-pink);
        }

        .example-card h4 {
            color: var(--primary-blue);
            margin-bottom: 10px;
        }

        .info-box {
            background: #d1ecf1;
            border-left: 4px solid #0c5460;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            color: #0c5460;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #856404;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            color: #856404;
        }

        .tip-box {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            color: #155724;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background: var(--white);
        }

        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid var(--light-bg);
        }

        th {
            background: var(--primary-blue);
            color: var(--white);
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: var(--light-bg);
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background: var(--light-bg);
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-pink), var(--primary-blue));
            width: 0%;
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-weight: 600;
        }

        .cheatsheet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .cheatsheet-section {
            background: var(--light-bg);
            padding: 20px;
            border-radius: 8px;
            border-top: 3px solid var(--accent-pink);
        }

        .cheatsheet-section h4 {
            color: var(--accent-pink);
            margin-bottom: 15px;
        }

        .cheatsheet-item {
            background: var(--white);
            padding: 10px;
            margin: 8px 0;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .interactive-demo {
            background: var(--white);
            padding: 20px;
            border-radius: 8px;
            border: 2px solid var(--primary-blue);
            margin: 20px 0;
        }

        footer {
            text-align: center;
            padding: 20px;
            color: var(--light-bg);
            margin-top: 30px;
        }

        @media (max-width: 768px) {
            header h1 {
                font-size: 1.8em;
            }

            .nav-tab {
                min-width: 100%;
            }

            .example-grid,
            .cheatsheet-grid {
                grid-template-columns: 1fr;
            }

            .simulator-grid {
                grid-template-columns: 1fr;
            }
        }

        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
            margin: 5px;
        }

        .badge-beginner {
            background: var(--success);
            color: white;
        }

        .badge-intermediate {
            background: var(--accent-yellow);
            color: var(--dark-gray);
        }

        .badge-advanced {
            background: var(--accent-pink);
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><span class="awk-logo">AWK</span>Interactive Learning Platform</h1>
            <p>Master the powerful AWK text processing language</p>
        </header>

        <div class="nav-tabs">
            <button class="nav-tab active" onclick="showSection('overview')">Overview</button>
            <button class="nav-tab" onclick="showSection('lessons')">Lessons</button>
            <button class="nav-tab" onclick="showSection('examples')">Examples</button>
            <button class="nav-tab" onclick="showSection('cheatsheet')">Cheat Sheet</button>
            <button class="nav-tab" onclick="showSection('simulator')">Simulator</button>
            <button class="nav-tab" onclick="showSection('challenges')">Challenges</button>
            <button class="nav-tab" onclick="showSection('assessment')">Assessment</button>
        </div>

        <!-- Overview Section -->
        <div id="overview" class="content-section active">
            <h2>What is AWK?</h2>
            <div class="lesson-card">
                <p><strong>AWK</strong> is a powerful text-processing programming language named after its creators: Alfred Aho, Peter Weinberger, and Brian Kernighan. It's designed for pattern scanning and processing, making it ideal for data extraction and reporting.</p>
            </div>

            <h3>Key Features</h3>
            <div class="example-grid">
                <div class="example-card">
                    <h4>🔍 Pattern Matching</h4>
                    <p>Search and match patterns in text files efficiently with powerful regular expressions</p>
                </div>
                <div class="example-card">
                    <h4>📊 Field Processing</h4>
                    <p>Automatically split records into fields for easy manipulation and analysis</p>
                </div>
                <div class="example-card">
                    <h4>💻 Built-in Functions</h4>
                    <p>Rich set of functions for string manipulation, math operations, and more</p>
                </div>
                <div class="example-card">
                    <h4>⚡ Fast Processing</h4>
                    <p>Efficiently process large files with minimal code and maximum speed</p>
                </div>
            </div>

            <h3>Basic Syntax</h3>
            <div class="code-block">
<code><span class="keyword">awk</span> <span class="string">'pattern { action }'</span> filename</code>
            </div>

            <div class="info-box">
                <strong>💡 Did you know?</strong> AWK processes text line by line, automatically splitting each line into fields separated by whitespace (or a delimiter you specify). This makes it perfect for processing structured text data like CSV files, log files, and system outputs.
            </div>

            <h3>Common Use Cases</h3>
            <div class="example-grid">
                <div class="example-card">
                    <h4>📋 Log File Analysis</h4>
                    <p>Extract errors, count occurrences, and generate reports from system logs</p>
                </div>
                <div class="example-card">
                    <h4>📊 Data Transformation</h4>
                    <p>Convert data formats, extract columns, and restructure text files</p>
                </div>
                <div class="example-card">
                    <h4>🧮 Quick Calculations</h4>
                    <p>Sum columns, calculate averages, and perform statistical analysis</p>
                </div>
                <div class="example-card">
                    <h4>📄 Report Generation</h4>
                    <p>Create formatted reports from CSV files and database exports</p>
                </div>
            </div>

            <h3>Why Learn AWK?</h3>
            <div class="lesson-card">
                <ul style="margin-left: 20px;">
                    <li><strong>Universal:</strong> Available on virtually every Unix/Linux system</li>
                    <li><strong>Concise:</strong> Accomplish complex tasks with just a few lines of code</li>
                    <li><strong>Fast:</strong> Process millions of lines efficiently</li>
                    <li><strong>Powerful:</strong> Combines the best of sed, grep, and shell scripting</li>
                    <li><strong>Essential:</strong> A fundamental tool for system administrators and developers</li>
                </ul>
            </div>
        </div>

        <!-- Lessons Section -->
        <div id="lessons" class="content-section">
            <h2>AWK Lessons</h2>
            
            <div class="lesson-card">
                <h3>Lesson 1: AWK Program Structure <span class="badge badge-beginner">Beginner</span></h3>
                <p>AWK programs consist of patterns and actions. The basic structure is:</p>
                <div class="code-block">
<code><span class="keyword">awk</span> <span class="string">'BEGIN { action } pattern { action } END { action }'</span> file</code>
                </div>
                <p><strong>Key Components:</strong></p>
                <ul style="margin-left: 20px;">
                    <li><strong>BEGIN:</strong> Executed once before processing any input lines</li>
                    <li><strong>Pattern-Action:</strong> Executed for each line that matches the pattern</li>
                    <li><strong>END:</strong> Executed once after all input has been processed</li>
                </ul>
                <div class="tip-box">
                    <strong>💡 Pro Tip:</strong> Use BEGIN for initialization (setting variables, printing headers) and END for final calculations (totals, averages, summaries).
                </div>
            </div>

            <div class="lesson-card">
                <h3>Lesson 2: Built-in Variables <span class="badge badge-beginner">Beginner</span></h3>
                <table>
                    <thead>
                        <tr>
                            <th>Variable</th>
                            <th>Description</th>
                            <th>Example Value</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>$0</code></td>
                            <td>The entire current record/line</td>
                            <td>"John 25 100"</td>
                        </tr>
                        <tr>
                            <td><code>$1, $2, $3...</code></td>
                            <td>First, second, third field</td>
                            <td>$1="John", $2="25"</td>
                        </tr>
                        <tr>
                            <td><code>NF</code></td>
                            <td>Number of fields in current record</td>
                            <td>3</td>
                        </tr>
                        <tr>
                            <td><code>NR</code></td>
                            <td>Number of records (line number)</td>
                            <td>42</td>
                        </tr>
                        <tr>
                            <td><code>FS</code></td>
                            <td>Field separator (input)</td>
                            <td>" " or ","</td>
                        </tr>
                        <tr>
                            <td><code>OFS</code></td>
                            <td>Output field separator</td>
                            <td>" " (default)</td>
                        </tr>
                        <tr>
                            <td><code>RS</code></td>
                            <td>Record separator (input)</td>
                            <td>"\n" (newline)</td>
                        </tr>
                        <tr>
                            <td><code>ORS</code></td>
                            <td>Output record separator</td>
                            <td>"\n" (newline)</td>
                        </tr>
                        <tr>
                            <td><code>FILENAME</code></td>
                            <td>Name of current input file</td>
                            <td>"data.txt"</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="lesson-card">
                <h3>Lesson 3: Operators <span class="badge badge-beginner">Beginner</span></h3>
                <h4>Arithmetic Operators</h4>
                <div class="code-block">
<code><span class="comment"># Addition, Subtraction, Multiplication, Division</span>
<span class="keyword">awk</span> <span class="string">'{ print $1 + $2, $1 - $2, $1 * $2, $1 / $2 }'</span>

<span class="comment"># Modulo, Exponentiation</span>
<span class="keyword">awk</span> <span class="string">'{ print $1 % $2, $1 ^ $2 }'</span>

<span class="comment"># Increment/Decrement</span>
<span class="keyword">awk</span> <span class="string">'{ count++; print count }'</span></code>
                </div>

                <h4>Comparison Operators</h4>
                <div class="code-block">
<code><span class="comment"># == (Equal), != (Not equal)</span>
<span class="comment"># > (Greater), < (Less)</span>
<span class="comment"># >= (Greater or equal), <= (Less or equal)</span>
<span class="keyword">awk</span> <span class="string">'$3 > 100 { print $1, "scored high" }'</span></code>
                </div>

                <h4>Logical Operators</h4>
                <div class="code-block">
<code><span class="comment"># && (AND), || (OR), ! (NOT)</span>
<span class="keyword">awk</span> <span class="string">'$2 > 50 && $3 < 100 { print $0 }'</span>
<span class="keyword">awk</span> <span class="string">'$1 == "ERROR" || $1 == "FATAL" { print }'</span></code>
                </div>
            </div>

            <div class="lesson-card">
                <h3>Lesson 4: Pattern Matching <span class="badge badge-intermediate">Intermediate</span></h3>
                <div class="code-block">
<code><span class="comment"># Match lines containing "error"</span>
<span class="keyword">awk</span> <span class="string">'/error/ { print NR, $0 }'</span>

<span class="comment"># Match lines starting with "ERROR"</span>
<span class="keyword">awk</span> <span class="string">'/^ERROR/ { print $0 }'</span>

<span class="comment"># Match lines ending with a number</span>
<span class="keyword">awk</span> <span class="string">'/[0-9]$/ { print $0 }'</span>

<span class="comment"># Case-insensitive match (IGNORECASE variable)</span>
<span class="keyword">awk</span> <span class="string">'BEGIN{IGNORECASE=1} /error/ { print }'</span>

<span class="comment"># Match specific field</span>
<span class="keyword">awk</span> <span class="string">'$2 ~ /^[A-Z]/ { print "Field 2 starts with uppercase" }'</span></code>
                </div>
            </div>

            <div class="lesson-card">
                <h3>Lesson 5: String Functions <span class="badge badge-intermediate">Intermediate</span></h3>
                <table>
                    <thead>
                        <tr>
                            <th>Function</th>
                            <th>Description</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>length(s)</code></td>
                            <td>Length of string</td>
                            <td>length("hello") = 5</td>
                        </tr>
                        <tr>
                            <td><code>substr(s, start, len)</code></td>
                            <td>Extract substring</td>
                            <td>substr("hello", 2, 3) = "ell"</td>
                        </tr>
                        <tr>
                            <td><code>toupper(s)</code></td>
                            <td>Convert to uppercase</td>
                            <td>toupper("hello") = "HELLO"</td>
                        </tr>
                        <tr>
                            <td><code>tolower(s)</code></td>
                            <td>Convert to lowercase</td>
                            <td>tolower("HELLO") = "hello"</td>
                        </tr>
                        <tr>
                            <td><code>split(s, arr, sep)</code></td>
                            <td>Split string into array</td>
                            <td>split("a:b:c", arr, ":")</td>
                        </tr>
                        <tr>
                            <td><code>gsub(regex, rep, str)</code></td>
                            <td>Global substitution</td>
                            <td>gsub(/a/, "X", $0)</td>
                        </tr>
                        <tr>
                            <td><code>sub(regex, rep, str)</code></td>
                            <td>First substitution</td>
                            <td>sub(/a/, "X", $0)</td>
                        </tr>
                        <tr>
                            <td><code>index(s, t)</code></td>
                            <td>Position of substring</td>
                            <td>index("hello", "ll") = 3</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="lesson-card">
                <h3>Lesson 6: Arrays <span class="badge badge-advanced">Advanced</span></h3>
                <p>AWK uses associative arrays (like hash maps or dictionaries):</p>
                <div class="code-block">
<code><span class="comment"># Count occurrences</span>
<span class="keyword">awk</span> <span class="string">'{ count[$1]++ } END { for (item in count) print item, count[item] }'</span>

<span class="comment"># Store values by key</span>
<span class="keyword">awk</span> <span class="string">'{ scores[$1] = $2 } END { print "John:", scores["John"] }'</span>

<span class="comment"># Multi-dimensional arrays (simulated)</span>
<span class="keyword">awk</span> <span class="string">'{ arr[$1,$2] = $3 }'</span>

<span class="comment"># Delete array element</span>
<span class="keyword">awk</span> <span class="string">'{ delete arr[$1] }'</span></code>
                </div>
            </div>

            <div class="lesson-card">
                <h3>Lesson 7: Control Structures <span class="badge badge-intermediate">Intermediate</span></h3>
                <div class="code-block">
<code><span class="comment"># IF-ELSE</span>
<span class="keyword">awk</span> <span class="string">'{ if ($3 > 100) print "High"; else print "Low" }'</span>

<span class="comment"># FOR loop</span>
<span class="keyword">awk</span> <span class="string">'BEGIN { for (i=1; i<=5; i++) print i }'</span>

<span class="comment"># WHILE loop</span>
<span class="keyword">awk</span> <span class="string">'{ i=1; while (i <= NF) { print $i; i++ } }'</span>

<span class="comment"># DO-WHILE loop</span>
<span class="keyword">awk</span> <span class="string">'{ i=1; do { print $i; i++ } while (i <= NF) }'</span></code>
                </div>
            </div>
        </div>

        <!-- Examples Section -->
        <div id="examples" class="content-section">
            <h2>Practical Examples</h2>

            <div class="example-grid">
                <div class="example-card">
                    <h4>Example 1: Print Specific Columns</h4>
                    <span class="badge badge-beginner">Beginner</span>
                    <p>Print the first and third columns:</p>
                    <div class="code-block">
<code><span class="keyword">awk</span> <span class="string">'{ print $1, $3 }'</span> data.txt</code>
                    </div>
                </div>

                <div class="example-card">
                    <h4>Example 2: Sum a Column</h4>
                    <span class="badge badge-beginner">Beginner</span>
                    <p>Calculate sum of second column:</p>
                    <div class="code-block">
<code><span class="keyword">awk</span> <span class="string">'{ sum += $2 } END { print "Total:", sum }'</span> numbers.txt</code>
                    </div>
                </div>

                <div class="example-card">
                    <h4>Example 3: Filter Lines</h4>
                    <span class="badge badge-beginner">Beginner</span>
                    <p>Print lines where column 3 > 100:</p>
                    <div class="code-block">
<code><span class="keyword">awk</span> <span class="string">'$3 > 100 { print $0 }'</span> data.txt</code>
                    </div>
                </div>

                <div class="example-card">
                    <h4>Example 4: Calculate Average</h4>
                    <span class="badge badge-intermediate">Intermediate</span>
                    <p>Average of column 2:</p>
                    <div class="code-block">
<code><span class="keyword">awk</span> <span class="string">'{ sum += $2; n++ } END { print sum/n }'</span> data.txt</code>
                    </div>
                </div>

                <div class="example-card">
                    <h4>Example 5: CSV Processing</h4>
                    <span class="badge badge-beginner">Beginner</span>
                    <p>Process CSV with comma separator:</p>
                    <div class="code-block">
<code><span class="keyword">awk</span> <span class="string">-F','</span> <span class="string">'{ print $1, $3 }'</span> data.csv</code>
                    </div>
                </div>

                <div class="example-card">
                    <h4>Example 6: Find and Print</h4>
                    <span class="badge badge-beginner">Beginner</span>
                    <p>Lines with "ERROR" and line numbers:</p>
                    <div class="code-block">
<code><span class="keyword">awk</span> <span class="string">'/ERROR/ { print NR":", $0 }'</span> log.txt</code>
                    </div>
                </div>

                <div class="example-card">
                    <h4>Example 7: Count Occurrences</h4>
                    <span class="badge badge-intermediate">Intermediate</span>
                    <p>Count unique values in column 1:</p>
                    <div class="code-block">
<code><span class="keyword">awk</span> <span class="string">'{ count[$1]++ } END { for (i in count) print i, count[i] }'</span></code>
                    </div>
                </div>

                <div class="example-card">
                    <h4>Example 8: Print Range of Lines</h4>
                    <span class="badge badge-beginner">Beginner</span>
                    <p>Print lines 5 through 10:</p>
                    <div class="code-block">
<code><span class="keyword">awk</span> <span class="string">'NR >= 5 && NR <= 10'</span> file.txt</code>
                    </div>
                </div>

                <div class="example-card">
                    <h4>Example 9: Remove Duplicates</h4>
                    <span class="badge badge-advanced">Advanced</span>
                    <p>Print unique lines (first occurrence):</p>
                    <div class="code-block">
<code><span class="keyword">awk</span> <span class="string">'!seen[$0]++'</span> data.txt</code>
                    </div>
                </div>

                <div class="example-card">
                    <h4>Example 10: Format Output</h4>
                    <span class="badge badge-intermediate">Intermediate</span>
                    <p>Format with printf:</p>
                    <div class="code-block">
<code><span class="keyword">awk</span> <span class="string">'{ printf "%-10s %5d\n", $1, $2 }'</span> data.txt</code>
                    </div>
                </div>

                <div class="example-card">
                    <h4>Example 11: Find Min/Max</h4>
                    <span class="badge badge-intermediate">Intermediate</span>
                    <p>Find minimum and maximum values:</p>
                    <div class="code-block">
<code><span class="keyword">awk</span> <span class="string">'NR==1{min=max=$1} $1<min{min=$1} $1>max{max=$1} END{print min,max}'</span></code>
                    </div>
                </div>

                <div class="example-card">
                    <h4>Example 12: Multiple Delimiters</h4>
                    <span class="badge badge-advanced">Advanced</span>
                    <p>Split on comma or semicolon:</p>
                    <div class="code-block">
<code><span class="keyword">awk</span> <span class="string">-F'[,;]'</span> <span class="string">'{ print $1, $2 }'</span> data.txt</code>
                    </div>
                </div>
            </div>
        </div>

        <!-- Cheat Sheet Section -->
        <div id="cheatsheet" class="content-section">
            <h2>AWK Quick Reference Cheat Sheet</h2>

            <div class="cheatsheet-grid">
                <div class="cheatsheet-section">
                    <h4>Basic Syntax</h4>
                    <div class="cheatsheet-item">awk 'pattern { action }' file</div>
                    <div class="cheatsheet-item">awk -F':' '{ print $1 }' file</div>
                    <div class="cheatsheet-item">awk 'BEGIN { } { } END { }' file</div>
                </div>

                <div class="cheatsheet-section">
                    <h4>Built-in Variables</h4>
                    <div class="cheatsheet-item">$0 - Entire line</div>
                    <div class="cheatsheet-item">$1, $2, $n - Field n</div>
                    <div class="cheatsheet-item">NF - Number of fields</div>
                    <div class="cheatsheet-item">NR - Record number</div>
                    <div class="cheatsheet-item">FS - Field separator</div>
                    <div class="cheatsheet-item">OFS - Output field separator</div>
                    <div class="cheatsheet-item">FILENAME - Current filename</div>
                </div>

                <div class="cheatsheet-section">
                    <h4>Operators</h4>
                    <div class="cheatsheet-item">+, -, *, /, % - Arithmetic</div>
                    <div class="cheatsheet-item">==, !=, <, >, <=, >= - Comparison</div>
                    <div class="cheatsheet-item">&&, ||, ! - Logical</div>
                    <div class="cheatsheet-item">~ - Match</div>
                    <div class="cheatsheet-item">!~ - Not match</div>
                    <div class="cheatsheet-item">++ - Increment</div>
                </div>

                <div class="cheatsheet-section">
                    <h4>String Functions</h4>
                    <div class="cheatsheet-item">length(s)</div>
                    <div class="cheatsheet-item">substr(s, pos, len)</div>
                    <div class="cheatsheet-item">toupper(s) / tolower(s)</div>
                    <div class="cheatsheet-item">split(s, arr, sep)</div>
                    <div class="cheatsheet-item">gsub(r, s) - Global replace</div>
                    <div class="cheatsheet-item">sub(r, s) - First replace</div>
                    <div class="cheatsheet-item">index(s, t) - Find position</div>
                </div>

                <div class="cheatsheet-section">
                    <h4>Math Functions</h4>
                    <div class="cheatsheet-item">sqrt(x)</div>
                    <div class="cheatsheet-item">sin(x), cos(x), atan2(y,x)</div>
                    <div class="cheatsheet-item">log(x), exp(x)</div>
                    <div class="cheatsheet-item">int(x)</div>
                    <div class="cheatsheet-item">rand() - Random [0,1)</div>
                    <div class="cheatsheet-item">srand(x) - Seed random</div>
                </div>

                <div class="cheatsheet-section">
                    <h4>Patterns</h4>
                    <div class="cheatsheet-item">/regex/ - Match pattern</div>
                    <div class="cheatsheet-item">$1 ~ /regex/ - Field matches</div>
                    <div class="cheatsheet-item">$1 !~ /regex/ - Not matches</div>
                    <div class="cheatsheet-item">NR==5 - Line number 5</div>
                    <div class="cheatsheet-item">NR>=5 && NR<=10 - Range</div>
                    <div class="cheatsheet-item">/start/,/end/ - Range pattern</div>
                </div>

                <div class="cheatsheet-section">
                    <h4>Common Patterns</h4>
                    <div class="cheatsheet-item">Print column: { print $1 }</div>
                    <div class="cheatsheet-item">Sum column: { s+=$1 } END{print s}</div>
                    <div class="cheatsheet-item">Count lines: END { print NR }</div>
                    <div class="cheatsheet-item">Unique lines: !seen[$0]++</div>
                    <div class="cheatsheet-item">Filter: $3 > 100</div>
                </div>

                <div class="cheatsheet-section">
                    <h4>Arrays</h4>
                    <div class="cheatsheet-item">arr[key] = value</div>
                    <div class="cheatsheet-item">for (i in arr) print i, arr[i]</div>
                    <div class="cheatsheet-item">delete arr[key]</div>
                    <div class="cheatsheet-item">if (key in arr)</div>
                    <div class="cheatsheet-item">split(s, arr, sep)</div>
                </div>

                <div class="cheatsheet-section">
                    <h4>Control Flow</h4>
                    <div class="cheatsheet-item">if (cond) { } else { }</div>
                    <div class="cheatsheet-item">for (i=1; i<=n; i++) { }</div>
                    <div class="cheatsheet-item">while (cond) { }</div>
                    <div class="cheatsheet-item">do { } while (cond)</div>
                    <div class="cheatsheet-item">break, continue</div>
                    <div class="cheatsheet-item">next - Skip to next line</div>
                </div>

                <div class="cheatsheet-section">
                    <h4>Output</h4>
                    <div class="cheatsheet-item">print $1, $2</div>
                    <div class="cheatsheet-item">printf "%s %d\n", $1, $2</div>
                    <div class="cheatsheet-item">print $1 > "file.txt"</div>
                    <div class="cheatsheet-item">print $1 >> "file.txt"</div>
                    <div class="cheatsheet-item">print $1 | "sort"</div>
                </div>
            </div>

            <div class="info-box">
                <strong>📖 Quick Tips:</strong>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>Use <code>-F</code> to set field separator: <code>awk -F',' '...'</code></li>
                    <li>Use <code>-v</code> to pass variables: <code>awk -v name=value '...'</code></li>
                    <li>Print entire line with conditions: <code>awk '$3 > 100'</code> (action defaults to print)</li>
                    <li>Multiple patterns: <code>awk '/pattern1/ || /pattern2/'</code></li>
                    <li>Negation: <code>awk '!/pattern/'</code> excludes matching lines</li>
                </ul>
            </div>
        </div>

        <!-- Simulator Section -->
        <div id="simulator" class="content-section">
            <h2>AWK Command Simulator</h2>
            <p>Try AWK commands on sample data in real-time!</p>

            <div class="simulator">
                <div class="input-group">
                    <label for="sampleData">Sample Data (each line is a record):</label>
                    <textarea id="sampleData" rows="10">John 25 100
Jane 30 150
Bob 22 120
Alice 28 180
Charlie 35 90
Diana 27 200
Eve 24 110
Frank 29 95
Grace 26 175</textarea>
                </div>

                <div class="input-group">
                    <label for="awkCommand">AWK Command (without 'awk' and filename):</label>
                    <input type="text" id="awkCommand" placeholder="Example: '{ print $1, $3 }'" value="{ print $1, $3 }">
                </div>

                <div class="input-group">
                    <label for="fieldSeparator">Field Separator (leave empty for whitespace):</label>
                    <input type="text" id="fieldSeparator" placeholder="Examples: , (comma), : (colon), | (pipe)">
                </div>

                <button class="btn" onclick="runSimulation()">▶ Run AWK Command</button>
                <button class="btn" onclick="loadExample(1)">Example: Print Columns</button>
                <button class="btn" onclick="loadExample(2)">Example: Sum Column</button>
                <button class="btn" onclick="loadExample(3)">Example: Filter</button>
                <button class="btn" onclick="loadExample(4)">Example: Average</button>
                <button class="btn" onclick="loadExample(5)">Example: Count</button>

                <div class="output" id="simulatorOutput">Output will appear here...</div>
            </div>

            <div class="info-box">
                <strong>💡 Simulator Tips:</strong>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li><strong>Fields:</strong> Use $1, $2, $3 to reference columns (fields)</li>
                    <li><strong>Line number:</strong> NR represents the current line number</li>
                    <li><strong>Field count:</strong> NF represents the number of fields in the current line</li>
                    <li><strong>Entire line:</strong> $0 represents the complete line</li>
                    <li><strong>Variables:</strong> You can use variables like: { sum += $3 } END { print sum }</li>
                    <li><strong>Conditions:</strong> Filter with conditions: $3 > 100 { print $1 }</li>
                </ul>
            </div>
        </div>

        <!-- Challenges Section -->
        <div id="challenges" class="content-section">
            <h2>AWK Challenges</h2>
            <p>Test your skills with these hands-on challenges!</p>

            <div class="lesson-card">
                <h3>Challenge 1: Sales Report <span class="badge badge-beginner">Beginner</span></h3>
                <p>Given sales data with format: <code>Name Product Amount</code></p>
                <p><strong>Task:</strong> Calculate the total sales amount.</p>
                <div class="interactive-demo">
                    <p><strong>Sample Data:</strong></p>
                    <div class="code-block">
<code>John Laptop 1200
Jane Phone 800
Bob Tablet 450
Alice Laptop 1200
Charlie Phone 750</code>
                    </div>
                    <p><strong>Expected Output:</strong> Total Sales: 4400</p>
                    <button class="btn btn-small" onclick="loadChallenge(1)">Load in Simulator</button>
                </div>
            </div>

            <div class="lesson-card">
                <h3>Challenge 2: Grade Calculator <span class="badge badge-intermediate">Intermediate</span></h3>
                <p>Given student scores: <code>Name Score</code></p>
                <p><strong>Task:</strong> Calculate average score and count students scoring above 25.</p>
                <div class="interactive-demo">
                    <p><strong>Sample Data:</strong></p>
                    <div class="code-block">
<code>John 28
Jane 32
Bob 22
Alice 29
Charlie 24</code>
                    </div>
                    <p><strong>Expected Output:</strong></p>
                    <p>Average: 27</p>
                    <p>Above 25: 3 students</p>
                    <button class="btn btn-small" onclick="loadChallenge(2)">Load in Simulator</button>
                </div>
            </div>

            <div class="lesson-card">
                <h3>Challenge 3: Log Analysis <span class="badge badge-intermediate">Intermediate</span></h3>
                <p>Given log entries: <code>Level Message</code></p>
                <p><strong>Task:</strong> Count ERROR and WARNING messages separately.</p>
                <div class="interactive-demo">
                    <p><strong>Sample Data:</strong></p>
                    <div class="code-block">
<code>INFO System started
ERROR Connection failed
WARNING Low memory
INFO User logged in
ERROR Disk full
WARNING High CPU
INFO Task completed</code>
                    </div>
                    <p><strong>Expected Output:</strong></p>
                    <p>ERROR: 2</p>
                    <p>WARNING: 2</p>
                    <button class="btn btn-small" onclick="loadChallenge(3)">Load in Simulator</button>
                </div>
            </div>

            <div class="lesson-card">
                <h3>Challenge 4: Top Scores <span class="badge badge-advanced">Advanced</span></h3>
                <p>Given: <code>Name Score</code></p>
                <p><strong>Task:</strong> Find and print the person with the highest score.</p>
                <div class="interactive-demo">
                    <p><strong>Hint:</strong> Track max score and corresponding name in variables.</p>
                    <button class="btn btn-small" onclick="loadChallenge(4)">Load in Simulator</button>
                </div>
            </div>
        </div>

        <!-- Assessment Section -->
        <div id="assessment" class="content-section">
            <h2>AWK Knowledge Assessment</h2>
            <p>Test your AWK mastery with these questions:</p>

            <div class="progress-bar">
                <div class="progress-fill" id="progressBar">0%</div>
            </div>

            <div class="quiz-question">
                <h3>Question 1</h3>
                <p>What does the variable <code>NR</code> represent in AWK?</p>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="q1" value="a">
                        Number of fields in the current record
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q1" value="b">
                        Number of records processed so far (line number)
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q1" value="c">
                        Name of the current record
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q1" value="d">
                        Next record to process
                    </label>
                </div>
                <div id="result1" class="result" style="display:none;"></div>
            </div>

            <div class="quiz-question">
                <h3>Question 2</h3>
                <p>Which AWK command prints only the first and third columns with proper spacing?</p>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="q2" value="a">
                        awk '{ print $1 $3 }' file.txt
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q2" value="b">
                        awk '{ print $1, $3 }' file.txt
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q2" value="c">
                        awk '{ print 1, 3 }' file.txt
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q2" value="d">
                        awk '{ show $1 $3 }' file.txt
                    </label>
                </div>
                <div id="result2" class="result" style="display:none;"></div>
            </div>

            <div class="quiz-question">
                <h3>Question 3</h3>
                <p>What does <code>$0</code> represent in AWK?</p>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="q3" value="a">
                        The first field
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q3" value="b">
                        Zero value or null
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q3" value="c">
                        The entire current line/record
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q3" value="d">
                        The last field
                    </label>
                </div>
                <div id="result3" class="result" style="display:none;"></div>
            </div>

            <div class="quiz-question">
                <h3>Question 4</h3>
                <p>How do you specify a comma as the field separator in AWK?</p>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="q4" value="a">
                        awk -S',' '{ print $1 }' file.csv
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q4" value="b">
                        awk -F',' '{ print $1 }' file.csv
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q4" value="c">
                        awk -D',' '{ print $1 }' file.csv
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q4" value="d">
                        awk --sep=',' '{ print $1 }' file.csv
                    </label>
                </div>
                <div id="result4" class="result" style="display:none;"></div>
            </div>

            <div class="quiz-question">
                <h3>Question 5</h3>
                <p>What does this AWK command do? <code>awk '{ sum += $2 } END { print sum }'</code></p>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="q5" value="a">
                        Prints all values in column 2
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q5" value="b">
                        Calculates and prints the sum of all values in column 2
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q5" value="c">
                        Counts the number of lines
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q5" value="d">
                        Prints the average of column 2
                    </label>
                </div>
                <div id="result5" class="result" style="display:none;"></div>
            </div>

            <div class="quiz-question">
                <h3>Question 6</h3>
                <p>Which command prints lines where the third column is greater than 100?</p>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="q6" value="a">
                        awk '$3 > 100' file.txt
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q6" value="b">
                        awk '{ if $3 > 100 }' file.txt
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q6" value="c">
                        awk 'print $3 > 100' file.txt
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q6" value="d">
                        awk '$3 greater 100' file.txt
                    </label>
                </div>
                <div id="result6" class="result" style="display:none;"></div>
            </div>

            <div class="quiz-question">
                <h3>Question 7</h3>
                <p>What is the purpose of the <code>BEGIN</code> block in AWK?</p>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="q7" value="a">
                        Executed for each line of input
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q7" value="b">
                        Executed once before processing any input
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q7" value="c">
                        Executed at the end of processing
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q7" value="d">
                        Marks the beginning of a function
                    </label>
                </div>
                <div id="result7" class="result" style="display:none;"></div>
            </div>

            <div class="quiz-question">
                <h3>Question 8</h3>
                <p>How do you print unique lines (removing duplicates) in AWK?</p>
                <div class="quiz-options">
                    <label class="quiz-option">
                        <input type="radio" name="q8" value="a">
                        awk '!seen[$0]++' file.txt
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q8" value="b">
                        awk 'unique($0)' file.txt
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q8" value="c">
                        awk '{ delete $0 }' file.txt
                    </label>
                    <label class="quiz-option">
                        <input type="radio" name="q8" value="d">
                        awk 'NR==1' file.txt
                    </label>
                </div>
                <div id="result8" class="result" style="display:none;"></div>
            </div>

            <button class="btn btn-success" onclick="checkAnswers()">Submit Answers</button>
            <button class="btn" onclick="resetQuiz()">Reset Quiz</button>

            <div id="finalScore" class="result" style="display:none; margin-top: 20px;"></div>
        </div>

        <footer>
            <p>© 2024 Linux AWK Learning Platform | Master text processing with AWK</p>
            <p style="margin-top: 10px; font-size: 0.9em;">Powered by the sysxplore.com learning methodology</p>
        </footer>
    </div>

    <script>
        // Section Navigation
        function showSection(sectionId) {
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => section.classList.remove('active'));

            const tabs = document.querySelectorAll('.nav-tab');
            tabs.forEach(tab => tab.classList.remove('active'));

            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');

            // Scroll to top of content
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Improved AWK Simulator
        function runSimulation() {
            const data = document.getElementById('sampleData').value;
            const command = document.getElementById('awkCommand').value.trim();
            const fieldSep = document.getElementById('fieldSeparator').value;
            const output = document.getElementById('simulatorOutput');

            if (!command) {
                output.textContent = 'Error: Please enter an AWK command';
                return;
            }

            try {
                const lines = data.split('\n').filter(line => line.trim() !== '');
                const result = processAwkCommand(command, lines, fieldSep);
                output.textContent = result || '(no output)';
            } catch (error) {
                output.textContent = 'Error: ' + error.message;
            }
        }

        function processAwkCommand(command, lines, fieldSep) {
            // Parse AWK command structure
            const beginMatch = command.match(/BEGIN\s*{([^}]*)}/);
            const endMatch = command.match(/END\s*{([^}]*)}/);
            
            let beginBlock = beginMatch ? beginMatch[1].trim() : '';
            let endBlock = endMatch ? endMatch[1].trim() : '';
            let mainBlock = command
                .replace(/BEGIN\s*{[^}]*}/, '')
                .replace(/END\s*{[^}]*}/, '')
                .trim();

            // Global variables that persist across lines
            const variables = {};
            let result = [];

            // Execute BEGIN block
            if (beginBlock) {
                const beginOutput = executeBlock(beginBlock, [], 0, variables, fieldSep);
                if (beginOutput) result.push(beginOutput);
            }

            // Process each line
            lines.forEach((line, index) => {
                const separator = fieldSep || /\s+/;
                const fields = line.split(separator).filter(f => f !== '');
                
                const lineOutput = executeBlock(mainBlock, fields, index + 1, variables, fieldSep);
                if (lineOutput) result.push(lineOutput);
            });

            // Execute END block
            if (endBlock) {
                const endOutput = executeBlock(endBlock, [], lines.length, variables, fieldSep);
                if (endOutput) result.push(endOutput);
            }

            return result.join('\n');
        }

        function executeBlock(block, fields, lineNum, vars, fieldSep) {
            if (!block) return '';

            // Remove outer braces if present
            block = block.replace(/^\s*{\s*/, '').replace(/\s*}\s*$/, '').trim();

            // Check for pattern-action structure
            const patternActionMatch = block.match(/^(.+?)\s*{\s*(.+)\s*}$/);
            if (patternActionMatch) {
                const pattern = patternActionMatch[1].trim();
                const action = patternActionMatch[2].trim();
                
                if (!evaluatePattern(pattern, fields, lineNum, vars)) {
                    return '';
                }
                block = action;
            }

            // Handle variable assignments (e.g., sum += $2, count++)
            block = block.replace(/(\w+)\s*\+=\s*([^\s;]+)/g, (match, varName, expr) => {
                const value = evaluateExpression(expr, fields, lineNum, vars);
                vars[varName] = (vars[varName] || 0) + value;
                return '';
            });

            block = block.replace(/(\w+)\s*=\s*([^\s;]+)/g, (match, varName, expr) => {
                vars[varName] = evaluateExpression(expr, fields, lineNum, vars);
                return '';
            });

            // Handle increment/decrement
            block = block.replace(/(\w+)\+\+/g, (match, varName) => {
                vars[varName] = (vars[varName] || 0) + 1;
                return '';
            });

            block = block.replace(/(\w+)--/g, (match, varName) => {
                vars[varName] = (vars[varName] || 0) - 1;
                return '';
            });

            // Handle print statements
            if (block.includes('print')) {
                return executePrint(block, fields, lineNum, vars);
            }

            // If just a pattern (no explicit action), default is to print
            if (block && !block.includes('print') && !block.includes('=')) {
                if (evaluatePattern(block, fields, lineNum, vars)) {
                    return fields.join(' ');
                }
            }

            return '';
        }

        function executePrint(block, fields, lineNum, vars) {
            const printMatch = block.match(/print\s+(.+?)(?:;|$)/);
            if (!printMatch) {
                // Just "print" with no arguments means print $0
                return fields.join(' ');
            }

            let printExpr = printMatch[1].trim();
            
            // Handle string literals
            printExpr = printExpr.replace(/"([^"]*)"/g, (match, str) => {
                return '___STRING___' + str + '___ENDSTRING___';
            });

            // Replace field references
            printExpr = printExpr.replace(/\$(\d+)/g, (match, num) => {
                const n = parseInt(num);
                if (n === 0) return fields.join(' ');
                return fields[n - 1] || '';
            });

            // Replace NR, NF
            printExpr = printExpr.replace(/\bNR\b/g, lineNum);
            printExpr = printExpr.replace(/\bNF\b/g, fields.length);

            // Replace variables
            Object.keys(vars).forEach(varName => {
                const regex = new RegExp('\\b' + varName + '\\b', 'g');
                printExpr = printExpr.replace(regex, vars[varName]);
            });

            // Restore string literals
            printExpr = printExpr.replace(/___STRING___/g, '').replace(/___ENDSTRING___/g, '');

            // Handle commas (convert to spaces for output)
            printExpr = printExpr.replace(/,/g, ' ');

            // Evaluate any remaining expressions
            try {
                // Simple arithmetic evaluation
                printExpr = printExpr.replace(/(\d+\.?\d*)\s*([\+\-\*\/])\s*(\d+\.?\d*)/g, (match, a, op, b) => {
                    a = parseFloat(a);
                    b = parseFloat(b);
                    switch(op) {
                        case '+': return a + b;
                        case '-': return a - b;
                        case '*': return a * b;
                        case '/': return b !== 0 ? a / b : 'Error: Division by zero';
                    }
                });
            } catch (e) {
                // If evaluation fails, return as-is
            }

            return printExpr.trim();
        }

        function evaluatePattern(pattern, fields, lineNum, vars) {
            if (!pattern || pattern === '') return true;

            // Replace field references
            let evalPattern = pattern.replace(/\$(\d+)/g, (match, num) => {
                const n = parseInt(num);
                if (n === 0) return '"' + fields.join(' ') + '"';
                return '"' + (fields[n - 1] || '') + '"';
            });

            // Replace NR, NF
            evalPattern = evalPattern.replace(/\bNR\b/g, lineNum);
            evalPattern = evalPattern.replace(/\bNF\b/g, fields.length);

            // Replace variables
            Object.keys(vars).forEach(varName => {
                const regex = new RegExp('\\b' + varName + '\\b', 'g');
                evalPattern = evalPattern.replace(regex, vars[varName]);
            });

            // Handle regex patterns
            if (pattern.match(/^\/.*\/$/)) {
                const regex = new RegExp(pattern.slice(1, -1));
                return regex.test(fields.join(' '));
            }

            // Handle ~ operator
            if (pattern.includes('~')) {
                const parts = pattern.split('~');
                const left = evaluateExpression(parts[0].trim(), fields, lineNum, vars);
                const right = parts[1].trim().replace(/\//g, '');
                const regex = new RegExp(right);
                return regex.test(String(left));
            }

            try {
                return eval(evalPattern);
            } catch (e) {
                return false;
            }
        }

        function evaluateExpression(expr, fields, lineNum, vars) {
            // Replace field references
            expr = expr.replace(/\$(\d+)/g, (match, num) => {
                const n = parseInt(num);
                if (n === 0) return fields.join(' ');
                return fields[n - 1] || '0';
            });

            // Replace NR, NF
            expr = expr.replace(/\bNR\b/g, lineNum);
            expr = expr.replace(/\bNF\b/g, fields.length);

            // Replace variables
            Object.keys(vars).forEach(varName => {
                const regex = new RegExp('\\b' + varName + '\\b', 'g');
                expr = expr.replace(regex, vars[varName] || 0);
            });

            try {
                const result = eval(expr);
                return isNaN(result) ? 0 : result;
            } catch (e) {
                return 0;
            }
        }

        function loadExample(num) {
            const command = document.getElementById('awkCommand');
            const separator = document.getElementById('fieldSeparator');

            switch(num) {
                case 1:
                    command.value = '{ print $1, $3 }';
                    separator.value = '';
                    break;
                case 2:
                    command.value = '{ sum += $3 } END { print "Total:", sum }';
                    separator.value = '';
                    break;
                case 3:
                    command.value = '$3 > 100 { print $1, "scored", $3 }';
                    separator.value = '';
                    break;
                case 4:
                    command.value = '{ sum += $3; count++ } END { print "Average:", sum/count }';
                    separator.value = '';
                    break;
                case 5:
                    command.value = '{ count[$1]++ } END { for (name in count) print name, count[name] }';
                    separator.value = '';
                    break;
            }

            runSimulation();
        }

        function loadChallenge(num) {
            const data = document.getElementById('sampleData');
            const command = document.getElementById('awkCommand');
            const separator = document.getElementById('fieldSeparator');

            // Switch to simulator tab
            showSection('simulator');
            document.querySelectorAll('.nav-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.nav-tab')[4].classList.add('active');

            switch(num) {
                case 1:
                    data.value = `John Laptop 1200
Jane Phone 800
Bob Tablet 450
Alice Laptop 1200
Charlie Phone 750`;
                    command.value = '{ sum += $3 } END { print "Total Sales:", sum }';
                    separator.value = '';
                    break;
                case 2:
                    data.value = `John 28
Jane 32
Bob 22
Alice 29
Charlie 24`;
                    command.value = '{ sum += $2; if ($2 > 25) count++ } END { print "Average:", sum/NR; print "Above 25:", count, "students" }';
                    separator.value = '';
                    break;
                case 3:
                    data.value = `INFO System started
ERROR Connection failed
WARNING Low memory
INFO User logged in
ERROR Disk full
WARNING High CPU
INFO Task completed`;
                    command.value = '{ count[$1]++ } END { print "ERROR:", count["ERROR"]; print "WARNING:", count["WARNING"] }';
                    separator.value = '';
                    break;
                case 4:
                    data.value = `John 28
Jane 32
Bob 22
Alice 29
Charlie 24`;
                    command.value = 'NR==1 { max=$2; name=$1 } $2>max { max=$2; name=$1 } END { print name, "has the highest score:", max }';
                    separator.value = '';
                    break;
            }
        }

        // Quiz Functions
        const correctAnswers = {
            q1: 'b',
            q2: 'b',
            q3: 'c',
            q4: 'b',
            q5: 'b',
            q6: 'a',
            q7: 'b',
            q8: 'a'
        };

        function checkAnswers() {
            let score = 0;
            let total = Object.keys(correctAnswers).length;

            Object.keys(correctAnswers).forEach((question, index) => {
                const selected = document.querySelector(`input[name="${question}"]:checked`);
                const resultDiv = document.getElementById(`result${index + 1}`);
                
                if (selected) {
                    if (selected.value === correctAnswers[question]) {
                        score++;
                        resultDiv.className = 'result success';
                        resultDiv.textContent = '✓ Correct! Well done!';
                    } else {
                        resultDiv.className = 'result error';
                        resultDiv.textContent = '✗ Incorrect. Review the lessons and try again!';
                    }
                    resultDiv.style.display = 'block';
                } else {
                    resultDiv.className = 'result error';
                    resultDiv.textContent = 'Please select an answer';
                    resultDiv.style.display = 'block';
                }
            });

            // Update progress bar
            const percentage = (score / total) * 100;
            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = percentage + '%';
            progressBar.textContent = Math.round(percentage) + '%';

            // Show final score
            const finalScore = document.getElementById('finalScore');
            finalScore.style.display = 'block';
            
            if (score === total) {
                finalScore.className = 'result success';
                finalScore.innerHTML = `<strong>🎉 Perfect Score!</strong> You got ${score}/${total} correct! You're an AWK master! Consider yourself ready for real-world AWK challenges!`;
            } else if (score >= total * 0.75) {
                finalScore.className = 'result success';
                finalScore.innerHTML = `<strong>👍 Excellent Work!</strong> You got ${score}/${total} correct! You have a strong understanding of AWK. Keep practicing!`;
            } else if (score >= total * 0.5) {
                finalScore.className = 'result success';
                finalScore.innerHTML = `<strong>👌 Good Job!</strong> You got ${score}/${total} correct! You're on the right track. Review the lessons and try the challenges!`;
            } else {
                finalScore.className = 'result error';
                finalScore.innerHTML = `<strong>📚 Keep Learning!</strong> You got ${score}/${total} correct. Spend more time with the lessons and examples, then try again!`;
            }

            // Scroll to results
            finalScore.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function resetQuiz() {
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.checked = false;
            });

            const totalQuestions = Object.keys(correctAnswers).length;
            for (let i = 1; i <= totalQuestions; i++) {
                const resultDiv = document.getElementById(`result${i}`);
                if (resultDiv) resultDiv.style.display = 'none';
            }

            const progressBar = document.getElementById('progressBar');
            progressBar.style.width = '0%';
            progressBar.textContent = '0%';

            document.getElementById('finalScore').style.display = 'none';

            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // Initialize
        window.addEventListener('DOMContentLoaded', () => {
            console.log('AWK Learning Platform loaded successfully!');
        });
    </script>
</body>
</html>