<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complex Numbers & Euler's Formula - Interactive Learning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.95;
        }

        .tab-navigation {
            display: flex;
            flex-wrap: wrap;
            background: #f7fafc;
            border-bottom: 3px solid #e2e8f0;
            padding: 10px;
            gap: 10px;
            justify-content: center;
        }

        .tab-btn {
            padding: 15px 25px;
            background: white;
            border: 2px solid #cbd5e0;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s ease;
            color: #4a5568;
        }

        .tab-btn:hover {
            background: #edf2f7;
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .content-area {
            padding: 30px;
            min-height: 500px;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .formula-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .formula-card {
            background: linear-gradient(135deg, #f7fafc 0%, #edf2f7 100%);
            border: 2px solid #cbd5e0;
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s ease;
        }

        .formula-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            border-color: #667eea;
        }

        .formula-card h3 {
            color: #667eea;
            font-size: 1.5em;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #cbd5e0;
        }

        .formula {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            font-size: 1.2em;
            text-align: center;
            border-left: 4px solid #667eea;
            font-family: 'Courier New', monospace;
        }

        .explanation {
            background: #fff5e6;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #f6ad55;
            font-size: 1em;
            line-height: 1.6;
        }

        .tip-box {
            background: #e6f7ff;
            border-left: 4px solid #0066cc;
            padding: 15px;
            margin: 15px 0;
            border-radius: 8px;
        }

        .tip-box strong {
            color: #0066cc;
        }

        canvas {
            border: 2px solid #cbd5e0;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            background: white;
            display: block;
            margin: 20px auto;
        }

        .controls-panel {
            background: #f7fafc;
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .control-group {
            margin: 15px 0;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #4a5568;
        }

        .control-group input[type="range"] {
            width: 100%;
            height: 40px;
            cursor: pointer;
        }

        .control-group input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 2px solid #cbd5e0;
            border-radius: 8px;
            font-size: 1em;
        }

        .control-group input[type="number"]:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin: 15px 0;
        }

        .btn {
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        }

        .info-display {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #cbd5e0;
        }

        .info-display h4 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .practice-section {
            background: #f7fafc;
            padding: 30px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .question {
            background: white;
            padding: 25px;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px solid #cbd5e0;
        }

        .question h4 {
            color: #667eea;
            font-size: 1.4em;
            margin-bottom: 15px;
        }

        .options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .option-btn {
            padding: 15px;
            background: white;
            border: 2px solid #cbd5e0;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .option-btn:hover {
            background: #edf2f7;
            border-color: #667eea;
            transform: scale(1.05);
        }

        .option-btn.correct {
            background: #c6f6d5;
            border-color: #48bb78;
        }

        .option-btn.incorrect {
            background: #fed7d7;
            border-color: #f56565;
        }

        .feedback {
            padding: 20px;
            margin: 15px 0;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            text-align: center;
        }

        .feedback.correct {
            background: #c6f6d5;
            color: #22543d;
        }

        .feedback.incorrect {
            background: #fed7d7;
            color: #742a2a;
        }

        .visualization-container {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
            margin: 20px 0;
        }

        .score-display {
            position: fixed;
            top: 20px;
            right: 20px;
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 2px solid #667eea;
            z-index: 1000;
        }

        .score-display h3 {
            color: #667eea;
            margin-bottom: 10px;
        }

        .highlight {
            background: #fef5e7;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
            color: #d68910;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px;
            border: 1px solid #cbd5e0;
            text-align: center;
        }

        th {
            background: #667eea;
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: #f7fafc;
        }

        @media (max-width: 1024px) {
            .visualization-container {
                grid-template-columns: 1fr;
            }

            .formula-grid {
                grid-template-columns: 1fr;
            }

            .score-display {
                position: static;
                margin: 20px auto;
                max-width: 300px;
            }
        }

        .fractal-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .color-scheme {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .color-btn {
            width: 40px;
            height: 40px;
            border: 2px solid #cbd5e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .color-btn:hover {
            transform: scale(1.1);
            border-color: #667eea;
        }

        .color-btn.active {
            border: 3px solid #667eea;
            box-shadow: 0 0 10px rgba(102, 126, 234, 0.5);
        }

        .polar-form {
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            color: #2c3e50;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #667eea;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>🔢 Complex Numbers & Euler's Formula</h1>
            <p>Explore the beautiful mathematics connecting algebra, geometry, and trigonometry</p>
        </header>

        <div class="tab-navigation">
            <button class="tab-btn active" onclick="showTab('intro')">📚 Introduction</button>
            <button class="tab-btn" onclick="showTab('plane')">🎯 Complex Plane</button>
            <button class="tab-btn" onclick="showTab('euler')">⚡ Euler's Formula</button>
            <button class="tab-btn" onclick="showTab('fractals')">🌀 Fractals</button>
            <button class="tab-btn" onclick="showTab('applications')">🌍 Applications</button>
            <button class="tab-btn" onclick="showTab('practice')">✏️ Practice</button>
            <button class="tab-btn" onclick="showTab('reference')">📖 Reference</button>
        </div>

        <div class="content-area">
            <!-- INTRODUCTION TAB -->
            <div id="intro" class="tab-content active">
                <h2 style="color: #667eea; font-size: 2em; margin-bottom: 20px;">Introduction to Complex Numbers</h2>
                
                <div class="formula-grid">
                    <div class="formula-card">
                        <h3>🎯 What are Complex Numbers?</h3>
                        <div class="explanation">
                            Complex numbers extend the real number system by introducing the imaginary unit <strong>i</strong>, where i² = -1. This allows us to solve equations like x² + 1 = 0 that have no real solutions.
                        </div>
                        <div class="formula">z = a + bi</div>
                        <div class="explanation">
                            where <strong>a</strong> is the real part and <strong>b</strong> is the imaginary part.
                        </div>
                        <div class="tip-box">
                            <strong>Historical Note:</strong> First used in 16th century Italy to solve cubic equations, despite being called "imaginary" they're just as real as real numbers!
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>🧮 Basic Operations</h3>
                        <div class="explanation"><strong>Addition:</strong></div>
                        <div class="formula">(a + bi) + (c + di) = (a + c) + (b + d)i</div>
                        
                        <div class="explanation"><strong>Multiplication:</strong></div>
                        <div class="formula">(a + bi)(c + di) = (ac - bd) + (ad + bc)i</div>
                        
                        <div class="tip-box">
                            <strong>Key Insight:</strong> Remember that i² = -1, so when multiplying, bi × di = bdi² = -bd
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>📐 Geometric Representation</h3>
                        <div class="explanation">
                            Complex numbers can be represented as points in the <strong>complex plane</strong> (also called the Argand plane):
                        </div>
                        <ul style="margin: 15px 0; line-height: 2;">
                            <li><strong>Horizontal axis (Real axis):</strong> real part (a)</li>
                            <li><strong>Vertical axis (Imaginary axis):</strong> imaginary part (b)</li>
                        </ul>
                        <div class="explanation">
                            The number z = a + bi is plotted at point (a, b).
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>📏 Modulus and Argument</h3>
                        <div class="explanation"><strong>Modulus (Magnitude):</strong></div>
                        <div class="formula">|z| = √(a² + b²)</div>
                        
                        <div class="explanation"><strong>Argument (Angle):</strong></div>
                        <div class="formula">arg(z) = arctan(b/a)</div>
                        
                        <div class="tip-box">
                            <strong>Connection to Geometry:</strong> The modulus is the distance from the origin, and the argument is the angle from the positive real axis.
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>🌟 Polar Form</h3>
                        <div class="explanation">
                            Complex numbers can be written in polar form using magnitude r and angle θ:
                        </div>
                        <div class="formula">z = r(cos θ + i sin θ)</div>
                        <div class="explanation">where r = |z| and θ = arg(z)</div>
                        
                        <div class="tip-box">
                            <strong>Why Polar Form?:</strong> Makes multiplication and division much easier! Multiply magnitudes and add angles.
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>⚡ Euler's Formula</h3>
                        <div class="explanation">
                            The most beautiful equation in mathematics connects complex numbers, exponentials, and trigonometry:
                        </div>
                        <div class="formula" style="font-size: 1.4em; color: #e74c3c;">
                            e^(iθ) = cos θ + i sin θ
                        </div>
                        <div class="explanation">
                            This allows us to write complex numbers as:
                        </div>
                        <div class="formula">z = re^(iθ)</div>
                        <div class="tip-box">
                            <strong>Special Case:</strong> When θ = π, we get Euler's Identity: e^(iπ) + 1 = 0, connecting five fundamental constants!
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>🔄 Complex Conjugate</h3>
                        <div class="explanation">
                            The complex conjugate of z = a + bi is:
                        </div>
                        <div class="formula">z̄ = a - bi</div>
                        <div class="explanation">
                            Geometrically, this is the reflection across the real axis.
                        </div>
                        <div class="tip-box">
                            <strong>Useful Property:</strong> z × z̄ = |z|² = a² + b²
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>➗ Division</h3>
                        <div class="explanation">
                            To divide complex numbers, multiply numerator and denominator by the conjugate of the denominator:
                        </div>
                        <div class="formula">
                            (a + bi)/(c + di) = [(a + bi)(c - di)]/[(c + di)(c - di)]
                        </div>
                        <div class="formula">
                            = [(ac + bd) + (bc - ad)i]/(c² + d²)
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>📊 Powers and Roots</h3>
                        <div class="explanation"><strong>De Moivre's Theorem:</strong></div>
                        <div class="formula">[r(cos θ + i sin θ)]^n = r^n(cos nθ + i sin nθ)</div>
                        <div class="explanation">Or using Euler's form:</div>
                        <div class="formula">(re^(iθ))^n = r^n e^(inθ)</div>
                        <div class="tip-box">
                            <strong>Finding Roots:</strong> A complex number has n distinct nth roots, equally spaced around a circle!
                        </div>
                    </div>
                </div>
            </div>

            <!-- COMPLEX PLANE TAB -->
            <div id="plane" class="tab-content">
                <h2 style="color: #667eea; font-size: 2em; margin-bottom: 20px;">Interactive Complex Plane</h2>
                
                <div class="visualization-container">
                    <div>
                        <canvas id="complexPlaneCanvas" width="700" height="700"></canvas>
                    </div>
                    
                    <div>
                        <div class="controls-panel">
                            <h3 style="color: #667eea; margin-bottom: 15px;">Complex Number 1 (Blue)</h3>
                            <div class="control-group">
                                <label>Real Part (a): <span id="z1RealVal">2.0</span></label>
                                <input type="range" id="z1Real" min="-5" max="5" step="0.1" value="2">
                            </div>
                            <div class="control-group">
                                <label>Imaginary Part (b): <span id="z1ImagVal">3.0</span></label>
                                <input type="range" id="z1Imag" min="-5" max="5" step="0.1" value="3">
                            </div>
                            
                            <h3 style="color: #667eea; margin: 20px 0 15px 0;">Complex Number 2 (Red)</h3>
                            <div class="control-group">
                                <label>Real Part (c): <span id="z2RealVal">1.0</span></label>
                                <input type="range" id="z2Real" min="-5" max="5" step="0.1" value="1">
                            </div>
                            <div class="control-group">
                                <label>Imaginary Part (d): <span id="z2ImagVal">-2.0</span></label>
                                <input type="range" id="z2Imag" min="-5" max="5" step="0.1" value="-2">
                            </div>
                            
                            <h3 style="color: #667eea; margin: 20px 0 15px 0;">Operations</h3>
                            <div class="btn-group">
                                <button class="btn" onclick="setOperation('add')">Addition</button>
                                <button class="btn" onclick="setOperation('subtract')">Subtraction</button>
                                <button class="btn" onclick="setOperation('multiply')">Multiplication</button>
                                <button class="btn" onclick="setOperation('divide')">Division</button>
                                <button class="btn btn-secondary" onclick="setOperation('none')">Show Both</button>
                            </div>
                        </div>
                        
                        <div class="info-display">
                            <h4>Complex Number Info</h4>
                            <div id="complexInfo"></div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- EULER'S FORMULA TAB -->
            <div id="euler" class="tab-content">
                <h2 style="color: #667eea; font-size: 2em; margin-bottom: 20px;">Euler's Formula Visualization</h2>
                
                <div class="explanation" style="margin-bottom: 30px; font-size: 1.1em;">
                    <strong>Euler's Formula:</strong> e^(iθ) = cos θ + i sin θ
                    <br><br>
                    This remarkable formula shows that as θ varies, e^(iθ) traces out the unit circle in the complex plane!
                </div>
                
                <div class="visualization-container">
                    <div>
                        <canvas id="eulerCanvas" width="700" height="700"></canvas>
                    </div>
                    
                    <div>
                        <div class="controls-panel">
                            <h3 style="color: #667eea; margin-bottom: 15px;">Angle θ</h3>
                            <div class="control-group">
                                <label>θ (radians): <span id="thetaVal">0.00</span></label>
                                <input type="range" id="theta" min="0" max="6.28" step="0.01" value="0">
                            </div>
                            <div class="control-group">
                                <label>θ (degrees): <span id="thetaDeg">0°</span></label>
                            </div>
                            
                            <div class="btn-group" style="margin-top: 20px;">
                                <button class="btn" onclick="animateEuler()">Animate</button>
                                <button class="btn btn-secondary" onclick="stopEulerAnimation()">Stop</button>
                            </div>
                            
                            <h3 style="color: #667eea; margin: 20px 0 15px 0;">Quick Angles</h3>
                            <div class="btn-group">
                                <button class="option-btn" onclick="setTheta(0)">0</button>
                                <button class="option-btn" onclick="setTheta(Math.PI/6)">π/6</button>
                                <button class="option-btn" onclick="setTheta(Math.PI/4)">π/4</button>
                                <button class="option-btn" onclick="setTheta(Math.PI/3)">π/3</button>
                                <button class="option-btn" onclick="setTheta(Math.PI/2)">π/2</button>
                                <button class="option-btn" onclick="setTheta(Math.PI)">π</button>
                            </div>
                        </div>
                        
                        <div class="info-display">
                            <h4>Euler's Formula Breakdown</h4>
                            <div id="eulerInfo"></div>
                        </div>
                        
                        <div class="formula-card" style="margin-top: 20px;">
                            <h3>🎯 Key Insights</h3>
                            <ul style="line-height: 2;">
                                <li>e^(iθ) traces the unit circle</li>
                                <li>Real part = cos θ</li>
                                <li>Imaginary part = sin θ</li>
                                <li>|e^(iθ)| = 1 always</li>
                                <li>e^(i2π) = 1 (full rotation)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FRACTALS TAB -->
            <div id="fractals" class="tab-content">
                <h2 style="color: #667eea; font-size: 2em; margin-bottom: 20px;">Mandelbrot & Julia Sets</h2>
                
                <div class="explanation" style="margin-bottom: 20px;">
                    The <strong>Mandelbrot set</strong> and <strong>Julia sets</strong> are fractals generated using complex number iteration. They reveal infinite complexity and stunning beauty hidden in simple formulas!
                </div>
                
                <div class="controls-panel">
                    <div class="fractal-controls">
                        <div class="control-group">
                            <label>Fractal Type</label>
                            <div class="btn-group">
                                <button class="btn" id="mandelbrotBtn" onclick="setFractalType('mandelbrot')">Mandelbrot</button>
                                <button class="btn btn-secondary" id="juliaBtn" onclick="setFractalType('julia')">Julia Set</button>
                            </div>
                        </div>
                        
                        <div class="control-group" id="juliaControls" style="display: none;">
                            <label>Julia Parameter C</label>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                                <input type="number" id="juliaReal" value="-0.7" step="0.01" placeholder="Real">
                                <input type="number" id="juliaImag" value="0.27" step="0.01" placeholder="Imag">
                            </div>
                            <div class="btn-group" style="margin-top: 10px;">
                                <button class="option-btn" onclick="setJuliaC(-0.7, 0.27)">Classic</button>
                                <button class="option-btn" onclick="setJuliaC(-0.4, 0.6)">Dendrite</button>
                                <button class="option-btn" onclick="setJuliaC(0.285, 0.01)">Spiral</button>
                                <button class="option-btn" onclick="setJuliaC(-0.8, 0.156)">Dragon</button>
                            </div>
                        </div>
                        
                        <div class="control-group">
                            <label>Max Iterations: <span id="maxIterVal">100</span></label>
                            <input type="range" id="maxIter" min="20" max="500" step="10" value="100">
                        </div>
                        
                        <div class="control-group">
                            <label>Color Scheme</label>
                            <div class="color-scheme">
                                <div class="color-btn active" onclick="setColorScheme('classic')" style="background: linear-gradient(to right, #000033, #6666ff, #ffffff);"></div>
                                <div class="color-btn" onclick="setColorScheme('fire')" style="background: linear-gradient(to right, #000000, #ff0000, #ffff00, #ffffff);"></div>
                                <div class="color-btn" onclick="setColorScheme('ocean')" style="background: linear-gradient(to right, #001a33, #0066cc, #00ccff, #ffffff);"></div>
                                <div class="color-btn" onclick="setColorScheme('rainbow')" style="background: linear-gradient(to right, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);"></div>
                                <div class="color-btn" onclick="setColorScheme('grayscale')" style="background: linear-gradient(to right, #000000, #808080, #ffffff);"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="btn-group">
                        <button class="btn" onclick="renderFractal()">Render Fractal</button>
                        <button class="btn btn-secondary" onclick="resetFractalView()">Reset View</button>
                        <button class="btn" onclick="zoomIn()">Zoom In</button>
                        <button class="btn" onclick="zoomOut()">Zoom Out</button>
                    </div>
                    
                    <div class="tip-box">
                        <strong>Tip:</strong> Click on the fractal to zoom in at that point! The deeper you zoom, the more intricate patterns emerge.
                    </div>
                </div>
                
                <canvas id="fractalCanvas" width="800" height="600"></canvas>
                <div id="fractalLoading" class="loading" style="display: none;">Rendering fractal... This may take a moment.</div>
                
                <div class="formula-card" style="margin-top: 20px;">
                    <h3>🧮 The Mathematics</h3>
                    <div class="explanation">
                        <strong>Mandelbrot Set:</strong> For each complex number c, we iterate z_{n+1} = z_n² + c starting with z_0 = 0. If the sequence stays bounded, c is in the Mandelbrot set (colored black).
                    </div>
                    <div class="formula">z_{n+1} = z_n² + c, where z_0 = 0</div>
                    
                    <div class="explanation" style="margin-top: 15px;">
                        <strong>Julia Sets:</strong> Similar iteration, but c is fixed and we vary the starting point z_0.
                    </div>
                    <div class="formula">z_{n+1} = z_n² + c, where c is constant</div>
                </div>
            </div>

            <!-- APPLICATIONS TAB -->
            <div id="applications" class="tab-content">
                <h2 style="color: #667eea; font-size: 2em; margin-bottom: 20px;">Real-World Applications</h2>
                
                <div class="formula-grid">
                    <div class="formula-card">
                        <h3>⚡ Electrical Engineering</h3>
                        <div class="explanation">
                            <strong>AC Circuit Analysis:</strong> Complex numbers represent alternating current and voltage, where the real part is the resistive component and the imaginary part is the reactive component (inductance/capacitance).
                        </div>
                        <div class="formula">Z = R + jωL - j/(ωC)</div>
                        <div class="explanation">
                            where Z is impedance, R is resistance, L is inductance, C is capacitance, and ω is angular frequency.
                        </div>
                        <div class="tip-box">
                            <strong>Why Complex?:</strong> Phase relationships between voltage and current are naturally expressed using complex numbers. Engineers use j instead of i to avoid confusion with current.
                        </div>
                        <div class="explanation">
                            <strong>Applications:</strong> Power grid analysis, filter design, signal processing, and telecommunications all rely on complex number representations.
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>📡 Signal Processing</h3>
                        <div class="explanation">
                            <strong>Fourier Transform:</strong> Converts time-domain signals into frequency-domain representations using complex exponentials.
                        </div>
                        <div class="formula">X(f) = ∫ x(t)e^(-i2πft) dt</div>
                        <div class="explanation">
                            This decomposes any signal into a sum of complex exponentials (sinusoids with different frequencies and phases).
                        </div>
                        <div class="tip-box">
                            <strong>Real-World Use:</strong> MP3 compression, image processing, audio equalizers, noise reduction, and spectrum analysis all use Fourier transforms.
                        </div>
                        <div class="explanation">
                            <strong>Digital Communications:</strong> Modern WiFi and cellular networks encode data using complex modulation schemes like QAM (Quadrature Amplitude Modulation), which maps data to complex numbers.
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>⚛️ Quantum Mechanics</h3>
                        <div class="explanation">
                            <strong>Wave Functions:</strong> In quantum mechanics, the state of a particle is described by a complex-valued wave function ψ(x,t).
                        </div>
                        <div class="formula">iℏ ∂ψ/∂t = Ĥψ</div>
                        <div class="explanation">
                            This is the Schrödinger equation, the fundamental equation of quantum mechanics. The complex nature of ψ allows interference and superposition.
                        </div>
                        <div class="tip-box">
                            <strong>Why Complex?:</strong> Real numbers can't capture the phase relationships necessary for quantum interference. The probability is |ψ|², which is real.
                        </div>
                        <div class="explanation">
                            <strong>Quantum Computing:</strong> Qubits are represented as complex superpositions: |ψ⟩ = α|0⟩ + β|1⟩, where α and β are complex numbers with |α|² + |β|² = 1.
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>✈️ Aerospace Engineering</h3>
                        <div class="explanation">
                            <strong>Aerodynamics:</strong> Complex potential flow theory uses complex variables to model fluid flow around airfoils and wings.
                        </div>
                        <div class="formula">w(z) = φ + iψ</div>
                        <div class="explanation">
                            where w is the complex potential, φ is the velocity potential, and ψ is the stream function. The derivative dw/dz gives the velocity field.
                        </div>
                        <div class="tip-box">
                            <strong>Conformal Mapping:</strong> Complex functions can transform complicated shapes into simpler ones while preserving angles, making it easier to solve flow problems.
                        </div>
                        <div class="explanation">
                            <strong>Applications:</strong> Aircraft wing design, propeller analysis, and understanding lift generation all benefit from complex analysis.
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>🎵 Audio Engineering</h3>
                        <div class="explanation">
                            <strong>Audio Effects:</strong> Reverb, echo, and equalization use complex frequency-domain processing. Each frequency component is represented as a complex number showing magnitude and phase.
                        </div>
                        <div class="tip-box">
                            <strong>Phase Matters:</strong> While we can't hear phase directly, phase relationships between frequencies affect how sounds combine and create tone quality.
                        </div>
                        <div class="explanation">
                            <strong>Auto-Tune:</strong> Pitch correction algorithms use complex analysis to detect and shift frequencies while preserving the natural character of the voice.
                        </div>
                        <div class="explanation">
                            <strong>Room Acoustics:</strong> Modeling how sound reflects and interferes in concert halls uses complex impedance calculations to optimize speaker placement and room design.
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>📸 Image Processing</h3>
                        <div class="explanation">
                            <strong>2D Fourier Transform:</strong> Images can be decomposed into spatial frequency components using 2D complex Fourier transforms.
                        </div>
                        <div class="tip-box">
                            <strong>Applications:</strong> JPEG compression removes high-frequency components (fine details) that humans don't notice, dramatically reducing file size.
                        </div>
                        <div class="explanation">
                            <strong>Edge Detection:</strong> The magnitude of complex gradients identifies edges in images, crucial for computer vision and facial recognition.
                        </div>
                        <div class="explanation">
                            <strong>Medical Imaging:</strong> MRI (Magnetic Resonance Imaging) reconstructs images from complex-valued frequency-domain data collected from the scanner.
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>🌊 Oceanography & Climate</h3>
                        <div class="explanation">
                            <strong>Wave Analysis:</strong> Ocean waves and tides are modeled using complex exponentials, making it easier to analyze multiple frequency components.
                        </div>
                        <div class="formula">η(x,t) = Re[Ae^(i(kx - ωt))]</div>
                        <div class="explanation">
                            where η is wave height, A is amplitude, k is wave number, and ω is angular frequency.
                        </div>
                        <div class="explanation">
                            <strong>Climate Models:</strong> Atmospheric wave patterns (like Rossby waves) are analyzed using complex methods to understand weather systems and predict climate patterns.
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>🎮 Computer Graphics</h3>
                        <div class="explanation">
                            <strong>2D Rotations:</strong> Multiplying by e^(iθ) rotates points by angle θ, making animation and transformations elegant.
                        </div>
                        <div class="formula">z' = z × e^(iθ)</div>
                        <div class="explanation">
                            <strong>Fractals:</strong> The Mandelbrot set and Julia sets create stunning backgrounds and textures in games and movies.
                        </div>
                        <div class="tip-box">
                            <strong>Quaternions:</strong> An extension of complex numbers to 4D, used extensively in 3D graphics for smooth rotations without gimbal lock.
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>🏗️ Structural Engineering</h3>
                        <div class="explanation">
                            <strong>Vibration Analysis:</strong> When buildings or bridges vibrate, their motion can be decomposed into complex modes using eigenvalue analysis.
                        </div>
                        <div class="explanation">
                            Each vibration mode has a complex frequency that includes both oscillation rate and damping. This helps engineers design structures that won't resonate dangerously during earthquakes or high winds.
                        </div>
                        <div class="tip-box">
                            <strong>Example:</strong> The Millennium Bridge in London swayed because pedestrians synchronized with a resonant frequency. Complex analysis helped fix it!
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>💊 Medical Technology</h3>
                        <div class="explanation">
                            <strong>MRI Imaging:</strong> MRI machines measure complex-valued signals from hydrogen atoms in your body. The phase and magnitude contain different tissue information.
                        </div>
                        <div class="explanation">
                            <strong>EEG/ECG Analysis:</strong> Brain waves and heart rhythms are analyzed in the frequency domain using complex Fourier transforms to detect abnormalities.
                        </div>
                        <div class="explanation">
                            <strong>Ultrasound:</strong> Doppler ultrasound uses complex demodulation to measure blood flow velocity and direction.
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>📱 Modern Technology</h3>
                        <div class="explanation">
                            <strong>5G Wireless:</strong> OFDM (Orthogonal Frequency Division Multiplexing) uses complex exponentials to pack data into multiple frequencies simultaneously.
                        </div>
                        <div class="explanation">
                            <strong>Noise Cancelling Headphones:</strong> Analyze sound in complex frequency domain, then generate inverse waves to cancel noise.
                        </div>
                        <div class="explanation">
                            <strong>GPS:</strong> Satellite signals use complex correlation to determine position even when signals are weaker than background noise.
                        </div>
                        <div class="tip-box">
                            <strong>Behind the Scenes:</strong> Every time you stream video, make a phone call, or use WiFi, complex number calculations are happening millions of times per second!
                        </div>
                    </div>

                    <div class="formula-card">
                        <h3>🔬 Pure Mathematics</h3>
                        <div class="explanation">
                            <strong>Number Theory:</strong> The Riemann Hypothesis, one of the most important unsolved problems in mathematics, concerns zeros of the complex-valued Riemann zeta function.
                        </div>
                        <div class="formula">ζ(s) = Σ(n=1 to ∞) 1/n^s, where s is complex</div>
                        <div class="explanation">
                            <strong>Topology:</strong> Complex analysis provides powerful tools for understanding the shape and connectivity of spaces.
                        </div>
                        <div class="explanation">
                            <strong>Differential Equations:</strong> Many differential equations are most elegantly solved using complex methods, even when the solution is ultimately real.
                        </div>
                    </div>
                </div>
            </div>

            <!-- PRACTICE TAB -->
            <div id="practice" class="tab-content">
                <h2 style="color: #667eea; font-size: 2em; margin-bottom: 20px;">Practice Problems</h2>
                
                <div class="practice-section" id="practiceArea">
                    <div class="question" id="currentQuestion">
                        <!-- Questions will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- REFERENCE TAB -->
            <div id="reference" class="tab-content">
                <h2 style="color: #667eea; font-size: 2em; margin-bottom: 20px;">Quick Reference</h2>
                
                <div class="formula-card">
                    <h3>📝 Essential Formulas</h3>
                    <table>
                        <tr>
                            <th>Concept</th>
                            <th>Formula</th>
                            <th>Description</th>
                        </tr>
                        <tr>
                            <td>Complex Number</td>
                            <td>z = a + bi</td>
                            <td>Standard form</td>
                        </tr>
                        <tr>
                            <td>Modulus</td>
                            <td>|z| = √(a² + b²)</td>
                            <td>Distance from origin</td>
                        </tr>
                        <tr>
                            <td>Argument</td>
                            <td>arg(z) = arctan(b/a)</td>
                            <td>Angle from real axis</td>
                        </tr>
                        <tr>
                            <td>Polar Form</td>
                            <td>z = r(cos θ + i sin θ)</td>
                            <td>Using magnitude and angle</td>
                        </tr>
                        <tr>
                            <td>Euler's Formula</td>
                            <td>e^(iθ) = cos θ + i sin θ</td>
                            <td>Exponential form</td>
                        </tr>
                        <tr>
                            <td>Exponential Form</td>
                            <td>z = re^(iθ)</td>
                            <td>Compact polar form</td>
                        </tr>
                        <tr>
                            <td>Complex Conjugate</td>
                            <td>z̄ = a - bi</td>
                            <td>Reflection over real axis</td>
                        </tr>
                        <tr>
                            <td>Multiplication</td>
                            <td>|z₁z₂| = |z₁||z₂|</td>
                            <td>Multiply magnitudes</td>
                        </tr>
                        <tr>
                            <td>Multiplication (angle)</td>
                            <td>arg(z₁z₂) = arg(z₁) + arg(z₂)</td>
                            <td>Add arguments</td>
                        </tr>
                        <tr>
                            <td>De Moivre's Theorem</td>
                            <td>(cos θ + i sin θ)^n = cos(nθ) + i sin(nθ)</td>
                            <td>Powers of complex numbers</td>
                        </tr>
                    </table>
                </div>

                <div class="formula-card">
                    <h3>🎯 Important Identities</h3>
                    <div class="formula">i² = -1</div>
                    <div class="formula">i³ = -i</div>
                    <div class="formula">i⁴ = 1</div>
                    <div class="formula">e^(iπ) = -1</div>
                    <div class="formula">e^(i2π) = 1</div>
                    <div class="formula">z × z̄ = |z|²</div>
                    <div class="formula">|z₁ + z₂| ≤ |z₁| + |z₂| (Triangle Inequality)</div>
                </div>

                <div class="formula-card">
                    <h3>💡 Problem-Solving Tips</h3>
                    <ul style="line-height: 2; margin: 15px 0;">
                        <li><strong>Converting Forms:</strong> Use polar/exponential form for multiplication and division, rectangular form for addition and subtraction</li>
                        <li><strong>Finding Roots:</strong> Convert to polar form, then use the nth root formula with all n solutions equally spaced around a circle</li>
                        <li><strong>Visualize:</strong> Draw complex numbers in the plane to understand operations geometrically</li>
                        <li><strong>Check Your Answer:</strong> Verify using the complex conjugate or by converting between forms</li>
                        <li><strong>Remember i:</strong> Keep track of powers of i: i, -1, -i, 1, i, ... (cycle of 4)</li>
                    </ul>
                </div>

                <div class="formula-card">
                    <h3>🧮 Common Values</h3>
                    <table>
                        <tr>
                            <th>θ</th>
                            <th>e^(iθ)</th>
                            <th>Rectangular Form</th>
                        </tr>
                        <tr>
                            <td>0</td>
                            <td>e^(i·0)</td>
                            <td>1 + 0i</td>
                        </tr>
                        <tr>
                            <td>π/2</td>
                            <td>e^(iπ/2)</td>
                            <td>0 + i</td>
                        </tr>
                        <tr>
                            <td>π</td>
                            <td>e^(iπ)</td>
                            <td>-1 + 0i</td>
                        </tr>
                        <tr>
                            <td>3π/2</td>
                            <td>e^(i3π/2)</td>
                            <td>0 - i</td>
                        </tr>
                        <tr>
                            <td>2π</td>
                            <td>e^(i2π)</td>
                            <td>1 + 0i</td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="score-display" id="scoreDisplay" style="display: none;">
        <h3>📊 Your Progress</h3>
        <div>Correct: <strong id="correctCount">0</strong></div>
        <div>Total: <strong id="totalCount">0</strong></div>
        <div>Score: <strong id="percentage">0%</strong></div>
    </div>

    <script>
        // Global variables
        let currentOperation = 'none';
        let eulerAnimationId = null;
        let currentQuestionIndex = 0;
        let correctAnswers = 0;
        let totalQuestions = 0;
        
        // Fractal parameters
        let fractalType = 'mandelbrot';
        let juliaC = {real: -0.7, imag: 0.27};
        let maxIterations = 100;
        let colorScheme = 'classic';
        let fractalView = {
            centerX: -0.5,
            centerY: 0,
            zoom: 1
        };

        // Practice questions
        const questions = [
            {
                question: "What is i² equal to?",
                options: ["1", "-1", "i", "-i"],
                correct: 1,
                explanation: "By definition, i² = -1. This is the fundamental property of the imaginary unit."
            },
            {
                question: "What is the modulus of 3 + 4i?",
                options: ["5", "7", "25", "√7"],
                correct: 0,
                explanation: "|z| = √(3² + 4²) = √(9 + 16) = √25 = 5. This forms a 3-4-5 right triangle!"
            },
            {
                question: "What is (2 + i) + (3 - 2i)?",
                options: ["5 - i", "5 + i", "1 - i", "6 - i"],
                correct: 0,
                explanation: "Add real parts: 2 + 3 = 5. Add imaginary parts: 1 + (-2) = -1. Result: 5 - i"
            },
            {
                question: "What is the complex conjugate of 2 - 3i?",
                options: ["-2 + 3i", "2 + 3i", "-2 - 3i", "3 - 2i"],
                correct: 1,
                explanation: "The complex conjugate changes the sign of the imaginary part: z̄ = 2 + 3i"
            },
            {
                question: "What is e^(iπ)?",
                options: ["1", "-1", "i", "0"],
                correct: 1,
                explanation: "Euler's identity: e^(iπ) = cos(π) + i sin(π) = -1 + 0i = -1"
            },
            {
                question: "What is i³?",
                options: ["i", "-i", "1", "-1"],
                correct: 1,
                explanation: "i³ = i² × i = (-1) × i = -i"
            },
            {
                question: "What is (1 + i)(1 - i)?",
                options: ["0", "2", "2i", "1"],
                correct: 1,
                explanation: "(1 + i)(1 - i) = 1 - i + i - i² = 1 - (-1) = 2. Alternatively, this is z × z̄ = |z|²"
            },
            {
                question: "In polar form, what is the argument of -1?",
                options: ["0", "π/2", "π", "2π"],
                correct: 2,
                explanation: "-1 lies on the negative real axis, which is at angle π radians (180°)"
            },
            {
                question: "What is |e^(iθ)|?",
                options: ["0", "1", "θ", "e^θ"],
                correct: 1,
                explanation: "e^(iθ) = cos θ + i sin θ always lies on the unit circle, so |e^(iθ)| = 1"
            },
            {
                question: "What is i⁴?",
                options: ["1", "-1", "i", "-i"],
                correct: 0,
                explanation: "i⁴ = i² × i² = (-1) × (-1) = 1. Powers of i repeat in a cycle of 4."
            }
        ];

        // Tab switching
        function showTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            const buttons = document.querySelectorAll('.tab-btn');
            
            tabs.forEach(tab => tab.classList.remove('active'));
            buttons.forEach(btn => btn.classList.remove('active'));
            
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');

            if (tabName === 'plane') {
                drawComplexPlane();
            } else if (tabName === 'euler') {
                drawEulerFormula();
            } else if (tabName === 'fractals') {
                renderFractal();
            } else if (tabName === 'practice') {
                if (currentQuestionIndex === 0) {
                    loadQuestion();
                    document.getElementById('scoreDisplay').style.display = 'block';
                }
            }
        }

        // Complex plane visualization
        function drawComplexPlane() {
            const canvas = document.getElementById('complexPlaneCanvas');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            const scale = 60;

            ctx.clearRect(0, 0, width, height);

            // Draw grid
            ctx.strokeStyle = '#f0f0f0';
            ctx.lineWidth = 1;
            for (let i = -10; i <= 10; i++) {
                ctx.beginPath();
                ctx.moveTo(centerX + i * scale, 0);
                ctx.lineTo(centerX + i * scale, height);
                ctx.stroke();
                
                ctx.beginPath();
                ctx.moveTo(0, centerY + i * scale);
                ctx.lineTo(width, centerY + i * scale);
                ctx.stroke();
            }

            // Draw axes
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(width, centerY);
            ctx.moveTo(centerX, 0);
            ctx.lineTo(centerX, height);
            ctx.stroke();

            // Labels
            ctx.fillStyle = '#666';
            ctx.font = '14px Arial';
            ctx.fillText('Real', width - 40, centerY - 10);
            ctx.fillText('Imaginary', centerX + 10, 20);

            // Get complex numbers
            const z1Real = parseFloat(document.getElementById('z1Real').value);
            const z1Imag = parseFloat(document.getElementById('z1Imag').value);
            const z2Real = parseFloat(document.getElementById('z2Real').value);
            const z2Imag = parseFloat(document.getElementById('z2Imag').value);

            // Draw z1 (blue)
            drawComplexNumber(ctx, z1Real, z1Imag, centerX, centerY, scale, '#3182ce', 'z₁');

            // Draw z2 (red)
            drawComplexNumber(ctx, z2Real, z2Imag, centerX, centerY, scale, '#e53e3e', 'z₂');

            // Perform operation and draw result
            let resultReal, resultImag, resultLabel, resultColor;
            
            switch(currentOperation) {
                case 'add':
                    resultReal = z1Real + z2Real;
                    resultImag = z1Imag + z2Imag;
                    resultLabel = 'z₁ + z₂';
                    resultColor = '#38a169';
                    break;
                case 'subtract':
                    resultReal = z1Real - z2Real;
                    resultImag = z1Imag - z2Imag;
                    resultLabel = 'z₁ - z₂';
                    resultColor = '#d69e2e';
                    break;
                case 'multiply':
                    resultReal = z1Real * z2Real - z1Imag * z2Imag;
                    resultImag = z1Real * z2Imag + z1Imag * z2Real;
                    resultLabel = 'z₁ × z₂';
                    resultColor = '#805ad5';
                    break;
                case 'divide':
                    const denom = z2Real * z2Real + z2Imag * z2Imag;
                    if (denom !== 0) {
                        resultReal = (z1Real * z2Real + z1Imag * z2Imag) / denom;
                        resultImag = (z1Imag * z2Real - z1Real * z2Imag) / denom;
                        resultLabel = 'z₁ / z₂';
                        resultColor = '#e55d87';
                    }
                    break;
            }

            if (resultReal !== undefined) {
                drawComplexNumber(ctx, resultReal, resultImag, centerX, centerY, scale, resultColor, resultLabel);
            }

            updateComplexInfo(z1Real, z1Imag, z2Real, z2Imag, resultReal, resultImag);
        }

        function drawComplexNumber(ctx, real, imag, centerX, centerY, scale, color, label) {
            const x = centerX + real * scale;
            const y = centerY - imag * scale;

            // Draw line from origin
            ctx.strokeStyle = color;
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(x, y);
            ctx.stroke();

            // Draw point
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.arc(x, y, 8, 0, 2 * Math.PI);
            ctx.fill();
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Draw label
            ctx.fillStyle = color;
            ctx.font = 'bold 16px Arial';
            ctx.fillText(label, x + 12, y - 12);

            // Draw dashed projections
            ctx.strokeStyle = color;
            ctx.lineWidth = 1;
            ctx.setLineDash([5, 5]);
            ctx.beginPath();
            ctx.moveTo(x, y);
            ctx.lineTo(x, centerY);
            ctx.moveTo(x, y);
            ctx.lineTo(centerX, y);
            ctx.stroke();
            ctx.setLineDash([]);
        }

        function updateComplexInfo(z1Real, z1Imag, z2Real, z2Imag, resultReal, resultImag) {
            const z1Mod = Math.sqrt(z1Real * z1Real + z1Imag * z1Imag);
            const z1Arg = Math.atan2(z1Imag, z1Real);
            const z2Mod = Math.sqrt(z2Real * z2Real + z2Imag * z2Imag);
            const z2Arg = Math.atan2(z2Imag, z2Real);

            let html = `
                <div class="info-row"><span><strong>z₁ =</strong></span><span>${z1Real.toFixed(2)} + ${z1Imag.toFixed(2)}i</span></div>
                <div class="info-row"><span><strong>|z₁| =</strong></span><span>${z1Mod.toFixed(3)}</span></div>
                <div class="info-row"><span><strong>arg(z₁) =</strong></span><span>${z1Arg.toFixed(3)} rad (${(z1Arg * 180 / Math.PI).toFixed(1)}°)</span></div>
                <hr style="margin: 10px 0;">
                <div class="info-row"><span><strong>z₂ =</strong></span><span>${z2Real.toFixed(2)} + ${z2Imag.toFixed(2)}i</span></div>
                <div class="info-row"><span><strong>|z₂| =</strong></span><span>${z2Mod.toFixed(3)}</span></div>
                <div class="info-row"><span><strong>arg(z₂) =</strong></span><span>${z2Arg.toFixed(3)} rad (${(z2Arg * 180 / Math.PI).toFixed(1)}°)</span></div>
            `;

            if (resultReal !== undefined) {
                const resultMod = Math.sqrt(resultReal * resultReal + resultImag * resultImag);
                const resultArg = Math.atan2(resultImag, resultReal);
                html += `
                    <hr style="margin: 10px 0;">
                    <div class="info-row"><span><strong>Result =</strong></span><span>${resultReal.toFixed(2)} + ${resultImag.toFixed(2)}i</span></div>
                    <div class="info-row"><span><strong>|Result| =</strong></span><span>${resultMod.toFixed(3)}</span></div>
                    <div class="info-row"><span><strong>arg(Result) =</strong></span><span>${resultArg.toFixed(3)} rad</span></div>
                `;
            }

            document.getElementById('complexInfo').innerHTML = html;
        }

        function setOperation(op) {
            currentOperation = op;
            drawComplexPlane();
        }

        // Event listeners for complex plane controls
        ['z1Real', 'z1Imag', 'z2Real', 'z2Imag'].forEach(id => {
            document.getElementById(id).addEventListener('input', function() {
                document.getElementById(id + 'Val').textContent = parseFloat(this.value).toFixed(1);
                drawComplexPlane();
            });
        });

        // Euler's formula visualization
        function drawEulerFormula() {
            const canvas = document.getElementById('eulerCanvas');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            const radius = 250;

            ctx.clearRect(0, 0, width, height);

            // Draw grid
            ctx.strokeStyle = '#f5f5f5';
            ctx.lineWidth = 1;
            for (let i = -3; i <= 3; i++) {
                const x = centerX + i * (radius / 3);
                const y = centerY + i * (radius / 3);
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, height);
                ctx.stroke();
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(width, y);
                ctx.stroke();
            }

            // Draw axes
            ctx.strokeStyle = '#333';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(width, centerY);
            ctx.moveTo(centerX, 0);
            ctx.lineTo(centerX, height);
            ctx.stroke();

            // Labels
            ctx.fillStyle = '#666';
            ctx.font = '16px Arial';
            ctx.fillText('Re', width - 30, centerY - 10);
            ctx.fillText('Im', centerX + 10, 25);

            // Draw unit circle
            ctx.strokeStyle = '#cbd5e0';
            ctx.lineWidth = 3;
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.stroke();

            // Get angle
            const theta = parseFloat(document.getElementById('theta').value);
            const cosTheta = Math.cos(theta);
            const sinTheta = Math.sin(theta);

            // Draw angle arc
            ctx.strokeStyle = '#667eea';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(centerX, centerY, 40, 0, -theta, true);
            ctx.stroke();

            // Draw radius to point
            const pointX = centerX + cosTheta * radius;
            const pointY = centerY - sinTheta * radius;
            ctx.strokeStyle = '#e53e3e';
            ctx.lineWidth = 4;
            ctx.beginPath();
            ctx.moveTo(centerX, centerY);
            ctx.lineTo(pointX, pointY);
            ctx.stroke();

            // Draw point
            ctx.fillStyle = '#e53e3e';
            ctx.beginPath();
            ctx.arc(pointX, pointY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 3;
            ctx.stroke();

            // Draw cos projection (to real axis)
            ctx.strokeStyle = '#3182ce';
            ctx.lineWidth = 3;
            ctx.setLineDash([8, 8]);
            ctx.beginPath();
            ctx.moveTo(pointX, pointY);
            ctx.lineTo(pointX, centerY);
            ctx.stroke();

            // Draw sin projection (to imaginary axis)
            ctx.strokeStyle = '#38a169';
            ctx.beginPath();
            ctx.moveTo(pointX, pointY);
            ctx.lineTo(centerX, pointY);
            ctx.stroke();
            ctx.setLineDash([]);

            // Labels
            ctx.font = 'bold 18px Arial';
            ctx.fillStyle = '#3182ce';
            ctx.fillText('cos θ', pointX / 2 + centerX / 2 - 25, centerY + 25);
            ctx.fillStyle = '#38a169';
            ctx.fillText('sin θ', centerX + 10, (pointY + centerY) / 2);
            ctx.fillStyle = '#e53e3e';
            ctx.fillText('e^(iθ)', pointX + 15, pointY - 15);

            // Draw angle label
            ctx.fillStyle = '#667eea';
            ctx.font = '16px Arial';
            ctx.fillText('θ', centerX + 50, centerY - 10);

            updateEulerInfo(theta);
        }

        function updateEulerInfo(theta) {
            const cosTheta = Math.cos(theta);
            const sinTheta = Math.sin(theta);
            
            document.getElementById('thetaVal').textContent = theta.toFixed(2);
            document.getElementById('thetaDeg').textContent = (theta * 180 / Math.PI).toFixed(1) + '°';

            const html = `
                <div class="info-row"><span><strong>θ =</strong></span><span>${theta.toFixed(4)} radians</span></div>
                <div class="info-row"><span><strong>θ =</strong></span><span>${(theta * 180 / Math.PI).toFixed(2)}°</span></div>
                <hr style="margin: 10px 0;">
                <div class="info-row"><span><strong>cos θ =</strong></span><span>${cosTheta.toFixed(4)}</span></div>
                <div class="info-row"><span><strong>sin θ =</strong></span><span>${sinTheta.toFixed(4)}</span></div>
                <hr style="margin: 10px 0;">
                <div class="formula" style="margin: 15px 0;">
                    e^(i×${theta.toFixed(2)}) = ${cosTheta.toFixed(3)} + ${sinTheta.toFixed(3)}i
                </div>
                <div class="info-row"><span><strong>Polar:</strong></span><span>1 × e^(i×${theta.toFixed(2)})</span></div>
                <div class="info-row"><span><strong>Rectangular:</strong></span><span>${cosTheta.toFixed(3)} + ${sinTheta.toFixed(3)}i</span></div>
            `;

            document.getElementById('eulerInfo').innerHTML = html;
        }

        function setTheta(value) {
            document.getElementById('theta').value = value;
            drawEulerFormula();
        }

        function animateEuler() {
            let theta = 0;
            eulerAnimationId = setInterval(() => {
                theta += 0.02;
                if (theta > 2 * Math.PI) theta = 0;
                document.getElementById('theta').value = theta;
                drawEulerFormula();
            }, 30);
        }

        function stopEulerAnimation() {
            if (eulerAnimationId) {
                clearInterval(eulerAnimationId);
                eulerAnimationId = null;
            }
        }

        document.getElementById('theta').addEventListener('input', function() {
            drawEulerFormula();
        });

        // Fractal rendering
        function setFractalType(type) {
            fractalType = type;
            document.getElementById('mandelbrotBtn').className = type === 'mandelbrot' ? 'btn' : 'btn btn-secondary';
            document.getElementById('juliaBtn').className = type === 'julia' ? 'btn' : 'btn btn-secondary';
            document.getElementById('juliaControls').style.display = type === 'julia' ? 'block' : 'none';
            renderFractal();
        }

        function setJuliaC(real, imag) {
            document.getElementById('juliaReal').value = real;
            document.getElementById('juliaImag').value = imag;
            juliaC = {real, imag};
            renderFractal();
        }

        function setColorScheme(scheme) {
            colorScheme = scheme;
            document.querySelectorAll('.color-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            renderFractal();
        }

        function resetFractalView() {
            fractalView = {
                centerX: fractalType === 'mandelbrot' ? -0.5 : 0,
                centerY: 0,
                zoom: 1
            };
            renderFractal();
        }

        function zoomIn() {
            fractalView.zoom *= 2;
            renderFractal();
        }

        function zoomOut() {
            fractalView.zoom /= 2;
            renderFractal();
        }

        function getColor(iterations, maxIter) {
            if (iterations === maxIter) return [0, 0, 0];
            
            const t = iterations / maxIter;
            let r, g, b;

            switch(colorScheme) {
                case 'classic':
                    r = Math.floor(9 * (1 - t) * t * t * t * 255);
                    g = Math.floor(15 * (1 - t) * (1 - t) * t * t * 255);
                    b = Math.floor(8.5 * (1 - t) * (1 - t) * (1 - t) * t * 255);
                    break;
                case 'fire':
                    r = Math.floor(255 * Math.min(1, 2 * t));
                    g = Math.floor(255 * Math.min(1, 2 * t - 0.5));
                    b = Math.floor(255 * Math.min(1, 2 * t - 1));
                    break;
                case 'ocean':
                    r = Math.floor(0 + t * 100);
                    g = Math.floor(102 + t * 150);
                    b = Math.floor(204 + t * 51);
                    break;
                case 'rainbow':
                    const hue = t * 360;
                    const rgb = hslToRgb(hue / 360, 1, 0.5);
                    r = rgb[0];
                    g = rgb[1];
                    b = rgb[2];
                    break;
                case 'grayscale':
                    r = g = b = Math.floor(t * 255);
                    break;
            }

            return [r, g, b];
        }

        function hslToRgb(h, s, l) {
            let r, g, b;
            if (s === 0) {
                r = g = b = l;
            } else {
                const hue2rgb = (p, q, t) => {
                    if (t < 0) t += 1;
                    if (t > 1) t -= 1;
                    if (t < 1/6) return p + (q - p) * 6 * t;
                    if (t < 1/2) return q;
                    if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;
                    return p;
                };
                const q = l < 0.5 ? l * (1 + s) : l + s - l * s;
                const p = 2 * l - q;
                r = hue2rgb(p, q, h + 1/3);
                g = hue2rgb(p, q, h);
                b = hue2rgb(p, q, h - 1/3);
            }
            return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];
        }

        function renderFractal() {
            const canvas = document.getElementById('fractalCanvas');
            const ctx = canvas.getContext('2d');
            const width = canvas.width;
            const height = canvas.height;
            
            maxIterations = parseInt(document.getElementById('maxIter').value);
            document.getElementById('maxIterVal').textContent = maxIterations;

            if (fractalType === 'julia') {
                juliaC.real = parseFloat(document.getElementById('juliaReal').value);
                juliaC.imag = parseFloat(document.getElementById('juliaImag').value);
            }

            document.getElementById('fractalLoading').style.display = 'block';

            // Use setTimeout to allow UI to update
            setTimeout(() => {
                const imageData = ctx.createImageData(width, height);
                const data = imageData.data;

                const xMin = fractalView.centerX - 2 / fractalView.zoom;
                const xMax = fractalView.centerX + 2 / fractalView.zoom;
                const yMin = fractalView.centerY - 1.5 / fractalView.zoom;
                const yMax = fractalView.centerY + 1.5 / fractalView.zoom;

                for (let py = 0; py < height; py++) {
                    for (let px = 0; px < width; px++) {
                        const x0 = xMin + (px / width) * (xMax - xMin);
                        const y0 = yMin + (py / height) * (yMax - yMin);

                        let x, y, iteration;
                        
                        if (fractalType === 'mandelbrot') {
                            x = 0;
                            y = 0;
                            iteration = 0;

                            while (x*x + y*y <= 4 && iteration < maxIterations) {
                                const xTemp = x*x - y*y + x0;
                                y = 2*x*y + y0;
                                x = xTemp;
                                iteration++;
                            }
                        } else {
                            x = x0;
                            y = y0;
                            iteration = 0;

                            while (x*x + y*y <= 4 && iteration < maxIterations) {
                                const xTemp = x*x - y*y + juliaC.real;
                                y = 2*x*y + juliaC.imag;
                                x = xTemp;
                                iteration++;
                            }
                        }

                        const pixelIndex = (py * width + px) * 4;
                        const color = getColor(iteration, maxIterations);
                        data[pixelIndex] = color[0];
                        data[pixelIndex + 1] = color[1];
                        data[pixelIndex + 2] = color[2];
                        data[pixelIndex + 3] = 255;
                    }
                }

                ctx.putImageData(imageData, 0, 0);
                document.getElementById('fractalLoading').style.display = 'none';
            }, 10);
        }

        // Fractal zoom on click
        document.getElementById('fractalCanvas').addEventListener('click', function(e) {
            const rect = this.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            const xMin = fractalView.centerX - 2 / fractalView.zoom;
            const xMax = fractalView.centerX + 2 / fractalView.zoom;
            const yMin = fractalView.centerY - 1.5 / fractalView.zoom;
            const yMax = fractalView.centerY + 1.5 / fractalView.zoom;

            fractalView.centerX = xMin + (x / this.width) * (xMax - xMin);
            fractalView.centerY = yMin + (y / this.height) * (yMax - yMin);
            fractalView.zoom *= 2;

            renderFractal();
        });

        document.getElementById('maxIter').addEventListener('input', function() {
            document.getElementById('maxIterVal').textContent = this.value;
        });

        // Practice questions
        function loadQuestion() {
            if (currentQuestionIndex >= questions.length) {
                currentQuestionIndex = 0;
            }

            const q = questions[currentQuestionIndex];
            const questionHTML = `
                <h4>Question ${currentQuestionIndex + 1} of ${questions.length}</h4>
                <p style="font-size: 1.2em; margin: 20px 0;">${q.question}</p>
                <div class="options">
                    ${q.options.map((opt, i) => `
                        <button class="option-btn" onclick="checkAnswer(${i})">${opt}</button>
                    `).join('')}
                </div>
                <div id="feedback"></div>
            `;

            document.getElementById('currentQuestion').innerHTML = questionHTML;
        }

        function checkAnswer(selected) {
            const q = questions[currentQuestionIndex];
            const options = document.querySelectorAll('.option-btn');
            const feedback = document.getElementById('feedback');

            totalQuestions++;

            options.forEach((btn, i) => {
                btn.disabled = true;
                if (i === q.correct) {
                    btn.classList.add('correct');
                } else if (i === selected) {
                    btn.classList.add('incorrect');
                }
            });

            if (selected === q.correct) {
                correctAnswers++;
                feedback.innerHTML = `
                    <div class="feedback correct">
                        ✅ Correct! ${q.explanation}
                    </div>
                    <button class="btn" onclick="nextQuestion()">Next Question →</button>
                `;
            } else {
                feedback.innerHTML = `
                    <div class="feedback incorrect">
                        ❌ Not quite. ${q.explanation}
                    </div>
                    <button class="btn" onclick="nextQuestion()">Next Question →</button>
                `;
            }

            updateScore();
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex >= questions.length) {
                const percentage = totalQuestions > 0 ? Math.round((correctAnswers / totalQuestions) * 100) : 0;
                document.getElementById('currentQuestion').innerHTML = `
                    <div style="text-align: center; padding: 40px;">
                        <h3 style="color: #667eea; font-size: 2em; margin-bottom: 20px;">🎉 Practice Complete!</h3>
                        <p style="font-size: 1.3em; margin: 20px 0;">You've completed all practice questions!</p>
                        <div class="info-display" style="max-width: 400px; margin: 30px auto;">
                            <div style="font-size: 1.5em; margin: 10px 0;">Your Score: <strong>${percentage}%</strong></div>
                            <div style="font-size: 1.2em; margin: 10px 0;">Correct: ${correctAnswers} / ${totalQuestions}</div>
                        </div>
                        <button class="btn" onclick="resetPractice()" style="font-size: 1.3em; padding: 20px 50px; margin-top: 20px;">
                            🔄 Start Over
                        </button>
                    </div>
                `;
            } else {
                loadQuestion();
            }
        }

        function resetPractice() {
            currentQuestionIndex = 0;
            loadQuestion();
        }

        function updateScore() {
            document.getElementById('correctCount').textContent = correctAnswers;
            document.getElementById('totalCount').textContent = totalQuestions;
            const percentage = totalQuestions > 0 ? Math.round((correctAnswers / totalQuestions) * 100) : 0;
            document.getElementById('percentage').textContent = percentage + '%';
        }

        // Initialize on load
        window.onload = function() {
            drawComplexPlane();
        };
    </script>
</body>
</html>