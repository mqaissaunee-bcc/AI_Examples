<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bloomberg Market Concepts (BMC) Certification Prep</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap');

        :root {
            --primary-dark: #0a0f1c;
            --primary-medium: #141d2f;
            --primary-light: #1e3a5f;
            --accent-orange: #ff6b35;
            --accent-gold: #ffc857;
            --accent-green: #2ecc71;
            --accent-blue: #3498db;
            --accent-purple: #9b59b6;
            --text-primary: #ffffff;
            --text-secondary: #a0aec0;
            --text-dark: #1a202c;
            --bg-light: #f7fafc;
            --bg-card: #ffffff;
            --success: #2ecc71;
            --warning: #f39c12;
            --error: #e74c3c;
            --bb-amber: #ff8c00;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, var(--primary-dark) 0%, var(--primary-medium) 100%);
            min-height: 100vh;
            color: var(--text-primary);
            line-height: 1.6;
        }

        /* Skip Link for Accessibility */
        .skip-link {
            position: absolute;
            top: -50px;
            left: 0;
            background: var(--accent-orange);
            color: white;
            padding: 10px 20px;
            z-index: 1000;
            text-decoration: none;
            border-radius: 0 0 8px 0;
            transition: top 0.3s;
        }

        .skip-link:focus {
            top: 0;
        }

        /* Header */
        header {
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, var(--accent-orange), var(--bb-amber));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.2rem;
            color: white;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
        }

        .logo-text h1 {
            font-size: 1.4rem;
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        .logo-text p {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        .progress-overview {
            display: flex;
            align-items: center;
            gap: 1rem;
            background: rgba(255, 255, 255, 0.08);
            padding: 0.75rem 1.5rem;
            border-radius: 50px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .progress-bar-container {
            width: 180px;
            height: 8px;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, var(--accent-green), var(--accent-blue));
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        #progressText {
            font-size: 0.9rem;
            font-weight: 600;
        }

        /* Main Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Navigation Tabs */
        .nav-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 2rem;
            background: rgba(0, 0, 0, 0.3);
            padding: 1rem;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }

        .nav-tab {
            padding: 0.75rem 1.25rem;
            background: transparent;
            border: 2px solid transparent;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-family: inherit;
        }

        .nav-tab:hover,
        .nav-tab:focus {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            outline: none;
        }

        .nav-tab.active {
            background: linear-gradient(135deg, var(--accent-orange), var(--bb-amber));
            color: white;
            box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
        }

        .nav-tab .badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.2rem 0.6rem;
            border-radius: 12px;
            font-size: 0.75rem;
        }

        /* Content Sections */
        .content-section {
            display: none;
            animation: fadeIn 0.4s ease;
        }

        .content-section.active {
            display: block;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Module Card */
        .module-card {
            background: var(--bg-card);
            color: var(--text-dark);
            border-radius: 20px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .module-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1.5rem;
            flex-wrap: wrap;
            gap: 1rem;
        }

        .module-title {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .module-icon {
            width: 60px;
            height: 60px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
        }

        .module-icon.economics { background: linear-gradient(135deg, #3498db, #2980b9); }
        .module-icon.currencies { background: linear-gradient(135deg, #2ecc71, #27ae60); }
        .module-icon.fixed-income { background: linear-gradient(135deg, #9b59b6, #8e44ad); }
        .module-icon.equities { background: linear-gradient(135deg, #e74c3c, #c0392b); }
        .module-icon.terminal { background: linear-gradient(135deg, var(--bb-amber), #d68910); }
        .module-icon.portfolio { background: linear-gradient(135deg, #1abc9c, #16a085); }

        .module-info h2 {
            font-size: 1.5rem;
            margin-bottom: 0.25rem;
            color: var(--text-dark);
        }

        .module-info p {
            color: #718096;
            font-size: 0.9rem;
        }

        .module-stats {
            display: flex;
            gap: 2rem;
            flex-wrap: wrap;
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-light);
        }

        .stat-label {
            font-size: 0.8rem;
            color: #718096;
        }

        /* Lesson Navigation */
        .lesson-nav {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #e2e8f0;
        }

        .lesson-btn {
            padding: 0.6rem 1.2rem;
            border: 2px solid #e2e8f0;
            background: transparent;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85rem;
            font-weight: 500;
            transition: all 0.3s ease;
            color: var(--text-dark);
            font-family: inherit;
        }

        .lesson-btn:hover,
        .lesson-btn:focus {
            border-color: var(--primary-light);
            background: rgba(30, 58, 95, 0.08);
            outline: none;
        }

        .lesson-btn.active {
            background: var(--primary-light);
            color: white;
            border-color: var(--primary-light);
        }

        .lesson-btn.completed::after {
            content: " ‚úì";
            color: var(--success);
        }

        /* Lesson Content */
        .lesson-content {
            display: none;
        }

        .lesson-content.active {
            display: block;
        }

        .lesson-content h3 {
            font-size: 1.4rem;
            margin-bottom: 1rem;
            color: var(--primary-dark);
        }

        .lesson-content p {
            margin-bottom: 1rem;
            line-height: 1.8;
            color: #4a5568;
        }

        /* Concept Boxes */
        .concept-box {
            background: linear-gradient(135deg, #f8fafc, #edf2f7);
            border-left: 4px solid var(--primary-light);
            padding: 1.25rem;
            margin: 1.5rem 0;
            border-radius: 0 12px 12px 0;
        }

        .concept-box h4 {
            color: var(--primary-dark);
            margin-bottom: 0.75rem;
            font-size: 1rem;
        }

        .formula-box {
            background: linear-gradient(135deg, #1a202c, #2d3748);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            font-family: 'JetBrains Mono', monospace;
            font-size: 1.1rem;
            text-align: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .example-box {
            background: linear-gradient(135deg, #e6fffa, #b2f5ea);
            border: 1px solid #38b2ac;
            padding: 1.25rem;
            border-radius: 12px;
            margin: 1.5rem 0;
        }

        .example-box h4 {
            color: #234e52;
            margin-bottom: 0.75rem;
        }

        .warning-box {
            background: linear-gradient(135deg, #fffaf0, #feebc8);
            border: 1px solid #ed8936;
            padding: 1.25rem;
            border-radius: 12px;
            margin: 1.5rem 0;
        }

        .warning-box h4 {
            color: #c05621;
            margin-bottom: 0.75rem;
        }

        /* Simulation Container */
        .simulation-container {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .simulation-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-dark);
            margin-bottom: 1rem;
        }

        .simulation-controls {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            margin-bottom: 1rem;
        }

        .control-group {
            flex: 1;
            min-width: 200px;
        }

        .control-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--text-dark);
            font-size: 0.9rem;
        }

        .control-group input[type="range"] {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: #e2e8f0;
            outline: none;
            -webkit-appearance: none;
        }

        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: var(--primary-light);
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(30, 58, 95, 0.3);
        }

        .control-group input[type="number"],
        .control-group select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            transition: border-color 0.3s;
        }

        .control-group input:focus,
        .control-group select:focus {
            border-color: var(--primary-light);
            outline: none;
        }

        .simulation-output {
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 1.5rem;
            margin-top: 1rem;
        }

        .output-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-dark);
        }

        .output-label {
            font-size: 0.9rem;
            color: #718096;
        }

        /* Data Tables */
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }

        .data-table th,
        .data-table td {
            padding: 0.85rem 1rem;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }

        .data-table th {
            background: #f8fafc;
            font-weight: 600;
            color: var(--primary-dark);
            font-size: 0.85rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .data-table tr:hover {
            background: #f8fafc;
        }

        .data-table .positive { color: var(--success); font-weight: 600; }
        .data-table .negative { color: var(--error); font-weight: 600; }

        /* Buttons */
        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-family: inherit;
        }

        .btn:focus {
            outline: 3px solid rgba(52, 152, 219, 0.4);
            outline-offset: 2px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary-light), var(--primary-medium));
            color: white;
            box-shadow: 0 4px 15px rgba(30, 58, 95, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(30, 58, 95, 0.4);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success), #27ae60);
            color: white;
        }

        .btn-secondary {
            background: #718096;
            color: white;
        }

        .btn-terminal {
            background: linear-gradient(135deg, var(--bb-amber), #d68910);
            color: white;
            box-shadow: 0 4px 15px rgba(255, 140, 0, 0.3);
        }

        .btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 0.75rem;
            margin-top: 1.5rem;
        }

        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .dashboard-card {
            background: linear-gradient(135deg, #f8fafc, #edf2f7);
            border-radius: 16px;
            padding: 1.5rem;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #e2e8f0;
        }

        .dashboard-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .dashboard-card h3 {
            font-size: 0.85rem;
            color: #718096;
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .dashboard-card .value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary-dark);
        }

        .dashboard-card .subtext {
            font-size: 0.85rem;
            color: #a0aec0;
            margin-top: 0.25rem;
        }

        /* Module Progress List */
        .module-progress-list {
            margin: 1.5rem 0;
        }

        .module-progress-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: #f8fafc;
            border-radius: 12px;
            margin-bottom: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .module-progress-item:hover {
            background: #edf2f7;
            border-color: var(--primary-light);
        }

        .module-progress-icon {
            width: 45px;
            height: 45px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3rem;
        }

        .module-progress-info {
            flex: 1;
        }

        .module-progress-info h4 {
            font-size: 1rem;
            margin-bottom: 0.25rem;
            color: var(--text-dark);
        }

        .module-progress-info p {
            font-size: 0.85rem;
            color: #718096;
        }

        .module-progress-bar {
            width: 100px;
            height: 6px;
            background: #e2e8f0;
            border-radius: 3px;
            overflow: hidden;
        }

        .module-progress-bar .fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--accent-blue));
            border-radius: 3px;
            transition: width 0.5s ease;
        }

        /* Quiz Styles */
        .quiz-container {
            background: #f8fafc;
            border-radius: 16px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .quiz-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-dark);
        }

        .question-container {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .question-text {
            font-size: 1.1rem;
            font-weight: 500;
            margin-bottom: 1rem;
            color: var(--text-dark);
        }

        .options-list {
            list-style: none;
        }

        .option-item {
            margin-bottom: 0.75rem;
        }

        .option-label {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            padding: 1rem;
            background: #f8fafc;
            border: 2px solid transparent;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-label:hover {
            background: #edf2f7;
        }

        .option-label input {
            margin-top: 0.25rem;
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .option-label.selected {
            border-color: var(--primary-light);
            background: rgba(30, 58, 95, 0.08);
        }

        .option-label.correct {
            border-color: var(--success);
            background: rgba(46, 204, 113, 0.1);
        }

        .option-label.incorrect {
            border-color: var(--error);
            background: rgba(231, 76, 60, 0.1);
        }

        .quiz-feedback {
            padding: 1rem;
            border-radius: 10px;
            margin-top: 1rem;
            display: none;
        }

        .quiz-feedback.correct {
            display: block;
            background: rgba(46, 204, 113, 0.1);
            border: 1px solid var(--success);
            color: #1e8449;
        }

        .quiz-feedback.incorrect {
            display: block;
            background: rgba(231, 76, 60, 0.1);
            border: 1px solid var(--error);
            color: #c0392b;
        }

        /* Flashcards */
        .flashcard-container {
            perspective: 1000px;
            margin: 1.5rem 0;
        }

        .flashcard {
            width: 100%;
            height: 200px;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s ease;
            cursor: pointer;
        }

        .flashcard.flipped {
            transform: rotateY(180deg);
        }

        .flashcard-front,
        .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            text-align: center;
        }

        .flashcard-front {
            background: linear-gradient(135deg, var(--primary-light), var(--primary-medium));
            color: white;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .flashcard-back {
            background: white;
            color: var(--text-dark);
            transform: rotateY(180deg);
            border: 2px solid var(--primary-light);
            line-height: 1.6;
        }

        .flashcard-hint {
            text-align: center;
            margin-top: 0.5rem;
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Terminal Simulator Embed */
        .terminal-embed-container {
            background: #000;
            border-radius: 16px;
            overflow: hidden;
            margin: 1.5rem 0;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.4);
        }

        .terminal-embed-header {
            background: linear-gradient(180deg, #2d2d2d, #1a1a1a);
            padding: 12px 16px;
            display: flex;
            align-items: center;
            gap: 8px;
            border-bottom: 1px solid #444;
        }

        .terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .terminal-dot.red { background: #ff5f56; }
        .terminal-dot.yellow { background: #ffbd2e; }
        .terminal-dot.green { background: #27c93f; }

        .terminal-embed-title {
            margin-left: 10px;
            color: #888;
            font-size: 0.85rem;
        }

        .terminal-embed-frame {
            width: 100%;
            height: 600px;
            border: none;
        }

        .terminal-launch-btn {
            display: block;
            width: 100%;
            padding: 20px;
            background: linear-gradient(135deg, #1a1a1a, #0d0d0d);
            color: var(--bb-amber);
            border: 2px solid var(--bb-amber);
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'JetBrains Mono', monospace;
            margin: 1.5rem 0;
        }

        .terminal-launch-btn:hover {
            background: var(--bb-amber);
            color: #000;
        }

        /* Focus styles */
        *:focus-visible {
            outline: 3px solid var(--accent-blue);
            outline-offset: 2px;
        }

        /* Reduced motion */
        @media (prefers-reduced-motion: reduce) {
            *,
            *::before,
            *::after {
                animation-duration: 0.01ms !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Responsive */
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                text-align: center;
            }

            .progress-overview {
                width: 100%;
                justify-content: center;
            }

            .container {
                padding: 1rem;
            }

            .nav-tabs {
                flex-direction: column;
            }

            .nav-tab {
                width: 100%;
                justify-content: center;
            }

            .simulation-controls {
                flex-direction: column;
            }

            .control-group {
                min-width: 100%;
            }

            .module-header {
                flex-direction: column;
            }
        }

        /* Footer */
        footer {
            text-align: center;
            padding: 2rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        footer a {
            color: var(--accent-blue);
            text-decoration: none;
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <header role="banner">
        <div class="logo">
            <div class="logo-icon" aria-hidden="true">BMC</div>
            <div class="logo-text">
                <h1>Bloomberg Market Concepts</h1>
                <p>Interactive Certification Prep</p>
            </div>
        </div>
        <div class="progress-overview" role="status" aria-live="polite">
            <div class="progress-bar-container">
                <div class="progress-bar" id="totalProgress" style="width: 0%;"></div>
            </div>
            <span id="progressText">0% Complete</span>
        </div>
    </header>

    <main id="main-content" class="container">
        <nav class="nav-tabs" role="tablist" aria-label="Module Navigation">
            <button class="nav-tab active" role="tab" data-tab="dashboard">üìä Dashboard</button>
            <button class="nav-tab" role="tab" data-tab="economic">üìà Economic Indicators <span class="badge" id="badge-economic">0%</span></button>
            <button class="nav-tab" role="tab" data-tab="currencies">üí± Currencies <span class="badge" id="badge-currencies">0%</span></button>
            <button class="nav-tab" role="tab" data-tab="fixed-income">üìú Fixed Income <span class="badge" id="badge-fixed-income">0%</span></button>
            <button class="nav-tab" role="tab" data-tab="equities">üìä Equities <span class="badge" id="badge-equities">0%</span></button>
            <button class="nav-tab" role="tab" data-tab="terminal">üíª Terminal <span class="badge" id="badge-terminal">0%</span></button>
            <button class="nav-tab" role="tab" data-tab="portfolio">üìù Portfolio <span class="badge" id="badge-portfolio">0%</span></button>
        </nav>

        <!-- Dashboard Section -->
        <section id="dashboard" class="content-section active" role="tabpanel">
            <div class="module-card">
                <h2 style="margin-bottom: 1.5rem; font-size: 1.75rem;">üìö Welcome to BMC Certification Prep</h2>
                <p style="margin-bottom: 1.5rem; color: #718096;">The Bloomberg Market Concepts (BMC) certification is a self-paced e-learning course providing an interactive introduction to financial markets. This prep tool helps you master core concepts with interactive simulations and a realistic terminal experience.</p>
                
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <h3>Total Progress</h3>
                        <div class="value" id="dashboardProgress">0%</div>
                        <div class="subtext">of all modules completed</div>
                    </div>
                    <div class="dashboard-card">
                        <h3>Estimated Time</h3>
                        <div class="value">10-15 hrs</div>
                        <div class="subtext">with practice & simulations</div>
                    </div>
                    <div class="dashboard-card">
                        <h3>Quiz Score</h3>
                        <div class="value" id="dashboardScore">--</div>
                        <div class="subtext">average across modules</div>
                    </div>
                    <div class="dashboard-card">
                        <h3>Certification Ready</h3>
                        <div class="value" id="certReady">Not Yet</div>
                        <div class="subtext">complete all core modules</div>
                    </div>
                </div>

                <h3 style="margin-bottom: 1rem; color: var(--primary-dark);">üìã Module Progress</h3>
                <div class="module-progress-list">
                    <div class="module-progress-item" onclick="switchTab('economic')" tabindex="0" role="button">
                        <div class="module-progress-icon economics">üìà</div>
                        <div class="module-progress-info">
                            <h4>Economic Indicators</h4>
                            <p>~1 hour √¢‚Äö¬¨√Ç¬¢ GDP, PMI, Inflation</p>
                        </div>
                        <div class="module-progress-bar"><div class="fill" id="progress-economic" style="width: 0%;"></div></div>
                    </div>
                    <div class="module-progress-item" onclick="switchTab('currencies')" tabindex="0" role="button">
                        <div class="module-progress-icon currencies">üí±</div>
                        <div class="module-progress-info">
                            <h4>Currencies</h4>
                            <p>~1 hour √¢‚Äö¬¨√Ç¬¢ FX Markets, Valuation</p>
                        </div>
                        <div class="module-progress-bar"><div class="fill" id="progress-currencies" style="width: 0%;"></div></div>
                    </div>
                    <div class="module-progress-item" onclick="switchTab('fixed-income')" tabindex="0" role="button">
                        <div class="module-progress-icon fixed-income">üìú</div>
                        <div class="module-progress-info">
                            <h4>Fixed Income</h4>
                            <p>~3 hours √¢‚Äö¬¨√Ç¬¢ Bonds, Yield Curves</p>
                        </div>
                        <div class="module-progress-bar"><div class="fill" id="progress-fixed-income" style="width: 0%;"></div></div>
                    </div>
                    <div class="module-progress-item" onclick="switchTab('equities')" tabindex="0" role="button">
                        <div class="module-progress-icon equities">üìä</div>
                        <div class="module-progress-info">
                            <h4>Equities</h4>
                            <p>~3 hours √¢‚Äö¬¨√Ç¬¢ Stocks, Valuation</p>
                        </div>
                        <div class="module-progress-bar"><div class="fill" id="progress-equities" style="width: 0%;"></div></div>
                    </div>
                    <div class="module-progress-item" onclick="switchTab('terminal')" tabindex="0" role="button">
                        <div class="module-progress-icon terminal">üíª</div>
                        <div class="module-progress-info">
                            <h4>Terminal Basics</h4>
                            <p>~2 hours √¢‚Äö¬¨√Ç¬¢ Navigation, Functions</p>
                        </div>
                        <div class="module-progress-bar"><div class="fill" id="progress-terminal" style="width: 0%;"></div></div>
                    </div>
                    <div class="module-progress-item" onclick="switchTab('portfolio')" tabindex="0" role="button">
                        <div class="module-progress-icon portfolio">üìù</div>
                        <div class="module-progress-info">
                            <h4>Portfolio Management</h4>
                            <p>~2 hours √¢‚Äö¬¨√Ç¬¢ Strategy, Risk</p>
                        </div>
                        <div class="module-progress-bar"><div class="fill" id="progress-portfolio" style="width: 0%;"></div></div>
                    </div>
                </div>

                <div class="concept-box">
                    <h4>üí° Study Tips</h4>
                    <ul style="margin-left: 1.5rem; margin-top: 0.75rem; line-height: 1.8;">
                        <li>Complete modules in order - concepts build upon each other</li>
                        <li>Use interactive simulations to reinforce learning</li>
                        <li>Practice with the Terminal Simulator before the real exam</li>
                        <li>Take notes on key formulas and concepts</li>
                        <li>Review flashcards before attempting module quizzes</li>
                        <li>The actual BMC exam has ~120 questions throughout the modules</li>
                    </ul>
                </div>
                
                <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid #e2e8f0;">
                    <button class="btn btn-secondary" onclick="resetProgress()" style="opacity: 0.7; font-size: 0.9rem;">
                        üîÑ Reset All Progress
                    </button>
                    <span style="margin-left: 1rem; color: #718096; font-size: 0.85rem;">Start fresh if needed</span>
                </div>
            </div>
        </section>

        <!-- Economic Indicators Module -->
        <section id="economic" class="content-section" role="tabpanel">
            <div class="module-card">
                <div class="module-header">
                    <div class="module-title">
                        <div class="module-icon economics">üìà</div>
                        <div class="module-info">
                            <h2>Economic Indicators</h2>
                            <p>Understanding GDP, PMI, and Economic Health</p>
                        </div>
                    </div>
                    <div class="module-stats">
                        <div class="stat">
                            <div class="stat-value">~1 hr</div>
                            <div class="stat-label">Duration</div>
                        </div>
                        <div class="stat">
                            <div class="stat-value">3</div>
                            <div class="stat-label">Lessons</div>
                        </div>
                    </div>
                </div>

                <div class="lesson-nav">
                    <button class="lesson-btn active" data-lesson="econ-1">1. Primacy of GDP</button>
                    <button class="lesson-btn" data-lesson="econ-2">2. Monitoring GDP</button>
                    <button class="lesson-btn" data-lesson="econ-3">3. Forecasting GDP</button>
                    <button class="lesson-btn" data-lesson="econ-quiz">üìù Quiz</button>
                </div>

                <!-- Lesson 1: Primacy of GDP -->
                <div class="lesson-content active" id="econ-1">
                    <h3>üìä The Primacy of GDP</h3>
                    <p><strong>Gross Domestic Product (GDP)</strong> is the primary measure of a country's economic activity √¢‚Äö¬¨√¢‚Ç¨¬ù the total market value of all final goods and services produced within a country during a specific period.</p>
                    
                    <div class="concept-box">
                        <h4>üéØ GDP Formula (Expenditure Approach)</h4>
                        <p>GDP is calculated by summing all spending categories:</p>
                    </div>
                    
                    <div class="formula-box">GDP = C + I + G + (X - M)</div>
                    
                    <div class="example-box">
                        <h4>üìå Component Breakdown</h4>
                        <ul style="margin-left: 1.5rem; line-height: 1.8;">
                            <li><strong>C (Consumption)</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Personal/household spending (~68% of US GDP)</li>
                            <li><strong>I (Investment)</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Business investment in equipment & structures</li>
                            <li><strong>G (Government)</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Government spending on goods & services</li>
                            <li><strong>X (Exports)</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Goods/services sold to other countries</li>
                            <li><strong>M (Imports)</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Goods/services bought from other countries</li>
                        </ul>
                    </div>

                    <div class="simulation-container">
                        <div class="simulation-title">üì¨ Interactive: GDP Calculator</div>
                        <div class="simulation-controls">
                            <div class="control-group">
                                <label for="gdp-c">Consumer Spending (C) - Billions</label>
                                <input type="number" id="gdp-c" value="14000" onchange="calculateGDP()">
                            </div>
                            <div class="control-group">
                                <label for="gdp-i">Investment (I) - Billions</label>
                                <input type="number" id="gdp-i" value="3500" onchange="calculateGDP()">
                            </div>
                            <div class="control-group">
                                <label for="gdp-g">Government (G) - Billions</label>
                                <input type="number" id="gdp-g" value="3800" onchange="calculateGDP()">
                            </div>
                            <div class="control-group">
                                <label for="gdp-x">Exports (X) - Billions</label>
                                <input type="number" id="gdp-x" value="2500" onchange="calculateGDP()">
                            </div>
                            <div class="control-group">
                                <label for="gdp-m">Imports (M) - Billions</label>
                                <input type="number" id="gdp-m" value="3200" onchange="calculateGDP()">
                            </div>
                        </div>
                        <div class="simulation-output">
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem;">
                                <div>
                                    <div class="output-value" id="gdp-result">$20,600B</div>
                                    <div class="output-label">Total GDP</div>
                                </div>
                                <div>
                                    <div class="output-value" id="net-exports">-$700B</div>
                                    <div class="output-label">Net Exports (X-M)</div>
                                </div>
                                <div>
                                    <div class="output-value" id="c-percent">68%</div>
                                    <div class="output-label">C as % of GDP</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="concept-box">
                        <h4>üìà Real vs. Nominal GDP</h4>
                        <p><strong>Nominal GDP</strong> measures output at current market prices (includes inflation effects).</p>
                        <p><strong>Real GDP</strong> adjusts for inflation, showing true economic growth.</p>
                        <p style="margin-top: 0.75rem; font-family: 'JetBrains Mono', monospace; background: #e2e8f0; padding: 0.5rem; border-radius: 6px;">
                            Real GDP Growth = Nominal GDP Growth - Inflation Rate
                        </p>
                    </div>

                    <div class="warning-box">
                        <h4>‚ö†Ô∏è Recession Definition</h4>
                        <p>A <strong>recession</strong> is technically defined as <strong>two consecutive quarters of negative real GDP growth</strong>. This is a critical concept for the BMC exam!</p>
                    </div>

                    <h4 style="margin-top: 1.5rem; color: var(--primary-dark);">üé¥ Review Flashcard</h4>
                    <div class="flashcard-container">
                        <div class="flashcard" onclick="this.classList.toggle('flipped')" tabindex="0" onkeypress="if(event.key==='Enter')this.classList.toggle('flipped')">
                            <div class="flashcard-front">What percentage of US GDP does consumer spending (C) typically represent?</div>
                            <div class="flashcard-back">Approximately <strong>68%</strong> (roughly two-thirds) of US GDP comes from consumer spending. This is why unemployment rates and consumer confidence are such important economic indicators.</div>
                        </div>
                    </div>
                    <p class="flashcard-hint">Click the card to flip</p>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="markLessonComplete('economic', 'econ-1'); showLesson('econ-2')">Continue to Lesson 2 ‚Üí</button>
                    </div>
                </div>

                <!-- Lesson 2: Monitoring GDP -->
                <div class="lesson-content" id="econ-2">
                    <h3>üìä Monitoring GDP</h3>
                    <p>GDP figures are released <strong>quarterly</strong> and typically arrive too late to be useful for real-time decisions. Investors monitor monthly leading indicators that provide earlier signals about economic direction.</p>
                    
                    <div class="concept-box">
                        <h4>üîë Key Leading Indicators</h4>
                        <ol style="margin-left: 1.5rem; line-height: 1.8;">
                            <li><strong>PMI (Purchasing Managers' Index)</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Best leading indicator, released monthly</li>
                            <li><strong>Nonfarm Payrolls</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Monthly employment report</li>
                            <li><strong>Housing Starts</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù New residential construction</li>
                            <li><strong>CPI (Consumer Price Index)</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Key inflation measure</li>
                        </ol>
                    </div>

                    <h4>PMI: The Premier Leading Indicator</h4>
                    <p>The PMI surveys purchasing managers about business conditions. The critical threshold is <strong>50</strong>:</p>
                    <ul style="margin-left: 1.5rem; margin-top: 0.5rem; line-height: 1.8;">
                        <li><strong>Above 50</strong> = Economic expansion (business optimism)</li>
                        <li><strong>Below 50</strong> = Economic contraction (business pessimism)</li>
                        <li><strong>At 50</strong> = No change from previous month</li>
                    </ul>

                    <div class="simulation-container">
                        <div class="simulation-title">üìà PMI Indicator Interpretation</div>
                        <div class="control-group">
                            <label for="pmi-value">Set PMI Value: <span id="pmi-display">50</span></label>
                            <input type="range" id="pmi-value" min="30" max="70" value="50" oninput="updatePMI()">
                        </div>
                        <div class="simulation-output">
                            <div id="pmi-interpretation" style="font-size: 1.3rem; font-weight: 600; text-align: center; margin-bottom: 1rem;">
                                Neutral - Economy at equilibrium
                            </div>
                            <div id="pmi-gauge" style="height: 30px; background: linear-gradient(to right, #e74c3c, #f39c12 35%, #2ecc71 50%, #2ecc71); border-radius: 15px; position: relative;">
                                <div id="pmi-marker" style="position: absolute; top: -5px; left: 50%; transform: translateX(-50%); width: 4px; height: 40px; background: #1a202c; border-radius: 2px;"></div>
                            </div>
                            <div style="display: flex; justify-content: space-between; font-size: 0.85rem; color: #718096; margin-top: 0.5rem;">
                                <span>30 (Severe Contraction)</span>
                                <span>50 (Neutral)</span>
                                <span>70 (Strong Expansion)</span>
                            </div>
                        </div>
                    </div>

                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Indicator</th>
                                <th>Frequency</th>
                                <th>Why It Matters</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>PMI</td>
                                <td>Monthly</td>
                                <td>First signal of business confidence; leads GDP by 3-6 months</td>
                            </tr>
                            <tr>
                                <td>Nonfarm Payrolls</td>
                                <td>Monthly</td>
                                <td>Employment drives consumer spending (68% of GDP)</td>
                            </tr>
                            <tr>
                                <td>Housing Starts</td>
                                <td>Monthly</td>
                                <td>Leading indicator of consumer confidence and economic health</td>
                            </tr>
                            <tr>
                                <td>GDP</td>
                                <td>Quarterly</td>
                                <td>Official economic measurement (lagging indicator)</td>
                            </tr>
                        </tbody>
                    </table>

                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="showLesson('econ-1')">‚Üê¬ê Back</button>
                        <button class="btn btn-primary" onclick="markLessonComplete('economic', 'econ-2'); showLesson('econ-3')">Continue ‚Üí</button>
                    </div>
                </div>

                <!-- Lesson 3: Forecasting GDP -->
                <div class="lesson-content" id="econ-3">
                    <h3>üîÆ Forecasting GDP</h3>
                    <p>Markets react not to whether data is "good" or "bad," but to how <strong>actual data compares to expectations</strong>:</p>
                    
                    <div class="concept-box">
                        <h4>üìä The "Actual vs. Estimate" Principle</h4>
                        <ul style="margin-left: 1.5rem; line-height: 1.8;">
                            <li><strong>Actual > Estimate</strong> = Positive surprise ‚Üí Markets typically rally</li>
                            <li><strong>Actual < Estimate</strong> = Negative surprise ‚Üí Markets typically decline</li>
                            <li><strong>Actual = Estimate</strong> = Already priced in ‚Üí Limited market reaction</li>
                        </ul>
                    </div>

                    <div class="simulation-container">
                        <div class="simulation-title">üéÆ Market Reaction Simulator</div>
                        <div class="simulation-controls">
                            <div class="control-group">
                                <label for="est-gdp">Consensus Estimate (%)</label>
                                <input type="number" id="est-gdp" value="2.5" step="0.1">
                            </div>
                            <div class="control-group">
                                <label for="actual-gdp">Actual GDP Growth (%)</label>
                                <input type="number" id="actual-gdp" value="2.8" step="0.1">
                            </div>
                            <div class="control-group">
                                <button class="btn btn-primary" onclick="simulateMarketReaction()" style="margin-top: 1.5rem; width: 100%;">
                                    Simulate Market Reaction
                                </button>
                            </div>
                        </div>
                        <div class="simulation-output">
                            <div style="text-align: center;">
                                <div class="output-label">Market Reaction</div>
                                <div id="market-reaction" style="font-size: 1.5rem; font-weight: 700; margin: 1rem 0;">
                                    Click "Simulate" to see result
                                </div>
                                <div id="market-explanation" style="color: #718096;"></div>
                            </div>
                        </div>
                    </div>

                    <h4 style="margin-top: 1.5rem;">Bloomberg Terminal Functions for Economic Data</h4>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Function</th>
                                <th>Purpose</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td><code>ECOW</code></td><td>Economic Data by Country - Calendar of releases</td></tr>
                            <tr><td><code>WECO</code></td><td>World Economic Calendar - Global view</td></tr>
                            <tr><td><code>ECOS</code></td><td>Economist Estimates - Consensus forecasts</td></tr>
                            <tr><td><code>ECFC</code></td><td>Economic Forecasts - GDP, inflation projections</td></tr>
                        </tbody>
                    </table>

                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="showLesson('econ-2')">‚Üê¬ê Back</button>
                        <button class="btn btn-success" onclick="markLessonComplete('economic', 'econ-3'); showLesson('econ-quiz')">Take Quiz üìù</button>
                    </div>
                </div>

                <!-- Economic Quiz -->
                <div class="lesson-content" id="econ-quiz">
                    <div class="quiz-container">
                        <div class="quiz-header">
                            <div class="quiz-title">üìù Economic Indicators Quiz</div>
                            <div>Question <span id="econ-q-num">1</span> of 5</div>
                        </div>
                        <div id="econ-quiz-container"></div>
                        <div id="econ-quiz-results" style="display: none; text-align: center; padding: 2rem;">
                            <h3>Quiz Complete!</h3>
                            <div class="output-value" id="econ-final-score">0/5</div>
                            <div class="output-label">Your Score</div>
                            <div class="btn-group" style="justify-content: center; margin-top: 1rem;">
                                <button class="btn btn-secondary" onclick="resetQuiz('economic')">Retry Quiz</button>
                                <button class="btn btn-primary" onclick="switchTab('currencies')">Next Module ‚Üí</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Currencies Module -->
        <section id="currencies" class="content-section" role="tabpanel">
            <div class="module-card">
                <div class="module-header">
                    <div class="module-title">
                        <div class="module-icon currencies">üí±</div>
                        <div class="module-info">
                            <h2>Currencies</h2>
                            <p>FX Markets, Valuation, and Central Banks</p>
                        </div>
                    </div>
                    <div class="module-stats">
                        <div class="stat"><div class="stat-value">~1 hr</div><div class="stat-label">Duration</div></div>
                        <div class="stat"><div class="stat-value">3</div><div class="stat-label">Lessons</div></div>
                    </div>
                </div>

                <div class="lesson-nav">
                    <button class="lesson-btn active" data-lesson="curr-1">1. Currency Mechanics</button>
                    <button class="lesson-btn" data-lesson="curr-2">2. Valuation Drivers</button>
                    <button class="lesson-btn" data-lesson="curr-3">3. Central Banks</button>
                    <button class="lesson-btn" data-lesson="curr-quiz">üìù Quiz</button>
                </div>

                <div class="lesson-content active" id="curr-1">
                    <h3>üí± Currency Market Mechanics</h3>
                    <p>The foreign exchange (FX) market is the <strong>largest financial market in the world</strong>, with over $6 trillion traded daily. Since 1971 (end of Bretton Woods), most major currencies have "floated" freely against each other.</p>
                    
                    <div class="concept-box">
                        <h4>üîë Key Currency Concepts</h4>
                        <ul style="margin-left: 1.5rem; line-height: 1.8;">
                            <li><strong>Exchange Rate</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Price of one currency expressed in terms of another</li>
                            <li><strong>Currency Pair</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Two currencies being traded (e.g., EUR/USD)</li>
                            <li><strong>Base Currency</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù First currency in the pair (EUR in EUR/USD)</li>
                            <li><strong>Quote Currency</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Second currency in the pair (USD in EUR/USD)</li>
                        </ul>
                    </div>

                    <div class="example-box">
                        <h4>üìå Reading Exchange Rates</h4>
                        <p>If <strong>EUR/USD = 1.10</strong>: It costs $1.10 to buy ‚Äî1.00</p>
                        <ul style="margin-left: 1.5rem; margin-top: 0.5rem; line-height: 1.8;">
                            <li>Rate rises to 1.15 ‚Üí Euro <strong>strengthened</strong> (appreciated vs USD)</li>
                            <li>Rate falls to 1.05 ‚Üí Euro <strong>weakened</strong> (depreciated vs USD)</li>
                        </ul>
                    </div>

                    <div class="simulation-container">
                        <div class="simulation-title">üîÑ Currency Converter</div>
                        <div class="simulation-controls">
                            <div class="control-group">
                                <label for="convert-amount">Amount</label>
                                <input type="number" id="convert-amount" value="1000" onchange="convertCurrency()">
                            </div>
                            <div class="control-group">
                                <label for="convert-from">From</label>
                                <select id="convert-from" onchange="convertCurrency()">
                                    <option value="USD">USD - US Dollar</option>
                                    <option value="EUR">EUR - Euro</option>
                                    <option value="GBP">GBP - British Pound</option>
                                    <option value="JPY">JPY - Japanese Yen</option>
                                </select>
                            </div>
                            <div class="control-group">
                                <label for="convert-to">To</label>
                                <select id="convert-to" onchange="convertCurrency()">
                                    <option value="EUR">EUR - Euro</option>
                                    <option value="USD">USD - US Dollar</option>
                                    <option value="GBP">GBP - British Pound</option>
                                    <option value="JPY">JPY - Japanese Yen</option>
                                </select>
                            </div>
                        </div>
                        <div class="simulation-output">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; text-align: center;">
                                <div>
                                    <div class="output-value" id="convert-result">‚Äî910.00</div>
                                    <div class="output-label">Converted Amount</div>
                                </div>
                                <div>
                                    <div class="output-value" id="convert-rate">0.9100</div>
                                    <div class="output-label">Exchange Rate</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="markLessonComplete('currencies', 'curr-1'); showLesson('curr-2')">Continue ‚Üí</button>
                    </div>
                </div>

                <div class="lesson-content" id="curr-2">
                    <h3>üìä Currency Valuation Drivers</h3>
                    
                    <div class="concept-box">
                        <h4>üéØ Three Primary Drivers of Currency Value</h4>
                        <ol style="margin-left: 1.5rem; line-height: 1.8;">
                            <li><strong>Interest Rate Differentials</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Higher rates attract foreign capital ‚Üí Currency strengthens</li>
                            <li><strong>Inflation Expectations</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Lower inflation ‚Üí Currency strengthens (maintains purchasing power)</li>
                            <li><strong>Trade Balance</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Trade surplus ‚Üí Demand for domestic currency ‚Üí Strengthens</li>
                        </ol>
                    </div>

                    <div class="formula-box">
                        Higher Interest Rates + Lower Inflation + Trade Surplus = Stronger Currency
                    </div>

                    <div class="simulation-container">
                        <div class="simulation-title">üìà Interest Rate Differential Impact</div>
                        <div class="simulation-controls">
                            <div class="control-group">
                                <label for="us-rate">US Interest Rate: <span id="us-rate-display">2.50</span>%</label>
                                <input type="range" id="us-rate" min="0" max="10" step="0.25" value="2.5" oninput="updateInterestRates()">
                            </div>
                            <div class="control-group">
                                <label for="eu-rate">EU Interest Rate: <span id="eu-rate-display">1.50</span>%</label>
                                <input type="range" id="eu-rate" min="0" max="10" step="0.25" value="1.5" oninput="updateInterestRates()">
                            </div>
                        </div>
                        <div class="simulation-output">
                            <div style="text-align: center;">
                                <div class="output-value" id="rate-diff">+1.00%</div>
                                <div class="output-label">Rate Differential (US - EU)</div>
                                <div id="currency-impact" style="margin-top: 1rem; font-weight: 600; font-size: 1.1rem;">
                                    USD likely to strengthen vs EUR
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="showLesson('curr-1')">‚Üê¬ê Back</button>
                        <button class="btn btn-primary" onclick="markLessonComplete('currencies', 'curr-2'); showLesson('curr-3')">Continue ‚Üí</button>
                    </div>
                </div>

                <div class="lesson-content" id="curr-3">
                    <h3>ü¶Å Central Banks and Currencies</h3>
                    <p>Central banks manage monetary policy, typically targeting approximately <strong>2% inflation</strong>. Their interest rate decisions are among the most important drivers of currency values.</p>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Central Bank</th>
                                <th>Currency</th>
                                <th>Key Policy Rate</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr><td>Federal Reserve (Fed)</td><td>USD</td><td>Fed Funds Rate</td></tr>
                            <tr><td>European Central Bank (ECB)</td><td>EUR</td><td>Main Refinancing Rate</td></tr>
                            <tr><td>Bank of England (BoE)</td><td>GBP</td><td>Bank Rate</td></tr>
                            <tr><td>Bank of Japan (BoJ)</td><td>JPY</td><td>Policy Rate</td></tr>
                        </tbody>
                    </table>

                    <div class="warning-box">
                        <h4>‚ö†Ô∏è Inflation vs. Deflation</h4>
                        <p><strong>Inflation</strong> erodes purchasing power but is manageable at low levels (2% target).</p>
                        <p><strong>Deflation</strong> (falling prices) can be more damaging √¢‚Äö¬¨√¢‚Ç¨¬ù consumers delay purchases expecting lower prices, creating a downward economic spiral.</p>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="showLesson('curr-2')">‚Üê¬ê Back</button>
                        <button class="btn btn-success" onclick="markLessonComplete('currencies', 'curr-3'); showLesson('curr-quiz')">Take Quiz üìù</button>
                    </div>
                </div>

                <div class="lesson-content" id="curr-quiz">
                    <div class="quiz-container">
                        <div class="quiz-header">
                            <div class="quiz-title">üìù Currencies Quiz</div>
                            <div>Question <span id="curr-q-num">1</span> of 5</div>
                        </div>
                        <div id="curr-quiz-container"></div>
                        <div id="curr-quiz-results" style="display: none; text-align: center; padding: 2rem;">
                            <h3>Quiz Complete!</h3>
                            <div class="output-value" id="curr-final-score">0/5</div>
                            <div class="btn-group" style="justify-content: center; margin-top: 1rem;">
                                <button class="btn btn-secondary" onclick="resetQuiz('currencies')">Retry</button>
                                <button class="btn btn-primary" onclick="switchTab('fixed-income')">Next Module ‚Üí</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Fixed Income Module -->
        <section id="fixed-income" class="content-section" role="tabpanel">
            <div class="module-card">
                <div class="module-header">
                    <div class="module-title">
                        <div class="module-icon fixed-income">üìú</div>
                        <div class="module-info">
                            <h2>Fixed Income</h2>
                            <p>Bonds, Yields, and the Yield Curve</p>
                        </div>
                    </div>
                    <div class="module-stats">
                        <div class="stat"><div class="stat-value">~3 hrs</div><div class="stat-label">Duration</div></div>
                        <div class="stat"><div class="stat-value">3</div><div class="stat-label">Lessons</div></div>
                    </div>
                </div>

                <div class="lesson-nav">
                    <button class="lesson-btn active" data-lesson="fi-1">1. Bond Basics</button>
                    <button class="lesson-btn" data-lesson="fi-2">2. Bond Valuation</button>
                    <button class="lesson-btn" data-lesson="fi-3">3. Yield Curve</button>
                    <button class="lesson-btn" data-lesson="fi-quiz">üìù Quiz</button>
                </div>

                <div class="lesson-content active" id="fi-1">
                    <h3>üìú Bond Basics</h3>
                    <p>The bond market is the <strong>largest financial market in the world</strong> (larger than equities). When you buy a bond, you're essentially lending money to the issuer in exchange for regular interest payments and return of principal.</p>
                    
                    <div class="concept-box">
                        <h4>üîë Essential Bond Terminology</h4>
                        <ul style="margin-left: 1.5rem; line-height: 1.8;">
                            <li><strong>Principal (Face Value)</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Amount repaid at maturity (typically $1,000)</li>
                            <li><strong>Coupon</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Regular interest payment (annual or semi-annual)</li>
                            <li><strong>Maturity</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Date when principal is repaid</li>
                            <li><strong>Yield</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Total return earned on the bond</li>
                            <li><strong>Credit Rating</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Assessment of default risk (AAA to D)</li>
                        </ul>
                    </div>

                    <table class="data-table">
                        <thead>
                            <tr><th>Issuer Type</th><th>Examples</th><th>Risk Level</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>Government</td><td>US Treasuries, UK Gilts</td><td>Lowest (considered "risk-free")</td></tr>
                            <tr><td>Investment Grade Corporate</td><td>AAA to BBB- rated</td><td>Low to Medium</td></tr>
                            <tr><td>High Yield ("Junk")</td><td>BB+ and below</td><td>Higher (default risk)</td></tr>
                        </tbody>
                    </table>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="markLessonComplete('fixed-income', 'fi-1'); showLesson('fi-2')">Continue ‚Üí</button>
                    </div>
                </div>

                <div class="lesson-content" id="fi-2">
                    <h3>üìä Bond Valuation</h3>
                    
                    <div class="concept-box">
                        <h4>üéØ Three Primary Drivers of Bond Prices</h4>
                        <ol style="margin-left: 1.5rem; line-height: 1.8;">
                            <li><strong>Credit Risk</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Higher default risk ‚Üí Higher required yield ‚Üí Lower price</li>
                            <li><strong>Inflation Expectations</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Higher expected inflation ‚Üí Higher yields ‚Üí Lower prices</li>
                            <li><strong>Interest Rates</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Set by central banks; rising rates ‚Üí Lower bond prices</li>
                        </ol>
                    </div>

                    <div class="formula-box">
                        ‚ö° CRITICAL: Bond Prices and Yields Move in OPPOSITE Directions
                    </div>

                    <div class="simulation-container">
                        <div class="simulation-title">üìà Bond Price vs. Yield Simulator</div>
                        <div class="control-group">
                            <label for="bond-yield">Market Yield (%): <span id="yield-display">5.0</span>%</label>
                            <input type="range" id="bond-yield" min="1" max="15" step="0.1" value="5" oninput="updateBondPrice()">
                        </div>
                        <div style="margin: 1rem 0; padding: 0.75rem; background: #f1f5f9; border-radius: 8px; font-size: 0.9rem;">
                            <strong>Sample Bond:</strong> $1,000 Face Value | 5% Coupon | 10-Year Maturity
                        </div>
                        <div class="simulation-output">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; text-align: center;">
                                <div>
                                    <div class="output-value" id="bond-price">$1,000.00</div>
                                    <div class="output-label">Bond Price</div>
                                </div>
                                <div>
                                    <div class="output-value" id="price-change">At Par</div>
                                    <div class="output-label">Status</div>
                                </div>
                            </div>
                        </div>
                        <div id="bond-explanation" style="margin-top: 1rem; padding: 1rem; background: #e6fffa; border-radius: 8px; text-align: center;">
                            When market yield equals coupon rate, bond trades at par (face value).
                        </div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="showLesson('fi-1')">‚Üê¬ê Back</button>
                        <button class="btn btn-primary" onclick="markLessonComplete('fixed-income', 'fi-2'); showLesson('fi-3')">Continue ‚Üí</button>
                    </div>
                </div>

                <div class="lesson-content" id="fi-3">
                    <h3>üìà The Yield Curve</h3>
                    <p>The yield curve plots bond yields against their maturities √¢‚Äö¬¨√¢‚Ç¨¬ù one of the most important economic indicators in finance.</p>
                    
                    <div class="simulation-container">
                        <div class="simulation-title">üìä Interactive Yield Curve</div>
                        <div class="control-group">
                            <label for="curve-type">Yield Curve Shape</label>
                            <select id="curve-type" onchange="updateYieldCurve()">
                                <option value="normal">Normal (Upward Sloping)</option>
                                <option value="flat">Flat</option>
                                <option value="inverted">Inverted (Downward Sloping)</option>
                            </select>
                        </div>
                        <div id="curve-visual" style="background: white; border: 1px solid #e2e8f0; border-radius: 12px; padding: 1rem; margin-top: 1rem;">
                            <svg viewBox="0 0 400 150" style="width: 100%; height: 150px;">
                                <line x1="40" y1="120" x2="380" y2="120" stroke="#cbd5e0" stroke-width="1"/>
                                <line x1="40" y1="20" x2="40" y2="120" stroke="#cbd5e0" stroke-width="1"/>
                                <text x="210" y="145" fill="#718096" font-size="12" text-anchor="middle">Maturity ‚Üí</text>
                                <text x="15" y="70" fill="#718096" font-size="12" transform="rotate(-90 15 70)">Yield</text>
                                <path id="yield-curve-path" d="M60,100 Q150,80 250,60 Q330,40 370,30" fill="none" stroke="#3498db" stroke-width="3"/>
                            </svg>
                        </div>
                        <div id="curve-explanation" style="margin-top: 1rem; padding: 1rem; background: #e6fffa; border-radius: 8px;">
                            <strong>Normal Curve:</strong> Investors expect economic growth. Longer-term bonds pay higher yields to compensate for duration risk.
                        </div>
                    </div>

                    <div class="warning-box">
                        <h4>‚ö†Ô∏è Inverted Yield Curve = Recession Warning</h4>
                        <p>An inverted yield curve (when short-term rates exceed long-term rates) has preceded <strong>every US recession since the 1970s</strong>. It signals that investors expect the Fed will need to cut rates due to economic weakness.</p>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="showLesson('fi-2')">‚Üê¬ê Back</button>
                        <button class="btn btn-success" onclick="markLessonComplete('fixed-income', 'fi-3'); showLesson('fi-quiz')">Take Quiz üìù</button>
                    </div>
                </div>

                <div class="lesson-content" id="fi-quiz">
                    <div class="quiz-container">
                        <div class="quiz-header">
                            <div class="quiz-title">üìù Fixed Income Quiz</div>
                            <div>Question <span id="fi-q-num">1</span> of 5</div>
                        </div>
                        <div id="fi-quiz-container"></div>
                        <div id="fi-quiz-results" style="display: none; text-align: center; padding: 2rem;">
                            <h3>Quiz Complete!</h3>
                            <div class="output-value" id="fi-final-score">0/5</div>
                            <div class="btn-group" style="justify-content: center; margin-top: 1rem;">
                                <button class="btn btn-secondary" onclick="resetQuiz('fixed-income')">Retry</button>
                                <button class="btn btn-primary" onclick="switchTab('equities')">Next Module ‚Üí</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Equities Module -->
        <section id="equities" class="content-section" role="tabpanel">
            <div class="module-card">
                <div class="module-header">
                    <div class="module-title">
                        <div class="module-icon equities">üìä</div>
                        <div class="module-info">
                            <h2>Equities</h2>
                            <p>Stocks, Valuation Methods, and Analysis</p>
                        </div>
                    </div>
                    <div class="module-stats">
                        <div class="stat"><div class="stat-value">~3 hrs</div><div class="stat-label">Duration</div></div>
                        <div class="stat"><div class="stat-value">3</div><div class="stat-label">Lessons</div></div>
                    </div>
                </div>

                <div class="lesson-nav">
                    <button class="lesson-btn active" data-lesson="eq-1">1. Stock Market Basics</button>
                    <button class="lesson-btn" data-lesson="eq-2">2. Nature of Equities</button>
                    <button class="lesson-btn" data-lesson="eq-3">3. Valuation Methods</button>
                    <button class="lesson-btn" data-lesson="eq-quiz">üìù Quiz</button>
                </div>

                <div class="lesson-content active" id="eq-1">
                    <h3>üìà The Stock Market</h3>
                    <p>Equities (stocks) represent <strong>ownership</strong> in a company. Shareholders participate in company profits through dividends and capital appreciation.</p>
                    
                    <table class="data-table">
                        <thead>
                            <tr><th>Exchange</th><th>Location</th><th>Key Index</th></tr>
                        </thead>
                        <tbody>
                            <tr><td>NYSE</td><td>New York</td><td>S&P 500, Dow Jones</td></tr>
                            <tr><td>NASDAQ</td><td>New York</td><td>NASDAQ Composite</td></tr>
                            <tr><td>LSE</td><td>London</td><td>FTSE 100</td></tr>
                            <tr><td>TSE</td><td>Tokyo</td><td>Nikkei 225</td></tr>
                        </tbody>
                    </table>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="markLessonComplete('equities', 'eq-1'); showLesson('eq-2')">Continue ‚Üí</button>
                    </div>
                </div>

                <div class="lesson-content" id="eq-2">
                    <h3>üíé Nature of Equities</h3>
                    
                    <div class="concept-box">
                        <h4>üìä Equities vs. Bonds</h4>
                        <table class="data-table">
                            <thead>
                                <tr><th>Feature</th><th>Equities</th><th>Bonds</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>Ownership</td><td>Partial owner of company</td><td>Lender to company</td></tr>
                                <tr><td>Returns</td><td>Dividends + Capital gains</td><td>Fixed coupon payments</td></tr>
                                <tr><td>Bankruptcy Priority</td><td>Last in line</td><td>Senior claim</td></tr>
                                <tr><td>Volatility</td><td>Higher</td><td>Generally lower</td></tr>
                                <tr><td>Upside</td><td>Unlimited</td><td>Capped at par + coupon</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="formula-box">
                        Total Equity Return = Dividend Yield + Capital Appreciation
                    </div>

                    <div class="simulation-container">
                        <div class="simulation-title">üìä Dividend Yield Calculator</div>
                        <div class="simulation-controls">
                            <div class="control-group">
                                <label for="annual-div">Annual Dividend per Share ($)</label>
                                <input type="number" id="annual-div" value="2.50" step="0.10">
                            </div>
                            <div class="control-group">
                                <label for="stock-price">Current Stock Price ($)</label>
                                <input type="number" id="stock-price" value="100">
                            </div>
                            <div class="control-group">
                                <button class="btn btn-primary" onclick="calculateDividendYield()" style="margin-top: 1.5rem; width: 100%;">
                                    Calculate Yield
                                </button>
                            </div>
                        </div>
                        <div class="simulation-output">
                            <div style="text-align: center;">
                                <div class="output-value" id="div-yield">2.50%</div>
                                <div class="output-label">Dividend Yield</div>
                            </div>
                        </div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="showLesson('eq-1')">‚Üê¬ê Back</button>
                        <button class="btn btn-primary" onclick="markLessonComplete('equities', 'eq-2'); showLesson('eq-3')">Continue ‚Üí</button>
                    </div>
                </div>

                <div class="lesson-content" id="eq-3">
                    <h3>üí∞ Valuation Methods</h3>
                    
                    <div class="concept-box">
                        <h4>Absolute vs. Relative Valuation</h4>
                        <p><strong>Absolute Valuation:</strong> Calculate intrinsic value using DCF (Discounted Cash Flow)</p>
                        <p><strong>Relative Valuation:</strong> Compare to peers using multiples (P/E, EV/EBITDA, P/B)</p>
                    </div>

                    <div class="formula-box">
                        P/E Ratio = Stock Price √∑ Earnings Per Share (EPS)
                    </div>

                    <div class="simulation-container">
                        <div class="simulation-title">üìä P/E Ratio Analysis</div>
                        <div class="simulation-controls">
                            <div class="control-group">
                                <label for="pe-price">Stock Price ($)</label>
                                <input type="number" id="pe-price" value="150">
                            </div>
                            <div class="control-group">
                                <label for="pe-eps">Earnings Per Share ($)</label>
                                <input type="number" id="pe-eps" value="7.50" step="0.1">
                            </div>
                            <div class="control-group">
                                <button class="btn btn-primary" onclick="calculatePE()" style="margin-top: 1.5rem; width: 100%;">
                                    Calculate
                                </button>
                            </div>
                        </div>
                        <div class="simulation-output">
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; text-align: center;">
                                <div>
                                    <div class="output-value" id="pe-ratio">20.0x</div>
                                    <div class="output-label">P/E Ratio</div>
                                </div>
                                <div>
                                    <div class="output-value" id="earnings-yield">5.00%</div>
                                    <div class="output-label">Earnings Yield (1/PE)</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="showLesson('eq-2')">‚Üê¬ê Back</button>
                        <button class="btn btn-success" onclick="markLessonComplete('equities', 'eq-3'); showLesson('eq-quiz')">Take Quiz üìù</button>
                    </div>
                </div>

                <div class="lesson-content" id="eq-quiz">
                    <div class="quiz-container">
                        <div class="quiz-header">
                            <div class="quiz-title">üìù Equities Quiz</div>
                            <div>Question <span id="eq-q-num">1</span> of 5</div>
                        </div>
                        <div id="eq-quiz-container"></div>
                        <div id="eq-quiz-results" style="display: none; text-align: center; padding: 2rem;">
                            <h3>Quiz Complete!</h3>
                            <div class="output-value" id="eq-final-score">0/5</div>
                            <div class="btn-group" style="justify-content: center; margin-top: 1rem;">
                                <button class="btn btn-secondary" onclick="resetQuiz('equities')">Retry</button>
                                <button class="btn btn-primary" onclick="switchTab('terminal')">Next Module ‚Üí</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Terminal Module -->
        <section id="terminal" class="content-section" role="tabpanel">
            <div class="module-card">
                <div class="module-header">
                    <div class="module-title">
                        <div class="module-icon terminal">üíª</div>
                        <div class="module-info">
                            <h2>Bloomberg Terminal</h2>
                            <p>Navigation, Functions, and Practice</p>
                        </div>
                    </div>
                    <div class="module-stats">
                        <div class="stat"><div class="stat-value">~2 hrs</div><div class="stat-label">Duration</div></div>
                        <div class="stat"><div class="stat-value">2</div><div class="stat-label">Lessons</div></div>
                    </div>
                </div>

                <div class="lesson-nav">
                    <button class="lesson-btn active" data-lesson="term-1">1. Terminal Basics</button>
                    <button class="lesson-btn" data-lesson="term-2">2. Key Functions</button>
                    <button class="lesson-btn" data-lesson="term-sim">üíª Simulator</button>
                </div>

                <div class="lesson-content active" id="term-1">
                    <h3>üíª Bloomberg Terminal Basics</h3>
                    <p>The Bloomberg Terminal is the industry-standard platform for financial data, news, and analytics used by professionals worldwide.</p>
                    
                    <div class="concept-box">
                        <h4>üîë Terminal Navigation Fundamentals</h4>
                        <ul style="margin-left: 1.5rem; line-height: 1.8;">
                            <li><strong>Command Line</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Type ticker + asset class (e.g., "AAPL US EQUITY")</li>
                            <li><strong>&lt;GO&gt; Key</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Execute any command (green key or Enter)</li>
                            <li><strong>Yellow Keys</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Asset class shortcuts (EQUITY, GOVT, CORP, etc.)</li>
                            <li><strong>&lt;MENU&gt;</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Return to previous screen</li>
                            <li><strong>&lt;HELP&gt;</strong> √¢‚Äö¬¨√¢‚Ç¨¬ù Context-sensitive help for any function</li>
                        </ul>
                    </div>

                    <div class="example-box">
                        <h4>üìå Loading a Security</h4>
                        <p>To analyze Apple stock:</p>
                        <ol style="margin-left: 1.5rem; margin-top: 0.5rem; line-height: 1.8;">
                            <li>Type: <code style="background: #e2e8f0; padding: 2px 6px; border-radius: 4px;">AAPL US EQUITY</code></li>
                            <li>Press <code style="background: #22c55e; color: white; padding: 2px 6px; border-radius: 4px;">&lt;GO&gt;</code></li>
                            <li>Security loads with menu of available functions</li>
                        </ol>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="markLessonComplete('terminal', 'term-1'); showLesson('term-2')">Continue ‚Üí</button>
                    </div>
                </div>

                <div class="lesson-content" id="term-2">
                    <h3>üîß Essential Bloomberg Functions</h3>
                    
                    <h4 style="margin-top: 1rem; color: var(--primary-dark);">Security Analysis Functions</h4>
                    <table class="data-table">
                        <thead>
                            <tr><th>Function</th><th>Name</th><th>Purpose</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>DES</code></td><td>Description</td><td>Company overview, key stats</td></tr>
                            <tr><td><code>FA</code></td><td>Financial Analysis</td><td>Financial statements, ratios</td></tr>
                            <tr><td><code>GP</code></td><td>Price Graph</td><td>Historical price chart</td></tr>
                            <tr><td><code>ERN</code></td><td>Earnings</td><td>Earnings history, estimates</td></tr>
                            <tr><td><code>CN</code></td><td>Company News</td><td>News specific to loaded security</td></tr>
                        </tbody>
                    </table>

                    <h4 style="margin-top: 1.5rem; color: var(--primary-dark);">Market Overview Functions</h4>
                    <table class="data-table">
                        <thead>
                            <tr><th>Function</th><th>Name</th><th>Purpose</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><code>NEWS</code></td><td>News</td><td>Top market headlines</td></tr>
                            <tr><td><code>WEI</code></td><td>World Equity Indices</td><td>Global index performance</td></tr>
                            <tr><td><code>ECOW</code></td><td>Economic Calendar</td><td>Economic data releases</td></tr>
                            <tr><td><code>GC</code></td><td>Government Curves</td><td>Treasury yield curves</td></tr>
                            <tr><td><code>CRNCY</code></td><td>Currency Rates</td><td>Foreign exchange rates</td></tr>
                        </tbody>
                    </table>

                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="showLesson('term-1')">‚Üê¬ê Back</button>
                        <button class="btn btn-terminal" onclick="markLessonComplete('terminal', 'term-2'); showLesson('term-sim')">Launch Simulator üíª</button>
                    </div>
                </div>

                <div class="lesson-content" id="term-sim">
                    <h3>üíª Bloomberg Terminal Simulator</h3>
                    <p>Practice using Bloomberg Terminal commands in this realistic simulation. Try loading securities, viewing market data, and exploring different functions.</p>
                    
                    <div class="concept-box">
                        <h4>üéØ Practice Exercises</h4>
                        <ul style="margin-left: 1.5rem; line-height: 1.8;">
                            <li>Load Apple stock: Type <code>AAPL EQUITY</code> and press GO</li>
                            <li>View its financials: Type <code>FA</code> after loading</li>
                            <li>Check world indices: Type <code>WEI</code></li>
                            <li>View the yield curve: Type <code>GC</code></li>
                            <li>Check economic calendar: Type <code>ECOW</code></li>
                        </ul>
                    </div>

                    <div style="display: flex; flex-wrap: wrap; gap: 1rem; margin-bottom: 1.5rem;">
                        <button class="terminal-launch-btn" onclick="openTerminalSimulator()" style="flex: 1; min-width: 280px; margin: 0;">
                            üñ•Ô∏è LAUNCH SIMULATOR BELOW
                        </button>
                        <a href="https://mqaissaunee-bcc.github.io/AI_Examples/bloomberg-terminal-enhanced.html" 
                           target="_blank" 
                           rel="noopener noreferrer"
                           class="terminal-launch-btn" 
                           style="flex: 1; min-width: 280px; margin: 0; text-decoration: none; text-align: center; display: flex; align-items: center; justify-content: center;">
                            üîó OPEN IN NEW WINDOW
                        </a>
                    </div>

                    <div class="terminal-embed-container" id="terminal-embed" style="display: none;">
                        <div class="terminal-embed-header">
                            <span class="terminal-dot red"></span>
                            <span class="terminal-dot yellow"></span>
                            <span class="terminal-dot green"></span>
                            <span class="terminal-embed-title">Bloomberg Terminal Simulator</span>
                            <button onclick="closeTerminalSimulator()" style="margin-left: auto; background: none; border: none; color: #888; cursor: pointer; font-size: 18px;" aria-label="Close simulator">‚úï</button>
                        </div>
                        <iframe id="terminal-frame" class="terminal-embed-frame" src="" title="Bloomberg Terminal Simulator"></iframe>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="showLesson('term-2')">‚Üê¬ê Back to Lesson</button>
                        <button class="btn btn-success" onclick="switchTab('portfolio')">Next Module ‚Üí</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Portfolio Module -->
        <section id="portfolio" class="content-section" role="tabpanel">
            <div class="module-card">
                <div class="module-header">
                    <div class="module-title">
                        <div class="module-icon portfolio">üìù</div>
                        <div class="module-info">
                            <h2>Portfolio Management</h2>
                            <p>Strategy, Risk Analysis, and Performance</p>
                        </div>
                    </div>
                    <div class="module-stats">
                        <div class="stat"><div class="stat-value">~2 hrs</div><div class="stat-label">Duration</div></div>
                        <div class="stat"><div class="stat-value">2</div><div class="stat-label">Lessons</div></div>
                    </div>
                </div>

                <div class="lesson-nav">
                    <button class="lesson-btn active" data-lesson="port-1">1. PM Fundamentals</button>
                    <button class="lesson-btn" data-lesson="port-2">2. Risk Metrics</button>
                </div>

                <div class="lesson-content active" id="port-1">
                    <h3>üìù Portfolio Management Fundamentals</h3>
                    
                    <div class="concept-box">
                        <h4>üéØ Types of Portfolio Management</h4>
                        <table class="data-table">
                            <thead>
                                <tr><th>Approach</th><th>Strategy</th><th>Goal</th><th>Cost</th></tr>
                            </thead>
                            <tbody>
                                <tr><td><strong>Passive</strong></td><td>Track an index</td><td>Match benchmark returns</td><td>Low fees</td></tr>
                                <tr><td><strong>Active</strong></td><td>Security selection</td><td>Beat benchmark (alpha)</td><td>Higher fees</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="example-box">
                        <h4>üìå The Active vs. Passive Debate</h4>
                        <p>Research shows that over long periods, most active managers fail to beat their benchmark after fees. This has led to massive growth in passive investing (ETFs, index funds).</p>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-primary" onclick="markLessonComplete('portfolio', 'port-1'); showLesson('port-2')">Continue ‚Üí</button>
                    </div>
                </div>

                <div class="lesson-content" id="port-2">
                    <h3>‚ö†Ô∏è Risk Analysis Metrics</h3>
                    
                    <table class="data-table">
                        <thead>
                            <tr><th>Metric</th><th>What It Measures</th><th>Interpretation</th></tr>
                        </thead>
                        <tbody>
                            <tr><td><strong>Beta (Œ≤)</strong></td><td>Sensitivity to market moves</td><td>Œ≤ > 1 = More volatile than market</td></tr>
                            <tr><td><strong>Alpha (Œ±)</strong></td><td>Excess return vs benchmark</td><td>Œ± > 0 = Beating benchmark</td></tr>
                            <tr><td><strong>Sharpe Ratio</strong></td><td>Risk-adjusted return</td><td>Higher = Better return per unit of risk</td></tr>
                            <tr><td><strong>Std Deviation</strong></td><td>Total volatility</td><td>Higher = More volatile</td></tr>
                        </tbody>
                    </table>

                    <div class="formula-box">
                        Sharpe Ratio = (Portfolio Return - Risk-Free Rate) √∑ Standard Deviation
                    </div>

                    <div class="simulation-container">
                        <div class="simulation-title">üìä Sharpe Ratio Calculator</div>
                        <div class="simulation-controls">
                            <div class="control-group">
                                <label for="port-return">Portfolio Return (%)</label>
                                <input type="number" id="port-return" value="12">
                            </div>
                            <div class="control-group">
                                <label for="rf-rate">Risk-Free Rate (%)</label>
                                <input type="number" id="rf-rate" value="4">
                            </div>
                            <div class="control-group">
                                <label for="port-std">Standard Deviation (%)</label>
                                <input type="number" id="port-std" value="15">
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="calculateSharpe()" style="margin: 1rem 0;">
                            Calculate Sharpe Ratio
                        </button>
                        <div class="simulation-output">
                            <div style="text-align: center;">
                                <div class="output-value" id="sharpe-result">0.53</div>
                                <div class="output-label">Sharpe Ratio</div>
                                <div id="sharpe-interpretation" style="margin-top: 0.75rem; color: #718096;">
                                    A Sharpe ratio above 1.0 is generally considered good.
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="btn-group">
                        <button class="btn btn-secondary" onclick="showLesson('port-1')">‚Üê¬ê Back</button>
                        <button class="btn btn-success" onclick="markLessonComplete('portfolio', 'port-2'); completeCourse()">Complete Course ‚úì</button>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>Bloomberg Market Concepts Prep Tool | Estimated Completion: 10-15 hours</p>
        <p style="margin-top: 0.5rem; font-size: 0.85rem;">This is an educational tool and is not affiliated with Bloomberg L.P.</p>
    </footer>

    <script>
        // ============================================
        // STATE MANAGEMENT
        // ============================================
        
        // Valid lesson IDs for each module (for validation)
        const validLessons = {
            economic: ['econ-1', 'econ-2', 'econ-3', 'econ-quiz'],
            currencies: ['curr-1', 'curr-2', 'curr-3', 'curr-quiz'],
            'fixed-income': ['fi-1', 'fi-2', 'fi-3', 'fi-quiz'],
            equities: ['eq-1', 'eq-2', 'eq-3', 'eq-quiz'],
            terminal: ['term-1', 'term-2', 'term-sim'],
            portfolio: ['port-1', 'port-2']
        };
        
        const appState = {
            progress: {
                economic: { completed: [], score: null },
                currencies: { completed: [], score: null },
                'fixed-income': { completed: [], score: null },
                equities: { completed: [], score: null },
                terminal: { completed: [], score: null },
                portfolio: { completed: [], score: null }
            },
            quizState: {},
            totalProgress: 0
        };

        // Load and validate saved state
        const savedState = localStorage.getItem('bmcPrepState');
        if (savedState) {
            try {
                const parsed = JSON.parse(savedState);
                
                // Validate and merge progress data
                if (parsed.progress) {
                    Object.keys(appState.progress).forEach(mod => {
                        if (parsed.progress[mod]) {
                            // Only keep valid lesson IDs
                            const validCompleted = (parsed.progress[mod].completed || [])
                                .filter(lessonId => validLessons[mod] && validLessons[mod].includes(lessonId));
                            appState.progress[mod].completed = validCompleted;
                            appState.progress[mod].score = parsed.progress[mod].score || null;
                        }
                    });
                }
                
                // Merge quiz state
                if (parsed.quizState) {
                    appState.quizState = parsed.quizState;
                }
            } catch (e) {
                console.log('Could not load saved state, starting fresh');
            }
        }

        function saveState() {
            localStorage.setItem('bmcPrepState', JSON.stringify(appState));
        }
        
        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
                localStorage.removeItem('bmcPrepState');
                location.reload();
            }
        }

        // ============================================
        // NAVIGATION
        // ============================================
        function switchTab(tabName) {
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active');
                if (tab.dataset.tab === tabName) tab.classList.add('active');
            });
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            const section = document.getElementById(tabName);
            if (section) section.classList.add('active');
            
            if (tabName !== 'dashboard') {
                initializeQuiz(tabName);
            }
        }

        document.querySelectorAll('.nav-tab').forEach(tab => {
            tab.addEventListener('click', () => switchTab(tab.dataset.tab));
        });

        document.querySelectorAll('.lesson-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                showLesson(this.dataset.lesson);
            });
        });

        function showLesson(lessonId) {
            // Find the target lesson content element first
            const targetContent = document.getElementById(lessonId);
            if (!targetContent) return;
            
            // Find the container (module-card) that holds this lesson
            const container = targetContent.closest('.module-card');
            if (!container) return;
            
            // Remove active class from all lesson buttons and content in this container
            container.querySelectorAll('.lesson-btn').forEach(btn => btn.classList.remove('active'));
            container.querySelectorAll('.lesson-content').forEach(content => content.classList.remove('active'));
            
            // Add active class to the target button and content
            const targetBtn = container.querySelector(`[data-lesson="${lessonId}"]`);
            if (targetBtn) targetBtn.classList.add('active');
            targetContent.classList.add('active');
            
            // Scroll to top of lesson content
            targetContent.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        function markLessonComplete(module, lessonId) {
            if (!appState.progress[module].completed.includes(lessonId)) {
                appState.progress[module].completed.push(lessonId);
            }
            const btn = document.querySelector(`[data-lesson="${lessonId}"]`);
            if (btn) btn.classList.add('completed');
            updateProgress();
            saveState();
        }

        // ============================================
        // PROGRESS TRACKING
        // ============================================
        function updateProgress() {
            const modules = ['economic', 'currencies', 'fixed-income', 'equities', 'terminal', 'portfolio'];
            
            let totalLessons = 0;
            let completedLessons = 0;

            modules.forEach(mod => {
                // Use validLessons for accurate total count
                const total = validLessons[mod] ? validLessons[mod].length : 0;
                const completed = appState.progress[mod] ? appState.progress[mod].completed.length : 0;
                const pct = total > 0 ? Math.round((completed / total) * 100) : 0;
                
                totalLessons += total;
                completedLessons += completed;

                const progressBar = document.getElementById(`progress-${mod}`);
                if (progressBar) progressBar.style.width = pct + '%';
                
                const badge = document.getElementById(`badge-${mod}`);
                if (badge) badge.textContent = pct + '%';
            });

            const totalPct = totalLessons > 0 ? Math.round((completedLessons / totalLessons) * 100) : 0;
            appState.totalProgress = totalPct;

            const totalProgressEl = document.getElementById('totalProgress');
            if (totalProgressEl) totalProgressEl.style.width = totalPct + '%';
            
            const progressTextEl = document.getElementById('progressText');
            if (progressTextEl) progressTextEl.textContent = totalPct + '% Complete';
            
            const dashboardProgressEl = document.getElementById('dashboardProgress');
            if (dashboardProgressEl) dashboardProgressEl.textContent = totalPct + '%';

            const certReady = document.getElementById('certReady');
            if (certReady) {
                if (totalPct >= 80) {
                    certReady.textContent = 'Ready!';
                    certReady.style.color = 'var(--success)';
                } else {
                    certReady.textContent = 'Not Yet';
                    certReady.style.color = '';
                }
            }
        }

        // ============================================
        // SIMULATIONS
        // ============================================
        function calculateGDP() {
            const c = parseFloat(document.getElementById('gdp-c').value) || 0;
            const i = parseFloat(document.getElementById('gdp-i').value) || 0;
            const g = parseFloat(document.getElementById('gdp-g').value) || 0;
            const x = parseFloat(document.getElementById('gdp-x').value) || 0;
            const m = parseFloat(document.getElementById('gdp-m').value) || 0;

            const netExports = x - m;
            const gdp = c + i + g + netExports;
            const cPercent = gdp > 0 ? Math.round((c / gdp) * 100) : 0;

            document.getElementById('gdp-result').textContent = '$' + gdp.toLocaleString() + 'B';
            document.getElementById('net-exports').textContent = (netExports >= 0 ? '+' : '') + '$' + netExports.toLocaleString() + 'B';
            document.getElementById('c-percent').textContent = cPercent + '%';
        }

        function updatePMI() {
            const pmi = parseInt(document.getElementById('pmi-value').value);
            document.getElementById('pmi-display').textContent = pmi;
            
            const marker = document.getElementById('pmi-marker');
            marker.style.left = ((pmi - 30) / 40) * 100 + '%';
            
            const interp = document.getElementById('pmi-interpretation');
            if (pmi >= 55) {
                interp.textContent = 'Strong Expansion - Business optimism is high';
                interp.style.color = '#22c55e';
            } else if (pmi >= 50) {
                interp.textContent = 'Expansion - Economy is growing';
                interp.style.color = '#22c55e';
            } else if (pmi >= 45) {
                interp.textContent = 'Mild Contraction - Economic slowdown';
                interp.style.color = '#f59e0b';
            } else {
                interp.textContent = 'Significant Contraction - Recession territory';
                interp.style.color = '#ef4444';
            }
        }

        function simulateMarketReaction() {
            const estimate = parseFloat(document.getElementById('est-gdp').value);
            const actual = parseFloat(document.getElementById('actual-gdp').value);
            const diff = actual - estimate;

            const reactionEl = document.getElementById('market-reaction');
            const explanationEl = document.getElementById('market-explanation');

            if (Math.abs(diff) < 0.1) {
                reactionEl.textContent = '√¢≈æ¬°√Ø¬∏¬è Markets Flat (0%)';
                reactionEl.style.color = '#718096';
                explanationEl.textContent = 'Result matched expectations - already priced in.';
            } else if (diff > 0.5) {
                reactionEl.textContent = 'üìà Markets Rally (+1.5% to +3%)';
                reactionEl.style.color = '#22c55e';
                explanationEl.textContent = 'Strong positive surprise beats expectations significantly!';
            } else if (diff > 0) {
                reactionEl.textContent = 'üìà Markets Up (+0.5% to +1.5%)';
                reactionEl.style.color = '#22c55e';
                explanationEl.textContent = 'Positive surprise - better than expected.';
            } else if (diff > -0.5) {
                reactionEl.textContent = 'üìâ Markets Down (-0.5% to -1.5%)';
                reactionEl.style.color = '#ef4444';
                explanationEl.textContent = 'Negative surprise - worse than expected.';
            } else {
                reactionEl.textContent = 'üìâ Markets Sell Off (-1.5% to -3%)';
                reactionEl.style.color = '#ef4444';
                explanationEl.textContent = 'Significant miss - much worse than expected!';
            }
        }

        // Currency Converter
        const exchangeRates = {
            USD: { EUR: 0.91, GBP: 0.79, JPY: 149.5 },
            EUR: { USD: 1.10, GBP: 0.87, JPY: 164.5 },
            GBP: { USD: 1.27, EUR: 1.15, JPY: 189.0 },
            JPY: { USD: 0.0067, EUR: 0.0061, GBP: 0.0053 }
        };

        function convertCurrency() {
            const amount = parseFloat(document.getElementById('convert-amount').value) || 0;
            const from = document.getElementById('convert-from').value;
            const to = document.getElementById('convert-to').value;

            let rate = from === to ? 1 : exchangeRates[from][to];
            const result = amount * rate;

            const symbols = { USD: '$', EUR: '‚Äî', GBP: '√Ç¬£', JPY: '√Ç¬•' };
            document.getElementById('convert-result').textContent = symbols[to] + result.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
            document.getElementById('convert-rate').textContent = rate.toFixed(4);
        }

        function updateInterestRates() {
            const usRate = parseFloat(document.getElementById('us-rate').value);
            const euRate = parseFloat(document.getElementById('eu-rate').value);

            document.getElementById('us-rate-display').textContent = usRate.toFixed(2);
            document.getElementById('eu-rate-display').textContent = euRate.toFixed(2);

            const diff = usRate - euRate;
            document.getElementById('rate-diff').textContent = (diff >= 0 ? '+' : '') + diff.toFixed(2) + '%';

            const impact = document.getElementById('currency-impact');
            if (diff > 0.5) {
                impact.textContent = 'üíµ USD likely to strengthen vs EUR (capital flows to higher yields)';
                impact.style.color = '#22c55e';
            } else if (diff < -0.5) {
                impact.textContent = 'üí∂ EUR likely to strengthen vs USD (capital flows to higher yields)';
                impact.style.color = '#3b82f6';
            } else {
                impact.textContent = '‚öñÔ∏è Minimal currency impact - rates roughly equal';
                impact.style.color = '#718096';
            }
        }

        function updateBondPrice() {
            const marketYield = parseFloat(document.getElementById('bond-yield').value);
            document.getElementById('yield-display').textContent = marketYield.toFixed(1);

            const coupon = 5;
            const faceValue = 1000;
            const years = 10;

            // Calculate bond price using present value formula
            let price = 0;
            for (let t = 1; t <= years; t++) {
                price += (coupon / 100 * faceValue) / Math.pow(1 + marketYield / 100, t);
            }
            price += faceValue / Math.pow(1 + marketYield / 100, years);

            document.getElementById('bond-price').textContent = '$' + price.toFixed(2);

            const priceChange = document.getElementById('price-change');
            const explanation = document.getElementById('bond-explanation');

            if (marketYield < 4.5) {
                priceChange.textContent = 'Premium';
                priceChange.style.color = '#22c55e';
                explanation.innerHTML = '<strong>Premium:</strong> Market yield below coupon rate. Investors pay more for higher coupon payments.';
            } else if (marketYield > 5.5) {
                priceChange.textContent = 'Discount';
                priceChange.style.color = '#ef4444';
                explanation.innerHTML = '<strong>Discount:</strong> Market yield above coupon rate. Price falls to make yield competitive.';
            } else {
                priceChange.textContent = 'At Par';
                priceChange.style.color = '#1e3a5f';
                explanation.innerHTML = '<strong>At Par:</strong> Market yield equals coupon rate. Bond trades at face value.';
            }
        }

        function updateYieldCurve() {
            const curveType = document.getElementById('curve-type').value;
            const pathElement = document.getElementById('yield-curve-path');
            const explanation = document.getElementById('curve-explanation');

            const curves = {
                normal: {
                    path: 'M60,100 Q150,80 250,60 Q330,40 370,30',
                    text: '<strong>Normal Curve:</strong> Investors expect economic growth. Longer-term bonds pay higher yields to compensate for duration and inflation risk.'
                },
                flat: {
                    path: 'M60,65 L370,65',
                    text: '<strong>Flat Curve:</strong> Uncertainty about economic direction. Often occurs during transition periods between growth and recession.'
                },
                inverted: {
                    path: 'M60,30 Q150,50 250,70 Q330,90 370,100',
                    text: '<strong style="color: #ef4444;">‚ö†Ô∏è Inverted Curve:</strong> Short-term rates exceed long-term rates. Historically a reliable recession predictor!'
                }
            };

            pathElement.setAttribute('d', curves[curveType].path);
            explanation.innerHTML = curves[curveType].text;
        }

        function calculateDividendYield() {
            const dividend = parseFloat(document.getElementById('annual-div').value) || 0;
            const price = parseFloat(document.getElementById('stock-price').value) || 1;
            const yld = (dividend / price) * 100;
            document.getElementById('div-yield').textContent = yld.toFixed(2) + '%';
        }

        function calculatePE() {
            const price = parseFloat(document.getElementById('pe-price').value) || 1;
            const eps = parseFloat(document.getElementById('pe-eps').value) || 1;
            const pe = price / eps;
            const earningsYield = (eps / price) * 100;

            document.getElementById('pe-ratio').textContent = pe.toFixed(1) + 'x';
            document.getElementById('earnings-yield').textContent = earningsYield.toFixed(2) + '%';
        }

        function calculateSharpe() {
            const portReturn = parseFloat(document.getElementById('port-return').value);
            const rf = parseFloat(document.getElementById('rf-rate').value);
            const std = parseFloat(document.getElementById('port-std').value);

            const sharpe = (portReturn - rf) / std;
            document.getElementById('sharpe-result').textContent = sharpe.toFixed(2);

            const interp = document.getElementById('sharpe-interpretation');
            if (sharpe >= 1) {
                interp.textContent = 'Excellent risk-adjusted return (Sharpe > 1.0)';
                interp.style.color = '#22c55e';
            } else if (sharpe >= 0.5) {
                interp.textContent = 'Good risk-adjusted return (Sharpe 0.5-1.0)';
                interp.style.color = '#3b82f6';
            } else if (sharpe >= 0) {
                interp.textContent = 'Adequate - positive but modest risk-adjusted return';
                interp.style.color = '#f59e0b';
            } else {
                interp.textContent = 'Poor - return below risk-free rate after adjusting for risk';
                interp.style.color = '#ef4444';
            }
        }

        // ============================================
        // QUIZ SYSTEM
        // ============================================
        const quizData = {
            economic: [
                { q: 'What is the formula for GDP using the expenditure approach?', options: ['GDP = C + I + G + (X - M)', 'GDP = Revenue - Expenses', 'GDP = Assets - Liabilities', 'GDP = Price √É‚Äî Quantity'], correct: 0, explanation: 'GDP = Consumption + Investment + Government Spending + Net Exports' },
                { q: 'What does a PMI reading above 50 indicate?', options: ['Recession', 'Economic contraction', 'Economic expansion', 'Neutral conditions'], correct: 2, explanation: 'PMI above 50 signals economic expansion; business managers are optimistic.' },
                { q: 'What percentage of US GDP is consumer spending?', options: ['About 25%', 'About 50%', 'About 68%', 'About 85%'], correct: 2, explanation: 'Consumer spending represents approximately 68% of US GDP.' },
                { q: 'How is a recession technically defined?', options: ['One quarter of negative GDP', 'Two consecutive quarters of negative real GDP growth', 'Stock market decline of 20%', 'Unemployment above 5%'], correct: 1, explanation: 'A recession is two consecutive quarters of negative real GDP growth.' },
                { q: 'Which is the best leading economic indicator?', options: ['GDP', 'PMI', 'Unemployment rate', 'Past inflation'], correct: 1, explanation: 'PMI is the best leading indicator - it\'s released monthly and leads GDP by 3-6 months.' }
            ],
            currencies: [
                { q: 'If EUR/USD = 1.10, how much does it cost to buy ‚Äî1,000?', options: ['$909', '$1,000', '$1,100', '$1,210'], correct: 2, explanation: '‚Äî1,000 √É‚Äî 1.10 = $1,100 USD' },
                { q: 'What typically strengthens a currency?', options: ['Lower interest rates', 'Higher inflation', 'Trade surplus', 'Budget deficit'], correct: 2, explanation: 'A trade surplus increases demand for the domestic currency, strengthening it.' },
                { q: 'What is most central banks\' inflation target?', options: ['0%', '2%', '5%', '10%'], correct: 1, explanation: 'Most major central banks target approximately 2% inflation.' },
                { q: 'Forward contracts are primarily used to:', options: ['Speculate on currencies', 'Lock in future exchange rates', 'Borrow money', 'Issue bonds'], correct: 1, explanation: 'Forward contracts allow businesses to lock in exchange rates for future transactions.' },
                { q: 'Currency depreciation means the currency has:', options: ['Strengthened', 'Weakened', 'Stayed the same', 'Been replaced'], correct: 1, explanation: 'Depreciation means the currency has lost value relative to other currencies.' }
            ],
            'fixed-income': [
                { q: 'When interest rates rise, bond prices:', options: ['Rise', 'Fall', 'Stay the same', 'Become more volatile'], correct: 1, explanation: 'Bond prices and yields move in opposite directions - this is fundamental!' },
                { q: 'An inverted yield curve historically signals:', options: ['Economic expansion', 'Potential recession', 'Rising inflation', 'Currency strength'], correct: 1, explanation: 'An inverted yield curve has preceded every US recession since the 1970s.' },
                { q: 'A bond trading at a "premium" means:', options: ['Price above face value', 'Price below face value', 'High credit risk', 'No coupon payments'], correct: 0, explanation: 'Premium = price above face value (when coupon > market yield).' },
                { q: 'Which is considered the risk-free benchmark?', options: ['Corporate bonds', 'Municipal bonds', 'Government Treasuries', 'High-yield bonds'], correct: 2, explanation: 'US Treasuries are considered risk-free (backed by US government).' },
                { q: 'The yield curve plots:', options: ['Stock prices over time', 'Bond yields vs. maturity', 'GDP growth rates', 'Inflation vs. unemployment'], correct: 1, explanation: 'The yield curve shows bond yields across different maturities.' }
            ],
            equities: [
                { q: 'The P/E ratio formula is:', options: ['Earnings √∑ Price', 'Price √∑ Earnings', 'Price √É‚Äî Earnings', 'Price + Earnings'], correct: 1, explanation: 'P/E = Stock Price √∑ Earnings Per Share' },
                { q: 'In bankruptcy, who gets paid first?', options: ['Common stockholders', 'Preferred stockholders', 'Bondholders', 'The CEO'], correct: 2, explanation: 'Bondholders have senior claim; equity holders are last in line.' },
                { q: 'Absolute valuation determines:', options: ['Comparison to peers', 'Intrinsic value', 'Index performance', 'Tax efficiency'], correct: 1, explanation: 'Absolute valuation (like DCF) calculates intrinsic value.' },
                { q: 'A high P/E ratio typically indicates:', options: ['The stock is cheap', 'High growth expectations', 'Low risk', 'High dividend yield'], correct: 1, explanation: 'High P/E suggests investors expect high future growth.' },
                { q: 'Dividend yield is calculated as:', options: ['Price √∑ Dividend', 'Dividend √∑ Price', 'Dividend √É‚Äî Price', 'Dividend + Price'], correct: 1, explanation: 'Dividend Yield = Annual Dividend √∑ Stock Price' }
            ]
        };

        function initializeQuiz(module) {
            const prefix = module === 'fixed-income' ? 'fi' : module === 'currencies' ? 'curr' : module === 'equities' ? 'eq' : 'econ';
            const container = document.getElementById(`${prefix}-quiz-container`);
            
            if (!container || !quizData[module]) return;
            
            if (!appState.quizState[module]) {
                appState.quizState[module] = { currentQuestion: 0, answers: [], completed: false };
            }
            
            if (!appState.quizState[module].completed) {
                renderQuestion(module, prefix);
            }
        }

        function renderQuestion(module, prefix) {
            const container = document.getElementById(`${prefix}-quiz-container`);
            const state = appState.quizState[module];
            const questions = quizData[module];
            
            if (!container || !questions) return;
            
            const q = questions[state.currentQuestion];
            const qNum = document.getElementById(`${prefix}-q-num`);
            if (qNum) qNum.textContent = state.currentQuestion + 1;

            let html = `
                <div class="question-container">
                    <div class="question-text">${state.currentQuestion + 1}. ${q.q}</div>
                    <ul class="options-list">
            `;

            q.options.forEach((opt, i) => {
                html += `
                    <li class="option-item">
                        <label class="option-label" id="${prefix}-opt-${i}">
                            <input type="radio" name="${prefix}-q${state.currentQuestion}" value="${i}" 
                                   onchange="selectOption('${module}', '${prefix}', ${i})">
                            <span>${opt}</span>
                        </label>
                    </li>
                `;
            });

            html += `
                    </ul>
                </div>
                <div class="quiz-feedback" id="${prefix}-feedback"></div>
                <div class="btn-group">
                    <button class="btn btn-primary" id="${prefix}-submit" onclick="submitAnswer('${module}', '${prefix}')" disabled>
                        Submit Answer
                    </button>
                    <button class="btn btn-secondary" id="${prefix}-next" onclick="nextQuestion('${module}', '${prefix}')" style="display: none;">
                        Next ‚Üí
                    </button>
                </div>
            `;

            container.innerHTML = html;
        }

        function selectOption(module, prefix, index) {
            appState.quizState[module].selectedAnswer = index;
            document.querySelectorAll(`[id^="${prefix}-opt-"]`).forEach(el => el.classList.remove('selected'));
            document.getElementById(`${prefix}-opt-${index}`).classList.add('selected');
            document.getElementById(`${prefix}-submit`).disabled = false;
        }

        function submitAnswer(module, prefix) {
            const state = appState.quizState[module];
            const questions = quizData[module];
            const q = questions[state.currentQuestion];
            
            state.answers.push(state.selectedAnswer);
            
            const feedback = document.getElementById(`${prefix}-feedback`);
            const isCorrect = state.selectedAnswer === q.correct;
            
            feedback.className = isCorrect ? 'quiz-feedback correct' : 'quiz-feedback incorrect';
            feedback.innerHTML = isCorrect 
                ? `<strong>‚úì Correct!</strong> ${q.explanation}`
                : `<strong>‚úó Incorrect.</strong> The answer is: ${q.options[q.correct]}. ${q.explanation}`;

            document.getElementById(`${prefix}-opt-${q.correct}`).classList.add('correct');
            if (!isCorrect) {
                document.getElementById(`${prefix}-opt-${state.selectedAnswer}`).classList.add('incorrect');
            }

            document.querySelectorAll(`input[name="${prefix}-q${state.currentQuestion}"]`).forEach(input => {
                input.disabled = true;
            });

            document.getElementById(`${prefix}-submit`).style.display = 'none';
            
            if (state.currentQuestion < questions.length - 1) {
                document.getElementById(`${prefix}-next`).style.display = 'inline-flex';
            } else {
                showQuizResults(module, prefix);
            }
        }

        function nextQuestion(module, prefix) {
            appState.quizState[module].currentQuestion++;
            appState.quizState[module].selectedAnswer = null;
            renderQuestion(module, prefix);
        }

        function showQuizResults(module, prefix) {
            const state = appState.quizState[module];
            const questions = quizData[module];
            
            let correct = state.answers.filter((ans, i) => ans === questions[i].correct).length;
            const pct = Math.round((correct / questions.length) * 100);
            
            state.completed = true;
            appState.progress[module].score = pct;
            
            document.getElementById(`${prefix}-final-score`).textContent = `${correct}/${questions.length}`;
            document.getElementById(`${prefix}-quiz-results`).style.display = 'block';
            document.getElementById(`${prefix}-quiz-container`).style.display = 'none';
            
            markLessonComplete(module, `${prefix}-quiz`);
            updateDashboardScore();
            saveState();
        }

        function resetQuiz(module) {
            const prefix = module === 'fixed-income' ? 'fi' : module === 'currencies' ? 'curr' : module === 'equities' ? 'eq' : 'econ';
            
            appState.quizState[module] = { currentQuestion: 0, answers: [], completed: false };
            
            document.getElementById(`${prefix}-quiz-results`).style.display = 'none';
            document.getElementById(`${prefix}-quiz-container`).style.display = 'block';
            
            renderQuestion(module, prefix);
            saveState();
        }

        function updateDashboardScore() {
            const scores = Object.values(appState.progress)
                .filter(p => p.score !== null)
                .map(p => p.score);
            
            if (scores.length > 0) {
                const avg = Math.round(scores.reduce((a, b) => a + b, 0) / scores.length);
                document.getElementById('dashboardScore').textContent = avg + '%';
            }
        }

        // ============================================
        // TERMINAL SIMULATOR
        // ============================================
        function openTerminalSimulator() {
            const embed = document.getElementById('terminal-embed');
            const frame = document.getElementById('terminal-frame');
            
            // Use the published GitHub Pages URL for the simulator
            frame.src = 'https://mqaissaunee-bcc.github.io/AI_Examples/bloomberg-terminal-enhanced.html';
            embed.style.display = 'block';
            
            // Scroll to terminal
            embed.scrollIntoView({ behavior: 'smooth' });
        }

        function closeTerminalSimulator() {
            const embed = document.getElementById('terminal-embed');
            const frame = document.getElementById('terminal-frame');
            
            frame.src = '';
            embed.style.display = 'none';
        }

        function completeCourse() {
            alert('üéâ Congratulations! You have completed the BMC Certification Prep!\n\nYou should now be well-prepared for the actual Bloomberg Market Concepts exam.');
            updateProgress();
        }

        // ============================================
        // INITIALIZATION
        // ============================================
        document.addEventListener('DOMContentLoaded', function() {
            updateProgress();
            updateDashboardScore();
            
            // Restore completed lesson button styling from saved state
            Object.keys(appState.progress).forEach(mod => {
                if (appState.progress[mod] && appState.progress[mod].completed) {
                    appState.progress[mod].completed.forEach(lessonId => {
                        const btn = document.querySelector(`[data-lesson="${lessonId}"]`);
                        if (btn) btn.classList.add('completed');
                    });
                }
            });
            
            // Initialize simulations
            calculateGDP();
            convertCurrency();
            updatePMI();
            updateInterestRates();
            updateBondPrice();
            updateYieldCurve();

            // Keyboard accessibility for flashcards
            document.querySelectorAll('.flashcard').forEach(card => {
                card.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        this.classList.toggle('flipped');
                    }
                });
            });

            // Keyboard accessibility for progress items
            document.querySelectorAll('.module-progress-item').forEach(item => {
                item.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' || e.key === ' ') {
                        this.click();
                    }
                });
            });
        });
    </script>
</body>
</html>
