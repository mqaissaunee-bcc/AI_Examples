<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberGuard Academy: Protocol Security Challenge</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .game-modes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .mode-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            border-radius: 15px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .mode-card:hover {
            transform: translateY(-5px);
            background: rgba(255, 255, 255, 0.25);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
        }

        .mode-card h3 {
            font-size: 1.5em;
            margin-bottom: 15px;
            color: #FFD700;
        }

        .game-area {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            display: none;
        }

        .question-card {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .question {
            font-size: 1.3em;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .answers {
            display: grid;
            gap: 15px;
        }

        .answer-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 15px 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
            text-align: left;
        }

        .answer-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateX(10px);
        }

        .answer-btn.correct {
            background: rgba(76, 175, 80, 0.8);
            border-color: #4CAF50;
            animation: pulse 0.6s ease-in-out;
        }

        .answer-btn.incorrect {
            background: rgba(244, 67, 54, 0.8);
            border-color: #f44336;
            animation: shake 0.6s ease-in-out;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .score-board {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            background: rgba(255, 255, 255, 0.15);
            padding: 15px 25px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .score {
            font-size: 1.2em;
            font-weight: bold;
        }

        .progress-bar {
            flex: 1;
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            margin: 0 20px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #8BC34A);
            width: 0%;
            transition: width 0.5s ease;
        }

        .explanation {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid #FFD700;
            display: none;
        }

        .explanation h4 {
            color: #FFD700;
            margin-bottom: 10px;
        }

        .next-btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            border: none;
            border-radius: 10px;
            padding: 15px 30px;
            color: white;
            font-size: 1.1em;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            display: none;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 10px 20px;
            color: white;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .completion-screen {
            text-align: center;
            display: none;
        }

        .completion-screen h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #FFD700;
        }

        .final-score {
            font-size: 1.5em;
            margin-bottom: 30px;
        }

        .trophy {
            font-size: 5em;
            margin-bottom: 20px;
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-30px); }
            60% { transform: translateY(-15px); }
        }

        .protocol-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin: 5px;
        }

        .ssl-badge { background: #FF6B6B; }
        .tls-badge { background: #4ECDC4; }
        .ipsec-badge { background: #45B7D1; }
        .both-badge { background: #9B59B6; }

        /* Learning Module Styles */
        .learning-section {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .learning-nav {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 25px;
            padding: 12px 24px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .nav-btn:hover, .nav-btn.active {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .ssl-btn.active { border-color: #FF6B6B; background: rgba(255, 107, 107, 0.3); }
        .tls-btn.active { border-color: #4ECDC4; background: rgba(78, 205, 196, 0.3); }
        .ipsec-btn.active { border-color: #45B7D1; background: rgba(69, 183, 209, 0.3); }

        .lesson-content {
            display: none;
        }

        .lesson-content.active {
            display: block !important;
            animation: fadeIn 0.5s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .concept-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 4px solid #FFD700;
        }

        .concept-title {
            font-size: 1.4em;
            font-weight: bold;
            color: #FFD700;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .timeline {
            position: relative;
            margin: 20px 0;
            padding-left: 30px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 15px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: #FFD700;
        }

        .timeline-item {
            position: relative;
            margin-bottom: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 15px 20px;
            border-radius: 10px;
            margin-left: 20px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -25px;
            top: 20px;
            width: 12px;
            height: 12px;
            background: #FFD700;
            border-radius: 50%;
            border: 3px solid #333;
        }

        .handshake-steps {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .step-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .step-number {
            background: #FFD700;
            color: #333;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin: 0 auto 10px;
        }

        .comparison-table {
            overflow-x: auto;
            margin: 20px 0;
        }

        .comparison-table table {
            width: 100%;
            border-collapse: collapse;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .comparison-table th {
            background: rgba(255, 255, 255, 0.2);
            font-weight: bold;
            color: #FFD700;
        }

        .key-point {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 15px;
        }

        .key-point .icon {
            font-size: 1.2em;
            margin-top: 2px;
        }

        .highlight-box {
            background: rgba(255, 215, 0, 0.1);
            border: 2px solid #FFD700;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }

        .visual-diagram {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            text-align: center;
            border: 2px dashed rgba(255, 255, 255, 0.3);
        }

        .interactive-demo {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .demo-button {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            border: none;
            border-radius: 8px;
            padding: 12px 25px;
            color: white;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }

        .demo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .learning-progress {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .progress-dots {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
        }

        .progress-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .progress-dot.completed {
            background: #4CAF50;
        }

        .progress-dot.current {
            background: #FFD700;
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üõ°Ô∏è CyberGuard Academy</h1>
            <p>Master SSL, TLS, and IPSec Protocols Through Interactive Challenges</p>
        </div>

        <div id="menu" class="game-modes">
            <div class="mode-card" onclick="showLearning()">
                <h3>üìö Learn Protocols</h3>
                <p>Interactive lessons covering SSL, TLS, and IPSec fundamentals with visual guides</p>
            </div>
            <div class="mode-card" onclick="startGame('quiz')">
                <h3>üìù Protocol Quiz</h3>
                <p>Test your knowledge with interactive questions about SSL, TLS, and IPSec fundamentals</p>
            </div>
            <div class="mode-card" onclick="startGame('scenario')">
                <h3>üéØ Security Scenarios</h3>
                <p>Apply your knowledge to real-world security challenges and protocol selection</p>
            </div>
            <div class="mode-card" onclick="startGame('comparison')">
                <h3>‚öñÔ∏è Protocol Comparison</h3>
                <p>Learn the differences and similarities between SSL, TLS, and IPSec protocols</p>
            </div>
        </div>

        <div id="gameArea" class="game-area">
            <button class="back-btn" onclick="backToMenu()">‚Üê Back to Menu</button>
            
            <div class="score-board" id="scoreBoard">
                <div class="score">Score: <span id="score">0</span></div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="score">Question: <span id="currentQ">1</span>/<span id="totalQ">10</span></div>
            </div>

            <div id="questionArea">
                <!-- Questions will be loaded here -->
            </div>

            <div id="completionScreen" class="completion-screen">
                <div class="trophy">üèÜ</div>
                <h2>Congratulations!</h2>
                <div class="final-score">Final Score: <span id="finalScore">0</span>%</div>
                <p id="performanceMessage"></p>
                <button class="next-btn" onclick="backToMenu()">Play Again</button>
            </div>
        </div>

        <div id="learningArea" class="game-area">
            <button class="back-btn" onclick="backToMenu()">‚Üê Back to Menu</button>
            
            <div class="learning-progress">
                <h3>Learning Progress</h3>
                <div class="progress-dots">
                    <div class="progress-dot completed" title="SSL Basics"></div>
                    <div class="progress-dot current" title="TLS Modern Standard"></div>
                    <div class="progress-dot" title="IPSec Network Security"></div>
                </div>
            </div>

            <div class="learning-nav">
                <button class="nav-btn ssl-btn active" onclick="showLesson('ssl')">üîí SSL Legacy</button>
                <button class="nav-btn tls-btn" onclick="showLesson('tls')">üõ°Ô∏è TLS Modern</button>
                <button class="nav-btn ipsec-btn" onclick="showLesson('ipsec')">üåê IPSec Network</button>
            </div>

            <div id="sslLesson" class="lesson-content active">
                <div class="learning-section">
                    <div class="concept-title">üîí SSL (Secure Sockets Layer) - The Legacy Foundation</div>
                    
                    <div class="concept-card">
                        <div class="concept-title">üìñ What is SSL?</div>
                        <p>SSL (Secure Sockets Layer) was the original cryptographic protocol developed by Netscape in the mid-1990s to secure internet communications. While now deprecated, understanding SSL helps us appreciate why TLS was created.</p>
                        
                        <div class="timeline">
                            <div class="timeline-item">
                                <strong>1995 - SSL 2.0</strong><br>
                                First public release, but had security flaws
                            </div>
                            <div class="timeline-item">
                                <strong>1996 - SSL 3.0</strong><br>
                                Major improvements, fixed SSL 2.0 vulnerabilities
                            </div>
                            <div class="timeline-item">
                                <strong>2015 - Deprecated</strong><br>
                                SSL 3.0 officially deprecated due to POODLE vulnerability
                            </div>
                        </div>
                    </div>

                    <div class="concept-card">
                        <div class="concept-title">‚ö†Ô∏è Why SSL is No Longer Used</div>
                        <div class="key-point">
                            <span class="icon">üö®</span>
                            <div><strong>Security Vulnerabilities:</strong> SSL uses outdated encryption like MD5, which is susceptible to attacks</div>
                        </div>
                        <div class="key-point">
                            <span class="icon">üîì</span>
                            <div><strong>POODLE Attack:</strong> SSL 3.0 vulnerable to "Padding Oracle On Downgraded Legacy Encryption" attacks</div>
                        </div>
                        <div class="key-point">
                            <span class="icon">üì±</span>
                            <div><strong>Browser Support:</strong> Modern browsers have disabled SSL support by default</div>
                        </div>
                        
                        <div class="highlight-box">
                            <strong>üí° Key Takeaway:</strong> While we still say "SSL certificate," we're actually using TLS in modern systems!
                        </div>
                    </div>

                    <div class="interactive-demo">
                        <h4>üéØ SSL vs Modern Standards</h4>
                        <button class="demo-button" onclick="showSSLDemo()">See SSL Vulnerabilities</button>
                        <div id="sslDemo" style="display: none; margin-top: 15px; padding: 15px; background: rgba(244, 67, 54, 0.2); border-radius: 8px;">
                            <p><strong>SSL 3.0 Issues:</strong></p>
                            <ul style="text-align: left; margin-top: 10px;">
                                <li>Uses MD5 hash function (broken)</li>
                                <li>Vulnerable to padding oracle attacks</li>
                                <li>Weak cipher suites allowed</li>
                                <li>Poor random number generation</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div id="tlsLesson" class="lesson-content">
                <div class="learning-section">
                    <div class="concept-title">üõ°Ô∏è TLS (Transport Layer Security) - The Modern Standard</div>
                    
                    <div class="concept-card">
                        <div class="concept-title">üöÄ TLS Evolution</div>
                        <p>TLS is the modern, secure successor to SSL. It fixes SSL's vulnerabilities and provides stronger encryption for today's internet.</p>
                        
                        <div class="comparison-table">
                            <table>
                                <tr>
                                    <th>Version</th>
                                    <th>Year</th>
                                    <th>Key Features</th>
                                    <th>Status</th>
                                </tr>
                                <tr>
                                    <td>TLS 1.0</td>
                                    <td>1999</td>
                                    <td>SSL 3.0 upgrade, better MAC</td>
                                    <td>‚ùå Deprecated</td>
                                </tr>
                                <tr>
                                    <td>TLS 1.1</td>
                                    <td>2006</td>
                                    <td>Protection against CBC attacks</td>
                                    <td>‚ùå Deprecated</td>
                                </tr>
                                <tr>
                                    <td>TLS 1.2</td>
                                    <td>2008</td>
                                    <td>SHA-256, better cipher suites</td>
                                    <td>‚úÖ Current</td>
                                </tr>
                                <tr>
                                    <td>TLS 1.3</td>
                                    <td>2018</td>
                                    <td>Faster handshake, modern crypto</td>
                                    <td>‚úÖ Recommended</td>
                                </tr>
                            </table>
                        </div>
                    </div>

                    <div class="concept-card">
                        <div class="concept-title">üîÑ TLS Handshake Process</div>
                        <p>Understanding how TLS establishes secure connections:</p>
                        
                        <div class="handshake-steps">
                            <div class="step-card">
                                <div class="step-number">1</div>
                                <strong>Client Hello</strong><br>
                                Browser requests secure connection
                            </div>
                            <div class="step-card">
                                <div class="step-number">2</div>
                                <strong>Server Hello</strong><br>
                                Server responds with certificate
                            </div>
                            <div class="step-card">
                                <div class="step-number">3</div>
                                <strong>Certificate Verify</strong><br>
                                Browser validates server identity
                            </div>
                            <div class="step-card">
                                <div class="step-number">4</div>
                                <strong>Key Exchange</strong><br>
                                Secure session keys generated
                            </div>
                        </div>

                        <div class="visual-diagram">
                            <h4>üîê TLS 1.3 vs TLS 1.2 Performance</h4>
                            <p><strong>TLS 1.2:</strong> 2 round trips ‚ü∑ ‚ü∑</p>
                            <p><strong>TLS 1.3:</strong> 1 round trip ‚ü∑ (50% faster!)</p>
                        </div>
                    </div>

                    <div class="interactive-demo">
                        <h4>üåê HTTPS in Action</h4>
                        <button class="demo-button" onclick="showTLSDemo()">Simulate TLS Handshake</button>
                        <div id="tlsDemo" style="display: none; margin-top: 15px;">
                            <div class="step-card" style="background: rgba(76, 175, 80, 0.2);">
                                <p>üîÑ <strong>Handshake Complete!</strong></p>
                                <p>‚úÖ Certificate validated</p>
                                <p>üîë AES-256 encryption active</p>
                                <p>üõ°Ô∏è SHA-256 integrity protection</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="ipsecLesson" class="lesson-content">
                <div class="learning-section">
                    <div class="concept-title">üåê IPSec (Internet Protocol Security) - Network Layer Protection</div>
                    
                    <div class="concept-card">
                        <div class="concept-title">üéØ What Makes IPSec Different?</div>
                        <p>Unlike TLS which works at the application layer, IPSec operates at the network layer (Layer 3), providing transparent security for all traffic.</p>
                        
                        <div class="visual-diagram">
                            <h4>üìä Network Stack Comparison</h4>
                            <div style="text-align: left; margin: 15px 0;">
                                <div style="background: rgba(78, 205, 196, 0.3); padding: 8px; margin: 2px; border-radius: 5px;">Application Layer - TLS/SSL</div>
                                <div style="background: rgba(255, 255, 255, 0.1); padding: 8px; margin: 2px; border-radius: 5px;">Transport Layer</div>
                                <div style="background: rgba(69, 183, 209, 0.3); padding: 8px; margin: 2px; border-radius: 5px;">Network Layer - IPSec</div>
                                <div style="background: rgba(255, 255, 255, 0.1); padding: 8px; margin: 2px; border-radius: 5px;">Data Link Layer</div>
                            </div>
                        </div>
                    </div>

                    <div class="concept-card">
                        <div class="concept-title">üîß IPSec Core Protocols</div>
                        
                        <div class="handshake-steps">
                            <div class="step-card" style="border-color: #4CAF50;">
                                <h4>üîê ESP</h4>
                                <strong>Encapsulating Security Payload</strong><br>
                                Provides encryption + authentication
                            </div>
                            <div class="step-card" style="border-color: #FF9800;">
                                <h4>‚úÖ AH</h4>
                                <strong>Authentication Header</strong><br>
                                Authentication only (no encryption)
                            </div>
                            <div class="step-card" style="border-color: #2196F3;">
                                <h4>üîë IKE</h4>
                                <strong>Internet Key Exchange</strong><br>
                                Key management and setup
                            </div>
                        </div>
                    </div>

                    <div class="concept-card">
                        <div class="concept-title">üõ°Ô∏è IPSec Security Benefits</div>
                        <div class="key-point">
                            <span class="icon">üîí</span>
                            <div><strong>Confidentiality:</strong> AES encryption protects data content</div>
                        </div>
                        <div class="key-point">
                            <span class="icon">‚úã</span>
                            <div><strong>Authentication:</strong> Verifies sender identity</div>
                        </div>
                        <div class="key-point">
                            <span class="icon">üîç</span>
                            <div><strong>Integrity:</strong> Detects any data tampering</div>
                        </div>
                        <div class="key-point">
                            <span class="icon">üîÑ</span>
                            <div><strong>Anti-Replay:</strong> Prevents duplicate packet attacks</div>
                        </div>
                        
                        <div class="highlight-box">
                            <strong>üéØ Perfect For:</strong> VPNs, site-to-site connections, protecting legacy protocols
                        </div>
                    </div>

                    <div class="interactive-demo">
                        <h4>üîó IPSec VPN Simulation</h4>
                        <button class="demo-button" onclick="showIPSecDemo()">Establish VPN Tunnel</button>
                        <div id="ipsecDemo" style="display: none; margin-top: 15px;">
                            <div class="handshake-steps">
                                <div class="step-card" style="background: rgba(76, 175, 80, 0.2);">
                                    <strong>Phase 1: IKE</strong><br>
                                    ü§ù Peers authenticated<br>
                                    üîë Master keys established
                                </div>
                                <div class="step-card" style="background: rgba(76, 175, 80, 0.2);">
                                    <strong>Phase 2: IPSec</strong><br>
                                    üöá Tunnel created<br>
                                    üìä ESP with AES-256 active
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentGame = '';
        let currentQuestion = 0;
        let score = 0;
        let questions = [];
        let totalQuestions = 0;
        let currentLesson = 'ssl';
        let lessonProgress = { ssl: true, tls: false, ipsec: false };

        const quizQuestions = [
            {
                question: "What is the main difference between SSL and TLS?",
                answers: [
                    "SSL and TLS are exactly the same",
                    "TLS is the more secure, updated version of SSL",
                    "SSL is newer than TLS",
                    "SSL provides encryption while TLS only provides authentication"
                ],
                correct: 1,
                explanation: "TLS (Transport Layer Security) is the direct successor to SSL and is more secure. SSL has since been deprecated and TLS is the modern standard, providing stronger encryption and better protection for data integrity and privacy.",
                protocol: "TLS",
                difficulty: "Easy"
            },
            {
                question: "Which TLS version is currently recommended for use?",
                answers: [
                    "TLS 1.0",
                    "TLS 1.1", 
                    "TLS 1.2 and TLS 1.3",
                    "SSL 3.0"
                ],
                correct: 2,
                explanation: "As of March 2025, the latest versions of all major web browsers support TLS 1.2 and 1.3 and have them enabled by default, with the exception of IE 11. TLS 1.0 and 1.1 are disabled by default on the latest versions of all major browsers.",
                protocol: "TLS",
                difficulty: "Easy"
            },
            {
                question: "What is IPSec primarily used for?",
                answers: [
                    "Web browsing security only",
                    "Email encryption only",
                    "Securing IP network communications and VPNs",
                    "Database encryption"
                ],
                correct: 2,
                explanation: "IPSec (Internet Protocol Security) is a set of communication rules or protocols for setting up secure connections over a network. It's commonly used in Virtual Private Networks (VPNs) to create secure, private connections.",
                protocol: "IPSec",
                difficulty: "Easy"
            },
            {
                question: "What are the two main IPSec protocols?",
                answers: [
                    "HTTP and HTTPS",
                    "AH (Authentication Header) and ESP (Encapsulating Security Payload)",
                    "TCP and UDP",
                    "SSL and TLS"
                ],
                correct: 1,
                explanation: "To provide security, IPSec uses two main protocols: AH (Authentication Header) and ESP (Encapsulating Security Payload). Authentication Header verifies the data and ESP performs authentication and also encrypts the data.",
                protocol: "IPSec",
                difficulty: "Medium"
            },
            {
                question: "Which layer of the OSI model does IPSec operate at?",
                answers: [
                    "Application Layer",
                    "Transport Layer", 
                    "Network Layer (Layer 3)",
                    "Physical Layer"
                ],
                correct: 2,
                explanation: "IPsec operates at the network layer, enabling it to handle all traffic that passes through the network. Because of this, it's not dependent on the application being used and rarely requires individual application configuration.",
                protocol: "IPSec",
                difficulty: "Medium"
            }
        ];

        const scenarioQuestions = [
            {
                question: "A company needs to secure communication between two office locations over the internet. Which protocol would be most appropriate?",
                answers: [
                    "SSL for web traffic only",
                    "IPSec VPN tunnel",
                    "Basic HTTP",
                    "Email encryption only"
                ],
                correct: 1,
                explanation: "IPSec is ideal for site-to-site VPN connections between offices, providing network-level security for all traffic between locations.",
                protocol: "IPSec",
                difficulty: "Medium"
            },
            {
                question: "An e-commerce website needs to secure customer transactions and login pages. What should they implement?",
                answers: [
                    "HTTPS with TLS 1.2 or 1.3",
                    "Plain HTTP",
                    "Only password protection",
                    "IPSec for web browsing"
                ],
                correct: 0,
                explanation: "HTTPS using modern TLS (1.2 or 1.3) is the standard for securing web traffic, especially for sensitive transactions and user authentication.",
                protocol: "TLS",
                difficulty: "Easy"
            }
        ];

        const comparisonQuestions = [
            {
                question: "Which protocols provide both authentication and encryption?",
                answers: [
                    "Only SSL",
                    "Only TLS",
                    "TLS and IPSec ESP",
                    "None of them"
                ],
                correct: 2,
                explanation: "Both TLS and IPSec's ESP (Encapsulating Security Payload) protocol provide authentication and encryption. IPSec's AH provides only authentication.",
                protocol: "Both",
                difficulty: "Medium"
            },
            {
                question: "What is a key advantage of IPSec over SSL/TLS?",
                answers: [
                    "IPSec works at the network layer, protecting all traffic",
                    "IPSec is easier to configure",
                    "IPSec is faster",
                    "IPSec only works with web browsers"
                ],
                correct: 0,
                explanation: "IPSec operates at the network layer, providing transparent protection for all applications, while SSL/TLS typically protects specific application layer protocols.",
                protocol: "IPSec",
                difficulty: "Medium"
            }
        ];

        function showLearning() {
            document.getElementById('menu').style.display = 'none';
            document.getElementById('gameArea').style.display = 'none';
            document.getElementById('learningArea').style.display = 'block';
            updateLearningProgress();
        }

        function showLesson(lesson) {
            // Hide all lessons
            document.querySelectorAll('.lesson-content').forEach(content => {
                content.classList.remove('active');
                content.style.display = 'none';
            });
            
            // Remove active class from all nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected lesson
            const selectedLesson = document.getElementById(lesson + 'Lesson');
            if (selectedLesson) {
                selectedLesson.classList.add('active');
                selectedLesson.style.display = 'block';
            }
            
            const selectedButton = document.querySelector('.' + lesson + '-btn');
            if (selectedButton) {
                selectedButton.classList.add('active');
            }
            
            currentLesson = lesson;
            lessonProgress[lesson] = true;
            updateLearningProgress();
        }

        function updateLearningProgress() {
            const dots = document.querySelectorAll('.progress-dot');
            const lessons = ['ssl', 'tls', 'ipsec'];
            
            dots.forEach((dot, index) => {
                if (dot) {
                    dot.classList.remove('completed', 'current');
                    if (lessonProgress[lessons[index]]) {
                        dot.classList.add('completed');
                    } else if (lessons[index] === currentLesson) {
                        dot.classList.add('current');
                    }
                }
            });
        }

        function showSSLDemo() {
            const demo = document.getElementById('sslDemo');
            demo.style.display = demo.style.display === 'none' ? 'block' : 'none';
        }

        function showTLSDemo() {
            const demo = document.getElementById('tlsDemo');
            if (demo.style.display === 'none') {
                demo.style.display = 'block';
                setTimeout(() => {
                    demo.innerHTML = `
                        <div class="step-card" style="background: rgba(76, 175, 80, 0.2); animation: fadeIn 0.5s ease-in-out;">
                            <p>üîÑ <strong>TLS 1.3 Handshake Complete!</strong></p>
                            <p>‚úÖ Certificate validated (RSA-2048)</p>
                            <p>üîë AES-256-GCM encryption active</p>
                            <p>üõ°Ô∏è SHA-256 integrity protection</p>
                            <p>‚ö° Connection established in 1 round trip</p>
                            <p style="color: #4CAF50; margin-top: 10px;"><strong>üöÄ Ready for secure HTTPS traffic!</strong></p>
                        </div>
                    `;
                }, 500);
            } else {
                demo.style.display = 'none';
            }
        }

        function showIPSecDemo() {
            const demo = document.getElementById('ipsecDemo');
            if (demo.style.display === 'none') {
                demo.style.display = 'block';
                setTimeout(() => {
                    const phase1 = demo.querySelector('.step-card:first-child');
                    const phase2 = demo.querySelector('.step-card:last-child');
                    
                    phase1.innerHTML = `
                        <strong>Phase 1: IKE Complete ‚úÖ</strong><br>
                        ü§ù Peers authenticated (PSK)<br>
                        üîë Master keys established<br>
                        üîí ISAKMP tunnel secured
                    `;
                    
                    setTimeout(() => {
                        phase2.innerHTML = `
                            <strong>Phase 2: IPSec Tunnel Active ‚úÖ</strong><br>
                            üöá ESP tunnel established<br>
                            üìä AES-256 + SHA-256 active<br>
                            üåê All traffic now encrypted
                        `;
                    }, 1000);
                }, 500);
            } else {
                demo.style.display = 'none';
            }
        }

        function startGame(gameType) {
            currentGame = gameType;
            currentQuestion = 0;
            score = 0;
            
            document.getElementById('menu').style.display = 'none';
            document.getElementById('learningArea').style.display = 'none';
            document.getElementById('gameArea').style.display = 'block';
            document.getElementById('completionScreen').style.display = 'none';
            document.getElementById('scoreBoard').style.display = 'flex';
            
            switch(gameType) {
                case 'quiz':
                    questions = quizQuestions;
                    break;
                case 'scenario':
                    questions = scenarioQuestions;
                    break;
                case 'comparison':
                    questions = comparisonQuestions;
                    break;
            }
            
            totalQuestions = questions.length;
            document.getElementById('totalQ').textContent = totalQuestions;
            updateScoreBoard();
            loadQuestion();
        }

        function loadQuestion() {
            if (currentQuestion >= questions.length) {
                showCompletion();
                return;
            }

            const question = questions[currentQuestion];
            const questionArea = document.getElementById('questionArea');
            
            questionArea.innerHTML = `
                <div class="question-card">
                    <div class="protocol-badge ${question.protocol.toLowerCase()}-badge">${question.protocol}</div>
                    <div class="question">${question.question}</div>
                    <div class="answers">
                        ${question.answers.map((answer, index) => 
                            `<button class="answer-btn" onclick="selectAnswer(${index})">${answer}</button>`
                        ).join('')}
                    </div>
                    <div class="explanation" id="explanation">
                        <h4>üí° Explanation:</h4>
                        <p>${question.explanation}</p>
                    </div>
                    <button class="next-btn" id="nextBtn" onclick="nextQuestion()">Next Question ‚Üí</button>
                </div>
            `;
        }

        function selectAnswer(selectedIndex) {
            const question = questions[currentQuestion];
            const answerBtns = document.querySelectorAll('.answer-btn');
            const explanation = document.getElementById('explanation');
            const nextBtn = document.getElementById('nextBtn');
            
            answerBtns.forEach(btn => btn.style.pointerEvents = 'none');
            
            answerBtns[selectedIndex].classList.add(selectedIndex === question.correct ? 'correct' : 'incorrect');
            if (selectedIndex !== question.correct) {
                answerBtns[question.correct].classList.add('correct');
            }
            
            if (selectedIndex === question.correct) {
                score++;
                updateScoreBoard();
            }
            
            explanation.style.display = 'block';
            nextBtn.style.display = 'inline-block';
        }

        function nextQuestion() {
            currentQuestion++;
            loadQuestion();
        }

        function updateScoreBoard() {
            document.getElementById('score').textContent = score;
            document.getElementById('currentQ').textContent = currentQuestion + 1;
            const progress = ((currentQuestion) / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
        }

        function showCompletion() {
            document.getElementById('questionArea').style.display = 'none';
            document.getElementById('completionScreen').style.display = 'block';
            
            const percentage = Math.round((score / totalQuestions) * 100);
            document.getElementById('finalScore').textContent = percentage;
            
            let message = '';
            if (percentage >= 90) {
                message = "Outstanding! You're a cybersecurity expert! üåü";
            } else if (percentage >= 80) {
                message = "Excellent work! You have a strong understanding of these protocols! üëè";
            } else if (percentage >= 70) {
                message = "Good job! You're well on your way to mastering these concepts! üìö";
            } else if (percentage >= 60) {
                message = "Nice effort! Review the explanations and try again to improve! üí™";
            } else {
                message = "Keep studying! These concepts take time to master. Don't give up! üéØ";
            }
            
            document.getElementById('performanceMessage').textContent = message;
        }

        function backToMenu() {
            document.getElementById('menu').style.display = 'grid';
            document.getElementById('gameArea').style.display = 'none';
            document.getElementById('learningArea').style.display = 'none';
        }

        document.addEventListener('DOMContentLoaded', function() {
            const header = document.querySelector('.header');
            let float = 0;
            setInterval(() => {
                float += 0.02;
                header.style.transform = `translateY(${Math.sin(float) * 5}px)`;
            }, 16);
        });
    </script>
</body>
</html>