<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How Single Sign-On (SSO) Works - Interactive Tutorial</title>
    <style>
        /* CSS Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #F0F0F0 0%, #D3D3D3 100%);
            color: #333333;
            line-height: 1.6;
            padding: 20px;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: #FFFFFF;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 30px;
        }

        h1 {
            text-align: center;
            color: #000080;
            margin-bottom: 10px;
            font-size: 2em;
        }

        .subtitle {
            text-align: center;
            color: #666666;
            margin-bottom: 15px;
            font-size: 1.1em;
        }

        /* Keyboard Navigation Hint */
        .keyboard-hint {
            text-align: center;
            color: #4169E1;
            margin-bottom: 25px;
            font-size: 0.95em;
            background-color: #F0F8FF;
            padding: 12px 20px;
            border-radius: 8px;
            border: 1px solid #B0D4FF;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .keyboard-hint strong {
            color: #000080;
            font-weight: bold;
        }

        .keyboard-key {
            display: inline-block;
            background-color: #FFFFFF;
            border: 2px solid #000080;
            border-radius: 5px;
            padding: 3px 10px;
            margin: 0 3px;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            color: #000080;
            box-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
        }

        /* Control Panel */
        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .controls-hint {
            text-align: center;
            color: #666666;
            font-size: 0.85em;
            margin-bottom: 20px;
            font-style: italic;
        }

        .btn {
            background-color: #008000;
            color: #FFFFFF;
            border: none;
            padding: 12px 24px;
            font-size: 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
        }

        .btn:hover {
            background-color: #006400;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .btn:focus {
            outline: 3px solid #FFD700;
            outline-offset: 2px;
        }

        .btn:disabled {
            background-color: #A9A9A9;
            cursor: not-allowed;
            transform: none;
        }

        .btn-reset {
            background-color: #FF6347;
        }

        .btn-reset:hover {
            background-color: #DC143C;
        }

        .btn-prev {
            background-color: #4169E1;
        }

        .btn-prev:hover {
            background-color: #000080;
        }

        .btn-next {
            background-color: #4169E1;
        }

        .btn-next:hover {
            background-color: #000080;
        }

        /* Progress Indicator */
        .progress-container {
            margin-bottom: 30px;
        }

        .progress-bar {
            width: 100%;
            height: 30px;
            background-color: #E0E0E0;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4169E1 0%, #000080 100%);
            transition: width 0.5s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: #FFFFFF;
            font-weight: bold;
        }

        /* Split View Layout */
        .split-view-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .visualization-panel {
            background-color: #FFFFFF;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .description-panel {
            background-color: #FFFFFF;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
        }

        /* Visualization Area */
        .visualization {
            position: relative;
            min-height: 600px;
            height: 600px;
            background-color: #F5F5F5;
            border-radius: 8px;
            padding: 30px;
            margin: 0;
            overflow: visible;
        }

        /* Entities */
        .entity {
            position: absolute;
            background-color: #FFFFFF;
            border: 2px solid #000080;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            width: 140px;
            max-width: 140px;
        }

        .entity.active {
            border-color: #FFD700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        #user.active,
        #trello.active,
        #auth-server.active {
            transform: scale(1.05);
        }

        #google.active {
            transform: translate(-50%, -50%) scale(1.05);
        }

        .entity-icon {
            font-size: 44px;
            margin-bottom: 8px;
        }

        .entity-label {
            font-weight: bold;
            color: #000080;
            font-size: 15px;
        }

        #user {
            left: 30px;
            top: 30px;
        }

        #trello {
            right: 30px;
            top: 30px;
        }

        #google {
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
        }

        #auth-server {
            left: 30px;
            bottom: 30px;
        }

        /* Connection Lines - SVG Based */
        .connections-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .connection-line {
            stroke: #FFA500;
            stroke-width: 3;
            fill: none;
            opacity: 0;
            transition: opacity 0.3s ease;
            stroke-dasharray: 10, 5;
            animation: dashMove 1s linear infinite;
        }

        .connection-line.active {
            opacity: 1;
        }

        @keyframes dashMove {
            to {
                stroke-dashoffset: -15;
            }
        }

        .arrow-marker {
            fill: #FFA500;
        }

        /* Step Description */
        .step-description {
            background-color: #E6F3FF;
            border-left: 5px solid #4169E1;
            padding: 20px;
            border-radius: 5px;
            flex: 1;
        }

        .step-description h2 {
            color: #000080;
            margin-bottom: 15px;
            font-size: 1.4em;
        }

        .step-description p {
            color: #333333;
            font-size: 1.05em;
            line-height: 1.8;
            margin-bottom: 15px;
        }

        /* Token/Message Display with Animation */
        .message-token {
            position: absolute;
            background-color: #FFD700;
            color: #000000;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            opacity: 0;
            transition: all 0.8s ease;
            z-index: 10;
        }

        .message-token.visible {
            opacity: 1;
        }

        /* Interactive Tooltips */
        .entity {
            cursor: pointer;
            position: relative;
        }

        .entity-tooltip {
            position: absolute;
            background-color: #000080;
            color: #FFFFFF;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
            min-width: 220px;
            max-width: 280px;
            z-index: 100;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
            top: 110%;
            left: 50%;
            transform: translateX(-50%);
            margin-top: 10px;
        }

        .entity-tooltip::before {
            content: '';
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            border: 8px solid transparent;
            border-bottom-color: #000080;
        }

        .entity-tooltip.visible {
            opacity: 1;
            visibility: visible;
        }

        .entity-tooltip h4 {
            margin-bottom: 8px;
            color: #FFD700;
            font-size: 15px;
        }

        .entity-tooltip p {
            font-size: 13px;
            line-height: 1.5;
            margin: 0;
        }

        .tooltip-close {
            position: absolute;
            top: 5px;
            right: 5px;
            background: transparent;
            border: none;
            color: #FFFFFF;
            font-size: 20px;
            cursor: pointer;
            padding: 0;
            width: 25px;
            height: 25px;
            line-height: 1;
        }

        .tooltip-close:hover {
            color: #FFD700;
        }

        .click-hint {
            font-size: 10px;
            color: #666666;
            margin-top: 5px;
            font-style: italic;
        }

        /* Tooltip positioning adjustments for entities */
        #user .entity-tooltip,
        #auth-server .entity-tooltip {
            left: 0;
            transform: translateX(0);
        }

        #user .entity-tooltip::before,
        #auth-server .entity-tooltip::before {
            left: 70px;
        }

        #trello .entity-tooltip {
            left: auto;
            right: 0;
            transform: translateX(0);
        }

        #trello .entity-tooltip::before {
            left: auto;
            right: 70px;
            transform: translateX(0);
        }

        #google .entity-tooltip {
            left: 50%;
            transform: translateX(-50%);
        }

        #google .entity-tooltip::before {
            left: 50%;
            transform: translateX(-50%);
        }

        /* Security Highlights */
        .security-badge {
            background-color: #32CD32;
            color: #FFFFFF;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            display: inline-block;
            margin-top: 10px;
            animation: securityPulse 2s ease-in-out infinite;
        }

        @keyframes securityPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        .security-highlight {
            background-color: #F0FFF0;
            border-left: 4px solid #32CD32;
            padding: 12px;
            margin-top: 10px;
            border-radius: 5px;
        }

        .security-highlight strong {
            color: #008000;
        }

        /* Comparison Mode */
        .comparison-toggle {
            text-align: center;
            margin-bottom: 20px;
        }

        .comparison-container {
            display: none;
            background-color: #F9F9F9;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 30px;
            border: 2px solid #4169E1;
        }

        .comparison-container.visible {
            display: block;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-top: 20px;
        }

        .comparison-column {
            background-color: #FFFFFF;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .comparison-column h3 {
            color: #000080;
            margin-bottom: 15px;
            text-align: center;
            padding-bottom: 10px;
            border-bottom: 2px solid #E0E0E0;
        }

        .comparison-column.traditional {
            border: 2px solid #DC143C;
        }

        .comparison-column.sso {
            border: 2px solid #32CD32;
        }

        .comparison-item {
            margin-bottom: 15px;
            padding-left: 25px;
            position: relative;
        }

        .comparison-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 5px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }

        .comparison-column.traditional .comparison-item::before {
            background-color: #DC143C;
            content: '‚úó';
            color: #FFFFFF;
            text-align: center;
            font-size: 10px;
            line-height: 16px;
        }

        .comparison-column.sso .comparison-item::before {
            background-color: #32CD32;
            content: '‚úì';
            color: #FFFFFF;
            text-align: center;
            font-size: 10px;
            line-height: 16px;
        }

        /* Glossary Panel */
        .glossary-container {
            background-color: #F0F8FF;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
            border: 2px solid #4169E1;
        }

        .glossary-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            padding: 10px;
            background-color: #4169E1;
            color: #FFFFFF;
            border-radius: 5px;
            margin-bottom: 15px;
        }

        .glossary-header:hover {
            background-color: #000080;
        }

        .glossary-header h3 {
            margin: 0;
            font-size: 1.2em;
        }

        .glossary-toggle {
            font-size: 24px;
            transition: transform 0.3s ease;
        }

        .glossary-toggle.open {
            transform: rotate(180deg);
        }

        .glossary-content {
            display: none;
            max-height: 400px;
            overflow-y: auto;
        }

        .glossary-content.visible {
            display: block;
        }

        .glossary-term {
            background-color: #FFFFFF;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 5px;
            border-left: 4px solid #4169E1;
        }

        .glossary-term dt {
            font-weight: bold;
            color: #000080;
            font-size: 16px;
            margin-bottom: 5px;
        }

        .glossary-term dd {
            margin: 0;
            color: #333333;
            line-height: 1.6;
        }

        /* Responsive Design */
        @media (max-width: 968px) {
            .split-view-container {
                grid-template-columns: 1fr;
                gap: 20px;
            }

            .visualization {
                min-height: 450px;
                height: 450px;
            }

            .description-panel {
                order: 2;
            }
        }

        @media (max-width: 768px) {
            .visualization {
                min-height: 500px;
                height: 500px;
                padding: 20px;
            }

            .entity {
                width: 120px;
                max-width: 120px;
                padding: 12px;
                font-size: 12px;
            }

            .entity-icon {
                font-size: 36px;
            }

            .entity-label {
                font-size: 13px;
            }

            .entity-tooltip {
                min-width: 200px;
                font-size: 13px;
            }

            #user {
                left: 15px;
                top: 20px;
            }

            #trello {
                right: 15px;
                top: 20px;
            }

            #google {
                left: 50%;
                top: 50%;
                transform: translate(-50%, -50%);
            }

            #auth-server {
                left: 15px;
                bottom: 20px;
            }

            h1 {
                font-size: 1.5em;
            }

            .controls {
                flex-direction: column;
            }

            .btn {
                width: 100%;
            }

            .comparison-grid {
                grid-template-columns: 1fr;
            }

            .glossary-content {
                max-height: 300px;
            }

            .step-description h2 {
                font-size: 1.2em;
            }

            .step-description p {
                font-size: 1em;
            }
        }

        /* Skip Link for Accessibility */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #000080;
            color: #FFFFFF;
            padding: 8px;
            text-decoration: none;
            border-radius: 0 0 5px 0;
        }

        .skip-link:focus {
            top: 0;
        }

        /* Screen Reader Only Content */
        .sr-only {
            position: absolute;
            left: -10000px;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }

        /* Legend */
        .legend {
            background-color: #F0F8FF;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            border: 1px solid #B0C4DE;
        }

        .legend h3 {
            color: #000080;
            margin-bottom: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }

        .legend-color {
            width: 30px;
            height: 20px;
            margin-right: 10px;
            border-radius: 3px;
            border: 1px solid #333333;
        }
    </style>
</head>
<body>
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <div class="container">
        <header>
            <h1>How Single Sign-On (SSO) Works</h1>
            <p class="subtitle">An Interactive Educational Tutorial</p>
            <div class="keyboard-hint">
                <strong>üí° Keyboard Shortcuts:</strong> Use 
                <span class="keyboard-key">‚Üê</span> and 
                <span class="keyboard-key">‚Üí</span> arrow keys to navigate between steps | 
                <span class="keyboard-key">Space</span> to play/pause | 
                <span class="keyboard-key">R</span> to reset
            </div>
        </header>

        <main id="main-content">
            <!-- Controls -->
            <nav class="controls" role="navigation" aria-label="Tutorial controls">
                <button id="prevBtn" class="btn btn-prev" aria-label="Previous step - Left arrow key">
                    ‚Üê Previous
                </button>
                <button id="playPauseBtn" class="btn" aria-label="Play or pause animation - Space bar">
                    ‚ñ∂ Play
                </button>
                <button id="nextBtn" class="btn btn-next" aria-label="Next step - Right arrow key">
                    Next ‚Üí
                </button>
                <button id="resetBtn" class="btn btn-reset" aria-label="Reset tutorial - R key">
                    ‚Ü∫ Reset
                </button>
            </nav>
            <p class="controls-hint">Tip: Use arrow keys ‚Üê ‚Üí to navigate between steps</p>

            <!-- Comparison Mode Toggle -->
            <div class="comparison-toggle">
                <button id="comparisonBtn" class="btn" aria-label="Toggle comparison view" aria-expanded="false">
                    üìä Compare Traditional vs SSO
                </button>
            </div>

            <!-- Comparison Container -->
            <div id="comparisonContainer" class="comparison-container" role="region" aria-label="Login method comparison">
                <h2 style="text-align: center; color: #000080; margin-bottom: 10px;">Traditional Login vs Single Sign-On</h2>
                <p style="text-align: center; color: #666666; margin-bottom: 20px;">Understanding the key differences between authentication methods</p>
                
                <div class="comparison-grid">
                    <div class="comparison-column traditional">
                        <h3>üîí Traditional Login</h3>
                        <div class="comparison-item">
                            <strong>Separate passwords</strong> for each application
                        </div>
                        <div class="comparison-item">
                            <strong>Password fatigue</strong> - users must remember many credentials
                        </div>
                        <div class="comparison-item">
                            <strong>Security risk</strong> - users often reuse weak passwords
                        </div>
                        <div class="comparison-item">
                            <strong>Each app stores</strong> sensitive password data
                        </div>
                        <div class="comparison-item">
                            <strong>Slower access</strong> - multiple login processes
                        </div>
                        <div class="comparison-item">
                            <strong>Password resets</strong> required for each service
                        </div>
                        <div class="comparison-item">
                            <strong>IT overhead</strong> - managing multiple systems
                        </div>
                    </div>

                    <div class="comparison-column sso">
                        <h3>üîê Single Sign-On</h3>
                        <div class="comparison-item">
                            <strong>One password</strong> for multiple applications
                        </div>
                        <div class="comparison-item">
                            <strong>Better user experience</strong> - sign in once, access all
                        </div>
                        <div class="comparison-item">
                            <strong>Enhanced security</strong> - centralized authentication
                        </div>
                        <div class="comparison-item">
                            <strong>Apps never see</strong> your password
                        </div>
                        <div class="comparison-item">
                            <strong>Faster access</strong> - seamless authentication
                        </div>
                        <div class="comparison-item">
                            <strong>Single password reset</strong> updates all services
                        </div>
                        <div class="comparison-item">
                            <strong>Easier IT management</strong> - centralized control
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container">
                <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" aria-label="Tutorial progress">
                    <div class="progress-fill" id="progressFill">
                        <span id="progressText">Step 0/10</span>
                    </div>
                </div>
            </div>

            <!-- Split View Container -->
            <div class="split-view-container">
                <!-- Left Side: Visualization -->
                <div class="visualization-panel">
                    <!-- Visualization Area -->
                    <div class="visualization" role="img" aria-label="SSO process visualization">
                <!-- SVG for Connection Lines -->
                <svg class="connections-svg" aria-hidden="true">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" class="arrow-marker">
                            <polygon points="0 0, 10 3, 0 6" />
                        </marker>
                    </defs>
                    <!-- Connection lines will be dynamically created -->
                    <line id="line-user-trello" class="connection-line" marker-end="url(#arrowhead)" />
                    <line id="line-trello-google" class="connection-line" marker-end="url(#arrowhead)" />
                    <line id="line-user-google" class="connection-line" marker-end="url(#arrowhead)" />
                    <line id="line-google-auth" class="connection-line" marker-end="url(#arrowhead)" />
                    <line id="line-auth-google" class="connection-line" marker-end="url(#arrowhead)" />
                    <line id="line-google-trello" class="connection-line" marker-end="url(#arrowhead)" />
                    <line id="line-trello-auth" class="connection-line" marker-end="url(#arrowhead)" />
                    <line id="line-auth-trello" class="connection-line" marker-end="url(#arrowhead)" />
                    <line id="line-trello-user" class="connection-line" marker-end="url(#arrowhead)" />
                </svg>

                <!-- Entities -->
                <div id="user" class="entity" role="button" aria-label="User entity - click for more information" tabindex="0">
                    <div class="entity-icon" aria-hidden="true">üë§</div>
                    <div class="entity-label">User</div>
                    <div class="click-hint">Click to learn more</div>
                    <div class="entity-tooltip" role="tooltip">
                        <button class="tooltip-close" aria-label="Close tooltip">√ó</button>
                        <h4>User (End User)</h4>
                        <p>The person who wants to access multiple applications using a single set of credentials. In SSO, the user benefits from convenience and improved security without managing multiple passwords.</p>
                    </div>
                </div>

                <div id="trello" class="entity" role="button" aria-label="Trello application - click for more information" tabindex="0">
                    <div class="entity-icon" aria-hidden="true">üåê</div>
                    <div class="entity-label">Trello</div>
                    <div class="click-hint">Click to learn more</div>
                    <div class="entity-tooltip" role="tooltip">
                        <button class="tooltip-close" aria-label="Close tooltip">√ó</button>
                        <h4>Service Provider (SP)</h4>
                        <p>Trello is the application the user wants to access. It's called a "Service Provider" because it relies on the Identity Provider (Google) to authenticate users. The SP never handles passwords directly, improving security.</p>
                    </div>
                </div>

                <div id="google" class="entity" role="button" aria-label="Google identity provider - click for more information" tabindex="0">
                    <div class="entity-icon" aria-hidden="true">üîê</div>
                    <div class="entity-label">Google SSO</div>
                    <div class="click-hint">Click to learn more</div>
                    <div class="entity-tooltip" role="tooltip">
                        <button class="tooltip-close" aria-label="Close tooltip">√ó</button>
                        <h4>Identity Provider (IdP)</h4>
                        <p>Google acts as the Identity Provider - the trusted authority that authenticates users. The IdP manages user credentials and issues secure tokens that prove identity without sharing passwords with third-party applications.</p>
                    </div>
                </div>

                <div id="auth-server" class="entity" role="button" aria-label="Authentication server - click for more information" tabindex="0">
                    <div class="entity-icon" aria-hidden="true">üñ•Ô∏è</div>
                    <div class="entity-label">Auth Server</div>
                    <div class="click-hint">Click to learn more</div>
                    <div class="entity-tooltip" role="tooltip">
                        <button class="tooltip-close" aria-label="Close tooltip">√ó</button>
                        <h4>Authentication Server</h4>
                        <p>The backend server that validates credentials and generates secure authentication tokens (like SAML assertions). It uses encryption and digital signatures to ensure tokens can't be tampered with or forged.</p>
                    </div>
                </div>

                <!-- Message Token (will be moved dynamically) -->
                <div id="messageToken" class="message-token" aria-live="polite" aria-atomic="true"></div>
            </div>
            </div>

            <!-- Right Side: Step Description -->
            <div class="description-panel">
                <section class="step-description" aria-live="polite" aria-atomic="true">
                    <h2 id="stepTitle">Welcome to SSO Tutorial</h2>
                    <p id="stepDescription">Click "Play" or "Next" to begin learning how Single Sign-On works. This interactive tutorial will guide you through each step of the authentication process.</p>
                </section>
            </div>
            </div>
            <!-- End Split View Container -->

            <!-- Legend -->
            <aside class="legend" aria-label="Color legend">
                <h3>Legend</h3>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #FFD700;"></div>
                    <span>Active Element / Token</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #FFA500;"></div>
                    <span>Data Flow / Connection</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #000080;"></div>
                    <span>System Components</span>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background-color: #32CD32;"></div>
                    <span>Security Features</span>
                </div>
            </aside>

            <!-- Glossary Panel -->
            <aside class="glossary-container" aria-label="Technical glossary">
                <div class="glossary-header" id="glossaryHeader" role="button" tabindex="0" aria-expanded="false" aria-controls="glossaryContent">
                    <h3>üìö Technical Glossary</h3>
                    <span class="glossary-toggle" aria-hidden="true">‚ñº</span>
                </div>
                <div id="glossaryContent" class="glossary-content">
                    <dl>
                        <div class="glossary-term">
                            <dt>Single Sign-On (SSO)</dt>
                            <dd>An authentication method that allows users to access multiple applications with one set of login credentials. Users authenticate once with an Identity Provider and gain access to all connected services without re-entering passwords.</dd>
                        </div>
                        
                        <div class="glossary-term">
                            <dt>Identity Provider (IdP)</dt>
                            <dd>A trusted service (like Google, Microsoft, or Okta) that authenticates users and provides identity information to other applications. The IdP manages user credentials and issues secure authentication tokens.</dd>
                        </div>
                        
                        <div class="glossary-term">
                            <dt>Service Provider (SP)</dt>
                            <dd>An application or service (like Trello, Slack, or Salesforce) that relies on an Identity Provider for user authentication. The SP trusts the IdP to verify user identities and never handles passwords directly.</dd>
                        </div>
                        
                        <div class="glossary-term">
                            <dt>SAML (Security Assertion Markup Language)</dt>
                            <dd>An XML-based standard for exchanging authentication and authorization data between an Identity Provider and Service Provider. SAML tokens contain digitally signed assertions about a user's identity and attributes.</dd>
                        </div>
                        
                        <div class="glossary-term">
                            <dt>Authentication Token</dt>
                            <dd>A secure, digitally signed piece of data that proves a user's identity. Tokens have limited lifespans and contain encrypted information that applications can verify without accessing the original password.</dd>
                        </div>
                        
                        <div class="glossary-term">
                            <dt>OAuth 2.0</dt>
                            <dd>A modern authorization framework that allows applications to access user data without exposing passwords. While often used alongside SSO, OAuth specifically handles authorization (what you can do) rather than authentication (who you are).</dd>
                        </div>
                        
                        <div class="glossary-term">
                            <dt>Digital Signature</dt>
                            <dd>A cryptographic technique used to verify that a token or message hasn't been tampered with and truly comes from the claimed source. Digital signatures are essential for SSO security.</dd>
                        </div>
                        
                        <div class="glossary-term">
                            <dt>Redirect</dt>
                            <dd>The process where a Service Provider automatically sends users to the Identity Provider's login page. After successful authentication, users are redirected back to the original application with a valid token.</dd>
                        </div>
                        
                        <div class="glossary-term">
                            <dt>Session</dt>
                            <dd>The period during which a user remains authenticated. SSO sessions allow users to access multiple applications without repeated logins, typically lasting hours until explicit logout or timeout.</dd>
                        </div>
                        
                        <div class="glossary-term">
                            <dt>Multi-Factor Authentication (MFA)</dt>
                            <dd>An additional security layer requiring users to provide two or more verification factors (like password + SMS code). MFA significantly enhances SSO security by preventing unauthorized access even if passwords are compromised.</dd>
                        </div>
                    </dl>
                </div>
            </aside>

            <!-- Accessibility Announcement Region -->
            <div id="announcements" class="sr-only" role="status" aria-live="polite" aria-atomic="true"></div>
        </main>
    </div>

    <script>
        // SSO Tutorial Steps Data
        const steps = [
            {
                title: "Welcome to SSO Tutorial",
                description: "Click 'Play' or 'Next' to begin learning how Single Sign-On works. This interactive tutorial will guide you through each step of the authentication process.",
                activeEntities: [],
                connections: [],
                token: null,
                security: null
            },
            {
                title: "Step 1: User Wants to Login",
                description: "The user wants to access Trello using their Google account. Instead of creating a new account and password for Trello, they choose to login with their existing Google credentials. This is the starting point of the Single Sign-On process.",
                activeEntities: ['user', 'trello'],
                connections: ['user-trello'],
                token: { text: "Login Request", from: 'user', to: 'trello', path: 'user-trello' },
                security: null
            },
            {
                title: "Step 2: Trello Redirects to Google",
                description: "Trello recognizes the SSO request and redirects the user to Google's authentication service. Trello trusts Google as an identity provider and doesn't need to handle passwords directly. This improves security and user experience.",
                activeEntities: ['trello', 'google'],
                connections: ['trello-google'],
                token: { text: "Redirect", from: 'trello', to: 'google', path: 'trello-google' },
                security: "üîí Security Benefit: Trello never sees or stores your password, reducing the risk of password breaches."
            },
            {
                title: "Step 3: Google SSO Login Page",
                description: "The user is now presented with Google's official login page. This is a familiar, trusted interface where users enter their credentials. Google handles all the authentication securely on their own servers.",
                activeEntities: ['user', 'google'],
                connections: ['user-google'],
                token: null,
                security: null
            },
            {
                title: "Step 4: User Enters Login Credentials",
                description: "The user enters their Google username and password. Note that Trello never sees these credentials - only Google handles this sensitive information. This is a key security benefit of SSO.",
                activeEntities: ['user', 'google'],
                connections: ['user-google'],
                token: { text: "Credentials", from: 'user', to: 'google', path: 'user-google' },
                security: "üîí Security Benefit: Your password is only shared with Google, not with every service you use. This minimizes exposure and password reuse risks."
            },
            {
                title: "Step 5: Request Authentication",
                description: "Google receives the credentials and forwards the authentication request to its authentication server. This server will verify the user's identity by checking the credentials against its secure database.",
                activeEntities: ['google', 'auth-server'],
                connections: ['google-auth'],
                token: { text: "Auth Request", from: 'google', to: 'auth-server', path: 'google-auth' },
                security: null
            },
            {
                title: "Step 6: Receive Token",
                description: "The authentication server validates the credentials. If they're correct, it generates a secure token (often in SAML format) that proves the user's identity. This token is digitally signed to prevent tampering.",
                activeEntities: ['auth-server', 'google'],
                connections: ['auth-google'],
                token: { text: "Auth Token", from: 'auth-server', to: 'google', path: 'auth-google' },
                security: "üîí Security Benefit: The token is digitally signed and encrypted, making it impossible to forge or tamper with. It also expires after a set time period."
            },
            {
                title: "Step 7: Receive Auth Token (SAML)",
                description: "Google receives the authentication token from the auth server. This token contains encrypted information about the user's identity and is valid for a limited time. SAML (Security Assertion Markup Language) is a standard protocol for exchanging authentication data.<br><br><strong>Sample SAML Token:</strong><pre style='background-color: #f4f4f4; padding: 15px; border-radius: 5px; overflow-x: auto; font-size: 12px; line-height: 1.4;'>&lt;saml:Assertion xmlns:saml=\"urn:oasis:names:tc:SAML:2.0:assertion\"\n    ID=\"_abc123def456\" Version=\"2.0\"\n    IssueInstant=\"2025-11-12T12:00:00Z\"&gt;\n  &lt;saml:Issuer&gt;https://accounts.google.com&lt;/saml:Issuer&gt;\n  &lt;ds:Signature xmlns:ds=\"http://www.w3.org/2000/09/xmldsig#\"&gt;\n    &lt;!-- Digital signature for verification --&gt;\n  &lt;/ds:Signature&gt;\n  &lt;saml:Subject&gt;\n    &lt;saml:NameID Format=\"email\"&gt;user@example.com&lt;/saml:NameID&gt;\n    &lt;saml:SubjectConfirmation Method=\"bearer\"&gt;\n      &lt;saml:SubjectConfirmationData\n        NotOnOrAfter=\"2025-11-12T12:05:00Z\"\n        Recipient=\"https://trello.com/auth/saml\"/&gt;\n    &lt;/saml:SubjectConfirmation&gt;\n  &lt;/saml:Subject&gt;\n  &lt;saml:Conditions\n    NotBefore=\"2025-11-12T11:59:00Z\"\n    NotOnOrAfter=\"2025-11-12T12:05:00Z\"&gt;\n    &lt;saml:AudienceRestriction&gt;\n      &lt;saml:Audience&gt;https://trello.com&lt;/saml:Audience&gt;\n    &lt;/saml:AudienceRestriction&gt;\n  &lt;/saml:Conditions&gt;\n  &lt;saml:AuthnStatement\n    AuthnInstant=\"2025-11-12T12:00:00Z\"\n    SessionIndex=\"_session789\"&gt;\n    &lt;saml:AuthnContext&gt;\n      &lt;saml:AuthnContextClassRef&gt;\n        urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport\n      &lt;/saml:AuthnContextClassRef&gt;\n    &lt;/saml:AuthnContext&gt;\n  &lt;/saml:AuthnStatement&gt;\n  &lt;saml:AttributeStatement&gt;\n    &lt;saml:Attribute Name=\"email\"&gt;\n      &lt;saml:AttributeValue&gt;user@example.com&lt;/saml:AttributeValue&gt;\n    &lt;/saml:Attribute&gt;\n    &lt;saml:Attribute Name=\"firstName\"&gt;\n      &lt;saml:AttributeValue&gt;John&lt;/saml:AttributeValue&gt;\n    &lt;/saml:Attribute&gt;\n  &lt;/saml:AttributeStatement&gt;\n&lt;/saml:Assertion&gt;</pre><br><strong>Key Components:</strong><ul style='margin-top: 10px; padding-left: 20px;'><li><strong>Issuer:</strong> Google (the Identity Provider)</li><li><strong>Digital Signature:</strong> Proves authenticity and prevents tampering</li><li><strong>Subject:</strong> User's identity (user@example.com)</li><li><strong>Conditions:</strong> Time validity window (5 minutes)</li><li><strong>Audience:</strong> Intended recipient (Trello)</li><li><strong>Attributes:</strong> User information (email, name)</li></ul>",
                activeEntities: ['google', 'trello'],
                connections: ['google-trello'],
                token: { text: "SAML Token", from: 'google', to: 'trello', path: 'google-trello' },
                security: null
            },
            {
                title: "Step 8: Validate Token",
                description: "Trello receives the SAML token from Google and validates it. This involves checking the digital signature to ensure it really came from Google and hasn't been tampered with. Trello verifies the token's authenticity without needing to know the user's password.",
                activeEntities: ['trello', 'auth-server'],
                connections: ['trello-auth'],
                token: { text: "Validate", from: 'trello', to: 'auth-server', path: 'trello-auth' },
                security: "üîí Security Benefit: Digital signatures ensure that tokens cannot be intercepted and reused by attackers. Each token is unique and time-limited."
            },
            {
                title: "Step 9: Token is Valid",
                description: "The authentication server confirms that the token is valid and genuine. This verification proves that the user successfully authenticated with Google. The server sends a confirmation back to Trello.",
                activeEntities: ['auth-server', 'trello'],
                connections: ['auth-trello'],
                token: { text: "Valid ‚úì", from: 'auth-server', to: 'trello', path: 'auth-trello' },
                security: null
            },
            {
                title: "Step 10: Allow Access",
                description: "Success! Trello grants the user access to their account. The user is now logged in without ever having to create or remember a separate password for Trello. This entire process typically takes just a few seconds and provides a seamless, secure experience.",
                activeEntities: ['trello', 'user'],
                connections: ['trello-user'],
                token: { text: "Access Granted ‚úì", from: 'trello', to: 'user', path: 'trello-user' },
                security: "üîí Security Benefit: One strong password for multiple services is far more secure than many weak passwords. IT teams can also quickly revoke access across all services if needed."
            }
        ];

        // State Management
        let currentStep = 0;
        let isPlaying = false;
        let playInterval = null;

        // DOM Elements
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const resetBtn = document.getElementById('resetBtn');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        const stepTitle = document.getElementById('stepTitle');
        const stepDescription = document.getElementById('stepDescription');
        const messageToken = document.getElementById('messageToken');
        const announcements = document.getElementById('announcements');
        const comparisonBtn = document.getElementById('comparisonBtn');
        const comparisonContainer = document.getElementById('comparisonContainer');
        const glossaryHeader = document.getElementById('glossaryHeader');
        const glossaryContent = document.getElementById('glossaryContent');

        // Entity Elements
        const entities = {
            user: document.getElementById('user'),
            trello: document.getElementById('trello'),
            google: document.getElementById('google'),
            'auth-server': document.getElementById('auth-server')
        };

        // Connection line elements
        const connectionLines = {
            'user-trello': document.getElementById('line-user-trello'),
            'trello-google': document.getElementById('line-trello-google'),
            'user-google': document.getElementById('line-user-google'),
            'google-auth': document.getElementById('line-google-auth'),
            'auth-google': document.getElementById('line-auth-google'),
            'google-trello': document.getElementById('line-google-trello'),
            'trello-auth': document.getElementById('line-trello-auth'),
            'auth-trello': document.getElementById('line-auth-trello'),
            'trello-user': document.getElementById('line-trello-user')
        };

        // Initialize
        function init() {
            updateDisplay();
            setupEventListeners();
            setupTooltips();
            updateConnectionLines();
            announceToScreenReader("SSO Tutorial initialized. Ready to begin.");
        }

        // Event Listeners
        function setupEventListeners() {
            prevBtn.addEventListener('click', previousStep);
            nextBtn.addEventListener('click', nextStep);
            playPauseBtn.addEventListener('click', togglePlayPause);
            resetBtn.addEventListener('click', reset);
            comparisonBtn.addEventListener('click', toggleComparison);
            glossaryHeader.addEventListener('click', toggleGlossary);

            // Keyboard navigation
            document.addEventListener('keydown', handleKeyPress);

            // Glossary keyboard support
            glossaryHeader.addEventListener('keypress', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    toggleGlossary();
                }
            });
        }

        // Setup tooltips for entities
        function setupTooltips() {
            Object.keys(entities).forEach(key => {
                const entity = entities[key];
                const tooltip = entity.querySelector('.entity-tooltip');
                const closeBtn = tooltip.querySelector('.tooltip-close');

                // Click to show tooltip
                entity.addEventListener('click', (e) => {
                    e.stopPropagation();
                    // Close all other tooltips
                    document.querySelectorAll('.entity-tooltip').forEach(t => {
                        if (t !== tooltip) t.classList.remove('visible');
                    });
                    tooltip.classList.toggle('visible');
                });

                // Keyboard support for entities
                entity.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        document.querySelectorAll('.entity-tooltip').forEach(t => {
                            if (t !== tooltip) t.classList.remove('visible');
                        });
                        tooltip.classList.toggle('visible');
                    }
                });

                // Close button
                closeBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    tooltip.classList.remove('visible');
                });
            });

            // Close tooltips when clicking outside
            document.addEventListener('click', () => {
                document.querySelectorAll('.entity-tooltip').forEach(t => {
                    t.classList.remove('visible');
                });
            });
        }

        function handleKeyPress(e) {
            switch(e.key) {
                case 'ArrowLeft':
                    if (!prevBtn.disabled) previousStep();
                    break;
                case 'ArrowRight':
                    if (!nextBtn.disabled) nextStep();
                    break;
                case ' ':
                    e.preventDefault();
                    togglePlayPause();
                    break;
                case 'r':
                case 'R':
                    reset();
                    break;
            }
        }

        // Toggle Comparison Mode
        function toggleComparison() {
            const isVisible = comparisonContainer.classList.toggle('visible');
            comparisonBtn.setAttribute('aria-expanded', isVisible);
            if (isVisible) {
                comparisonBtn.textContent = '‚úï Hide Comparison';
                announceToScreenReader("Comparison view opened");
            } else {
                comparisonBtn.textContent = 'üìä Compare Traditional vs SSO';
                announceToScreenReader("Comparison view closed");
            }
        }

        // Toggle Glossary
        function toggleGlossary() {
            const isVisible = glossaryContent.classList.toggle('visible');
            const toggle = glossaryHeader.querySelector('.glossary-toggle');
            toggle.classList.toggle('open');
            glossaryHeader.setAttribute('aria-expanded', isVisible);
            if (isVisible) {
                announceToScreenReader("Glossary expanded");
            } else {
                announceToScreenReader("Glossary collapsed");
            }
        }

        // Navigation Functions
        function nextStep() {
            if (currentStep < steps.length - 1) {
                currentStep++;
                updateDisplay();
                announceToScreenReader(`Moved to ${steps[currentStep].title}`);
            }
        }

        function previousStep() {
            if (currentStep > 0) {
                currentStep--;
                updateDisplay();
                announceToScreenReader(`Moved to ${steps[currentStep].title}`);
            }
        }

        function togglePlayPause() {
            isPlaying = !isPlaying;
            
            if (isPlaying) {
                playPauseBtn.textContent = '‚è∏ Pause';
                playPauseBtn.setAttribute('aria-label', 'Pause animation');
                startAutoPlay();
                announceToScreenReader("Animation playing");
            } else {
                playPauseBtn.textContent = '‚ñ∂ Play';
                playPauseBtn.setAttribute('aria-label', 'Play animation');
                stopAutoPlay();
                announceToScreenReader("Animation paused");
            }
        }

        function startAutoPlay() {
            playInterval = setInterval(() => {
                if (currentStep < steps.length - 1) {
                    nextStep();
                } else {
                    stopAutoPlay();
                    isPlaying = false;
                    playPauseBtn.textContent = '‚ñ∂ Play';
                    playPauseBtn.setAttribute('aria-label', 'Play animation');
                    announceToScreenReader("Animation completed");
                }
            }, 3000); // 3 seconds per step
        }

        function stopAutoPlay() {
            if (playInterval) {
                clearInterval(playInterval);
                playInterval = null;
            }
        }

        function reset() {
            stopAutoPlay();
            isPlaying = false;
            currentStep = 0;
            playPauseBtn.textContent = '‚ñ∂ Play';
            playPauseBtn.setAttribute('aria-label', 'Play animation');
            updateDisplay();
            announceToScreenReader("Tutorial reset to beginning");
        }

        // Display Update Functions
        function updateDisplay() {
            const step = steps[currentStep];
            
            // Update progress
            const progress = (currentStep / (steps.length - 1)) * 100;
            progressFill.style.width = progress + '%';
            progressText.textContent = `Step ${currentStep}/${steps.length - 1}`;
            progressFill.parentElement.setAttribute('aria-valuenow', progress);
            
            // Update step info
            stepTitle.textContent = step.title;
            
            // Build description with security highlight if present
            let descriptionHTML = `<p>${step.description}</p>`;
            if (step.security) {
                descriptionHTML += `<div class="security-highlight"><strong>Security Insight:</strong> ${step.security}</div>`;
            }
            stepDescription.innerHTML = descriptionHTML;
            
            // Update button states
            prevBtn.disabled = currentStep === 0;
            nextBtn.disabled = currentStep === steps.length - 1;
            
            // Update active entities
            Object.keys(entities).forEach(key => {
                if (step.activeEntities.includes(key)) {
                    entities[key].classList.add('active');
                } else {
                    entities[key].classList.remove('active');
                }
            });
            
            // Update connection lines
            updateConnectionLines();
            Object.keys(connectionLines).forEach(key => {
                if (step.connections.includes(key)) {
                    connectionLines[key].classList.add('active');
                } else {
                    connectionLines[key].classList.remove('active');
                }
            });
            
            // Update token display with animation
            if (step.token) {
                animateToken(step.token);
            } else {
                messageToken.classList.remove('visible');
                messageToken.textContent = '';
            }
        }

        // Update SVG connection line positions
        function updateConnectionLines() {
            const visualizationRect = document.querySelector('.visualization').getBoundingClientRect();
            
            Object.keys(connectionLines).forEach(connectionKey => {
                const [from, to] = connectionKey.split('-');
                const fromEntity = entities[from];
                const toEntity = entities[to];
                
                if (fromEntity && toEntity) {
                    const fromRect = fromEntity.getBoundingClientRect();
                    const toRect = toEntity.getBoundingClientRect();
                    
                    const fromX = fromRect.left + fromRect.width / 2 - visualizationRect.left;
                    const fromY = fromRect.top + fromRect.height / 2 - visualizationRect.top;
                    const toX = toRect.left + toRect.width / 2 - visualizationRect.left;
                    const toY = toRect.top + toRect.height / 2 - visualizationRect.top;
                    
                    const line = connectionLines[connectionKey];
                    line.setAttribute('x1', fromX);
                    line.setAttribute('y1', fromY);
                    line.setAttribute('x2', toX);
                    line.setAttribute('y2', toY);
                }
            });
        }

        // Animate token along connection path
        function animateToken(tokenData) {
            messageToken.textContent = tokenData.text;
            messageToken.classList.remove('visible');
            
            const fromEntity = entities[tokenData.from];
            const toEntity = entities[tokenData.to];
            
            if (fromEntity && toEntity) {
                const containerRect = fromEntity.parentElement.getBoundingClientRect();
                
                const fromRect = fromEntity.getBoundingClientRect();
                const toRect = toEntity.getBoundingClientRect();
                
                const fromX = fromRect.left + fromRect.width / 2 - containerRect.left;
                const fromY = fromRect.top + fromRect.height / 2 - containerRect.top;
                const toX = toRect.left + toRect.width / 2 - containerRect.left;
                const toY = toRect.top + toRect.height / 2 - containerRect.top;
                
                // Start at 'from' position
                messageToken.style.left = fromX + 'px';
                messageToken.style.top = fromY + 'px';
                messageToken.style.transform = 'translate(-50%, -50%)';
                messageToken.classList.add('visible');
                
                // Animate to 'to' position
                setTimeout(() => {
                    messageToken.style.left = toX + 'px';
                    messageToken.style.top = toY + 'px';
                }, 100);
            }
        }

        function announceToScreenReader(message) {
            announcements.textContent = message;
            // Clear after announcement
            setTimeout(() => {
                announcements.textContent = '';
            }, 1000);
        }

        // Initialize on load
        window.addEventListener('DOMContentLoaded', init);

        // Handle window resize for responsive positioning
        window.addEventListener('resize', () => {
            updateConnectionLines();
            if (steps[currentStep].token) {
                animateToken(steps[currentStep].token);
            }
        });
    </script>
</body>
</html>
