<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Occupational Impact Explorer - 2025 Edition</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        h1, h2, h3 {
            font-weight: 700;
            letter-spacing: -0.02em;
        }

        h1 {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 10px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            font-weight: 700;
        }

        .header p {
            color: #7f8c8d;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            max-width: 900px;
            margin: 0 auto;
        }

        .update-badge {
            display: inline-block;
            background: linear-gradient(135deg, #2ecc71, #27ae60);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            margin-top: 10px;
            box-shadow: 0 4px 15px rgba(46, 204, 113, 0.3);
        }

        .key-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
            position: relative;
        }

        .top-action-buttons {
            position: absolute;
            top: -10px;
            right: 0;
            display: flex;
            gap: 10px;
            z-index: 10;
        }

        .help-button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }

        .help-button:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(52, 152, 219, 0.4);
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.98), rgba(248, 250, 252, 0.95));
            padding: 25px;
            border-radius: 16px;
            text-align: center;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1), 0 2px 6px rgba(0, 0, 0, 0.05);
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3498db, #2ecc71, #f39c12, #e74c3c);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15), 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-card:hover::before {
            opacity: 1;
        }

        .stat-number {
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            font-weight: bold;
            color: #3498db;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #7f8c8d;
            font-size: clamp(0.7rem, 2vw, 0.9rem);
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .insights {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .insight-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .insight-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .insight-card h3 {
            font-size: clamp(1rem, 3vw, 1.3rem);
            margin-bottom: 10px;
        }

        .insight-card p {
            font-size: clamp(0.8rem, 2vw, 0.95rem);
        }

        .charts-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 25px;
            margin-top: 20px;
        }

        .chart-container {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
            height: 400px;
        }

        .chart-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            text-align: center;
        }

        .controls {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: relative;
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px) scale(0.9);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
        }

        .modal-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: #2c3e50;
            margin: 0;
        }

        .close-modal {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: #e74c3c;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .close-modal:hover {
            background: #c0392b;
            transform: scale(1.1);
        }

        .metric-explanation {
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 12px;
            border-left: 5px solid #3498db;
        }

        .metric-name {
            font-size: 1.2rem;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .metric-description {
            color: #555;
            line-height: 1.6;
            margin-bottom: 8px;
        }

        .metric-range {
            font-size: 0.9rem;
            color: #7f8c8d;
            font-style: italic;
        }

        .tooltip {
            position: relative;
            cursor: help;
        }

        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.8rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
            z-index: 100;
        }

        .tooltip:hover::after {
            opacity: 1;
        }

        .controls-row {
            display: flex;
            gap: 15px;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }

        .search-input, .filter-select {
            padding: 12px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            min-width: 180px;
            flex: 1;
            transition: border-color 0.3s ease;
        }

        .search-input:focus, .filter-select:focus {
            outline: none;
            border-color: #3498db;
        }

        .view-toggle {
            display: flex;
            background: #f8f9fa;
            border-radius: 8px;
            overflow: hidden;
        }

        .view-toggle button {
            padding: 12px 18px;
            border: none;
            background: transparent;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-size: 14px;
        }

        .view-toggle button.active {
            background: #3498db;
            color: white;
        }

        .comparison-panel {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .comparison-controls {
            display: flex;
            gap: 15px;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .comparison-select {
            padding: 10px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            min-width: 200px;
            flex: 1;
        }

        .add-comparison-btn, .clear-comparison-btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s ease;
        }

        .add-comparison-btn {
            background: #27ae60;
            color: white;
        }

        .add-comparison-btn:hover {
            background: #219a52;
        }

        .clear-comparison-btn {
            background: #e74c3c;
            color: white;
        }

        .clear-comparison-btn:hover {
            background: #c0392b;
        }

        .comparison-results {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .comparison-card {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #3498db;
            position: relative;
        }

        .comparison-remove {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #e74c3c;
            color: white;
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            cursor: pointer;
            font-size: 12px;
        }

        .data-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .section-title {
            font-size: clamp(1.3rem, 3vw, 1.8rem);
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 3px solid #3498db;
        }

        .occupation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 20px;
        }

        .occupation-card {
            background: linear-gradient(135deg, #ffffff, #f8fafc);
            padding: 24px;
            border-radius: 16px;
            border-left: 5px solid #3498db;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            position: relative;
            overflow: hidden;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08), 0 1px 3px rgba(0, 0, 0, 0.05);
        }

        .occupation-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0));
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }

        .occupation-card:hover {
            transform: translateY(-6px) scale(1.01);
            box-shadow: 0 12px 35px rgba(0, 0, 0, 0.12), 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .occupation-card:hover::before {
            opacity: 1;
        }

        .occupation-card.score-excellent {
            border-left-color: #2ecc71;
            background: linear-gradient(135deg, #ffffff, #f0f9f4);
        }

        .occupation-card.score-high {
            border-left-color: #3498db;
            background: linear-gradient(135deg, #ffffff, #f0f8ff);
        }

        .occupation-card.score-medium {
            border-left-color: #f39c12;
            background: linear-gradient(135deg, #ffffff, #fefaf0);
        }

        .occupation-card.score-low {
            border-left-color: #e74c3c;
            background: linear-gradient(135deg, #ffffff, #fef7f7);
        }

        .occupation-card.score-minimal {
            border-left-color: #95a5a6;
            background: linear-gradient(135deg, #ffffff, #f8f9fa);
        }

        .occupation-title {
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 16px;
            font-size: clamp(1rem, 2vw, 1.15rem);
            line-height: 1.3;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .occupation-icon {
            font-size: 1.5rem;
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.1), rgba(52, 152, 219, 0.05));
            border: 2px solid rgba(52, 152, 219, 0.2);
            transition: all 0.3s ease;
            flex-shrink: 0;
        }

        .occupation-card:hover .occupation-icon {
            transform: scale(1.1) rotate(5deg);
            background: linear-gradient(135deg, rgba(52, 152, 219, 0.2), rgba(52, 152, 219, 0.1));
        }

        .occupation-group {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            margin-bottom: 12px;
            display: inline-block;
            box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .occupation-card:hover .occupation-group {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.4);
        }

        .occupation-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }

        .stat {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.9rem;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.6);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .stat:hover {
            background: rgba(255, 255, 255, 0.9);
            transform: scale(1.02);
        }

        .stat-name {
            color: #7f8c8d;
            font-weight: 500;
        }

        .stat-value {
            font-weight: 700;
            color: #2c3e50;
            font-size: 0.95rem;
        }

        .stat-value.positive {
            color: #27ae60;
        }

        .stat-value.negative {
            color: #e74c3c;
        }

        .score-bar {
            width: 100%;
            height: 12px;
            background: linear-gradient(90deg, #ecf0f1, #d5dbdb);
            border-radius: 8px;
            overflow: hidden;
            margin-top: 16px;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #3498db, #2ecc71);
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 6px;
            position: relative;
            overflow: hidden;
        }

        .score-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .score-excellent .score-fill {
            background: linear-gradient(90deg, #2ecc71, #27ae60);
        }

        .score-high .score-fill {
            background: linear-gradient(90deg, #3498db, #2980b9);
        }

        .score-medium .score-fill {
            background: linear-gradient(90deg, #f39c12, #e67e22);
        }

        .score-low .score-fill {
            background: linear-gradient(90deg, #e74c3c, #c0392b);
        }

        .score-minimal .score-fill {
            background: linear-gradient(90deg, #95a5a6, #7f8c8d);
        }

        .add-to-compare {
            position: absolute;
            top: 10px;
            right: 10px;
            background: #27ae60;
            color: white;
            border: none;
            border-radius: 15px;
            padding: 5px 10px;
            cursor: pointer;
            font-size: 0.7rem;
            transition: background-color 0.3s ease;
        }

        .add-to-compare:hover {
            background: #219a52;
        }

        .add-to-compare.added {
            background: #95a5a6;
            cursor: not-allowed;
        }

        .table-view {
            overflow-x: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            min-width: 800px;
        }

        .data-table th {
            background: #3498db;
            color: white;
            padding: 15px 10px;
            text-align: left;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s ease;
            font-size: 0.9rem;
        }

        .data-table th:hover {
            background: #2980b9;
        }

        .data-table td {
            padding: 12px 10px;
            border-bottom: 1px solid #ecf0f1;
            font-size: 0.85rem;
        }

        .data-table tr:hover {
            background: #f8f9fa;
        }

        .methodology {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .methodology h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: clamp(1.2rem, 3vw, 1.5rem);
        }

        .methodology h3 {
            color: #34495e;
            margin: 15px 0 10px 0;
            font-size: clamp(1rem, 2.5vw, 1.2rem);
        }

        .methodology ul {
            padding-left: 20px;
            margin-bottom: 15px;
        }

        .methodology li {
            margin-bottom: 8px;
            color: #555;
            font-size: clamp(0.85rem, 2vw, 0.95rem);
        }

        .hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .key-stats {
                grid-template-columns: repeat(2, 1fr);
                margin-bottom: 30px;
            }

            .top-action-buttons {
                position: static;
                justify-content: center;
                margin-bottom: 15px;
                flex-wrap: wrap;
                grid-column: 1 / -1;
                order: -1;
            }

            .controls-row {
                flex-direction: column;
                align-items: stretch;
            }

            .search-input, .filter-select {
                min-width: auto;
                width: 100%;
                margin-bottom: 10px;
            }

            .view-toggle {
                width: 100%;
                justify-content: center;
            }

            .view-toggle button {
                flex: 1;
                padding: 15px;
                font-size: 16px;
            }

            .occupation-grid {
                grid-template-columns: 1fr;
            }

            .occupation-stats {
                grid-template-columns: 1fr;
            }

            .occupation-title {
                flex-direction: row;
                align-items: center;
                gap: 8px;
            }

            .occupation-icon {
                width: 35px;
                height: 35px;
                font-size: 1.3rem;
            }

            .charts-grid {
                grid-template-columns: 1fr;
            }

            .chart-container {
                height: 300px;
                padding: 20px;
            }

            .comparison-controls {
                flex-direction: column;
                align-items: stretch;
            }

            .comparison-select {
                min-width: auto;
                width: 100%;
                margin-bottom: 10px;
            }

            .add-comparison-btn, .clear-comparison-btn {
                width: 100%;
                margin-bottom: 10px;
            }

            .comparison-results {
                grid-template-columns: 1fr;
            }

            .insight-grid {
                grid-template-columns: 1fr;
            }

            .key-stats {
                grid-template-columns: repeat(2, 1fr);
            }

            .data-table {
                font-size: 0.8rem;
            }

            .data-table th, .data-table td {
                padding: 8px 6px;
            }

            .stat-card {
                padding: 20px;
            }

            .occupation-card, .comparison-card {
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            .key-stats {
                grid-template-columns: 1fr;
            }

            .top-action-buttons {
                margin-bottom: 20px;
            }

            .occupation-card, .comparison-card {
                padding: 16px;
            }

            .chart-container {
                height: 250px;
                padding: 15px;
            }

            .occupation-title {
                font-size: 0.95rem;
            }

            .occupation-icon {
                width: 30px;
                height: 30px;
                font-size: 1.1rem;
            }

            .stat {
                padding: 6px 10px;
                font-size: 0.85rem;
            }

            .occupation-group {
                font-size: 0.7rem;
                padding: 4px 8px;
            }
        }

        .collapsible-header {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .collapsible-content.expanded {
            max-height: 2000px;
        }

        .expand-icon {
            transition: transform 0.3s ease;
        }

        .expand-icon.rotated {
            transform: rotate(180deg);
        }

        @media (max-width: 768px) {
            .insights, .charts-section, .methodology {
                margin-bottom: 10px;
            }

            .collapsible-content {
                padding-top: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>AI Occupational Impact Explorer</h1>
            <div class="update-badge">‚ú® 2025 Edition - 150 Occupations</div>
            <p>Comprehensive analysis of AI's impact across 150 U.S. occupations based on 2024-2025 research from Eloundou et al., Indeed GSTI, BLS projections, and Federal Reserve studies.</p>
        </div>

        <div class="key-stats">
            <div class="top-action-buttons">
                <button class="help-button" onclick="openHelpModal()" title="Learn about AI impact metrics">?</button>
            </div>
            <div class="stat-card">
                <div class="stat-number">150</div>
                <div class="stat-label">Occupations Analyzed</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">23</div>
                <div class="stat-label">Industry Categories</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">0.08-0.76</div>
                <div class="stat-label">Exposure Range</div>
            </div>
            <div class="stat-card">
                <div class="stat-number">2024-25</div>
                <div class="stat-label">Data Year</div>
            </div>
        </div>

        <div class="insights">
            <h2 class="section-title" style="border: none; margin: 0;">Key Research Insights (2025)</h2>
            <div class="insight-grid">
                <div class="insight-card">
                    <h3>Highest Exposure</h3>
                    <p>Software development (0.76), data entry (0.74), and computer programming (0.73) show maximum AI exposure</p>
                </div>
                <div class="insight-card">
                    <h3>Lowest Exposure</h3>
                    <p>Agriculture (0.09), construction (0.08-0.14), and hands-on healthcare (0.15-0.24) remain protected</p>
                </div>
                <div class="insight-card">
                    <h3>Surprising Findings</h3>
                    <p>Humanities highly exposed: Historians (0.62), Writers (0.68), Translators (0.72)</p>
                </div>
                <div class="insight-card">
                    <h3>Employment Trends</h3>
                    <p>Data Scientists (+35%), Telemarketers (-24.6%), Data Entry (-21.8%) show extreme growth/decline</p>
                </div>
            </div>
        </div>

        <div class="charts-section">
            <h2 class="section-title" style="border: none; margin: 0;">Data Visualizations</h2>
            <div class="charts-grid">
                <div class="chart-container">
                    <div class="chart-title">AI Exposure vs Employment Size</div>
                    <canvas id="scatterChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">AI Exposure by Industry</div>
                    <canvas id="industryChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">Exposure Distribution</div>
                    <canvas id="distributionChart"></canvas>
                </div>
                <div class="chart-container">
                    <div class="chart-title">Employment Growth vs AI Exposure</div>
                    <canvas id="growthChart"></canvas>
                </div>
            </div>
        </div>

        <div class="comparison-panel">
            <h2 class="section-title" style="border: none; margin: 0;">Compare Occupations</h2>
            <div class="comparison-controls">
                <select class="comparison-select" id="comparisonSelect">
                    <option value="">Select an occupation to compare...</option>
                </select>
                <button class="add-comparison-btn" onclick="addToComparison()">Add to Compare</button>
                <button class="clear-comparison-btn" onclick="clearComparison()">Clear All</button>
            </div>
            <div class="comparison-results" id="comparisonResults">
                <p style="color: #7f8c8d; text-align: center; grid-column: 1 / -1;">Select occupations above to compare their AI impact metrics</p>
            </div>
        </div>

        <div class="controls">
            <div class="controls-row">
                <input type="text" class="search-input" id="searchInput" placeholder="Search occupations...">
                <select class="filter-select" id="categoryFilter">
                    <option value="all">All Exposure Levels</option>
                    <option value="very-high">Very High (0.7+)</option>
                    <option value="high">High (0.5-0.7)</option>
                    <option value="moderate">Moderate (0.3-0.5)</option>
                    <option value="low">Low (0.15-0.3)</option>
                    <option value="very-low">Very Low (&lt;0.15)</option>
                </select>
                <select class="filter-select" id="industryFilter">
                    <option value="all">All Industries</option>
                </select>
                <div class="view-toggle">
                    <button class="active" onclick="toggleView('cards')">Cards</button>
                    <button onclick="toggleView('table')">Table</button>
                </div>
            </div>
        </div>

        <div class="data-section">
            <h2 class="section-title">Occupation AI Exposure Data (2025)</h2>
            
            <div id="cardsView" class="occupation-grid">
                <!-- Cards will be populated by JavaScript -->
            </div>

            <div id="tableView" class="table-view hidden">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th onclick="sortTable(0)">Occupation</th>
                            <th onclick="sortTable(1)">Industry</th>
                            <th onclick="sortTable(2)">AI Exposure</th>
                            <th onclick="sortTable(3)">Transformation</th>
                            <th onclick="sortTable(4)">Employment</th>
                            <th onclick="sortTable(5)">Growth %</th>
                            <th onclick="sortTable(6)">Median Wage</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Table rows will be populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <div class="methodology">
            <h2>Methodology & Data Sources (2025 Update)</h2>
            
            <h3>Primary Research Sources:</h3>
            <ul>
                <li><strong>Eloundou et al. (2024):</strong> "GPTs are GPTs: Labor Market Impact Potential of LLMs" - Published in Science, June 2024. Analyzed 19,265 O*NET tasks across ~900 occupations using GPT-4 and human expert evaluation.</li>
                <li><strong>Indeed GSTI (2025):</strong> GenAI Skill Transformation Index - Analyzed 53.5M job postings (May 2024-April 2025) across 2,884 skills using multi-model AI evaluation (GPT-4.1 + Claude Sonnet 4).</li>
                <li><strong>BLS Employment Projections (2025):</strong> Official 2023-2033 employment forecasts incorporating AI impacts, released February 2025.</li>
                <li><strong>Federal Reserve Studies (2025):</strong> Empirical unemployment data by AI exposure levels from St. Louis Fed research.</li>
            </ul>

            <h3>Key Metrics Explained:</h3>
            <ul>
                <li><strong>AI Exposure (0-1 scale):</strong> Percentage of job tasks that could be completed 50%+ faster with AI, based on Eloundou et al. methodology with GPT-4 task analysis.</li>
                <li><strong>Transformation Level:</strong> From Indeed GSTI - High (>60% skills transformable), Moderate (30-60%), Low (<30%).</li>
                <li><strong>Employment Growth %:</strong> BLS projected change 2023-2033, incorporating expected AI adoption impacts.</li>
                <li><strong>Median Wage:</strong> Annual median from BLS OEWS May 2023 data.</li>
            </ul>

            <h3>Coverage & Methodology:</h3>
            <ul>
                <li>150 occupations selected to represent all major sectors: technology, sciences, humanities, arts, healthcare, trades, service industries</li>
                <li>Cross-validated across 4 independent 2024-2025 studies for consistency</li>
                <li>Includes both high-exposure (software developers, data scientists) and low-exposure (construction, agriculture) occupations</li>
                <li>Special attention to previously underrepresented fields: historians, musicians, welders, farmers</li>
            </ul>

            <h3>Important Limitations:</h3>
            <ul>
                <li>Exposure measures capability, not realized workplace impact or job displacement</li>
                <li>Timeline for adoption uncertain - these are potential impacts, not predictions</li>
                <li>Does not distinguish between augmentation and replacement scenarios</li>
                <li>Job creation from AI not modeled - historical precedent shows technology often creates new roles</li>
                <li>U.S.-centric framework may not apply to other labor markets</li>
                <li>Aggregate occupational averages hide significant within-occupation variation</li>
            </ul>
        </div>

        <!-- Help Modal -->
        <div id="helpModal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 class="modal-title">AI Impact Metrics Explained (2025)</h2>
                    <button class="close-modal" onclick="closeHelpModal()">√ó</button>
                </div>
                
                <div class="metric-explanation">
                    <div class="metric-name">üéØ AI Exposure Score</div>
                    <div class="metric-description">
                        Percentage of job tasks that could be completed 50% or more faster with AI assistance. Based on analysis of 19,265 O*NET tasks by GPT-4 and human experts (Eloundou et al., 2024).
                    </div>
                    <div class="metric-range">Range: 0.00 to 1.00 (1.00 = 100% of tasks highly impacted)</div>
                </div>

                <div class="metric-explanation">
                    <div class="metric-name">üîÑ Transformation Level</div>
                    <div class="metric-description">
                        From Indeed's GenAI Skill Transformation Index (2025). Measures how many job skills are transformable by AI: High (>60%), Moderate (30-60%), Low (<30%).
                    </div>
                    <div class="metric-range">Based on 53.5M job postings analyzed May 2024-April 2025</div>
                </div>

                <div class="metric-explanation">
                    <div class="metric-name">üë• Employment</div>
                    <div class="metric-description">
                        Total number of people employed in this occupation in the United States (BLS 2023 data).
                    </div>
                    <div class="metric-range">Shown in thousands (K) or millions (M)</div>
                </div>

                <div class="metric-explanation">
                    <div class="metric-name">üìà Employment Growth</div>
                    <div class="metric-description">
                        BLS projected percentage change in employment 2023-2033, incorporating expected AI adoption impacts. Positive = job growth, negative = job decline.
                    </div>
                    <div class="metric-range">Examples: +35% (Data Scientists), -21.8% (Data Entry Keyers)</div>
                </div>

                <div class="metric-explanation">
                    <div class="metric-name">üí∞ Median Wage</div>
                    <div class="metric-description">
                        Annual median wage from Bureau of Labor Statistics Occupational Employment and Wage Statistics (May 2023).
                    </div>
                    <div class="metric-range">National median for all workers in this occupation</div>
                </div>

                <div style="margin-top: 20px; padding: 15px; background: rgba(52, 152, 219, 0.1); border-radius: 8px;">
                    <strong>üí° Critical Context:</strong> High AI exposure indicates tasks that CAN be assisted by AI, not jobs that WILL be eliminated. History shows technology typically augments work rather than eliminates it entirely. Consider exposure as an indicator of collaboration opportunity, not displacement risk.
                </div>
            </div>
        </div>
    </div>

    <script>
        // 2025 Occupation Data - 150 occupations from multiple sources
        const occupationsData = [
    // ========== TECHNOLOGY & COMPUTER (High Exposure) ==========
    {"name": "Software Developers", "exposure": 0.76, "transformation": "High", "employment": 1795300, "growth": 17.9, "industry": "Computer and Mathematical", "wage": 124200, "icon": "üíª"},
    {"name": "Web Developers", "exposure": 0.72, "transformation": "High", "employment": 85350, "growth": 16.2, "industry": "Computer and Mathematical", "wage": 84960, "icon": "üåê"},
    {"name": "Data Scientists", "exposure": 0.74, "transformation": "High", "employment": 192710, "growth": 35.0, "industry": "Computer and Mathematical", "wage": 108020, "icon": "üìä"},
    {"name": "Database Administrators", "exposure": 0.70, "transformation": "High", "employment": 86200, "growth": 8.2, "industry": "Computer and Mathematical", "wage": 101510, "icon": "üóÑÔ∏è"},
    {"name": "Computer Systems Analysts", "exposure": 0.68, "transformation": "Moderate", "employment": 547800, "growth": 10.5, "industry": "Computer and Mathematical", "wage": 102240, "icon": "üñ•Ô∏è"},
    {"name": "Information Security Analysts", "exposure": 0.65, "transformation": "Moderate", "employment": 168600, "growth": 32.1, "industry": "Computer and Mathematical", "wage": 120360, "icon": "üîí"},
    {"name": "Network Administrators", "exposure": 0.58, "transformation": "Moderate", "employment": 158300, "growth": -1.2, "industry": "Computer and Mathematical", "wage": 95360, "icon": "üåê"},
    {"name": "Computer Programmers", "exposure": 0.73, "transformation": "High", "employment": 186900, "growth": -10.2, "industry": "Computer and Mathematical", "wage": 99700, "icon": "‚å®Ô∏è"},
    
    // ========== BUSINESS & FINANCIAL (Moderate-High Exposure) ==========
    {"name": "Accountants and Auditors", "exposure": 0.64, "transformation": "High", "employment": 1427500, "growth": 4.4, "industry": "Business and Financial Operations", "wage": 79880, "icon": "üßÆ"},
    {"name": "Financial Analysts", "exposure": 0.66, "transformation": "Moderate", "employment": 339900, "growth": 8.8, "industry": "Business and Financial Operations", "wage": 99010, "icon": "üìà"},
    {"name": "Budget Analysts", "exposure": 0.70, "transformation": "High", "employment": 45900, "growth": -0.7, "industry": "Business and Financial Operations", "wage": 84240, "icon": "üí∞"},
    {"name": "Tax Preparers", "exposure": 0.71, "transformation": "High", "employment": 54200, "growth": -3.2, "industry": "Business and Financial Operations", "wage": 48740, "icon": "üìã"},
    {"name": "Management Analysts", "exposure": 0.62, "transformation": "Moderate", "employment": 838140, "growth": 10.4, "industry": "Management", "wage": 99410, "icon": "üìä"},
    {"name": "Personal Financial Advisors", "exposure": 0.58, "transformation": "Moderate", "employment": 272190, "growth": 17.1, "industry": "Business and Financial Operations", "wage": 99580, "icon": "üíº"},
    {"name": "Market Research Analysts", "exposure": 0.63, "transformation": "Moderate", "employment": 846370, "growth": 13.1, "industry": "Business and Financial Operations", "wage": 74680, "icon": "üìä"},
    
    // ========== LEGAL (High Exposure) ==========
    {"name": "Lawyers", "exposure": 0.54, "transformation": "Moderate", "employment": 681010, "growth": 7.9, "industry": "Legal", "wage": 145760, "icon": "‚öñÔ∏è"},
    {"name": "Paralegals", "exposure": 0.67, "transformation": "High", "employment": 363950, "growth": 4.0, "industry": "Legal", "wage": 59520, "icon": "üìë"},
    {"name": "Legal Secretaries", "exposure": 0.69, "transformation": "High", "employment": 141830, "growth": -11.6, "industry": "Office and Administrative Support", "wage": 50990, "icon": "üìù"},
    
    // ========== WRITING & MEDIA (High Exposure) ==========
    {"name": "Writers and Authors", "exposure": 0.68, "transformation": "High", "employment": 49450, "growth": -2.0, "industry": "Arts, Design, Entertainment, Sports, Media", "wage": 74120, "icon": "‚úçÔ∏è"},
    {"name": "Editors", "exposure": 0.66, "transformation": "Moderate", "employment": 95700, "growth": -2.6, "industry": "Arts, Design, Entertainment, Sports, Media", "wage": 73080, "icon": "üìù"},
    {"name": "Technical Writers", "exposure": 0.69, "transformation": "High", "employment": 47970, "growth": 6.4, "industry": "Arts, Design, Entertainment, Sports, Media", "wage": 79960, "icon": "üìÑ"},
    {"name": "Journalists", "exposure": 0.64, "transformation": "Moderate", "employment": 45020, "growth": -2.6, "industry": "Arts, Design, Entertainment, Sports, Media", "wage": 57500, "icon": "üì∞"},
    {"name": "Public Relations Specialists", "exposure": 0.61, "transformation": "Moderate", "employment": 275550, "growth": 6.7, "industry": "Business and Financial Operations", "wage": 68440, "icon": "üì¢"},
    {"name": "Graphic Designers", "exposure": 0.52, "transformation": "Moderate", "employment": 219800, "growth": 2.7, "industry": "Arts, Design, Entertainment, Sports, Media", "wage": 57990, "icon": "üé®"},
    {"name": "Translators and Interpreters", "exposure": 0.72, "transformation": "High", "employment": 51560, "growth": 2.4, "industry": "Arts, Design, Entertainment, Sports, Media", "wage": 57090, "icon": "üåç"},
    
    // ========== SALES & CUSTOMER SERVICE ==========
    {"name": "Sales Representatives (Services)", "exposure": 0.61, "transformation": "Moderate", "employment": 1142020, "growth": 3.7, "industry": "Sales and Related", "wage": 64670, "icon": "üíº"},
    {"name": "Customer Service Representatives", "exposure": 0.63, "transformation": "High", "employment": 2858710, "growth": -4.6, "industry": "Office and Administrative Support", "wage": 38530, "icon": "üìû"},
    {"name": "Telemarketers", "exposure": 0.65, "transformation": "High", "employment": 81580, "growth": -24.6, "industry": "Sales and Related", "wage": 32830, "icon": "‚òéÔ∏è"},
    {"name": "Retail Salespersons", "exposure": 0.39, "transformation": "Low", "employment": 3732260, "growth": 1.2, "industry": "Sales and Related", "wage": 31920, "icon": "üõçÔ∏è"},
    {"name": "Advertising Sales Agents", "exposure": 0.60, "transformation": "Moderate", "employment": 108100, "growth": -6.8, "industry": "Sales and Related", "wage": 57960, "icon": "üì∫"},
    
    // ========== OFFICE & ADMINISTRATIVE (High Exposure) ==========
    {"name": "Executive Secretaries", "exposure": 0.65, "transformation": "High", "employment": 447920, "growth": -10.9, "industry": "Office and Administrative Support", "wage": 70830, "icon": "üíº"},
    {"name": "Bookkeeping Clerks", "exposure": 0.71, "transformation": "High", "employment": 1427500, "growth": -4.6, "industry": "Office and Administrative Support", "wage": 47440, "icon": "üìä"},
    {"name": "Data Entry Keyers", "exposure": 0.74, "transformation": "High", "employment": 156240, "growth": -21.8, "industry": "Office and Administrative Support", "wage": 37970, "icon": "‚å®Ô∏è"},
    {"name": "Office Clerks, General", "exposure": 0.58, "transformation": "Moderate", "employment": 2726630, "growth": -9.8, "industry": "Office and Administrative Support", "wage": 38320, "icon": "üìÅ"},
    
    // ========== EDUCATION (Moderate Exposure) ==========
    {"name": "Postsecondary Teachers", "exposure": 0.48, "transformation": "Moderate", "employment": 1327400, "growth": 7.7, "industry": "Educational Instruction and Library", "wage": 84380, "icon": "üë®‚Äçüè´"},
    {"name": "Elementary School Teachers", "exposure": 0.36, "transformation": "Low", "employment": 1472300, "growth": -0.1, "industry": "Educational Instruction and Library", "wage": 65080, "icon": "üë©‚Äçüè´"},
    {"name": "Secondary School Teachers", "exposure": 0.38, "transformation": "Low", "employment": 1040900, "growth": -0.6, "industry": "Educational Instruction and Library", "wage": 65220, "icon": "üìö"},
    {"name": "Teaching Assistants", "exposure": 0.28, "transformation": "Low", "employment": 1179700, "growth": 3.7, "industry": "Educational Instruction and Library", "wage": 33070, "icon": "‚úèÔ∏è"},
    {"name": "Librarians", "exposure": 0.52, "transformation": "Moderate", "employment": 133970, "growth": -3.4, "industry": "Educational Instruction and Library", "wage": 64370, "icon": "üìñ"},
    
    // ========== HEALTHCARE PRACTITIONERS (Low-Moderate Exposure) ==========
    {"name": "Physicians and Surgeons", "exposure": 0.28, "transformation": "Low", "employment": 753400, "growth": 2.6, "industry": "Healthcare Practitioners and Technical", "wage": 239200, "icon": "üë®‚Äç‚öïÔ∏è"},
    {"name": "Registered Nurses", "exposure": 0.24, "transformation": "Low", "employment": 3175390, "growth": 6.2, "industry": "Healthcare Practitioners and Technical", "wage": 86070, "icon": "üë©‚Äç‚öïÔ∏è"},
    {"name": "Pharmacists", "exposure": 0.41, "transformation": "Moderate", "employment": 349500, "growth": -2.6, "industry": "Healthcare Practitioners and Technical", "wage": 136030, "icon": "üíä"},
    {"name": "Physical Therapists", "exposure": 0.22, "transformation": "Low", "employment": 239200, "growth": 12.8, "industry": "Healthcare Practitioners and Technical", "wage": 99710, "icon": "ü§∏"},
    {"name": "Diagnostic Medical Sonographers", "exposure": 0.31, "transformation": "Low", "employment": 78830, "growth": 10.4, "industry": "Healthcare Practitioners and Technical", "wage": 84470, "icon": "üî¨"},
    {"name": "Medical Records Specialists", "exposure": 0.58, "transformation": "High", "employment": 194300, "growth": 8.4, "industry": "Healthcare Practitioners and Technical", "wage": 48780, "icon": "üìã"},
    
    // ========== HEALTHCARE SUPPORT (Low Exposure) ==========
    {"name": "Nursing Assistants", "exposure": 0.15, "transformation": "Low", "employment": 1351760, "growth": 3.6, "industry": "Healthcare Support", "wage": 35760, "icon": "ü©∫"},
    {"name": "Medical Assistants", "exposure": 0.26, "transformation": "Low", "employment": 808180, "growth": 14.2, "industry": "Healthcare Support", "wage": 42000, "icon": "üè•"},
    {"name": "Dental Assistants", "exposure": 0.24, "transformation": "Low", "employment": 381520, "growth": 6.4, "industry": "Healthcare Support", "wage": 46540, "icon": "ü¶∑"},
    {"name": "Pharmacy Technicians", "exposure": 0.34, "transformation": "Moderate", "employment": 447860, "growth": 5.9, "industry": "Healthcare Support", "wage": 40300, "icon": "üíä"},
    
    // ========== LIFE, PHYSICAL & SOCIAL SCIENCE (Moderate Exposure) ==========
    {"name": "Biochemists and Biophysicists", "exposure": 0.56, "transformation": "Moderate", "employment": 37880, "growth": 6.7, "industry": "Life, Physical, and Social Science", "wage": 103810, "icon": "üß¨"},
    {"name": "Chemists", "exposure": 0.51, "transformation": "Moderate", "employment": 81900, "growth": 6.0, "industry": "Life, Physical, and Social Science", "wage": 84740, "icon": "üß™"},
    {"name": "Economists", "exposure": 0.65, "transformation": "Moderate", "employment": 18600, "growth": 5.1, "industry": "Life, Physical, and Social Science", "wage": 115730, "icon": "üìà"},
    {"name": "Sociologists", "exposure": 0.58, "transformation": "Moderate", "employment": 2460, "growth": 4.8, "industry": "Life, Physical, and Social Science", "wage": 98590, "icon": "üë•"},
    {"name": "Historians", "exposure": 0.62, "transformation": "Moderate", "employment": 3040, "growth": 3.3, "industry": "Life, Physical, and Social Science", "wage": 72890, "icon": "üìú"},
    {"name": "Psychologists", "exposure": 0.42, "transformation": "Moderate", "employment": 198100, "growth": 6.3, "industry": "Life, Physical, and Social Science", "wage": 92740, "icon": "üß†"},
    {"name": "Environmental Scientists", "exposure": 0.48, "transformation": "Moderate", "employment": 84700, "growth": 6.2, "industry": "Life, Physical, and Social Science", "wage": 78980, "icon": "üåç"},
    
    // ========== ARCHITECTURE & ENGINEERING (Moderate Exposure) ==========
    {"name": "Aerospace Engineers", "exposure": 0.50, "transformation": "Moderate", "employment": 62800, "growth": 6.0, "industry": "Architecture and Engineering", "wage": 130720, "icon": "‚úàÔ∏è"},
    {"name": "Civil Engineers", "exposure": 0.48, "transformation": "Moderate", "employment": 318600, "growth": 5.0, "industry": "Architecture and Engineering", "wage": 95980, "icon": "üèóÔ∏è"},
    {"name": "Mechanical Engineers", "exposure": 0.52, "transformation": "Moderate", "employment": 299200, "growth": 10.3, "industry": "Architecture and Engineering", "wage": 99510, "icon": "‚öôÔ∏è"},
    {"name": "Electrical Engineers", "exposure": 0.54, "transformation": "Moderate", "employment": 193140, "growth": 3.6, "industry": "Architecture and Engineering", "wage": 109010, "icon": "‚ö°"},
    {"name": "Architects", "exposure": 0.49, "transformation": "Moderate", "employment": 116240, "growth": 5.0, "industry": "Architecture and Engineering", "wage": 93900, "icon": "üèõÔ∏è"},
    {"name": "Drafters", "exposure": 0.65, "transformation": "High", "employment": 104700, "growth": -2.1, "industry": "Architecture and Engineering", "wage": 62050, "icon": "üìê"},
    
    // ========== ARTS & HUMANITIES (Low-Moderate Exposure) ==========
    {"name": "Musicians and Singers", "exposure": 0.38, "transformation": "Low", "employment": 143280, "growth": 1.4, "industry": "Arts, Design, Entertainment, Sports, Media", "wage": 39060, "icon": "üéµ"},
    {"name": "Actors", "exposure": 0.41, "transformation": "Moderate", "employment": 56040, "growth": 5.4, "industry": "Arts, Design, Entertainment, Sports, Media", "wage": 48760, "icon": "üé≠"},
    {"name": "Photographers", "exposure": 0.48, "transformation": "Moderate", "employment": 125960, "growth": 4.0, "industry": "Arts, Design, Entertainment, Sports, Media", "wage": 42770, "icon": "üì∑"},
    {"name": "Film and Video Editors", "exposure": 0.57, "transformation": "Moderate", "employment": 29240, "growth": 6.8, "industry": "Arts, Design, Entertainment, Sports, Media", "wage": 66600, "icon": "üé¨"},
    {"name": "Art Directors", "exposure": 0.50, "transformation": "Moderate", "employment": 42690, "growth": 2.8, "industry": "Arts, Design, Entertainment, Sports, Media", "wage": 111950, "icon": "üé®"},
    {"name": "Curators", "exposure": 0.46, "transformation": "Moderate", "employment": 14190, "growth": 10.0, "industry": "Arts, Design, Entertainment, Sports, Media", "wage": 61750, "icon": "üñºÔ∏è"},
    {"name": "Interior Designers", "exposure": 0.47, "transformation": "Moderate", "employment": 76140, "growth": 4.1, "industry": "Arts, Design, Entertainment, Sports, Media", "wage": 62510, "icon": "üõãÔ∏è"},
    {"name": "Fashion Designers", "exposure": 0.44, "transformation": "Moderate", "employment": 21790, "growth": 2.8, "industry": "Arts, Design, Entertainment, Sports, Media", "wage": 81830, "icon": "üëó"},
    
    // ========== PROTECTIVE SERVICE (Low Exposure) ==========
    {"name": "Police Officers", "exposure": 0.19, "transformation": "Low", "employment": 655790, "growth": 3.1, "industry": "Protective Service", "wage": 74910, "icon": "üëÆ"},
    {"name": "Firefighters", "exposure": 0.12, "transformation": "Low", "employment": 332200, "growth": 3.8, "industry": "Protective Service", "wage": 57120, "icon": "üöí"},
    {"name": "Security Guards", "exposure": 0.16, "transformation": "Low", "employment": 1139180, "growth": 2.6, "industry": "Protective Service", "wage": 35830, "icon": "üõ°Ô∏è"},
    
    // ========== FOOD PREPARATION & SERVING (Low Exposure) ==========
    {"name": "Chefs and Head Cooks", "exposure": 0.28, "transformation": "Low", "employment": 149100, "growth": 5.4, "industry": "Food Preparation and Serving Related", "wage": 58920, "icon": "üë®‚Äçüç≥"},
    {"name": "Cooks, Restaurant", "exposure": 0.18, "transformation": "Low", "employment": 1277490, "growth": 5.9, "industry": "Food Preparation and Serving Related", "wage": 33880, "icon": "üç≥"},
    {"name": "Food Preparation Workers", "exposure": 0.14, "transformation": "Low", "employment": 892240, "growth": 4.1, "industry": "Food Preparation and Serving Related", "wage": 30710, "icon": "ü•ó"},
    {"name": "Waiters and Waitresses", "exposure": 0.21, "transformation": "Low", "employment": 2237010, "growth": 0.8, "industry": "Food Preparation and Serving Related", "wage": 31860, "icon": "üçΩÔ∏è"},
    {"name": "Bartenders", "exposure": 0.24, "transformation": "Low", "employment": 624900, "growth": 2.8, "industry": "Food Preparation and Serving Related", "wage": 31360, "icon": "üç∏"},
    
    // ========== PERSONAL CARE & SERVICE (Low Exposure) ==========
    {"name": "Hairdressers and Cosmetologists", "exposure": 0.16, "transformation": "Low", "employment": 633520, "growth": 7.9, "industry": "Personal Care and Service", "wage": 35080, "icon": "üíá"},
    {"name": "Childcare Workers", "exposure": 0.14, "transformation": "Low", "employment": 573720, "growth": -2.8, "industry": "Personal Care and Service", "wage": 30370, "icon": "üë∂"},
    {"name": "Fitness Trainers", "exposure": 0.26, "transformation": "Low", "employment": 378830, "growth": 14.2, "industry": "Personal Care and Service", "wage": 46480, "icon": "üèãÔ∏è"},
    {"name": "Massage Therapists", "exposure": 0.18, "transformation": "Low", "employment": 92650, "growth": 18.0, "industry": "Personal Care and Service", "wage": 55310, "icon": "üíÜ"},
    
    // ========== BUILDING & GROUNDS MAINTENANCE (Low Exposure) ==========
    {"name": "Janitors and Cleaners", "exposure": 0.11, "transformation": "Low", "employment": 2351500, "growth": 1.9, "industry": "Building, Grounds Cleaning, Maintenance", "wage": 33450, "icon": "üßπ"},
    {"name": "Landscaping Workers", "exposure": 0.13, "transformation": "Low", "employment": 1019900, "growth": 5.2, "industry": "Building, Grounds Cleaning, Maintenance", "wage": 36710, "icon": "üå≥"},
    {"name": "Groundskeepers", "exposure": 0.12, "transformation": "Low", "employment": 240680, "growth": 4.4, "industry": "Building, Grounds Cleaning, Maintenance", "wage": 35360, "icon": "üåø"},
    
    // ========== CONSTRUCTION & EXTRACTION (Low Exposure) ==========
    {"name": "Construction Managers", "exposure": 0.32, "transformation": "Low", "employment": 366100, "growth": 5.0, "industry": "Construction and Extraction", "wage": 108210, "icon": "üë∑"},
    {"name": "Carpenters", "exposure": 0.14, "transformation": "Low", "employment": 713320, "growth": 1.8, "industry": "Construction and Extraction", "wage": 56350, "icon": "üî®"},
    {"name": "Electricians", "exposure": 0.19, "transformation": "Low", "employment": 762600, "growth": 6.0, "industry": "Construction and Extraction", "wage": 63310, "icon": "‚ö°"},
    {"name": "Plumbers", "exposure": 0.17, "transformation": "Low", "employment": 501460, "growth": 5.8, "industry": "Construction and Extraction", "wage": 63350, "icon": "üîß"},
    {"name": "Construction Laborers", "exposure": 0.10, "transformation": "Low", "employment": 1100240, "growth": 4.0, "industry": "Construction and Extraction", "wage": 43030, "icon": "üèóÔ∏è"},
    {"name": "Roofers", "exposure": 0.08, "transformation": "Low", "employment": 135140, "growth": 2.8, "industry": "Construction and Extraction", "wage": 49990, "icon": "üè†"},
    
    // ========== INSTALLATION, MAINTENANCE & REPAIR (Low Exposure) ==========
    {"name": "Automotive Service Technicians", "exposure": 0.21, "transformation": "Low", "employment": 762600, "growth": -1.6, "industry": "Installation, Maintenance, and Repair", "wage": 47770, "icon": "üîß"},
    {"name": "Heavy Vehicle Mechanics", "exposure": 0.23, "transformation": "Low", "employment": 238320, "growth": 4.3, "industry": "Installation, Maintenance, and Repair", "wage": 59030, "icon": "üöõ"},
    {"name": "HVAC Technicians", "exposure": 0.24, "transformation": "Low", "employment": 398150, "growth": 6.2, "industry": "Installation, Maintenance, and Repair", "wage": 57300, "icon": "‚ùÑÔ∏è"},
    {"name": "Industrial Machinery Mechanics", "exposure": 0.26, "transformation": "Low", "employment": 425500, "growth": 13.4, "industry": "Installation, Maintenance, and Repair", "wage": 61080, "icon": "‚öôÔ∏è"},
    
    // ========== PRODUCTION (Low Exposure) ==========
    {"name": "Machinists", "exposure": 0.28, "transformation": "Low", "employment": 312630, "growth": -3.7, "industry": "Production", "wage": 51550, "icon": "üî©"},
    {"name": "Welders", "exposure": 0.19, "transformation": "Low", "employment": 424730, "growth": 2.0, "industry": "Production", "wage": 48940, "icon": "üî•"},
    {"name": "Assemblers and Fabricators", "exposure": 0.16, "transformation": "Low", "employment": 1393770, "growth": -2.5, "industry": "Production", "wage": 38100, "icon": "üè≠"},
    {"name": "Inspectors and Testers", "exposure": 0.32, "transformation": "Low", "employment": 447440, "growth": -4.3, "industry": "Production", "wage": 46590, "icon": "üîç"},
    
    // ========== TRANSPORTATION & MATERIAL MOVING (Low Exposure) ==========
    {"name": "Heavy Truck Drivers", "exposure": 0.17, "transformation": "Low", "employment": 2092110, "growth": 4.3, "industry": "Transportation and Material Moving", "wage": 54320, "icon": "üöö"},
    {"name": "Delivery Drivers", "exposure": 0.20, "transformation": "Low", "employment": 1170030, "growth": 11.7, "industry": "Transportation and Material Moving", "wage": 37980, "icon": "üì¶"},
    {"name": "Bus Drivers", "exposure": 0.18, "transformation": "Low", "employment": 532030, "growth": 5.4, "industry": "Transportation and Material Moving", "wage": 49590, "icon": "üöå"},
    {"name": "Pilots", "exposure": 0.35, "transformation": "Low", "employment": 84520, "growth": 4.7, "industry": "Transportation and Material Moving", "wage": 211790, "icon": "‚úàÔ∏è"},
    {"name": "Flight Attendants", "exposure": 0.42, "transformation": "Moderate", "employment": 122780, "growth": 10.2, "industry": "Transportation and Material Moving", "wage": 68370, "icon": "üõ´"},
    
    // ========== FARMING, FISHING & FORESTRY (Low Exposure) ==========
    {"name": "Agricultural Workers", "exposure": 0.09, "transformation": "Low", "employment": 876420, "growth": 0.2, "industry": "Farming, Fishing, and Forestry", "wage": 32440, "icon": "üåæ"},
    {"name": "Farmers and Ranchers", "exposure": 0.15, "transformation": "Low", "employment": 1024990, "growth": -3.2, "industry": "Farming, Fishing, and Forestry", "wage": 78760, "icon": "üöú"},
    {"name": "Logging Workers", "exposure": 0.08, "transformation": "Low", "employment": 44950, "growth": -6.3, "industry": "Farming, Fishing, and Forestry", "wage": 47390, "icon": "üå≤"},
    
    // ========== COMMUNITY & SOCIAL SERVICE (Low-Moderate Exposure) ==========
    {"name": "Social Workers", "exposure": 0.38, "transformation": "Low", "employment": 762360, "growth": 7.2, "industry": "Community and Social Service", "wage": 58380, "icon": "ü§ù"},
    {"name": "Counselors", "exposure": 0.36, "transformation": "Low", "employment": 804530, "growth": 8.3, "industry": "Community and Social Service", "wage": 51240, "icon": "üí¨"},
    {"name": "Religious Workers", "exposure": 0.28, "transformation": "Low", "employment": 208910, "growth": 0.1, "industry": "Community and Social Service", "wage": 58920, "icon": "‚õ™"},
    
    // ========== MANAGEMENT (Moderate Exposure) ==========
    {"name": "Chief Executives", "exposure": 0.44, "transformation": "Moderate", "employment": 200480, "growth": -2.9, "industry": "Management", "wage": 246440, "icon": "üíº"},
    {"name": "General and Operations Managers", "exposure": 0.42, "transformation": "Moderate", "employment": 2553680, "growth": 2.6, "industry": "Management", "wage": 126140, "icon": "üìä"},
    {"name": "Marketing Managers", "exposure": 0.56, "transformation": "Moderate", "employment": 330090, "growth": 6.5, "industry": "Management", "wage": 158280, "icon": "üì¢"},
    {"name": "Human Resources Managers", "exposure": 0.50, "transformation": "Moderate", "employment": 184230, "growth": 5.2, "industry": "Management", "wage": 136350, "icon": "üë•"},
    {"name": "Financial Managers", "exposure": 0.55, "transformation": "Moderate", "employment": 748820, "growth": 16.4, "industry": "Management", "wage": 156100, "icon": "üí∞"},
];

        let currentView = 'cards';
        let filteredData = occupationsData;
        let comparisonList = [];
        let charts = {};

        function getScoreClass(exposure) {
            if (exposure >= 0.7) return 'score-excellent';
            if (exposure >= 0.5) return 'score-high';
            if (exposure >= 0.3) return 'score-medium';
            if (exposure >= 0.15) return 'score-low';
            return 'score-minimal';
        }

        function getIndustryColor(industry) {
            const colors = {
                'Sales and Related': '#e74c3c',
                'Computer and Mathematical': '#3498db',
                'Office and Administrative Support': '#2ecc71',
                'Arts, Design, Entertainment, Sports, Media': '#9b59b6',
                'Business and Financial Operations': '#f39c12',
                'Educational Instruction and Library': '#1abc9c',
                'Management': '#34495e',
                'Healthcare Practitioners and Technical': '#e67e22',
                'Legal': '#95a5a6',
                'Life, Physical, and Social Science': '#27ae60',
                'Community and Social Service': '#8e44ad',
                'Architecture and Engineering': '#d35400',
                'Personal Care and Service': '#16a085',
                'Food Preparation and Serving Related': '#c0392b',
                'Protective Service': '#7f8c8d',
                'Transportation and Material Moving': '#2980b9',
                'Production': '#8e44ad',
                'Installation, Maintenance, and Repair': '#d68910',
                'Construction and Extraction': '#a93226',
                'Healthcare Support': '#48c9b0',
                'Building, Grounds Cleaning, Maintenance': '#85929e',
                'Farming, Fishing, and Forestry': '#58d68d'
            };
            return colors[industry] || '#95a5a6';
        }

        function createCharts() {
            // Scatter Chart: AI Exposure vs Employment
            const scatterCtx = document.getElementById('scatterChart').getContext('2d');
            charts.scatter = new Chart(scatterCtx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Occupations',
                        data: occupationsData.map(d => ({
                            x: Math.log10(d.employment),
                            y: d.exposure,
                            occupation: d.name,
                            employment: d.employment
                        })),
                        backgroundColor: occupationsData.map(d => {
                            const exp = d.exposure;
                            if (exp >= 0.7) return 'rgba(231, 76, 60, 0.6)';
                            if (exp >= 0.5) return 'rgba(230, 126, 34, 0.6)';
                            if (exp >= 0.3) return 'rgba(241, 196, 15, 0.6)';
                            if (exp >= 0.15) return 'rgba(52, 152, 219, 0.6)';
                            return 'rgba(46, 204, 113, 0.6)';
                        }),
                        pointRadius: 6
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'Employment (Log Scale)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return formatNumber(Math.pow(10, value));
                                }
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'AI Exposure Score'
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                title: function(context) {
                                    return context[0].raw.occupation;
                                },
                                label: function(context) {
                                    return [
                                        `Exposure: ${context.parsed.y.toFixed(2)}`,
                                        `Employment: ${formatNumber(context.raw.employment)}`
                                    ];
                                }
                            }
                        },
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // Industry Chart
            const industryCtx = document.getElementById('industryChart').getContext('2d');
            const industries = [...new Set(occupationsData.map(d => d.industry))];
            const industryAvgs = industries.map(ind => {
                const occups = occupationsData.filter(o => o.industry === ind);
                return {
                    name: ind,
                    avg: occups.reduce((sum, o) => sum + o.exposure, 0) / occups.length
                };
            }).sort((a, b) => b.avg - a.avg).slice(0, 10);

            charts.industry = new Chart(industryCtx, {
                type: 'bar',
                data: {
                    labels: industryAvgs.map(d => d.name.length > 25 ? d.name.substring(0, 25) + '...' : d.name),
                    datasets: [{
                        label: 'Average AI Exposure',
                        data: industryAvgs.map(d => d.avg),
                        backgroundColor: industryAvgs.map(d => getIndustryColor(d.name)),
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Average AI Exposure'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // Distribution Chart
            const distributionCtx = document.getElementById('distributionChart').getContext('2d');
            const bins = [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8];
            const binCounts = new Array(bins.length - 1).fill(0);
            
            occupationsData.forEach(d => {
                for (let i = 0; i < bins.length - 1; i++) {
                    if (d.exposure >= bins[i] && d.exposure < bins[i + 1]) {
                        binCounts[i]++;
                        break;
                    }
                }
            });

            charts.distribution = new Chart(distributionCtx, {
                type: 'bar',
                data: {
                    labels: bins.slice(0, -1).map((bin, i) => `${bin.toFixed(1)}-${bins[i + 1].toFixed(1)}`),
                    datasets: [{
                        label: 'Number of Occupations',
                        data: binCounts,
                        backgroundColor: 'rgba(52, 152, 219, 0.6)',
                        borderColor: 'rgba(52, 152, 219, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Occupations'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'AI Exposure Score Range'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });

            // Growth vs Exposure Chart
            const growthCtx = document.getElementById('growthChart').getContext('2d');
            charts.growth = new Chart(growthCtx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Occupations',
                        data: occupationsData.map(d => ({
                            x: d.exposure,
                            y: d.growth,
                            occupation: d.name
                        })),
                        backgroundColor: occupationsData.map(d => 
                            d.growth > 0 ? 'rgba(46, 204, 113, 0.6)' : 'rgba(231, 76, 60, 0.6)'
                        ),
                        pointRadius: 5
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            title: {
                                display: true,
                                text: 'AI Exposure'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Employment Growth % (2023-2033)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                title: function(context) {
                                    return context[0].raw.occupation;
                                },
                                label: function(context) {
                                    return [
                                        `Exposure: ${context.parsed.x.toFixed(2)}`,
                                        `Growth: ${context.parsed.y.toFixed(1)}%`
                                    ];
                                }
                            }
                        }
                    }
                }
            });
        }

        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(0) + 'K';
            }
            return num.toLocaleString();
        }

        function formatWage(wage) {
            return '$' + (wage / 1000).toFixed(0) + 'K';
        }

        function renderCards() {
            const container = document.getElementById('cardsView');
            container.innerHTML = '';

            filteredData.forEach(occupation => {
                const card = document.createElement('div');
                const scoreClass = getScoreClass(occupation.exposure);
                card.className = `occupation-card ${scoreClass}`;
                
                const growthClass = occupation.growth > 0 ? 'positive' : 'negative';
                
                card.innerHTML = `
                    <button class="add-to-compare ${comparisonList.some(c => c.name === occupation.name) ? 'added' : ''}" 
                            onclick="toggleComparison('${occupation.name.replace(/'/g, "\\'")})')" 
                            ${comparisonList.some(c => c.name === occupation.name) ? 'disabled' : ''}>
                        ${comparisonList.some(c => c.name === occupation.name) ? 'Added' : 'Compare'}
                    </button>
                    <div class="occupation-group">${occupation.industry}</div>
                    <div class="occupation-title">
                        <div class="occupation-icon">${occupation.icon}</div>
                        <div>${occupation.name}</div>
                    </div>
                    <div class="occupation-stats">
                        <div class="stat">
                            <span class="stat-name tooltip" data-tooltip="AI exposure score (0-1)">Exposure</span>
                            <span class="stat-value">${occupation.exposure.toFixed(2)}</span>
                        </div>
                        <div class="stat">
                            <span class="stat-name tooltip" data-tooltip="Transformation level">Transform</span>
                            <span class="stat-value">${occupation.transformation}</span>
                        </div>
                        <div class="stat">
                            <span class="stat-name tooltip" data-tooltip="Total US employment">Employment</span>
                            <span class="stat-value">${formatNumber(occupation.employment)}</span>
                        </div>
                        <div class="stat">
                            <span class="stat-name tooltip" data-tooltip="Projected growth 2023-2033">Growth</span>
                            <span class="stat-value ${growthClass}">${occupation.growth > 0 ? '+' : ''}${occupation.growth.toFixed(1)}%</span>
                        </div>
                        <div class="stat">
                            <span class="stat-name tooltip" data-tooltip="Median annual wage">Wage</span>
                            <span class="stat-value">${formatWage(occupation.wage)}</span>
                        </div>
                    </div>
                    <div class="score-bar">
                        <div class="score-fill" style="width: ${(occupation.exposure / 0.8) * 100}%"></div>
                    </div>
                `;

                container.appendChild(card);
            });
        }

        function renderTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';

            filteredData.forEach(occupation => {
                const row = document.createElement('tr');
                const growthClass = occupation.growth > 0 ? 'positive' : 'negative';
                row.innerHTML = `
                    <td>${occupation.icon} ${occupation.name}</td>
                    <td>${occupation.industry}</td>
                    <td>${occupation.exposure.toFixed(2)}</td>
                    <td>${occupation.transformation}</td>
                    <td>${formatNumber(occupation.employment)}</td>
                    <td class="${growthClass}">${occupation.growth > 0 ? '+' : ''}${occupation.growth.toFixed(1)}%</td>
                    <td>${formatWage(occupation.wage)}</td>
                `;
                tbody.appendChild(row);
            });
        }

        function toggleView(view) {
            currentView = view;
            
            document.querySelectorAll('.view-toggle button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            if (view === 'cards') {
                document.getElementById('cardsView').classList.remove('hidden');
                document.getElementById('tableView').classList.add('hidden');
                renderCards();
            } else {
                document.getElementById('cardsView').classList.add('hidden');
                document.getElementById('tableView').classList.remove('hidden');
                renderTable();
            }
        }

        function filterData() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value;
            const industryFilter = document.getElementById('industryFilter').value;

            filteredData = occupationsData.filter(occupation => {
                const matchesSearch = occupation.name.toLowerCase().includes(searchTerm);
                let matchesCategory = true;
                let matchesIndustry = true;

                switch (categoryFilter) {
                    case 'very-high':
                        matchesCategory = occupation.exposure >= 0.7;
                        break;
                    case 'high':
                        matchesCategory = occupation.exposure >= 0.5 && occupation.exposure < 0.7;
                        break;
                    case 'moderate':
                        matchesCategory = occupation.exposure >= 0.3 && occupation.exposure < 0.5;
                        break;
                    case 'low':
                        matchesCategory = occupation.exposure >= 0.15 && occupation.exposure < 0.3;
                        break;
                    case 'very-low':
                        matchesCategory = occupation.exposure < 0.15;
                        break;
                }

                if (industryFilter !== 'all') {
                    matchesIndustry = occupation.industry === industryFilter;
                }

                return matchesSearch && matchesCategory && matchesIndustry;
            });

            if (currentView === 'cards') {
                renderCards();
            } else {
                renderTable();
            }
        }

        function populateFilters() {
            // Populate industry filter
            const industries = [...new Set(occupationsData.map(o => o.industry))].sort();
            const industryFilter = document.getElementById('industryFilter');
            industries.forEach(industry => {
                const option = document.createElement('option');
                option.value = industry;
                option.textContent = industry.length > 40 ? industry.substring(0, 40) + '...' : industry;
                industryFilter.appendChild(option);
            });

            // Populate comparison select
            const comparisonSelect = document.getElementById('comparisonSelect');
            occupationsData.forEach(occupation => {
                const option = document.createElement('option');
                option.value = occupation.name;
                option.textContent = occupation.name;
                comparisonSelect.appendChild(option);
            });
        }

        function addToComparison() {
            const select = document.getElementById('comparisonSelect');
            const selectedName = select.value;
            
            if (!selectedName) return;
            
            const occupation = occupationsData.find(o => o.name === selectedName);
            if (occupation && !comparisonList.some(c => c.name === selectedName)) {
                comparisonList.push(occupation);
                updateComparisonDisplay();
                select.value = '';
            }
        }

        function toggleComparison(occupationName) {
            const occupation = occupationsData.find(o => o.name === occupationName);
            if (occupation && !comparisonList.some(c => c.name === occupationName)) {
                comparisonList.push(occupation);
                updateComparisonDisplay();
                if (currentView === 'cards') {
                    renderCards();
                }
            }
        }

        function removeFromComparison(occupationName) {
            comparisonList = comparisonList.filter(o => o.name !== occupationName);
            updateComparisonDisplay();
            if (currentView === 'cards') {
                renderCards();
            }
        }

        function clearComparison() {
            comparisonList = [];
            updateComparisonDisplay();
            if (currentView === 'cards') {
                renderCards();
            }
        }

        function updateComparisonDisplay() {
            const container = document.getElementById('comparisonResults');
            
            if (comparisonList.length === 0) {
                container.innerHTML = '<p style="color: #7f8c8d; text-align: center; grid-column: 1 / -1;">Select occupations above to compare their AI impact metrics</p>';
                return;
            }

            container.innerHTML = '';
            
            comparisonList.forEach(occupation => {
                const card = document.createElement('div');
                const scoreClass = getScoreClass(occupation.exposure);
                card.className = `comparison-card ${scoreClass}`;
                
                const growthClass = occupation.growth > 0 ? 'positive' : 'negative';
                
                card.innerHTML = `
                    <button class="comparison-remove" onclick="removeFromComparison('${occupation.name.replace(/'/g, "\\'")}')">√ó</button>
                    <div class="occupation-group">${occupation.industry}</div>
                    <div class="occupation-title">
                        <div class="occupation-icon">${occupation.icon}</div>
                        <div>${occupation.name}</div>
                    </div>
                    <div class="occupation-stats">
                        <div class="stat">
                            <span class="stat-name">Exposure</span>
                            <span class="stat-value">${occupation.exposure.toFixed(2)}</span>
                        </div>
                        <div class="stat">
                            <span class="stat-name">Transform</span>
                            <span class="stat-value">${occupation.transformation}</span>
                        </div>
                        <div class="stat">
                            <span class="stat-name">Employment</span>
                            <span class="stat-value">${formatNumber(occupation.employment)}</span>
                        </div>
                        <div class="stat">
                            <span class="stat-name">Growth</span>
                            <span class="stat-value ${growthClass}">${occupation.growth > 0 ? '+' : ''}${occupation.growth.toFixed(1)}%</span>
                        </div>
                        <div class="stat">
                            <span class="stat-name">Wage</span>
                            <span class="stat-value">${formatWage(occupation.wage)}</span>
                        </div>
                    </div>
                    <div class="score-bar">
                        <div class="score-fill" style="width: ${(occupation.exposure / 0.8) * 100}%"></div>
                    </div>
                `;

                container.appendChild(card);
            });
        }

        function sortTable(columnIndex) {
            const table = document.querySelector('.data-table');
            const tbody = table.querySelector('tbody');
            const rows = Array.from(tbody.querySelectorAll('tr'));

            rows.sort((a, b) => {
                const aValue = a.cells[columnIndex].textContent;
                const bValue = b.cells[columnIndex].textContent;

                if (columnIndex === 0 || columnIndex === 1 || columnIndex === 3) {
                    return aValue.localeCompare(bValue);
                } else {
                    const aNum = parseFloat(aValue.replace(/[^\d.-]/g, ''));
                    const bNum = parseFloat(bValue.replace(/[^\d.-]/g, ''));
                    return bNum - aNum;
                }
            });

            rows.forEach(row => tbody.appendChild(row));
        }

        document.getElementById('searchInput').addEventListener('input', filterData);
        document.getElementById('categoryFilter').addEventListener('change', filterData);
        document.getElementById('industryFilter').addEventListener('change', filterData);

        function openHelpModal() {
            document.getElementById('helpModal').style.display = 'block';
            document.body.style.overflow = 'hidden';
        }

        function closeHelpModal() {
            document.getElementById('helpModal').style.display = 'none';
            document.body.style.overflow = 'auto';
        }

        window.onclick = function(event) {
            const helpModal = document.getElementById('helpModal');
            if (event.target === helpModal) {
                closeHelpModal();
            }
        }

        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                closeHelpModal();
            }
        });

        window.addEventListener('load', function() {
            populateFilters();
            renderCards();
            createCharts();
        });

        window.addEventListener('resize', function() {
            Object.values(charts).forEach(chart => {
                if (chart) chart.resize();
            });
        });
    </script>
</body>
</html>
