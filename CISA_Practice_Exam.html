<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CISA Certification Exam Simulator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 50%, #4472b8 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #333;
        }

        .exam-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            padding: 30px;
            max-width: 1000px;
            width: 95%;
            position: relative;
            overflow: hidden;
            max-height: 90vh;
            overflow-y: auto;
        }

        .exam-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57);
            animation: shimmer 3s ease-in-out infinite;
        }

        @keyframes shimmer {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .title {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(45deg, #1e3c72, #2a5298);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }

        .exam-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            color: white;
        }

        .info-item {
            text-align: center;
        }

        .info-label {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 1.3rem;
            font-weight: bold;
        }

        .exam-modes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .mode-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .mode-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            border-color: #667eea;
        }

        .mode-card.selected {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: #667eea;
        }

        .mode-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .mode-title {
            font-size: 1.4rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .mode-description {
            font-size: 0.95rem;
            opacity: 0.8;
            line-height: 1.4;
        }

        .mode-details {
            margin-top: 15px;
            font-size: 0.85rem;
            padding-top: 15px;
            border-top: 1px solid rgba(255,255,255,0.3);
        }

        .question-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            display: none;
        }

        .question-container.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateX(20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f0f0;
        }

        .question-number {
            font-size: 1.1rem;
            font-weight: bold;
            color: #667eea;
        }

        .domain-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: bold;
        }

        .timer {
            font-size: 1.2rem;
            font-weight: bold;
            color: #e74c3c;
        }

        .question-text {
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 25px;
            color: #333;
        }

        .options {
            display: grid;
            gap: 15px;
            margin-bottom: 25px;
        }

        .option {
            padding: 15px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f9f9f9;
            display: flex;
            align-items: flex-start;
        }

        .option-letter {
            font-weight: bold;
            color: #667eea;
            margin-right: 12px;
            min-width: 20px;
        }

        .option-text {
            flex: 1;
            line-height: 1.4;
        }

        .option:hover {
            border-color: #667eea;
            background: #f0f4ff;
            transform: translateX(5px);
        }

        .option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
            gap: 15px;
        }

        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-warning {
            background: #ffc107;
            color: #333;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .progress-container {
            margin: 20px 0;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            border-radius: 4px;
            transition: width 0.5s ease;
        }

        .progress-text {
            text-align: center;
            margin-top: 8px;
            font-size: 0.9rem;
            color: #666;
        }

        .results-container {
            text-align: center;
            padding: 30px;
            display: none;
        }

        .results-container.show {
            display: block;
            animation: bounceIn 0.6s ease-out;
        }

        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            50% {
                opacity: 1;
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .results-score {
            font-size: 4rem;
            font-weight: bold;
            margin: 20px 0;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .results-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 30px 0;
        }

        .domain-result {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .domain-name {
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 10px;
        }

        .domain-score {
            font-size: 1.5rem;
            font-weight: bold;
            color: #667eea;
        }

        .recommendations {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
            text-align: left;
        }

        .recommendations h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .recommendation-item {
            margin-bottom: 12px;
            padding-left: 20px;
            position: relative;
            line-height: 1.5;
        }

        .recommendation-item::before {
            content: "‚Üí";
            position: absolute;
            left: 0;
            color: #667eea;
            font-weight: bold;
        }

        .actions {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 30px;
        }

        .start-screen {
            display: block;
        }

        .start-screen.hidden {
            display: none;
        }

        .domain-distribution {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .domain-distribution h4 {
            color: #667eea;
            margin-bottom: 15px;
            text-align: center;
        }

        .domain-header:hover {
            background: rgba(102, 126, 234, 0.1);
            border-radius: 5px;
            padding: 5px;
            margin: -5px;
            transition: all 0.2s ease;
        }

        .domain-list {
            display: grid;
            gap: 8px;
            font-size: 0.9rem;
            transition: max-height 0.3s ease, opacity 0.3s ease, margin-top 0.3s ease;
            overflow: hidden;
            max-height: 300px;
            opacity: 1;
        }

        .domain-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .domain-item:last-child {
            border-bottom: none;
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2rem;
            }
            
            .exam-container {
                padding: 20px;
                width: 98%;
                max-height: 95vh;
            }
            
            .exam-info {
                grid-template-columns: 1fr;
                gap: 10px;
            }
            
            .controls {
                flex-direction: column;
                gap: 15px;
            }

            .exam-modes {
                grid-template-columns: 1fr;
            }

            .results-breakdown {
                grid-template-columns: 1fr;
            }

            .actions {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="exam-container">
        <div class="header">
            <h1 class="title">CISA Practice Simulator</h1>
            <p class="subtitle">Quick Practice & Full Exam Simulation with Enhanced Features</p>
        </div>

        <div class="start-screen" id="startScreen">
            <div class="exam-info">
                <div class="info-item">
                    <div class="info-label">Full Exam Questions</div>
                    <div class="info-value">150</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Full Exam Time</div>
                    <div class="info-value">4 Hours</div>
                </div>
                <div class="info-item">
                    <div class="info-label">Passing Score</div>
                    <div class="info-value">450/800</div>
                </div>
            </div>

            <div class="domain-distribution">
                <div class="domain-header" onclick="toggleDomainDistribution()" style="cursor: pointer; display: flex; justify-content: space-between; align-items: center;">
                    <h4 style="color: #667eea; margin: 0;">CISA Exam Domain Distribution</h4>
                    <span id="domainToggleIcon" style="color: #667eea; font-size: 1.2rem; font-weight: bold;">‚ñº</span>
                </div>
                <div class="domain-list" id="domainList" style="margin-top: 15px; max-height: 300px; opacity: 1;">
                    <div class="domain-item">
                        <span>Domain 1: Information Systems Auditing Process</span>
                        <strong>21% (32 questions)</strong>
                    </div>
                    <div class="domain-item">
                        <span>Domain 2: Governance and Management of IT</span>
                        <strong>17% (26 questions)</strong>
                    </div>
                    <div class="domain-item">
                        <span>Domain 3: IS Acquisition, Development & Implementation</span>
                        <strong>12% (18 questions)</strong>
                    </div>
                    <div class="domain-item">
                        <span>Domain 4: IS Operations and Business Resilience</span>
                        <strong>23% (35 questions)</strong>
                    </div>
                    <div class="domain-item">
                        <span>Domain 5: Protection of Information Assets</span>
                        <strong>27% (39 questions)</strong>
                    </div>
                </div>
            </div>

            <div class="exam-modes" id="examModes">
                <div class="mode-card" data-mode="practice">
                    <div class="mode-icon">‚ö°</div>
                    <div class="mode-title">Quick Practice</div>
                    <div class="mode-description">30-minute focused assessment with instant learning</div>
                    <div class="mode-details">20 questions ‚Ä¢ Immediate feedback ‚Ä¢ Detailed explanations</div>
                </div>
                <div class="mode-card" data-mode="fullExam">
                    <div class="mode-icon">üéØ</div>
                    <div class="mode-title">Full Practice Exam</div>
                    <div class="mode-description">Complete CISA exam simulation</div>
                    <div class="mode-details">150 questions ‚Ä¢ 4 hours ‚Ä¢ Pause & resume capability</div>
                </div>
            </div>

            <div class="controls">
                <button class="btn btn-primary" onclick="startExam()" id="startButton" disabled>Select an Exam Mode to Begin</button>
            </div>
        </div>

        <div class="question-container" id="questionContainer">
            <div class="question-header">
                <div class="question-number" id="questionNumber"></div>
                <div class="domain-badge" id="domainBadge"></div>
                <div class="timer" id="timer"></div>
            </div>

            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText"></div>
            </div>

            <div class="question-text" id="questionText"></div>
            
            <div class="options" id="options"></div>

            <div class="controls">
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-secondary" id="prevBtn" onclick="previousQuestion()" disabled>‚Üê Previous</button>
                    <button class="btn btn-warning" id="flagBtn" onclick="flagQuestion()">üö© Flag for Review</button>
                    <button class="btn btn-secondary" id="pauseBtn" style="display: none;">‚è∏Ô∏è Pause</button>
                </div>
                <div style="display: flex; gap: 10px;">
                    <button class="btn btn-warning" id="submitEarlyBtn" style="display: none;">üì§ Submit Early</button>
                    <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()" disabled>Next ‚Üí</button>
                </div>
            </div>
        </div>

        <div class="results-container" id="results">
            <h2 id="resultsTitle">üéâ Exam Complete!</h2>
            <div class="results-score" id="finalScore"></div>
            <p id="resultMessage"></p>
            
            <div class="results-breakdown" id="resultsBreakdown"></div>
            
            <div class="recommendations" id="recommendations"></div>

            <div class="actions">
                <button class="btn btn-primary" onclick="restartExam()">üîÑ Retake This Exam</button>
                <button class="btn btn-secondary" onclick="goHome()">üè† Main Menu</button>
                <button class="btn btn-warning" onclick="reviewFlagged()">üìã Review Flagged</button>
                <button class="btn btn-success" id="reviewAllBtn" onclick="reviewAllQuestions()" style="display: none;">üìñ Review All Questions</button>
            </div>
        </div>
    </div>

    <script>
        let currentExamMode = '';
        let currentQuestion = 0;
        let questions = [];
        let userAnswers = [];
        let flaggedQuestions = [];
        let startTime = null;
        let timerInterval = null;
        let timeLimit = 0;
        let isPaused = false;
        let pausedTime = 0;
        let examSubmitted = false;

        // Comprehensive question banks with 50+ questions per domain
        const questionBanks = {
            domain1: [
                {
                    question: "What is the PRIMARY purpose of establishing audit objectives during the planning phase of an IS audit?",
                    options: [
                        "To provide clear direction and scope for the audit engagement",
                        "To determine the audit budget and timeline", 
                        "To identify all potential risks in the organization",
                        "To establish the audit team composition"
                    ],
                    correct: 0,
                    explanation: "Audit objectives provide clear direction and scope for the audit engagement, ensuring that audit activities are focused on achieving specific goals and meeting stakeholder expectations.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "basic"
                },
                {
                    question: "Which of the following is the MOST important consideration when developing an audit strategy?",
                    options: [
                        "Available audit tools and technologies",
                        "Number of available audit staff",
                        "Understanding of business processes and risks",
                        "Previous audit findings"
                    ],
                    correct: 2,
                    explanation: "Understanding business processes and risks is fundamental to developing an effective audit strategy that addresses the organization's key areas of concern and potential vulnerabilities.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "intermediate"
                },
                {
                    question: "When should an IS auditor document audit findings?",
                    options: [
                        "Only when significant deficiencies are identified",
                        "At the conclusion of fieldwork",
                        "Only when requested by management",
                        "Continuously throughout the audit process"
                    ],
                    correct: 3,
                    explanation: "Audit findings should be documented continuously throughout the audit process to ensure accuracy, completeness, and proper support for conclusions and recommendations.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "basic"
                },
                {
                    question: "What is the PRIMARY benefit of using data analytics in IS auditing?",
                    options: [
                        "Enhancing audit coverage and effectiveness",
                        "Reducing audit costs",
                        "Eliminating the need for manual testing",
                        "Automating audit report generation"
                    ],
                    correct: 0,
                    explanation: "Data analytics enhances audit coverage and effectiveness by enabling auditors to analyze large datasets, identify patterns, anomalies, and risks that might not be detected through traditional sampling methods.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "intermediate"
                },
                {
                    question: "Which type of audit evidence is generally considered MOST reliable?",
                    options: [
                        "Oral statements from management",
                        "Independent third-party confirmations",
                        "Documentation created by the auditee",
                        "Auditor observations and calculations"
                    ],
                    correct: 1,
                    explanation: "Independent third-party confirmations are generally considered the most reliable form of audit evidence because they are obtained from sources outside the organization being audited, reducing the risk of bias or manipulation.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "basic"
                },
                {
                    question: "What should an IS auditor do when a significant deficiency is identified during an audit?",
                    options: [
                        "Wait until the final report to communicate the finding",
                        "Document the finding but take no further action",
                        "Attempt to fix the deficiency personally",
                        "Immediately communicate the finding to appropriate management"
                    ],
                    correct: 3,
                    explanation: "Significant deficiencies should be communicated to appropriate management immediately to allow for timely remediation and prevent potential adverse impacts on the organization.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "basic"
                },
                {
                    question: "What is the MOST important factor when determining audit sampling methodology?",
                    options: [
                        "Available audit time",
                        "Risk assessment and materiality",
                        "Auditor experience level",
                        "Size of the audit team"
                    ],
                    correct: 1,
                    explanation: "Risk assessment and materiality are the most important factors in determining sampling methodology, ensuring that audit efforts focus on areas with highest risk and significance.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "intermediate"
                },
                {
                    question: "Which approach provides the BEST audit coverage for testing application controls?",
                    options: [
                        "Testing during peak processing periods only",
                        "Testing a representative sample throughout the audit period",
                        "Testing only the most recent transactions",
                        "Testing only exception transactions"
                    ],
                    correct: 1,
                    explanation: "Testing a representative sample throughout the audit period provides the best coverage by ensuring controls are evaluated across different time periods and transaction types.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY purpose of audit working papers?",
                    options: [
                        "To serve as evidence supporting audit conclusions and opinions",
                        "To demonstrate auditor competence",
                        "To meet regulatory requirements",
                        "To facilitate knowledge transfer"
                    ],
                    correct: 0,
                    explanation: "Audit working papers primarily serve as evidence supporting audit conclusions and opinions, providing documentation of audit procedures performed and results obtained.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "basic"
                },
                {
                    question: "When is statistical sampling MOST appropriate in IS auditing?",
                    options: [
                        "When the population is small and homogeneous",
                        "When the population is large and homogeneous",
                        "When testing requires 100% accuracy",
                        "When audit time is unlimited"
                    ],
                    correct: 1,
                    explanation: "Statistical sampling is most appropriate when the population is large and homogeneous, allowing for reliable conclusions about the entire population based on sample results.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "intermediate"
                },
                {
                    question: "What should be the PRIMARY focus when evaluating audit independence?",
                    options: [
                        "Organizational structure and reporting relationships",
                        "Financial compensation arrangements",
                        "Previous audit experience",
                        "Technical competency levels"
                    ],
                    correct: 0,
                    explanation: "Organizational structure and reporting relationships should be the primary focus when evaluating audit independence to ensure auditors can perform their work objectively without undue influence.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "intermediate"
                },
                {
                    question: "Which factor is MOST critical when establishing audit quality assurance programs?",
                    options: [
                        "Cost of implementation",
                        "Compliance with professional standards",
                        "Management preferences",
                        "Industry benchmarks"
                    ],
                    correct: 1,
                    explanation: "Compliance with professional standards is most critical when establishing audit quality assurance programs to ensure audit work meets required quality levels and professional requirements.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "basic"
                },
                {
                    question: "What is the MOST effective approach for testing automated controls?",
                    options: [
                        "Reviewing system documentation only",
                        "Testing controls once at year-end",
                        "Continuous monitoring throughout the audit period",
                        "Relying on management representations"
                    ],
                    correct: 2,
                    explanation: "Continuous monitoring throughout the audit period is most effective for testing automated controls since they operate consistently once implemented and provide ongoing assurance.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "advanced"
                },
                {
                    question: "Which element is MOST important for effective risk-based audit planning?",
                    options: [
                        "Historical audit results",
                        "Current risk assessment and business understanding",
                        "Available audit resources",
                        "Regulatory requirements"
                    ],
                    correct: 1,
                    explanation: "Current risk assessment and business understanding are most important for effective risk-based audit planning to ensure audit efforts focus on current risks and business priorities.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "intermediate"
                },
                {
                    question: "What should be the PRIMARY consideration when communicating audit results?",
                    options: [
                        "Technical accuracy and completeness",
                        "Audience understanding and actionability",
                        "Compliance with reporting standards",
                        "Management preferences"
                    ],
                    correct: 1,
                    explanation: "Audience understanding and actionability should be the primary consideration to ensure audit results are clearly communicated and can be acted upon effectively by stakeholders.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "basic"
                },
                {
                    question: "Which approach is MOST effective for ensuring audit follow-up activities?",
                    options: [
                        "Annual status reviews",
                        "Ongoing monitoring and tracking of remediation efforts",
                        "Management self-assessments",
                        "External audit confirmations"
                    ],
                    correct: 1,
                    explanation: "Ongoing monitoring and tracking of remediation efforts is most effective for ensuring audit follow-up activities are completed and recommendations are properly implemented.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "basic"
                },
                {
                    question: "What is the PRIMARY benefit of using Computer-Assisted Audit Techniques (CAATs)?",
                    options: [
                        "Reduced audit costs",
                        "Improved audit efficiency and coverage",
                        "Elimination of manual procedures",
                        "Automated audit conclusions"
                    ],
                    correct: 1,
                    explanation: "CAATs primarily provide improved audit efficiency and coverage by enabling auditors to analyze large volumes of data and perform complex tests that would be impractical manually.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "intermediate"
                },
                {
                    question: "Which factor should have the GREATEST influence on audit scope determination?",
                    options: [
                        "Available audit budget",
                        "Management expectations",
                        "Risk assessment results and materiality thresholds",
                        "Previous audit scope"
                    ],
                    correct: 2,
                    explanation: "Risk assessment results and materiality thresholds should have the greatest influence on audit scope to ensure audit efforts focus on the most significant risks and potential impacts.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the MOST important characteristic of effective audit documentation?",
                    options: [
                        "Standardized formatting and templates",
                        "Completeness and ability to support conclusions",
                        "Minimal use of technical terminology",
                        "Detailed procedure descriptions"
                    ],
                    correct: 1,
                    explanation: "Completeness and ability to support conclusions is the most important characteristic to ensure audit documentation provides adequate evidence for audit opinions and findings.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "basic"
                },
                {
                    question: "Which audit technique is MOST effective for identifying segregation of duties violations?",
                    options: [
                        "Transaction testing",
                        "User access rights analysis",
                        "Control flowcharting",
                        "Analytical procedures"
                    ],
                    correct: 1,
                    explanation: "User access rights analysis is most effective for identifying segregation of duties violations by examining user permissions and identifying individuals with incompatible access rights.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "intermediate"
                },
                {
                    question: "What should be the PRIMARY focus during audit planning?",
                    options: [
                        "Establishing audit timelines and schedules",
                        "Understanding the business and identifying key risks",
                        "Selecting appropriate audit tools and techniques",
                        "Assigning audit team members"
                    ],
                    correct: 1,
                    explanation: "Understanding the business and identifying key risks should be the primary focus during audit planning as it drives all other planning decisions and ensures audit effectiveness.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "basic"
                },
                {
                    question: "Which approach provides the BEST evidence of control operating effectiveness?",
                    options: [
                        "Management representations and certifications",
                        "Independent testing throughout the audit period",
                        "Review of policies and procedures",
                        "System-generated reports and logs"
                    ],
                    correct: 1,
                    explanation: "Independent testing throughout the audit period provides the best evidence of control operating effectiveness by demonstrating how controls actually performed during the audit period.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the MOST important factor when selecting audit team members?",
                    options: [
                        "Availability and schedule flexibility",
                        "Required skills and competencies for the audit",
                        "Cost and budget considerations",
                        "Previous audit experience"
                    ],
                    correct: 1,
                    explanation: "Required skills and competencies for the specific audit are most important to ensure the team can effectively execute the audit and reach reliable conclusions.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "basic"
                },
                {
                    question: "Which factor is MOST critical for effective continuous auditing implementation?",
                    options: [
                        "Advanced audit software tools",
                        "Real-time data access and monitoring capabilities",
                        "Reduced audit staff requirements",
                        "Automated report generation"
                    ],
                    correct: 1,
                    explanation: "Real-time data access and monitoring capabilities are most critical for continuous auditing to enable ongoing assessment and immediate identification of issues.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "advanced"
                },
                {
                    question: "What should be the PRIMARY consideration when evaluating audit evidence sufficiency?",
                    options: [
                        "Quantity of evidence collected",
                        "Source reliability and evidence quality",
                        "Cost of obtaining additional evidence",
                        "Time required for evidence evaluation"
                    ],
                    correct: 1,
                    explanation: "Source reliability and evidence quality are most important for sufficiency evaluation, as high-quality evidence from reliable sources provides better assurance than large quantities of unreliable evidence.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "intermediate"
                },
                // Additional questions to reach 50+ for Domain 1
                {
                    question: "What is the PRIMARY purpose of analytical procedures in IS auditing?",
                    options: [
                        "To replace detailed testing",
                        "To identify areas requiring further investigation",
                        "To reduce audit costs",
                        "To automate audit processes"
                    ],
                    correct: 1,
                    explanation: "Analytical procedures primarily help identify areas requiring further investigation by detecting unusual fluctuations or relationships that may indicate errors or irregularities.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "intermediate"
                },
                {
                    question: "Which approach is MOST effective for auditing in a cloud computing environment?",
                    options: [
                        "Traditional on-premises audit procedures",
                        "Relying solely on cloud provider SOC reports",
                        "Combined approach using cloud-specific techniques and provider attestations",
                        "Avoiding cloud audits due to complexity"
                    ],
                    correct: 2,
                    explanation: "A combined approach using cloud-specific audit techniques along with provider attestations provides the most comprehensive audit coverage for cloud environments.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "advanced"
                },
                {
                    question: "What should be the auditor's PRIMARY concern when auditing artificial intelligence systems?",
                    options: [
                        "Algorithm efficiency",
                        "Data quality and bias in decision-making",
                        "Processing speed",
                        "User interface design"
                    ],
                    correct: 1,
                    explanation: "Data quality and bias in decision-making should be the primary concern as these factors directly impact the reliability and fairness of AI system outputs.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "advanced"
                },
                {
                    question: "Which audit approach is MOST appropriate for evaluating DevOps environments?",
                    options: [
                        "Traditional checkpoint-based auditing",
                        "Continuous auditing integrated with CI/CD pipelines",
                        "Annual comprehensive audits",
                        "Post-deployment audit reviews only"
                    ],
                    correct: 1,
                    explanation: "Continuous auditing integrated with CI/CD pipelines is most appropriate for DevOps environments as it matches the continuous nature of development and deployment processes.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "advanced"
                },
                {
                    question: "What is the MOST important consideration when auditing blockchain implementations?",
                    options: [
                        "Transaction processing speed",
                        "Consensus mechanism integrity and governance",
                        "Energy consumption",
                        "User adoption rates"
                    ],
                    correct: 1,
                    explanation: "Consensus mechanism integrity and governance are most important for blockchain audits as they determine the reliability and security of the distributed ledger system.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "advanced"
                },
                {
                    question: "Which factor is MOST critical when establishing audit committee oversight?",
                    options: [
                        "Committee member technical expertise",
                        "Independence and objectivity of committee members",
                        "Frequency of committee meetings",
                        "Size of the audit committee"
                    ],
                    correct: 1,
                    explanation: "Independence and objectivity of committee members is most critical to ensure effective oversight without conflicts of interest or undue influence.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "basic"
                },
                {
                    question: "What should be the PRIMARY focus when developing audit programs for emerging technologies?",
                    options: [
                        "Reusing existing audit procedures",
                        "Understanding technology risks and appropriate controls",
                        "Minimizing audit scope due to complexity",
                        "Relying on vendor security assessments"
                    ],
                    correct: 1,
                    explanation: "Understanding technology risks and appropriate controls should be the primary focus to develop effective audit procedures for emerging technologies.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "advanced"
                },
                {
                    question: "Which approach is MOST effective for auditing data warehouses and big data environments?",
                    options: [
                        "Traditional database audit techniques only",
                        "Combination of data profiling, lineage analysis, and sampling techniques",
                        "Manual review of all data transformations",
                        "Relying on system-generated reports only"
                    ],
                    correct: 1,
                    explanation: "A combination of data profiling, lineage analysis, and sampling techniques is most effective for auditing complex data warehouses and big data environments.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "advanced"
                },
                {
                    question: "What is the MOST important factor when establishing audit metrics and KPIs?",
                    options: [
                        "Industry benchmarks and standards",
                        "Alignment with business objectives and stakeholder needs",
                        "Ease of measurement and collection",
                        "Historical trending capabilities"
                    ],
                    correct: 1,
                    explanation: "Alignment with business objectives and stakeholder needs is most important to ensure audit metrics provide meaningful insights that support decision-making.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "intermediate"
                },
                {
                    question: "Which audit technique is MOST appropriate for evaluating machine learning algorithms?",
                    options: [
                        "Traditional statistical sampling",
                        "Algorithm transparency and explainability analysis",
                        "Source code review only",
                        "User acceptance testing"
                    ],
                    correct: 1,
                    explanation: "Algorithm transparency and explainability analysis is most appropriate for evaluating machine learning algorithms to understand decision-making processes and identify potential biases.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "advanced"
                },
                {
                    question: "What should be the PRIMARY consideration when auditing Internet of Things (IoT) environments?",
                    options: [
                        "Device processing capabilities",
                        "Network connectivity and security controls",
                        "User interface design",
                        "Power consumption efficiency"
                    ],
                    correct: 1,
                    explanation: "Network connectivity and security controls should be the primary consideration for IoT environments due to the distributed nature and security vulnerabilities of connected devices.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "advanced"
                },
                {
                    question: "Which approach is MOST effective for ensuring audit report quality and accuracy?",
                    options: [
                        "Automated report generation tools",
                        "Multi-level review and approval processes",
                        "Standardized report templates only",
                        "External report validation services"
                    ],
                    correct: 1,
                    explanation: "Multi-level review and approval processes are most effective for ensuring audit report quality and accuracy by providing multiple checkpoints for verification and improvement.",
                    domain: "Domain 1: Information Systems Auditing Process",
                    difficulty: "basic"
                }
            ],
            domain2: [
                {
                    question: "What is the PRIMARY purpose of an IT steering committee?",
                    options: [
                        "To manage day-to-day IT operations",
                        "To conduct technical reviews of IT projects",
                        "To provide strategic direction and oversight for IT investments",
                        "To handle IT procurement activities"
                    ],
                    correct: 2,
                    explanation: "The IT steering committee provides strategic direction and oversight for IT investments, ensuring IT initiatives align with business objectives and deliver value to the organization.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "basic"
                },
                {
                    question: "Which framework is specifically designed for IT governance?",
                    options: [
                        "COBIT",
                        "ITIL",
                        "ISO 27001",
                        "COSO"
                    ],
                    correct: 0,
                    explanation: "COBIT (Control Objectives for Information and Related Technologies) is specifically designed for IT governance, providing a comprehensive framework for managing and governing enterprise IT.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "basic"
                },
                {
                    question: "What is the MOST critical element of effective IT governance?",
                    options: [
                        "Technology standardization",
                        "Automated processes",
                        "Cost reduction initiatives",
                        "Clear roles and responsibilities"
                    ],
                    correct: 3,
                    explanation: "Clear roles and responsibilities are the most critical element of effective IT governance, ensuring accountability, decision-making authority, and proper oversight throughout the organization.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "basic"
                },
                {
                    question: "Which of the following BEST describes the concept of IT strategic alignment?",
                    options: [
                        "Ensuring IT costs are minimized",
                        "Aligning IT initiatives with business objectives and strategies",
                        "Standardizing all IT processes across the organization",
                        "Implementing the latest technology solutions"
                    ],
                    correct: 1,
                    explanation: "IT strategic alignment ensures that IT initiatives, investments, and capabilities support and enable the organization's business objectives and strategies.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY benefit of implementing a formal IT change management process?",
                    options: [
                        "Reducing the time required for system changes",
                        "Eliminating the need for testing",
                        "Reducing the cost of system maintenance",
                        "Minimizing the risk of unauthorized or inadequately tested changes"
                    ],
                    correct: 3,
                    explanation: "A formal change management process minimizes the risk of unauthorized or inadequately tested changes that could negatively impact system stability, security, or performance.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "basic"
                },
                {
                    question: "Which of the following is a key characteristic of effective IT performance measurement?",
                    options: [
                        "Aligning metrics with business objectives",
                        "Focusing only on technical metrics",
                        "Measuring only cost-related indicators",
                        "Using the same metrics for all organizations"
                    ],
                    correct: 0,
                    explanation: "Effective IT performance measurement aligns metrics with business objectives to ensure IT performance indicators reflect the value IT provides to the organization.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY purpose of an enterprise architecture framework?",
                    options: [
                        "To reduce IT development costs",
                        "To provide a structured approach for designing and managing IT infrastructure",
                        "To eliminate technology risks",
                        "To standardize all business processes"
                    ],
                    correct: 1,
                    explanation: "Enterprise architecture frameworks provide a structured approach for designing and managing IT infrastructure to ensure alignment with business needs and strategic objectives.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "basic"
                },
                {
                    question: "Which governance principle is MOST important for ensuring effective IT decision-making?",
                    options: [
                        "Centralized control",
                        "Cost minimization",
                        "Stakeholder engagement and transparency",
                        "Technology standardization"
                    ],
                    correct: 2,
                    explanation: "Stakeholder engagement and transparency are most important for effective IT decision-making as they ensure decisions consider all relevant perspectives and are well-communicated.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY role of the Chief Information Officer (CIO) in IT governance?",
                    options: [
                        "Managing day-to-day IT operations",
                        "Implementing technology solutions",
                        "Aligning IT strategy with business strategy",
                        "Reducing IT costs"
                    ],
                    correct: 2,
                    explanation: "The CIO's primary role in IT governance is aligning IT strategy with business strategy to ensure technology investments support organizational objectives.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "basic"
                },
                {
                    question: "Which factor is MOST important when establishing IT policies?",
                    options: [
                        "Industry best practices",
                        "Regulatory requirements",
                        "Business objectives and risk tolerance",
                        "Technology capabilities"
                    ],
                    correct: 2,
                    explanation: "Business objectives and risk tolerance are most important when establishing IT policies as they ensure policies support organizational goals while managing acceptable levels of risk.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the MOST effective approach for measuring IT governance maturity?",
                    options: [
                        "Comparing costs to industry benchmarks",
                        "Using a structured maturity model with defined levels",
                        "Counting the number of implemented controls",
                        "Measuring user satisfaction scores"
                    ],
                    correct: 1,
                    explanation: "Using a structured maturity model with defined levels provides the most effective approach for measuring IT governance maturity as it offers consistent evaluation criteria and improvement roadmaps.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "intermediate"
                },
                {
                    question: "Which element is MOST critical for effective IT risk management?",
                    options: [
                        "Comprehensive risk registers",
                        "Regular risk assessments and monitoring",
                        "Expensive risk mitigation tools",
                        "Detailed risk policies"
                    ],
                    correct: 1,
                    explanation: "Regular risk assessments and monitoring are most critical for effective IT risk management as they ensure risks are identified, evaluated, and managed on an ongoing basis.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "basic"
                },
                {
                    question: "What is the PRIMARY purpose of IT service level agreements (SLAs)?",
                    options: [
                        "To reduce IT service costs",
                        "To define expectations and accountability for IT service delivery",
                        "To eliminate all service outages",
                        "To standardize IT procedures"
                    ],
                    correct: 1,
                    explanation: "IT SLAs primarily define expectations and accountability for service delivery, establishing clear performance targets and responsibilities between IT and business stakeholders.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "basic"
                },
                {
                    question: "Which approach is MOST effective for ensuring IT compliance with regulations?",
                    options: [
                        "Annual compliance assessments",
                        "Continuous monitoring and control frameworks",
                        "External audit requirements only",
                        "Management self-assessments"
                    ],
                    correct: 1,
                    explanation: "Continuous monitoring and control frameworks are most effective for ensuring ongoing compliance rather than point-in-time assessments.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the MOST important consideration when implementing IT governance frameworks?",
                    options: [
                        "Following the framework exactly as published",
                        "Customizing the framework to fit organizational needs",
                        "Implementing all framework components simultaneously",
                        "Focusing on technical controls only"
                    ],
                    correct: 1,
                    explanation: "Customizing frameworks to fit organizational needs is most important as it ensures governance structures are appropriate for the organization's size, complexity, and risk profile.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "intermediate"
                },
                {
                    question: "Which metric BEST indicates effective IT governance?",
                    options: [
                        "IT cost as percentage of revenue",
                        "Number of implemented controls",
                        "Business value delivered by IT investments",
                        "System uptime percentages"
                    ],
                    correct: 2,
                    explanation: "Business value delivered by IT investments best indicates effective governance as it measures whether IT is achieving its primary purpose of supporting business objectives.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY benefit of establishing an IT governance committee?",
                    options: [
                        "Reducing IT operational costs",
                        "Providing oversight and strategic direction for IT initiatives",
                        "Implementing technical solutions faster",
                        "Eliminating IT risks"
                    ],
                    correct: 1,
                    explanation: "IT governance committees primarily provide oversight and strategic direction for IT initiatives, ensuring alignment with business objectives and appropriate risk management.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "basic"
                },
                {
                    question: "Which factor is MOST important for successful IT portfolio management?",
                    options: [
                        "Maximizing the number of projects",
                        "Balancing projects based on strategic value and resource constraints",
                        "Minimizing project costs",
                        "Implementing all requested projects"
                    ],
                    correct: 1,
                    explanation: "Successful IT portfolio management requires balancing projects based on strategic value and resource constraints to optimize overall business value.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the MOST effective way to ensure IT strategy supports business strategy?",
                    options: [
                        "Regular IT strategy reviews with business leadership",
                        "Implementing the latest technologies",
                        "Reducing IT costs annually",
                        "Standardizing all IT processes"
                    ],
                    correct: 0,
                    explanation: "Regular IT strategy reviews with business leadership ensure ongoing alignment between IT and business strategies as organizational objectives evolve.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "basic"
                },
                {
                    question: "Which approach BEST ensures effective IT resource management?",
                    options: [
                        "Maximizing resource utilization",
                        "Minimizing resource costs",
                        "Aligning resource allocation with strategic priorities",
                        "Maintaining excess capacity for all systems"
                    ],
                    correct: 2,
                    explanation: "Aligning resource allocation with strategic priorities ensures IT resources are used effectively to support the most important business objectives.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY purpose of IT value management?",
                    options: [
                        "To reduce IT spending",
                        "To maximize technology adoption",
                        "To optimize the business value delivered by IT investments",
                        "To eliminate IT risks"
                    ],
                    correct: 2,
                    explanation: "IT value management primarily aims to optimize the business value delivered by IT investments, ensuring resources are used to maximum advantage.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "intermediate"
                },
                {
                    question: "Which element is MOST critical for effective change advisory board (CAB) operations?",
                    options: [
                        "Technical expertise of members",
                        "Representation from all affected stakeholder groups",
                        "Formal voting procedures",
                        "Detailed change documentation"
                    ],
                    correct: 1,
                    explanation: "Representation from all affected stakeholder groups is most critical for effective CAB operations as it ensures all perspectives are considered in change decisions.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "basic"
                },
                {
                    question: "What is the MOST important factor in establishing effective IT communication strategies?",
                    options: [
                        "Using technical terminology for accuracy",
                        "Tailoring messages to different stakeholder audiences",
                        "Minimizing communication frequency",
                        "Focusing on technical achievements"
                    ],
                    correct: 1,
                    explanation: "Tailoring messages to different stakeholder audiences is most important to ensure effective communication that resonates with each group's interests and understanding level.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "basic"
                },
                {
                    question: "Which practice BEST supports continuous improvement in IT governance?",
                    options: [
                        "Annual governance reviews",
                        "Regular monitoring, measurement, and feedback loops",
                        "Implementing industry best practices",
                        "External consultant assessments"
                    ],
                    correct: 1,
                    explanation: "Regular monitoring, measurement, and feedback loops best support continuous improvement by providing ongoing insights into governance effectiveness and areas for enhancement.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY benefit of implementing IT governance dashboards?",
                    options: [
                        "Reducing reporting costs",
                        "Providing real-time visibility into IT performance and risks",
                        "Eliminating the need for detailed reports",
                        "Automating all governance decisions"
                    ],
                    correct: 1,
                    explanation: "IT governance dashboards primarily provide real-time visibility into performance and risks, enabling timely decision-making and corrective actions.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "basic"
                },
                {
                    question: "Which factor is MOST important when selecting IT governance tools?",
                    options: [
                        "Lowest cost option",
                        "Most features available",
                        "Alignment with organizational needs and processes",
                        "Latest technology platform"
                    ],
                    correct: 2,
                    explanation: "Alignment with organizational needs and processes is most important to ensure governance tools effectively support the organization's specific requirements and workflows.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "basic"
                },
                {
                    question: "What is the MOST effective approach for managing IT vendor relationships?",
                    options: [
                        "Minimizing vendor interactions",
                        "Focusing solely on cost reduction",
                        "Establishing strategic partnerships with clear performance expectations",
                        "Changing vendors frequently"
                    ],
                    correct: 2,
                    explanation: "Establishing strategic partnerships with clear performance expectations creates mutually beneficial relationships that deliver optimal value while managing risks effectively.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "intermediate"
                },
                {
                    question: "Which principle is MOST important for effective IT decision rights allocation?",
                    options: [
                        "Centralizing all decisions with IT leadership",
                        "Distributing decisions to business units",
                        "Aligning decision authority with accountability and expertise",
                        "Rotating decision-making responsibilities"
                    ],
                    correct: 2,
                    explanation: "Aligning decision authority with accountability and expertise ensures decisions are made by those best equipped to understand the implications and take responsibility for outcomes.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY purpose of IT governance frameworks like COBIT?",
                    options: [
                        "To provide detailed technical implementation guidance",
                        "To offer a comprehensive approach to IT governance and management",
                        "To replace organizational policies and procedures",
                        "To guarantee compliance with all regulations"
                    ],
                    correct: 1,
                    explanation: "IT governance frameworks like COBIT provide comprehensive approaches to governance and management, offering structured guidance that organizations can adapt to their specific needs.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "basic"
                },
                {
                    question: "Which approach BEST ensures IT investments deliver expected business benefits?",
                    options: [
                        "Detailed cost-benefit analysis before investment",
                        "Regular benefits realization tracking and measurement",
                        "Focus on technical performance metrics",
                        "Annual investment reviews"
                    ],
                    correct: 1,
                    explanation: "Regular benefits realization tracking and measurement throughout and after implementation best ensures investments deliver expected business benefits.",
                    domain: "Domain 2: Governance and Management of IT",
                    difficulty: "intermediate"
                }
            ],
            domain3: [
                {
                    question: "What is the PRIMARY purpose of a business case in the project initiation phase?",
                    options: [
                        "To define technical specifications",
                        "To justify the project investment and expected benefits",
                        "To assign team members to tasks",
                        "To schedule project activities"
                    ],
                    correct: 1,
                    explanation: "A business case provides the justification for undertaking a project by outlining the expected benefits, costs, risks, and return on investment to support decision-making.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "Which SDLC phase comes immediately after the Requirements Analysis phase in the Waterfall model?",
                    options: ["Implementation", "Design", "Testing", "Maintenance"],
                    correct: 1,
                    explanation: "In the Waterfall SDLC, the Design phase follows Requirements Analysis, where system architecture and detailed design specifications are created based on gathered requirements.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "What is the main advantage of prototyping in system development?",
                    options: [
                        "Faster final implementation",
                        "Reduced development costs",
                        "Early validation of user requirements",
                        "Elimination of testing phase"
                    ],
                    correct: 2,
                    explanation: "Prototyping allows early validation of user requirements by providing a working model that users can interact with, helping identify and correct misunderstandings before full development.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY objective of User Acceptance Testing (UAT)?",
                    options: [
                        "To test system performance under load",
                        "To check for technical bugs",
                        "To test system security",
                        "To verify that the system meets business requirements"
                    ],
                    correct: 3,
                    explanation: "User Acceptance Testing verifies that the system meets business requirements and is acceptable to end users before it goes into production.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "Which implementation approach carries the highest risk but allows for the fastest transition?",
                    options: ["Parallel", "Phased", "Pilot", "Direct (Big Bang)"],
                    correct: 3,
                    explanation: "Direct (Big Bang) implementation involves switching from the old system to the new system all at once, which is fastest but carries the highest risk since there's no fallback if issues occur.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "What should be included in a post-implementation review?",
                    options: [
                        "Assessment of project objectives, benefits realization, and lessons learned",
                        "Only technical performance metrics",
                        "Only user satisfaction surveys",
                        "Only cost analysis"
                    ],
                    correct: 0,
                    explanation: "A comprehensive post-implementation review should assess whether project objectives were met, if expected benefits are being realized, and capture lessons learned for future projects.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "Which factor is MOST important when conducting a feasibility study?",
                    options: [
                        "Technical complexity",
                        "Available budget",
                        "Alignment with business objectives and constraints",
                        "Development timeline"
                    ],
                    correct: 2,
                    explanation: "Alignment with business objectives and constraints is most important as feasibility must consider whether the proposed solution supports business goals within organizational limitations.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY benefit of using Agile development methodologies?",
                    options: [
                        "Reduced development costs",
                        "Elimination of documentation requirements",
                        "Flexibility to adapt to changing requirements",
                        "Faster initial delivery"
                    ],
                    correct: 2,
                    explanation: "Agile methodologies provide flexibility to adapt to changing requirements through iterative development cycles and continuous stakeholder feedback.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "intermediate"
                },
                {
                    question: "Which testing type should be performed FIRST in the system testing hierarchy?",
                    options: [
                        "Integration testing",
                        "Unit testing",
                        "System testing",
                        "User acceptance testing"
                    ],
                    correct: 1,
                    explanation: "Unit testing should be performed first as it tests individual components before they are integrated, making it easier to identify and fix defects early in the process.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "What is the MOST important consideration when selecting a software vendor?",
                    options: [
                        "Lowest cost proposal",
                        "Latest technology features",
                        "Vendor's ability to meet business requirements and provide ongoing support",
                        "Geographic proximity"
                    ],
                    correct: 2,
                    explanation: "The vendor's ability to meet business requirements and provide ongoing support is most important for long-term success and value realization.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "Which document is MOST critical for ensuring proper system requirements?",
                    options: [
                        "Technical specification",
                        "Business requirements document",
                        "Project charter",
                        "System architecture diagram"
                    ],
                    correct: 1,
                    explanation: "The business requirements document is most critical as it defines what the system must do to meet business needs, serving as the foundation for all other specifications.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "What is the PRIMARY purpose of configuration management during development?",
                    options: [
                        "To reduce development costs",
                        "To control and track changes to system components",
                        "To speed up development processes",
                        "To eliminate testing requirements"
                    ],
                    correct: 1,
                    explanation: "Configuration management controls and tracks changes to system components, ensuring version control, change tracking, and system integrity throughout development.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "Which factor is MOST important for successful system integration?",
                    options: [
                        "Using the same technology platforms",
                        "Proper interface design and data mapping",
                        "Minimizing integration points",
                        "Implementing all integrations simultaneously"
                    ],
                    correct: 1,
                    explanation: "Proper interface design and data mapping are most important for successful integration, ensuring systems can communicate effectively and data maintains integrity across platforms.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "intermediate"
                },
                {
                    question: "What should be the PRIMARY focus during the system design phase?",
                    options: [
                        "Cost minimization",
                        "Latest technology adoption",
                        "Meeting functional and non-functional requirements",
                        "Rapid development"
                    ],
                    correct: 2,
                    explanation: "Meeting functional and non-functional requirements should be the primary focus to ensure the system design will deliver the intended business value and performance.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "Which approach provides the BEST risk mitigation during system implementation?",
                    options: [
                        "Implementing all features at once",
                        "Phased rollout with fallback procedures",
                        "Minimal testing to accelerate deployment",
                        "Training users after implementation"
                    ],
                    correct: 1,
                    explanation: "Phased rollout with fallback procedures provides the best risk mitigation by allowing issues to be identified and resolved in limited scope before full deployment.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the MOST important factor in successful data migration?",
                    options: [
                        "Migration speed",
                        "Data quality and integrity validation",
                        "Minimal downtime",
                        "Automated migration tools"
                    ],
                    correct: 1,
                    explanation: "Data quality and integrity validation are most important to ensure business operations can continue with reliable data after migration.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "intermediate"
                },
                {
                    question: "Which project management approach is BEST suited for projects with uncertain requirements?",
                    options: [
                        "Waterfall",
                        "Agile/Iterative",
                        "Critical path method",
                        "Traditional linear approach"
                    ],
                    correct: 1,
                    explanation: "Agile/Iterative approaches are best suited for uncertain requirements as they accommodate changes through short development cycles and frequent stakeholder feedback.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY benefit of conducting regular project reviews?",
                    options: [
                        "Demonstrating project progress to stakeholders",
                        "Identifying issues early and taking corrective action",
                        "Reducing project costs",
                        "Accelerating project timelines"
                    ],
                    correct: 1,
                    explanation: "Regular project reviews primarily help identify issues early and enable corrective action before problems become major impediments to project success.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "Which testing approach is MOST effective for validating system performance?",
                    options: [
                        "Unit testing",
                        "Load and stress testing",
                        "Integration testing",
                        "User acceptance testing"
                    ],
                    correct: 1,
                    explanation: "Load and stress testing are most effective for validating system performance under various conditions and user loads.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "What should be the PRIMARY consideration when planning system cutover?",
                    options: [
                        "Minimizing cutover time",
                        "Business continuity and risk mitigation",
                        "Reducing implementation costs",
                        "User convenience"
                    ],
                    correct: 1,
                    explanation: "Business continuity and risk mitigation should be the primary consideration to ensure operations can continue if issues occur during cutover.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "intermediate"
                },
                {
                    question: "Which factor is MOST critical for effective vendor contract management?",
                    options: [
                        "Lowest possible costs",
                        "Detailed performance metrics and accountability measures",
                        "Longest contract terms",
                        "Most features included"
                    ],
                    correct: 1,
                    explanation: "Detailed performance metrics and accountability measures are most critical for ensuring vendors deliver expected value and can be held accountable for results.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the MOST important aspect of change control during development?",
                    options: [
                        "Minimizing the number of changes",
                        "Ensuring all changes are properly evaluated and approved",
                        "Implementing changes quickly",
                        "Documenting changes after implementation"
                    ],
                    correct: 1,
                    explanation: "Ensuring all changes are properly evaluated and approved is most important to maintain system integrity and project control while allowing necessary modifications.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "Which approach BEST ensures successful system deployment?",
                    options: [
                        "Comprehensive user training and support",
                        "Latest technology implementation",
                        "Minimal user involvement",
                        "Rapid deployment schedule"
                    ],
                    correct: 0,
                    explanation: "Comprehensive user training and support best ensure successful deployment by preparing users to effectively utilize the new system and providing assistance during transition.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "What is the PRIMARY purpose of system documentation?",
                    options: [
                        "Meeting audit requirements",
                        "Supporting system maintenance and knowledge transfer",
                        "Demonstrating project completion",
                        "Satisfying contract obligations"
                    ],
                    correct: 1,
                    explanation: "System documentation primarily supports ongoing maintenance and knowledge transfer, ensuring systems can be effectively managed throughout their lifecycle.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "Which quality assurance practice is MOST effective during system development?",
                    options: [
                        "Final system testing before deployment",
                        "Continuous quality checks throughout development",
                        "Post-implementation quality reviews",
                        "User feedback after deployment"
                    ],
                    correct: 1,
                    explanation: "Continuous quality checks throughout development are most effective as they identify and address quality issues early when they are less costly to fix.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the MOST important factor when evaluating software package solutions?",
                    options: [
                        "Number of available features",
                        "Fit with business requirements and processes",
                        "Latest technology platform",
                        "Lowest total cost"
                    ],
                    correct: 1,
                    explanation: "Fit with business requirements and processes is most important when evaluating software packages to ensure the solution will effectively support business operations.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "Which approach is MOST effective for managing project scope creep?",
                    options: [
                        "Rejecting all change requests",
                        "Formal change control processes with impact assessment",
                        "Accepting all stakeholder requests",
                        "Deferring all changes to future phases"
                    ],
                    correct: 1,
                    explanation: "Formal change control processes with impact assessment are most effective for managing scope creep by ensuring changes are properly evaluated for their impact on project objectives, timeline, and budget.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "intermediate"
                },
                {
                    question: "What should be the PRIMARY focus of integration testing?",
                    options: [
                        "Individual component functionality",
                        "System performance under load",
                        "Interface compatibility and data flow",
                        "User interface usability"
                    ],
                    correct: 2,
                    explanation: "Integration testing should primarily focus on interface compatibility and data flow between system components to ensure they work together effectively.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "basic"
                },
                {
                    question: "Which factor is MOST critical for successful DevOps implementation?",
                    options: [
                        "Latest automation tools",
                        "Cultural change and collaboration",
                        "Faster deployment schedules",
                        "Reduced development costs"
                    ],
                    correct: 1,
                    explanation: "Cultural change and collaboration are most critical for successful DevOps implementation as it requires breaking down silos between development and operations teams.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "advanced"
                },
                {
                    question: "What is the PRIMARY benefit of implementing continuous integration practices?",
                    options: [
                        "Reduced development costs",
                        "Early detection of integration issues",
                        "Faster feature development",
                        "Elimination of testing requirements"
                    ],
                    correct: 1,
                    explanation: "Continuous integration primarily provides early detection of integration issues by automatically building and testing code changes as they are made.",
                    domain: "Domain 3: IS Acquisition, Development & Implementation",
                    difficulty: "intermediate"
                }
            ],
            domain4: [
                {
                    question: "What is the PRIMARY purpose of a Business Impact Analysis (BIA)?",
                    options: [
                        "To identify all potential threats to the organization",
                        "To determine the criticality of business processes and acceptable downtime",
                        "To calculate the cost of security controls",
                        "To evaluate the effectiveness of current controls"
                    ],
                    correct: 1,
                    explanation: "A Business Impact Analysis determines the criticality of business processes, acceptable downtime, and the potential impact of disruptions to help prioritize recovery efforts and resources.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "Which of the following is the MOST important consideration when developing a disaster recovery plan?",
                    options: [
                        "Cost of the recovery procedures",
                        "Number of backup sites available",
                        "Recovery Time Objective (RTO) and Recovery Point Objective (RPO)",
                        "Type of disasters that might occur"
                    ],
                    correct: 2,
                    explanation: "RTO and RPO are the most important considerations as they define how quickly systems must be restored and how much data loss is acceptable, driving all other recovery planning decisions.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY difference between a hot site and a cold site?",
                    options: [
                        "Physical location and distance from primary site",
                        "Cost and contract terms",
                        "Type of disasters they can handle",
                        "Level of equipment readiness and recovery time"
                    ],
                    correct: 3,
                    explanation: "The primary difference is the level of equipment readiness and recovery time. Hot sites are fully equipped and ready for immediate use, while cold sites require equipment installation and configuration.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "Which backup strategy provides the fastest recovery time?",
                    options: [
                        "Continuous data protection",
                        "Full backup only",
                        "Incremental backup",
                        "Differential backup"
                    ],
                    correct: 0,
                    explanation: "Continuous data protection provides the fastest recovery time by maintaining real-time or near real-time copies of data, allowing for minimal data loss and rapid recovery.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY purpose of capacity management?",
                    options: [
                        "To reduce IT costs",
                        "To eliminate all system bottlenecks",
                        "To ensure adequate resources are available to meet service level requirements",
                        "To standardize all IT equipment"
                    ],
                    correct: 2,
                    explanation: "Capacity management ensures adequate resources are available to meet current and future service level requirements while optimizing cost and performance.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "Which of the following BEST describes the purpose of a service level agreement (SLA)?",
                    options: [
                        "To define technical specifications for IT services",
                        "To document all IT policies and procedures",
                        "To outline the cost structure for IT services",
                        "To establish measurable performance targets and responsibilities for service delivery"
                    ],
                    correct: 3,
                    explanation: "An SLA establishes measurable performance targets and responsibilities for service delivery, creating clear expectations and accountability between service providers and customers.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "What is the MOST effective approach for incident management?",
                    options: [
                        "Resolving all incidents within the same timeframe",
                        "Prioritizing incidents based on business impact and urgency",
                        "Assigning all incidents to the same team",
                        "Waiting for user reports before taking action"
                    ],
                    correct: 1,
                    explanation: "Prioritizing incidents based on business impact and urgency ensures that the most critical issues affecting business operations are addressed first.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "Which type of backup site provides a balance between cost and recovery speed?",
                    options: [
                        "Hot site",
                        "Warm site",
                        "Cold site",
                        "Mobile site"
                    ],
                    correct: 1,
                    explanation: "A warm site provides a balance between cost and recovery speed by having some equipment and infrastructure in place but requiring some setup time before becoming operational.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "What is the PRIMARY objective of business continuity planning?",
                    options: [
                        "To prevent all possible disasters",
                        "To ensure critical business operations can continue during and after disruptions",
                        "To minimize insurance costs",
                        "To comply with regulatory requirements"
                    ],
                    correct: 1,
                    explanation: "Business continuity planning ensures that critical business operations can continue during and after disruptions, minimizing the impact on business operations and stakeholders.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "Which factor is MOST important when determining backup frequency?",
                    options: [
                        "Storage capacity limitations",
                        "Network bandwidth availability",
                        "Business requirements for data recovery point objectives",
                        "Backup software capabilities"
                    ],
                    correct: 2,
                    explanation: "Business requirements for data recovery point objectives are most important as they determine how much data loss is acceptable and drive backup frequency decisions.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the MOST critical element of an effective incident response plan?",
                    options: [
                        "Advanced monitoring tools",
                        "Large incident response team",
                        "Clear roles, responsibilities, and communication procedures",
                        "Expensive incident management software"
                    ],
                    correct: 2,
                    explanation: "Clear roles, responsibilities, and communication procedures are most critical to ensure coordinated and effective response during incidents.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "Which approach is MOST effective for testing disaster recovery procedures?",
                    options: [
                        "Annual full disaster simulations only",
                        "Regular, varied testing including tabletop exercises and partial tests",
                        "Testing only when systems change",
                        "Relying on vendor assurances"
                    ],
                    correct: 1,
                    explanation: "Regular, varied testing including tabletop exercises and partial tests provides comprehensive validation of disaster recovery procedures while minimizing business disruption.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY purpose of service level monitoring?",
                    options: [
                        "To reduce IT operational costs",
                        "To ensure service delivery meets agreed-upon performance targets",
                        "To eliminate all service outages",
                        "To increase system utilization"
                    ],
                    correct: 1,
                    explanation: "Service level monitoring ensures that service delivery meets agreed-upon performance targets as defined in service level agreements.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "Which element is MOST important for effective change management in operations?",
                    options: [
                        "Automated change deployment tools",
                        "Risk assessment and approval processes",
                        "Minimizing change frequency",
                        "Standard change windows"
                    ],
                    correct: 1,
                    explanation: "Risk assessment and approval processes are most important to ensure changes are properly evaluated for potential impact before implementation.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "What should be the PRIMARY focus when developing recovery strategies?",
                    options: [
                        "Minimizing recovery costs",
                        "Using the latest technology",
                        "Meeting business recovery requirements",
                        "Standardizing all recovery procedures"
                    ],
                    correct: 2,
                    explanation: "Meeting business recovery requirements should be the primary focus to ensure recovery strategies align with business needs and priorities.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "Which approach is MOST effective for capacity planning?",
                    options: [
                        "Reactive capacity additions based on current utilization",
                        "Proactive planning based on business forecasts and performance trends",
                        "Maintaining maximum capacity for all systems",
                        "Using only historical utilization data"
                    ],
                    correct: 1,
                    explanation: "Proactive planning based on business forecasts and performance trends is most effective for ensuring adequate capacity is available when needed while optimizing costs.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the MOST important consideration when selecting backup storage locations?",
                    options: [
                        "Proximity to primary data center",
                        "Cost of storage space",
                        "Geographic separation and environmental risks",
                        "Available bandwidth"
                    ],
                    correct: 2,
                    explanation: "Geographic separation and environmental risks are most important to ensure backup data is not affected by the same disasters that might impact the primary site.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "Which metric is MOST useful for measuring business continuity effectiveness?",
                    options: [
                        "Number of disaster recovery tests conducted",
                        "Cost of business continuity program",
                        "Recovery time achieved versus recovery time objectives",
                        "Number of business continuity plans created"
                    ],
                    correct: 2,
                    explanation: "Recovery time achieved versus recovery time objectives is most useful for measuring effectiveness as it shows whether business continuity measures meet business requirements.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY benefit of implementing automated monitoring systems?",
                    options: [
                        "Reduced monitoring costs",
                        "Elimination of manual processes",
                        "Early detection and faster response to issues",
                        "Complete prevention of system failures"
                    ],
                    correct: 2,
                    explanation: "Automated monitoring systems primarily provide early detection and faster response to issues, enabling proactive problem resolution before they impact business operations.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "Which factor is MOST critical when evaluating cloud service providers for backup and recovery?",
                    options: [
                        "Lowest cost pricing",
                        "Geographic location of data centers",
                        "Service reliability and recovery capabilities",
                        "Number of available features"
                    ],
                    correct: 2,
                    explanation: "Service reliability and recovery capabilities are most critical to ensure backup and recovery services will be available when needed and can meet business requirements.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "What should be the PRIMARY consideration when developing operational procedures?",
                    options: [
                        "Simplicity and ease of automation",
                        "Consistency and repeatability",
                        "Minimum documentation requirements",
                        "Flexibility for different scenarios"
                    ],
                    correct: 1,
                    explanation: "Consistency and repeatability are primary considerations to ensure operational procedures produce predictable results and can be executed reliably by different personnel.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "Which approach is MOST effective for problem management?",
                    options: [
                        "Focusing only on major incidents",
                        "Root cause analysis and preventive measures",
                        "Quick fixes to restore service",
                        "Escalating all problems to vendors"
                    ],
                    correct: 1,
                    explanation: "Root cause analysis and preventive measures are most effective for problem management as they address underlying causes rather than just symptoms.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the MOST important factor in ensuring effective communication during incidents?",
                    options: [
                        "Using technical terminology for accuracy",
                        "Frequent updates regardless of new information",
                        "Clear, timely, and targeted communication to appropriate stakeholders",
                        "Minimizing communication to reduce confusion"
                    ],
                    correct: 2,
                    explanation: "Clear, timely, and targeted communication to appropriate stakeholders is most important to ensure all relevant parties are informed and can take appropriate actions.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "Which element is MOST critical for successful business continuity testing?",
                    options: [
                        "Testing during business hours",
                        "Involving all employees in every test",
                        "Realistic scenarios and measurable objectives",
                        "Using only automated testing tools"
                    ],
                    correct: 2,
                    explanation: "Realistic scenarios and measurable objectives are most critical to ensure testing validates actual business continuity capabilities and identifies areas for improvement.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "What should be the PRIMARY focus of availability management?",
                    options: [
                        "Achieving 100% system uptime",
                        "Balancing availability requirements with cost considerations",
                        "Implementing redundancy for all components",
                        "Eliminating all single points of failure"
                    ],
                    correct: 1,
                    explanation: "Availability management should primarily focus on balancing availability requirements with cost considerations to achieve optimal business value.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "Which approach is MOST effective for ensuring data backup integrity?",
                    options: [
                        "Frequent backup scheduling",
                        "Multiple backup copies",
                        "Regular backup verification and restoration testing",
                        "Using multiple backup technologies"
                    ],
                    correct: 2,
                    explanation: "Regular backup verification and restoration testing are most effective for ensuring backup integrity by confirming that backups are complete and can be successfully restored.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY purpose of maintaining a configuration management database (CMDB)?",
                    options: [
                        "To reduce hardware costs",
                        "To track relationships and dependencies between IT assets",
                        "To automate software deployments",
                        "To manage software licenses"
                    ],
                    correct: 1,
                    explanation: "A CMDB primarily tracks relationships and dependencies between IT assets to support change management, incident resolution, and impact analysis.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "Which factor is MOST important when prioritizing system recovery during disasters?",
                    options: [
                        "System complexity",
                        "Recovery cost",
                        "Business criticality and dependencies",
                        "Available recovery resources"
                    ],
                    correct: 2,
                    explanation: "Business criticality and dependencies are most important for prioritizing system recovery to ensure the most critical business processes are restored first.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "What should be the PRIMARY objective of performance monitoring?",
                    options: [
                        "Collecting maximum amount of performance data",
                        "Identifying performance trends and potential issues before they impact service",
                        "Reducing system resource utilization",
                        "Demonstrating IT efficiency to management"
                    ],
                    correct: 1,
                    explanation: "Performance monitoring should primarily identify trends and potential issues before they impact service, enabling proactive management and optimization.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "Which approach is MOST effective for managing IT service dependencies?",
                    options: [
                        "Minimizing all service interdependencies",
                        "Documenting and monitoring critical service relationships",
                        "Implementing redundancy for all services",
                        "Isolating all services from each other"
                    ],
                    correct: 1,
                    explanation: "Documenting and monitoring critical service relationships is most effective for managing dependencies and understanding the impact of changes or failures.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the MOST important consideration when implementing IT service management processes?",
                    options: [
                        "Using the latest ITSM tools",
                        "Following industry frameworks exactly",
                        "Aligning processes with business needs and organizational culture",
                        "Minimizing process documentation"
                    ],
                    correct: 2,
                    explanation: "Aligning processes with business needs and organizational culture is most important to ensure ITSM processes are practical, effective, and adopted by the organization.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "Which element is MOST critical for effective vendor management in operations?",
                    options: [
                        "Lowest cost contracts",
                        "Multiple vendor relationships",
                        "Clear service level agreements and performance monitoring",
                        "Long-term exclusive contracts"
                    ],
                    correct: 2,
                    explanation: "Clear service level agreements and performance monitoring are most critical for ensuring vendors deliver expected service levels and can be held accountable for performance.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "What should be the PRIMARY focus when developing escalation procedures?",
                    options: [
                        "Minimizing escalation frequency",
                        "Ensuring timely and appropriate escalation based on severity and impact",
                        "Escalating all issues to senior management",
                        "Using automated escalation tools"
                    ],
                    correct: 1,
                    explanation: "Escalation procedures should focus on ensuring timely and appropriate escalation based on severity and impact to ensure issues receive appropriate attention and resources.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "Which approach is MOST effective for managing operational risk?",
                    options: [
                        "Avoiding all risky activities",
                        "Transferring all risks to third parties",
                        "Implementing appropriate controls based on risk assessment",
                        "Accepting all risks as unavoidable"
                    ],
                    correct: 2,
                    explanation: "Implementing appropriate controls based on risk assessment is most effective for managing operational risk by addressing the most significant risks with appropriate mitigation measures.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY benefit of implementing standardized operational procedures?",
                    options: [
                        "Reduced training requirements",
                        "Consistent service delivery and reduced errors",
                        "Lower operational costs",
                        "Faster task completion"
                    ],
                    correct: 1,
                    explanation: "Standardized operational procedures primarily provide consistent service delivery and reduced errors by ensuring tasks are performed the same way regardless of who executes them.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "Which factor is MOST important when evaluating disaster recovery site locations?",
                    options: [
                        "Proximity to primary site for convenience",
                        "Availability of skilled personnel",
                        "Risk profile and geographic separation",
                        "Cost of site operations"
                    ],
                    correct: 2,
                    explanation: "Risk profile and geographic separation are most important to ensure the disaster recovery site is not affected by the same risks that might impact the primary site.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "What should be the PRIMARY consideration when planning system maintenance windows?",
                    options: [
                        "Convenience for IT staff",
                        "Minimizing business impact and disruption",
                        "Reducing maintenance costs",
                        "Following vendor recommendations"
                    ],
                    correct: 1,
                    explanation: "Minimizing business impact and disruption should be the primary consideration when planning maintenance windows to ensure business operations are affected as little as possible.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "Which approach is MOST effective for ensuring operational knowledge retention?",
                    options: [
                        "Relying on key personnel memory",
                        "Comprehensive documentation and knowledge management systems",
                        "Informal knowledge sharing sessions",
                        "External consultant support"
                    ],
                    correct: 1,
                    explanation: "Comprehensive documentation and knowledge management systems are most effective for ensuring operational knowledge is captured, maintained, and accessible when needed.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                },
                {
                    question: "What is the MOST important factor in ensuring effective crisis communication?",
                    options: [
                        "Using multiple communication channels",
                        "Pre-defined communication plans and trained personnel",
                        "Immediate media involvement",
                        "Detailed technical information sharing"
                    ],
                    correct: 1,
                    explanation: "Pre-defined communication plans and trained personnel are most important to ensure effective, coordinated communication during crisis situations when time is critical.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "intermediate"
                },
                {
                    question: "Which element is MOST critical for successful business continuity plan maintenance?",
                    options: [
                        "Annual plan updates",
                        "Regular review and updates based on business changes",
                        "Involvement of external consultants",
                        "Comprehensive documentation"
                    ],
                    correct: 1,
                    explanation: "Regular review and updates based on business changes are most critical to ensure business continuity plans remain current and effective as the organization evolves.",
                    domain: "Domain 4: IS Operations and Business Resilience",
                    difficulty: "basic"
                }
            ],
            domain5: [
                {
                    question: "What is the PRIMARY purpose of access controls?",
                    options: [
                        "To monitor user activities",
                        "To ensure only authorized users can access appropriate resources",
                        "To reduce system performance overhead",
                        "To backup user data"
                    ],
                    correct: 1,
                    explanation: "The primary purpose of access controls is to ensure only authorized users can access appropriate resources, protecting information assets from unauthorized access, modification, or disclosure.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "Which of the following is the STRONGEST form of authentication?",
                    options: [
                        "Password only",
                        "Smart card only",
                        "Biometric only",
                        "Multi-factor authentication combining something you know, have, and are"
                    ],
                    correct: 3,
                    explanation: "Multi-factor authentication combining different types of factors (knowledge, possession, and inherence) provides the strongest authentication by requiring multiple independent verification methods.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the MOST effective control to prevent unauthorized changes to application data?",
                    options: [
                        "Regular data backups",
                        "Database activity monitoring",
                        "Proper segregation of duties and approval processes",
                        "Encryption of data at rest"
                    ],
                    correct: 2,
                    explanation: "Proper segregation of duties and approval processes prevent unauthorized changes by ensuring no single individual can modify data without appropriate authorization and oversight.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "Which type of malware is designed to provide unauthorized access to a computer system?",
                    options: [
                        "Virus",
                        "Worm",
                        "Trojan horse",
                        "Spyware"
                    ],
                    correct: 2,
                    explanation: "A Trojan horse is designed to provide unauthorized access to a computer system by appearing to be legitimate software while containing malicious code that creates backdoors for attackers.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "What is the PRIMARY benefit of implementing data classification?",
                    options: [
                        "Enabling appropriate protection measures based on data sensitivity",
                        "Reducing storage costs",
                        "Improving system performance",
                        "Simplifying backup procedures"
                    ],
                    correct: 0,
                    explanation: "Data classification enables appropriate protection measures based on data sensitivity, ensuring resources are allocated efficiently and critical data receives adequate protection.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "Which of the following is the MOST important consideration when implementing encryption?",
                    options: [
                        "Algorithm efficiency",
                        "Key management",
                        "System performance impact",
                        "User convenience"
                    ],
                    correct: 1,
                    explanation: "Key management is the most important consideration as poor key management can render even the strongest encryption useless, making proper key generation, distribution, storage, and destruction critical.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY purpose of a vulnerability assessment?",
                    options: [
                        "To test incident response procedures",
                        "To measure system performance",
                        "To evaluate user awareness training",
                        "To identify potential security weaknesses in systems"
                    ],
                    correct: 3,
                    explanation: "A vulnerability assessment identifies potential security weaknesses in systems, applications, and networks to help organizations understand their security posture and prioritize remediation efforts.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "Which of the following BEST describes the principle of least privilege?",
                    options: [
                        "Users should have access to all systems they might need",
                        "Users should have the minimum access necessary to perform their job functions",
                        "All users should have the same level of access",
                        "Access should be granted based on seniority"
                    ],
                    correct: 1,
                    explanation: "The principle of least privilege states that users should have the minimum access necessary to perform their job functions, reducing the risk of unauthorized access or accidental damage.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "What is the MOST effective approach for detecting insider threats?",
                    options: [
                        "Monitoring all employee communications",
                        "Implementing user behavior analytics and anomaly detection",
                        "Requiring background checks for all employees",
                        "Installing surveillance cameras in all work areas"
                    ],
                    correct: 1,
                    explanation: "User behavior analytics and anomaly detection are most effective for detecting insider threats by identifying unusual patterns of behavior that may indicate malicious activity.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "Which security control is MOST important for protecting data in transit?",
                    options: [
                        "Strong passwords",
                        "Data encryption",
                        "Access logging",
                        "Antivirus software"
                    ],
                    correct: 1,
                    explanation: "Data encryption is most important for protecting data in transit as it ensures data remains confidential even if intercepted during transmission.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "What should be the PRIMARY focus of a security awareness program?",
                    options: [
                        "Technical security details",
                        "Compliance requirements",
                        "Practical security behaviors and threat recognition",
                        "Security policies and procedures"
                    ],
                    correct: 2,
                    explanation: "Security awareness programs should primarily focus on practical security behaviors and threat recognition to help employees identify and respond appropriately to security threats.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "Which approach is MOST effective for managing privileged access?",
                    options: [
                        "Shared privileged accounts for efficiency",
                        "Individual privileged accounts with strong authentication and monitoring",
                        "Granting privileged access to all IT staff",
                        "Using privileged access only during emergencies"
                    ],
                    correct: 1,
                    explanation: "Individual privileged accounts with strong authentication and monitoring provide the best balance of security and accountability for privileged access management.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY purpose of penetration testing?",
                    options: [
                        "To meet compliance requirements",
                        "To validate the effectiveness of security controls",
                        "To identify all possible vulnerabilities",
                        "To test incident response procedures"
                    ],
                    correct: 1,
                    explanation: "Penetration testing primarily validates the effectiveness of security controls by simulating real-world attacks to identify exploitable vulnerabilities.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "Which factor is MOST important when selecting encryption algorithms?",
                    options: [
                        "Processing speed",
                        "Algorithm strength and industry acceptance",
                        "Implementation complexity",
                        "Storage requirements"
                    ],
                    correct: 1,
                    explanation: "Algorithm strength and industry acceptance are most important to ensure the encryption provides adequate protection and is widely supported and trusted.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "What should be the PRIMARY consideration when implementing network segmentation?",
                    options: [
                        "Reducing network complexity",
                        "Minimizing hardware costs",
                        "Limiting the scope of potential security breaches",
                        "Improving network performance"
                    ],
                    correct: 2,
                    explanation: "Network segmentation should primarily focus on limiting the scope of potential security breaches by isolating different network zones and controlling traffic between them.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "Which approach is MOST effective for incident response?",
                    options: [
                        "Reacting to incidents as they occur",
                        "Pre-planned procedures with trained response teams",
                        "Outsourcing all incident response activities",
                        "Focusing only on major security incidents"
                    ],
                    correct: 1,
                    explanation: "Pre-planned procedures with trained response teams are most effective for incident response as they enable rapid, coordinated response when incidents occur.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "What is the MOST important element of effective security monitoring?",
                    options: [
                        "Collecting maximum amount of log data",
                        "Real-time analysis and correlation of security events",
                        "Automated response to all alerts",
                        "Compliance with logging requirements"
                    ],
                    correct: 1,
                    explanation: "Real-time analysis and correlation of security events is most important for effective monitoring as it enables identification of actual security threats from the noise of normal activities.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "Which control is MOST effective for preventing SQL injection attacks?",
                    options: [
                        "Input validation and parameterized queries",
                        "Database encryption",
                        "Network firewalls",
                        "User access controls"
                    ],
                    correct: 0,
                    explanation: "Input validation and parameterized queries are most effective for preventing SQL injection attacks by ensuring user input is properly validated and cannot be interpreted as executable code.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "What should be the PRIMARY focus when establishing information security policies?",
                    options: [
                        "Technical implementation details",
                        "Compliance with all possible regulations",
                        "Business requirements and risk tolerance",
                        "Industry best practices only"
                    ],
                    correct: 2,
                    explanation: "Information security policies should primarily focus on business requirements and risk tolerance to ensure they support business objectives while providing appropriate protection.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "Which approach is MOST effective for managing security patches?",
                    options: [
                        "Installing all patches immediately upon release",
                        "Risk-based prioritization with testing before deployment",
                        "Patching only after security incidents occur",
                        "Waiting for vendor-recommended patch bundles"
                    ],
                    correct: 1,
                    explanation: "Risk-based prioritization with testing before deployment is most effective for patch management as it balances security needs with system stability and business continuity.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY benefit of implementing data loss prevention (DLP) systems?",
                    options: [
                        "Improving system performance",
                        "Preventing unauthorized data disclosure",
                        "Reducing storage costs",
                        "Simplifying data management"
                    ],
                    correct: 1,
                    explanation: "DLP systems primarily prevent unauthorized data disclosure by monitoring and controlling the movement of sensitive data within and outside the organization.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "Which factor is MOST critical for effective security awareness training?",
                    options: [
                        "Training frequency",
                        "Relevance to job roles and current threats",
                        "Training duration",
                        "Use of technical terminology"
                    ],
                    correct: 1,
                    explanation: "Relevance to job roles and current threats is most critical for effective security awareness training as it ensures the content is applicable and actionable for participants.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "What should be the PRIMARY consideration when implementing biometric authentication?",
                    options: [
                        "User convenience",
                        "Implementation cost",
                        "False acceptance and rejection rates",
                        "Storage requirements"
                    ],
                    correct: 2,
                    explanation: "False acceptance and rejection rates are primary considerations for biometric authentication as they determine the system's accuracy and effectiveness in correctly identifying users.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "Which approach is MOST effective for securing wireless networks?",
                    options: [
                        "Hiding network names (SSID)",
                        "Strong encryption and authentication protocols",
                        "MAC address filtering only",
                        "Physical security of access points"
                    ],
                    correct: 1,
                    explanation: "Strong encryption and authentication protocols are most effective for securing wireless networks as they provide robust protection against unauthorized access and eavesdropping.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "What is the MOST important factor when evaluating third-party security services?",
                    options: [
                        "Lowest cost option",
                        "Geographic location",
                        "Security expertise and track record",
                        "Range of services offered"
                    ],
                    correct: 2,
                    explanation: "Security expertise and track record are most important when evaluating third-party security services to ensure they can effectively protect organizational assets.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "Which control is MOST effective for protecting against ransomware attacks?",
                    options: [
                        "Antivirus software only",
                        "Regular, tested backups with offline storage",
                        "Network firewalls",
                        "Email filtering"
                    ],
                    correct: 1,
                    explanation: "Regular, tested backups with offline storage are most effective against ransomware as they provide the ability to restore systems without paying ransom or losing data.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "What should be the PRIMARY focus of database security controls?",
                    options: [
                        "Database performance optimization",
                        "Protecting data confidentiality, integrity, and availability",
                        "Reducing database administration costs",
                        "Simplifying database access procedures"
                    ],
                    correct: 1,
                    explanation: "Database security controls should primarily focus on protecting data confidentiality, integrity, and availability to ensure sensitive information is properly protected.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "Which approach is MOST effective for managing security risks in cloud environments?",
                    options: [
                        "Avoiding cloud services entirely",
                        "Relying solely on cloud provider security",
                        "Shared responsibility model with appropriate controls",
                        "Implementing only traditional security controls"
                    ],
                    correct: 2,
                    explanation: "The shared responsibility model with appropriate controls is most effective for cloud security as it recognizes that both the organization and cloud provider have security responsibilities.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the PRIMARY purpose of security metrics and reporting?",
                    options: [
                        "Meeting compliance requirements",
                        "Demonstrating security program effectiveness and enabling informed decisions",
                        "Justifying security budgets",
                        "Comparing with industry benchmarks"
                    ],
                    correct: 1,
                    explanation: "Security metrics and reporting primarily demonstrate security program effectiveness and enable informed decisions by providing quantitative insights into security performance.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "Which factor is MOST important when designing secure application architectures?",
                    options: [
                        "Application performance",
                        "Development speed",
                        "Security by design principles",
                        "User interface simplicity"
                    ],
                    correct: 2,
                    explanation: "Security by design principles are most important when designing secure application architectures as they ensure security is built into the application from the ground up.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "What should be the PRIMARY consideration when implementing mobile device security?",
                    options: [
                        "Device cost",
                        "User convenience",
                        "Data protection and access control",
                        "Device performance"
                    ],
                    correct: 2,
                    explanation: "Data protection and access control should be the primary consideration for mobile device security to ensure organizational data remains secure regardless of device location or status.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "Which approach is MOST effective for securing DevOps environments?",
                    options: [
                        "Traditional security checkpoints",
                        "Security integration throughout the development pipeline",
                        "Post-deployment security scanning only",
                        "Manual security reviews"
                    ],
                    correct: 1,
                    explanation: "Security integration throughout the development pipeline is most effective for DevOps environments as it enables continuous security validation without slowing development velocity.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "advanced"
                },
                {
                    question: "What is the MOST important element of effective threat intelligence?",
                    options: [
                        "Volume of threat data collected",
                        "Actionable insights relevant to the organization",
                        "Real-time threat feeds",
                        "Historical threat analysis"
                    ],
                    correct: 1,
                    explanation: "Actionable insights relevant to the organization are most important for effective threat intelligence as they enable informed security decisions and appropriate protective measures.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "Which control is MOST effective for preventing privilege escalation attacks?",
                    options: [
                        "Regular password changes",
                        "Principle of least privilege and access monitoring",
                        "Network segmentation",
                        "Antivirus software"
                    ],
                    correct: 1,
                    explanation: "The principle of least privilege combined with access monitoring is most effective for preventing privilege escalation by limiting user privileges and detecting unauthorized attempts to gain higher access.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "What should be the PRIMARY focus when responding to security incidents?",
                    options: [
                        "Determining who is responsible",
                        "Containment and minimizing business impact",
                        "Documenting all details immediately",
                        "Notifying law enforcement"
                    ],
                    correct: 1,
                    explanation: "Containment and minimizing business impact should be the primary focus during security incident response to prevent further damage and restore normal operations quickly.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "Which approach is MOST effective for ensuring secure software development?",
                    options: [
                        "Security testing at the end of development",
                        "Secure coding practices integrated throughout development",
                        "Relying on security tools only",
                        "External security audits"
                    ],
                    correct: 1,
                    explanation: "Secure coding practices integrated throughout development are most effective as they build security into the software from the beginning rather than trying to add it later.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                },
                {
                    question: "What is the MOST important consideration when implementing zero trust security architecture?",
                    options: [
                        "Network performance impact",
                        "Implementation cost",
                        "Verification of all users and devices regardless of location",
                        "User convenience"
                    ],
                    correct: 2,
                    explanation: "Verification of all users and devices regardless of location is the most important consideration for zero trust architecture as it forms the foundation of the 'never trust, always verify' principle.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "advanced"
                },
                {
                    question: "Which factor is MOST critical for effective security governance?",
                    options: [
                        "Number of security tools deployed",
                        "Security budget allocation",
                        "Board-level support and clear accountability",
                        "Compliance certifications achieved"
                    ],
                    correct: 2,
                    explanation: "Board-level support and clear accountability are most critical for effective security governance as they ensure security receives appropriate attention and resources at the highest organizational levels.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "What should be the PRIMARY objective of security risk assessments?",
                    options: [
                        "Meeting compliance requirements",
                        "Identifying and prioritizing security risks for mitigation",
                        "Demonstrating security due diligence",
                        "Comparing with industry standards"
                    ],
                    correct: 1,
                    explanation: "Security risk assessments should primarily identify and prioritize security risks for mitigation to enable organizations to focus resources on the most significant threats.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "basic"
                },
                {
                    question: "Which approach is MOST effective for managing security in hybrid IT environments?",
                    options: [
                        "Separate security controls for each environment",
                        "Unified security policies with environment-specific implementations",
                        "Cloud-only security solutions",
                        "Traditional on-premises security extended to cloud"
                    ],
                    correct: 1,
                    explanation: "Unified security policies with environment-specific implementations are most effective for hybrid environments as they provide consistent security posture while accommodating technical differences.",
                    domain: "Domain 5: Protection of Information Assets",
                    difficulty: "intermediate"
                }
            ]
        };

        const examConfigs = {
            practice: {
                title: "Quick Practice",
                duration: 30,
                questionCount: 20,
                distribution: { domain1: 4, domain2: 3, domain3: 2, domain4: 5, domain5: 6 },
                description: "Quick assessment with immediate feedback and explanations",
                type: "practice"
            },
            fullExam: {
                title: "Full Practice Exam",
                duration: 240,
                questionCount: 150,
                distribution: { domain1: 32, domain2: 26, domain3: 18, domain4: 35, domain5: 39 },
                description: "Complete CISA exam simulation with pause capability",
                type: "full",
                allowPause: true,
                allowEarlySubmit: true
            }
        };

        function toggleDomainDistribution() {
            const domainList = document.getElementById('domainList');
            const toggleIcon = document.getElementById('domainToggleIcon');
            
            if (domainList.style.maxHeight && domainList.style.maxHeight !== '0px') {
                // Collapse the domain list
                domainList.style.maxHeight = '0px';
                domainList.style.opacity = '0';
                domainList.style.marginTop = '0px';
                toggleIcon.textContent = '‚ñ∂';
            } else {
                // Expand the domain list
                domainList.style.maxHeight = '300px'; // Adjust based on content
                domainList.style.opacity = '1';
                domainList.style.marginTop = '15px';
                toggleIcon.textContent = '‚ñº';
            }
        }

        function selectExamMode(mode) {
            currentExamMode = mode;
            
            document.querySelectorAll('.mode-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            document.querySelector(`[data-mode="${mode}"]`).classList.add('selected');
            
            const startButton = document.getElementById('startButton');
            startButton.disabled = false;
            startButton.textContent = `Start ${examConfigs[mode].title}`;
        }

        function generateExam(mode) {
            const config = examConfigs[mode];
            const examQuestions = [];
            
            // Add unique seed based on mode and timestamp
            const seed = mode + '_' + Date.now();
            
            console.log(`\n=== GENERATING EXAM: ${mode.toUpperCase()} ===`);
            
            Object.keys(config.distribution).forEach(domain => {
                const count = config.distribution[domain];
                let domainQuestions = [...questionBanks[domain]];
                
                // Ensure all questions have a difficulty level
                domainQuestions = domainQuestions.map(q => ({
                    ...q,
                    difficulty: q.difficulty || 'basic'
                }));
                
                console.log(`${domain}: Need ${count}, Available ${domainQuestions.length}`);
                
                // Filter by difficulty if specified
                if (config.difficultyFilter) {
                    const beforeFilter = domainQuestions.length;
                    domainQuestions = domainQuestions.filter(q => 
                        config.difficultyFilter.includes(q.difficulty)
                    );
                    console.log(`${domain}: After difficulty filter ${domainQuestions.length} (was ${beforeFilter})`);
                }
                
                // If still not enough questions after filtering, use all available
                if (domainQuestions.length < count) {
                    console.warn(`${domain}: Only ${domainQuestions.length} questions available after filtering, need ${count}. Using all available.`);
                    domainQuestions = [...questionBanks[domain]].map(q => ({
                        ...q,
                        difficulty: q.difficulty || 'basic'
                    }));
                }
                
                // Enhanced shuffling with seed for different exams
                const shuffled = shuffleArray(domainQuestions, seed + domain);
                
                // Take exactly the required number of questions
                // If we don't have enough, we'll take what we can without duplicating
                const selectedQuestions = shuffled.slice(0, Math.min(count, shuffled.length));
                
                console.log(`${domain}: Selected ${selectedQuestions.length} questions`);
                examQuestions.push(...selectedQuestions);
            });
            
            // Final shuffle of all questions
            const finalQuestions = shuffleArray(examQuestions, seed + '_final');
            
            console.log(`\n=== EXAM GENERATION COMPLETE ===`);
            console.log(`Total questions generated: ${finalQuestions.length}`);
            console.log('Domain distribution:', finalQuestions.reduce((acc, q) => {
                const domain = q.domain.includes('Domain 1') ? 'domain1' :
                              q.domain.includes('Domain 2') ? 'domain2' :
                              q.domain.includes('Domain 3') ? 'domain3' :
                              q.domain.includes('Domain 4') ? 'domain4' : 'domain5';
                acc[domain] = (acc[domain] || 0) + 1;
                return acc;
            }, {}));
            console.log('Difficulty distribution:', finalQuestions.reduce((acc, q) => {
                const diff = q.difficulty || 'basic';
                acc[diff] = (acc[diff] || 0) + 1;
                return acc;
            }, {}));
            
            return finalQuestions;
        }

        function shuffleArray(array, seed) {
            const arr = [...array];
            // Simple seeded random number generator
            let seedNum = 0;
            for (let i = 0; i < seed.length; i++) {
                seedNum += seed.charCodeAt(i);
            }
            
            for (let i = arr.length - 1; i > 0; i--) {
                seedNum = (seedNum * 9301 + 49297) % 233280;
                const j = Math.floor((seedNum / 233280) * (i + 1));
                [arr[i], arr[j]] = [arr[j], arr[i]];
            }
            return arr;
        }

        function startExam() {
            if (!currentExamMode) return;
            
            // Validate that we have enough questions for each domain
            const config = examConfigs[currentExamMode];
            let totalAvailable = 0;
            let canProceed = true;
            
            console.log(`\n=== EXAM VALIDATION FOR ${currentExamMode.toUpperCase()} ===`);
            
            Object.keys(config.distribution).forEach(domain => {
                const required = config.distribution[domain];
                const available = questionBanks[domain] ? questionBanks[domain].length : 0;
                totalAvailable += available;
                
                console.log(`${domain}: Required ${required}, Available ${available}`);
                
                if (available < required) {
                    console.error(`‚ùå ERROR: ${domain} has only ${available} questions, needs ${required}`);
                    canProceed = false;
                }
            });
            
            console.log(`Total required: ${config.questionCount}, Total available: ${totalAvailable}`);
            
            if (!canProceed) {
                alert(`Cannot start exam: Insufficient questions in question bank. Check console for details.`);
                return;
            }
            
            // Generate the exam
            questions = generateExam(currentExamMode);
            
            // Final validation
            if (questions.length !== config.questionCount) {
                console.warn(`‚ö†Ô∏è WARNING: Generated ${questions.length} questions instead of ${config.questionCount}`);
                alert(`Warning: Generated ${questions.length} questions instead of expected ${config.questionCount}. Proceeding with available questions.`);
            }
            
            // Verify no duplicates
            const questionTexts = questions.map(q => q.question);
            const uniqueQuestions = new Set(questionTexts);
            if (uniqueQuestions.size !== questions.length) {
                console.warn(`‚ö†Ô∏è WARNING: Found ${questions.length - uniqueQuestions.size} duplicate questions`);
            }
            
            userAnswers = new Array(questions.length).fill(null);
            flaggedQuestions = [];
            currentQuestion = 0;
            
            timeLimit = config.duration;
            startTime = new Date();
            
            document.getElementById('startScreen').classList.add('hidden');
            document.getElementById('questionContainer').classList.add('active');
            
            startTimer();
            showQuestion();
        }

        // [Rest of the functions remain the same as in the original code...]
        
        function startTimer() {
            timerInterval = setInterval(() => {
                if (isPaused) return; // Don't update timer when paused
                
                const elapsed = Math.floor((new Date() - startTime) / 1000);
                const remaining = (timeLimit * 60) - elapsed;
                
                if (remaining <= 0) {
                    clearInterval(timerInterval);
                    alert('Time is up! Your exam will be submitted automatically.');
                    finishExam();
                    return;
                }
                
                const hours = Math.floor(remaining / 3600);
                const minutes = Math.floor((remaining % 3600) / 60);
                const seconds = remaining % 60;
                
                const timerElement = document.getElementById('timer');
                timerElement.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                if (remaining <= 300) {
                    timerElement.style.color = '#e74c3c';
                } else if (remaining <= 1800) {
                    timerElement.style.color = '#f39c12';
                } else {
                    timerElement.style.color = '#27ae60';
                }
            }, 1000);
        }

        function showQuestion() {
            if (currentQuestion >= questions.length) {
                finishExam();
                return;
            }
            
            const question = questions[currentQuestion];
            const config = examConfigs[currentExamMode];
            
            document.getElementById('questionNumber').textContent = `Question ${currentQuestion + 1} of ${questions.length}`;
            document.getElementById('domainBadge').textContent = question.domain;
            document.getElementById('questionText').textContent = question.question;
            
            const progress = ((currentQuestion + 1) / questions.length) * 100;
            document.getElementById('progressFill').style.width = `${progress}%`;
            document.getElementById('progressText').textContent = `${currentQuestion + 1} of ${questions.length} questions`;
            
            const optionsContainer = document.getElementById('options');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option';
                optionElement.innerHTML = `
                    <span class="option-letter">${String.fromCharCode(65 + index)}.</span>
                    <span class="option-text">${option}</span>
                `;
                optionElement.onclick = () => selectAnswer(index);
                
                if (userAnswers[currentQuestion] === index) {
                    optionElement.classList.add('selected');
                }
                
                optionsContainer.appendChild(optionElement);
            });
            
            // Clear any existing feedback when showing new question
            const existingFeedback = document.getElementById('quickFeedback');
            if (existingFeedback) {
                existingFeedback.remove();
            }
            
            // If this question was already answered in quick practice, show feedback immediately
            if (config.type === 'practice' && userAnswers[currentQuestion] !== null) {
                showQuickFeedback(userAnswers[currentQuestion]);
            }
            
            document.getElementById('prevBtn').disabled = currentQuestion === 0;
            document.getElementById('nextBtn').textContent = currentQuestion === questions.length - 1 ? 'Finish Exam' : 'Next ‚Üí';
            document.getElementById('nextBtn').disabled = userAnswers[currentQuestion] === null;
            
            // Show/hide pause and submit early buttons for full exam
            const pauseBtn = document.getElementById('pauseBtn');
            const submitEarlyBtn = document.getElementById('submitEarlyBtn');
            
            console.log('Current exam mode:', currentExamMode);
            console.log('Config type:', config.type);
            console.log('Is full exam:', currentExamMode === 'fullExam');
            
            if (currentExamMode === 'fullExam') {
                pauseBtn.style.display = 'block';
                submitEarlyBtn.style.display = 'block';
                pauseBtn.textContent = isPaused ? '‚ñ∂Ô∏è Resume' : '‚è∏Ô∏è Pause';
                
                // Add click event listeners to ensure buttons work
                submitEarlyBtn.onclick = function() {
                    console.log('Submit Early button clicked via event listener');
                    confirmEarlySubmit();
                };
                
                pauseBtn.onclick = function() {
                    console.log('Pause button clicked via event listener');
                    togglePause();
                };
                
                console.log('Full exam buttons should be visible');
                console.log('Submit Early button:', submitEarlyBtn);
                console.log('Submit Early button display:', submitEarlyBtn.style.display);
                console.log('Pause button:', pauseBtn);
                console.log('Pause button display:', pauseBtn.style.display);
            } else {
                pauseBtn.style.display = 'none';
                submitEarlyBtn.style.display = 'none';
                console.log('Hiding full exam buttons');
            }
            
            const flagBtn = document.getElementById('flagBtn');
            if (flaggedQuestions.includes(currentQuestion)) {
                flagBtn.innerHTML = 'üö© Flagged';
                flagBtn.style.background = '#ffc107';
            } else {
                flagBtn.innerHTML = 'üö© Flag for Review';
                flagBtn.style.background = '#6c757d';
            }
        }

        function selectAnswer(answerIndex) {
            userAnswers[currentQuestion] = answerIndex;
            
            document.querySelectorAll('.option').forEach((option, index) => {
                option.classList.remove('selected');
                if (index === answerIndex) {
                    option.classList.add('selected');
                }
            });
            
            document.getElementById('nextBtn').disabled = false;
            
            // For quick practice, show immediate feedback
            const config = examConfigs[currentExamMode];
            if (config.type === 'practice') {
                showQuickFeedback(answerIndex);
            }
        }

        function showQuickFeedback(selectedAnswer) {
            const question = questions[currentQuestion];
            const isCorrect = selectedAnswer === question.correct;
            
            // Remove any existing feedback first
            const existingFeedback = document.getElementById('quickFeedback');
            if (existingFeedback) {
                existingFeedback.remove();
            }
            
            // Create new feedback section
            const feedbackSection = document.createElement('div');
            feedbackSection.id = 'quickFeedback';
            feedbackSection.style.cssText = `
                margin-top: 25px;
                padding: 20px;
                border-radius: 10px;
                animation: slideIn 0.3s ease-out;
                background: ${isCorrect ? '#d4edda' : '#f8d7da'};
                border: 2px solid ${isCorrect ? '#28a745' : '#dc3545'};
            `;
            
            const correctAnswerLetter = String.fromCharCode(65 + question.correct);
            const selectedAnswerLetter = String.fromCharCode(65 + selectedAnswer);
            
            feedbackSection.innerHTML = `
                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                    <div style="font-size: 2rem; margin-right: 15px;">
                        ${isCorrect ? '‚úÖ' : '‚ùå'}
                    </div>
                    <div>
                        <div style="font-weight: bold; font-size: 1.1rem; color: ${isCorrect ? '#28a745' : '#dc3545'};">
                            ${isCorrect ? 'Correct!' : 'Incorrect'}
                        </div>
                        <div style="font-size: 0.9rem; color: #666; margin-top: 5px;">
                            Your answer: ${selectedAnswerLetter}. ${question.options[selectedAnswer]}
                            ${!isCorrect ? `<br>Correct answer: ${correctAnswerLetter}. ${question.options[question.correct]}` : ''}
                        </div>
                    </div>
                </div>
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea;">
                    <div style="font-weight: bold; color: #667eea; margin-bottom: 8px;">üìö Explanation:</div>
                    <div style="line-height: 1.5; color: #333;">
                        ${question.explanation}
                    </div>
                </div>
            `;
            
            // Simply append after the options container - much safer approach
            const optionsContainer = document.getElementById('options');
            optionsContainer.parentNode.appendChild(feedbackSection);
            
            // Update Next button text for better UX
            const nextBtn = document.getElementById('nextBtn');
            if (currentQuestion === questions.length - 1) {
                nextBtn.textContent = 'View Results ‚Üí';
            } else {
                nextBtn.textContent = 'Next Question ‚Üí';
            }
        }

        function previousQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                currentQuestion++;
                showQuestion();
            } else {
                finishExam();
            }
        }

        function flagQuestion() {
            const index = flaggedQuestions.indexOf(currentQuestion);
            if (index > -1) {
                flaggedQuestions.splice(index, 1);
            } else {
                flaggedQuestions.push(currentQuestion);
            }
            showQuestion();
        }

        function togglePause() {
            const config = examConfigs[currentExamMode];
            if (!config.allowPause) return;
            
            if (isPaused) {
                // Resume
                isPaused = false;
                startTime = new Date(Date.now() - pausedTime);
                startTimer();
                document.getElementById('pauseBtn').textContent = '‚è∏Ô∏è Pause';
                
                // Re-enable all interaction elements
                document.getElementById('nextBtn').disabled = userAnswers[currentQuestion] === null;
                document.getElementById('prevBtn').disabled = currentQuestion === 0;
                document.getElementById('flagBtn').disabled = false;
                document.querySelectorAll('.option').forEach(opt => opt.style.pointerEvents = 'auto');
                
                alert('Exam resumed. You can continue where you left off.');
            } else {
                // Pause
                isPaused = true;
                clearInterval(timerInterval);
                pausedTime = Date.now() - startTime.getTime();
                document.getElementById('pauseBtn').textContent = '‚ñ∂Ô∏è Resume';
                
                // Disable all interaction elements except resume
                document.getElementById('nextBtn').disabled = true;
                document.getElementById('prevBtn').disabled = true;
                document.getElementById('flagBtn').disabled = true;
                document.querySelectorAll('.option').forEach(opt => opt.style.pointerEvents = 'none');
                
                alert('Exam paused. Click Resume to continue. Your progress has been saved.');
            }
        }

        function confirmEarlySubmit() {
            console.log('=== confirmEarlySubmit function called ===');
            
            try {
                const unanswered = userAnswers.filter(answer => answer === null).length;
                const answered = userAnswers.length - unanswered;
                
                console.log('Total questions:', userAnswers.length);
                console.log('Answered questions:', answered);
                console.log('Unanswered questions:', unanswered);
                
                let message = `Are you sure you want to submit your exam early?\n\n`;
                message += `Progress: ${answered}/${questions.length} questions answered\n`;
                
                if (unanswered > 0) {
                    message += `You have ${unanswered} unanswered questions.\n`;
                }
                
                message += `\nThis action cannot be undone.`;
                
                console.log('About to show confirm dialog with message:', message);
                
                // Try confirm dialog first
                const confirmed = confirm(message);
                console.log('Confirm dialog result:', confirmed);
                
                if (confirmed) {
                    console.log('User confirmed - submitting exam early');
                    examSubmitted = true;
                    finishExam();
                } else {
                    console.log('User cancelled early submission');
                }
                
            } catch (error) {
                console.error('Error in confirmEarlySubmit:', error);
                
                // Fallback - simple confirm without detailed message
                if (confirm('Submit exam early?')) {
                    examSubmitted = true;
                    finishExam();
                }
            }
        }

        function finishExam() {
            clearInterval(timerInterval);
            const results = calculateResults();
            document.getElementById('questionContainer').classList.remove('active');
            showResults(results);
        }

        function calculateResults() {
            let totalCorrect = 0;
            const domainResults = {
                domain1: { correct: 0, total: 0 },
                domain2: { correct: 0, total: 0 },
                domain3: { correct: 0, total: 0 },
                domain4: { correct: 0, total: 0 },
                domain5: { correct: 0, total: 0 }
            };
            
            questions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === question.correct;
                
                if (isCorrect) {
                    totalCorrect++;
                }
                
                let domain = 'domain1';
                if (question.domain.includes('Domain 2')) domain = 'domain2';
                else if (question.domain.includes('Domain 3')) domain = 'domain3';
                else if (question.domain.includes('Domain 4')) domain = 'domain4';
                else if (question.domain.includes('Domain 5')) domain = 'domain5';
                
                domainResults[domain].total++;
                if (isCorrect) {
                    domainResults[domain].correct++;
                }
            });
            
            const percentage = Math.round((totalCorrect / questions.length) * 100);
            const scaledScore = Math.round(200 + (percentage / 100) * 600);
            
            return {
                totalCorrect,
                totalQuestions: questions.length,
                percentage,
                scaledScore,
                domainResults,
                passed: scaledScore >= 450
            };
        }

        function showResults(results) {
            const config = examConfigs[currentExamMode];
            const resultsContainer = document.getElementById('results');
            
            document.getElementById('resultsTitle').textContent = results.passed ? 'üéâ Congratulations! You Passed!' : 'üìö Keep Studying!';
            document.getElementById('finalScore').textContent = `${results.scaledScore}/800`;
            
            let message = `You answered ${results.totalCorrect} out of ${results.totalQuestions} questions correctly (${results.percentage}%).`;
            if (results.passed) {
                message += " You achieved a passing score on this practice exam!";
            } else {
                message += " You need a score of 450 or higher to pass the CISA exam.";
            }
            document.getElementById('resultMessage').textContent = message;
            
            const breakdownContainer = document.getElementById('resultsBreakdown');
            breakdownContainer.innerHTML = '';
            
            const domainNames = {
                domain1: "Auditing Process",
                domain2: "IT Governance",
                domain3: "Acquisition & Implementation",
                domain4: "Operations & Resilience",
                domain5: "Information Protection"
            };
            
            Object.keys(results.domainResults).forEach(domain => {
                const result = results.domainResults[domain];
                if (result.total > 0) {
                    const percentage = Math.round((result.correct / result.total) * 100);
                    const domainDiv = document.createElement('div');
                    domainDiv.className = 'domain-result';
                    domainDiv.innerHTML = `
                        <div class="domain-name">${domainNames[domain]}</div>
                        <div class="domain-score">${percentage}%</div>
                        <div style="font-size: 0.8rem; color: #666;">${result.correct}/${result.total} correct</div>
                    `;
                    breakdownContainer.appendChild(domainDiv);
                }
            });
            
            // Show review button for quick practice
            const reviewAllBtn = document.getElementById('reviewAllBtn');
            if (config.type === 'practice') {
                reviewAllBtn.style.display = 'block';
                reviewAllBtn.innerHTML = 'üìñ Review All Questions & Explanations';
            } else {
                reviewAllBtn.style.display = 'none';
            }
            
            generateRecommendations(results);
            resultsContainer.classList.add('show');
        }

        function generateRecommendations(results) {
            const config = examConfigs[currentExamMode];
            const recommendationsContainer = document.getElementById('recommendations');
            let recommendations = [];
            
            // Get time taken
            const timeElapsed = isPaused ? pausedTime : (Date.now() - startTime.getTime());
            const minutesElapsed = Math.round(timeElapsed / (1000 * 60));
            const timeAllowed = config.duration;
            
            // Performance-based recommendations
            if (config.type === 'practice') {
                // Quick Practice specific feedback
                recommendations.push(`**Quick Assessment Complete** - You answered ${results.totalCorrect}/${results.totalQuestions} questions correctly in ${minutesElapsed} minutes.`);
                
                if (results.percentage >= 80) {
                    recommendations.push("Excellent performance! You have a strong foundation in CISA concepts.");
                    recommendations.push("Consider taking the Full Practice Exam to test your endurance and exam readiness.");
                } else if (results.percentage >= 70) {
                    recommendations.push("Good foundation, but focus on strengthening weaker areas before the full exam.");
                } else if (results.percentage >= 60) {
                    recommendations.push("You have basic understanding but need significant study before attempting the full exam.");
                } else {
                    recommendations.push("Consider reviewing fundamental CISA concepts before additional practice.");
                }
                
                // Domain-specific recommendations for quick practice
                Object.keys(results.domainResults).forEach(domain => {
                    const result = results.domainResults[domain];
                    if (result.total > 0) {
                        const percentage = Math.round((result.correct / result.total) * 100);
                        if (percentage < 70) {
                            const domainNames = {
                                domain1: "Information Systems Auditing Process",
                                domain2: "IT Governance and Management",
                                domain3: "IS Acquisition, Development & Implementation",
                                domain4: "IS Operations and Business Resilience",
                                domain5: "Protection of Information Assets"
                            };
                            recommendations.push(`Focus additional study on **${domainNames[domain]}** (${percentage}% correct).`);
                        }
                    }
                });
                
            } else if (config.type === 'full') {
                // Full Practice Exam specific feedback
                const timePercentage = Math.round((minutesElapsed / timeAllowed) * 100);
                
                recommendations.push(`**Full Exam Simulation Complete** - Time used: ${minutesElapsed}/${timeAllowed} minutes (${timePercentage}%).`);
                
                // Exam readiness assessment
                if (results.percentage >= 85 && timePercentage <= 90) {
                    recommendations.push("üéâ **Excellent exam readiness!** You're well-prepared for the actual CISA exam.");
                    recommendations.push("Continue with light review and take another practice exam closer to your test date.");
                } else if (results.percentage >= 75 && timePercentage <= 100) {
                    recommendations.push("‚úÖ **Good exam readiness.** You're on track but could benefit from targeted study.");
                    recommendations.push("Focus on time management and review weak areas.");
                } else if (results.percentage >= 65) {
                    recommendations.push("‚ö†Ô∏è **Moderate preparation needed.** You have good foundation but need focused study.");
                    recommendations.push("Take additional practice exams and consider a CISA review course.");
                } else {
                    recommendations.push("üìö **Significant preparation needed** before attempting the actual exam.");
                    recommendations.push("Focus on fundamental concepts and consider professional training.");
                }
                
                // Time management feedback
                if (timePercentage > 100) {
                    recommendations.push("‚è∞ **Time management:** You exceeded the time limit. Practice answering questions more quickly.");
                } else if (timePercentage < 70) {
                    recommendations.push("‚è∞ **Time management:** You finished early. Consider reviewing flagged questions more thoroughly.");
                }
                
                // Detailed domain analysis for full exam
                const weakDomains = [];
                Object.keys(results.domainResults).forEach(domain => {
                    const result = results.domainResults[domain];
                    if (result.total > 0) {
                        const percentage = Math.round((result.correct / result.total) * 100);
                        if (percentage < 70) {
                            weakDomains.push(domain);
                        }
                    }
                });
                
                if (weakDomains.length > 0) {
                    recommendations.push("**Prioritize study in these domains:**");
                    const domainNames = {
                        domain1: "Domain 1: Auditing Process (21% of exam)",
                        domain2: "Domain 2: IT Governance (17% of exam)",
                        domain3: "Domain 3: Acquisition & Implementation (12% of exam)",
                        domain4: "Domain 4: Operations & Resilience (23% of exam)",
                        domain5: "Domain 5: Information Protection (27% of exam)"
                    };
                    weakDomains.forEach(domain => {
                        const result = results.domainResults[domain];
                        const percentage = Math.round((result.correct / result.total) * 100);
                        recommendations.push(`‚Ä¢ ${domainNames[domain]} - ${percentage}% correct`);
                    });
                }
            }
            
            // General study recommendations
            recommendations.push("**Next Steps:**");
            recommendations.push("‚Ä¢ Review explanations for all incorrect answers");
            recommendations.push("‚Ä¢ Use ISACA's QAE database for additional practice questions");
            recommendations.push("‚Ä¢ Join CISA study groups for discussion and support");
            
            if (examSubmitted) {
                recommendations.push("üìù **Note:** You submitted this exam early. Consider using the full time allocation in future practice sessions.");
            }
            
            recommendationsContainer.innerHTML = `
                <h3>üìã Detailed Feedback & Recommendations</h3>
                ${recommendations.map(rec => `<div class="recommendation-item">${rec}</div>`).join('')}
            `;
        }

        function restartExam() {
            if (confirm('Are you sure you want to restart this exam? All progress will be lost.')) {
                startExam();
            }
        }

        function goHome() {
            clearInterval(timerInterval);
            currentExamMode = '';
            currentQuestion = 0;
            questions = [];
            userAnswers = [];
            flaggedQuestions = [];
            isPaused = false;
            pausedTime = 0;
            examSubmitted = false;
            
            document.getElementById('startScreen').classList.remove('hidden');
            document.getElementById('questionContainer').classList.remove('active');
            document.getElementById('results').classList.remove('show');
            
            document.querySelectorAll('.mode-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            const startButton = document.getElementById('startButton');
            startButton.disabled = true;
            startButton.textContent = 'Select an Exam Mode to Begin';
        }

        function reviewAllQuestions() {
            if (!questions || questions.length === 0) {
                alert('No questions available for review.');
                return;
            }
            
            let reviewContent = `Complete Question Review\n`;
            reviewContent += `========================\n\n`;
            reviewContent += `Exam: ${examConfigs[currentExamMode].title}\n`;
            reviewContent += `Questions: ${questions.length}\n`;
            reviewContent += `Date: ${new Date().toLocaleDateString()}\n\n`;
            
            questions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === question.correct;
                const userAnswerLetter = userAnswer !== null ? String.fromCharCode(65 + userAnswer) : 'Not answered';
                const correctAnswerLetter = String.fromCharCode(65 + question.correct);
                
                reviewContent += `Question ${index + 1}: ${isCorrect ? '‚úì CORRECT' : userAnswer !== null ? '‚úó INCORRECT' : '‚ö† UNANSWERED'}\n`;
                reviewContent += `${'-'.repeat(50)}\n`;
                reviewContent += `Domain: ${question.domain}\n\n`;
                reviewContent += `${question.question}\n\n`;
                
                question.options.forEach((option, optIndex) => {
                    const letter = String.fromCharCode(65 + optIndex);
                    const marker = optIndex === question.correct ? '‚úì' : (optIndex === userAnswer ? '‚úó' : ' ');
                    reviewContent += `${marker} ${letter}. ${option}\n`;
                });
                
                reviewContent += `\nYour Answer: ${userAnswerLetter}${userAnswer !== null ? '. ' + question.options[userAnswer] : ''}\n`;
                reviewContent += `Correct Answer: ${correctAnswerLetter}. ${question.options[question.correct]}\n\n`;
                reviewContent += `Explanation: ${question.explanation}\n\n`;
                reviewContent += `${'='.repeat(60)}\n\n`;
            });
            
            // Create comprehensive review modal
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
                background: rgba(0,0,0,0.9); z-index: 1000; 
                display: flex; align-items: center; justify-content: center;
                padding: 20px;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: white; padding: 30px; border-radius: 15px; 
                max-width: 900px; max-height: 85vh; overflow-y: auto;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            `;
            
            // Create HTML version for better formatting
            let htmlContent = `
                <div style="text-align: center; margin-bottom: 30px;">
                    <h2 style="color: #667eea; margin-bottom: 10px;">üìñ Complete Question Review</h2>
                    <p style="color: #666; margin-bottom: 20px;">${examConfigs[currentExamMode].title} - ${questions.length} Questions</p>
                </div>
            `;
            
            questions.forEach((question, index) => {
                const userAnswer = userAnswers[index];
                const isCorrect = userAnswer === question.correct;
                const userAnswerLetter = userAnswer !== null ? String.fromCharCode(65 + userAnswer) : 'Not answered';
                const correctAnswerLetter = String.fromCharCode(65 + question.correct);
                
                const statusColor = isCorrect ? '#28a745' : userAnswer !== null ? '#dc3545' : '#ffc107';
                const statusIcon = isCorrect ? '‚úÖ' : userAnswer !== null ? '‚ùå' : '‚ö†Ô∏è';
                const statusText = isCorrect ? 'CORRECT' : userAnswer !== null ? 'INCORRECT' : 'UNANSWERED';
                
                htmlContent += `
                    <div style="margin-bottom: 30px; padding: 20px; border: 2px solid ${statusColor}; border-radius: 10px; background: ${isCorrect ? '#d4edda' : userAnswer !== null ? '#f8d7da' : '#fff3cd'};">
                        <div style="display: flex; align-items: center; margin-bottom: 15px;">
                            <span style="font-size: 1.5rem; margin-right: 10px;">${statusIcon}</span>
                            <div>
                                <strong style="color: ${statusColor};">Question ${index + 1}: ${statusText}</strong>
                                <div style="font-size: 0.9rem; color: #666; margin-top: 5px;">${question.domain}</div>
                            </div>
                        </div>
                        
                        <div style="margin-bottom: 15px; font-weight: 500; line-height: 1.4;">
                            ${question.question}
                        </div>
                        
                        <div style="margin-bottom: 15px;">
                            ${question.options.map((option, optIndex) => {
                                const letter = String.fromCharCode(65 + optIndex);
                                const isUserAnswer = optIndex === userAnswer;
                                const isCorrectAnswer = optIndex === question.correct;
                                
                                let bgColor = '#f8f9fa';
                                let textColor = '#333';
                                let borderColor = '#e9ecef';
                                
                                if (isCorrectAnswer) {
                                    bgColor = '#d4edda';
                                    textColor = '#155724';
                                    borderColor = '#28a745';
                                } else if (isUserAnswer && !isCorrect) {
                                    bgColor = '#f8d7da';
                                    textColor = '#721c24';
                                    borderColor = '#dc3545';
                                }
                                
                                return `
                                    <div style="padding: 8px 12px; margin: 5px 0; border: 1px solid ${borderColor}; border-radius: 5px; background: ${bgColor}; color: ${textColor};">
                                        <strong>${letter}.</strong> ${option}
                                        ${isCorrectAnswer ? ' ‚úì' : ''}
                                        ${isUserAnswer && !isCorrect ? ' ‚úó' : ''}
                                    </div>
                                `;
                            }).join('')}
                        </div>
                        
                        <div style="margin-bottom: 15px; font-size: 0.9rem;">
                            <strong>Your Answer:</strong> ${userAnswerLetter}${userAnswer !== null ? '. ' + question.options[userAnswer] : ''}<br>
                            <strong>Correct Answer:</strong> ${correctAnswerLetter}. ${question.options[question.correct]}
                        </div>
                        
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #667eea;">
                            <strong style="color: #667eea;">üìö Explanation:</strong><br>
                            <div style="margin-top: 8px; line-height: 1.5;">${question.explanation}</div>
                        </div>
                    </div>
                `;
            });
            
            content.innerHTML = htmlContent;
            
            const buttonContainer = document.createElement('div');
            buttonContainer.style.cssText = 'text-align: center; margin-top: 30px; border-top: 2px solid #eee; padding-top: 20px;';
            
            const downloadBtn = document.createElement('button');
            downloadBtn.textContent = 'üìÑ Download Review';
            downloadBtn.style.cssText = `
                margin-right: 15px; padding: 12px 24px; 
                background: #667eea; color: white; border: none; 
                border-radius: 8px; cursor: pointer; font-weight: 600;
            `;
            downloadBtn.onclick = () => {
                try {
                    console.log('Download button clicked');
                    console.log('Review content length:', reviewContent.length);
                    
                    // Create blob with explicit encoding
                    const blob = new Blob([reviewContent], { 
                        type: 'text/plain;charset=utf-8' 
                    });
                    
                    console.log('Blob created:', blob);
                    
                    // Check if browser supports download
                    const a = document.createElement('a');
                    
                    if ('download' in a) {
                        // Modern browser approach
                        const url = URL.createObjectURL(blob);
                        a.href = url;
                        a.download = `CISA_Question_Review_${new Date().toISOString().split('T')[0]}.txt`;
                        a.style.display = 'none';
                        
                        // Add to DOM, click, then remove
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        
                        // Clean up the URL object
                        setTimeout(() => URL.revokeObjectURL(url), 100);
                        
                        console.log('Download triggered successfully');
                        alert('Review downloaded successfully!');
                        
                    } else {
                        // Fallback for older browsers
                        throw new Error('Download not supported');
                    }
                    
                } catch (error) {
                    console.error('Download failed:', error);
                    
                    // Fallback: Copy to clipboard and show in new window
                    try {
                        navigator.clipboard.writeText(reviewContent).then(() => {
                            alert('Download failed, but review content has been copied to your clipboard!');
                        }).catch(() => {
                            // Final fallback: show in new window
                            const newWindow = window.open('', '_blank');
                            newWindow.document.write(`<pre style="font-family: monospace; white-space: pre-wrap; padding: 20px;">${reviewContent.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</pre>`);
                            newWindow.document.title = 'CISA Question Review';
                            alert('Download failed. Review opened in new window - you can copy/save from there.');
                        });
                    } catch (clipboardError) {
                        console.error('Clipboard fallback failed:', clipboardError);
                        // Final fallback: show in new window
                        const newWindow = window.open('', '_blank');
                        newWindow.document.write(`<pre style="font-family: monospace; white-space: pre-wrap; padding: 20px;">${reviewContent.replace(/</g, '&lt;').replace(/>/g, '&gt;')}</pre>`);
                        newWindow.document.title = 'CISA Question Review';
                        alert('Download failed. Review opened in new window - you can copy/save from there.');
                    }
                }
            };
            
            const closeBtn = document.createElement('button');
            closeBtn.textContent = '‚úï Close';
            closeBtn.style.cssText = `
                padding: 12px 24px; 
                background: #6c757d; color: white; border: none; 
                border-radius: 8px; cursor: pointer; font-weight: 600;
            `;
            closeBtn.onclick = () => document.body.removeChild(modal);
            
            buttonContainer.appendChild(downloadBtn);
            buttonContainer.appendChild(closeBtn);
            content.appendChild(buttonContainer);
            
            modal.appendChild(content);
            document.body.appendChild(modal);
        }

        function reviewFlagged() {
            if (flaggedQuestions.length === 0) {
                alert('No questions were flagged for review.');
                return;
            }
            
            let flaggedSummary = `Flagged Questions Review (${flaggedQuestions.length} questions)\n`;
            flaggedSummary += `===========================================\n\n`;
            
            flaggedQuestions.forEach((questionIndex, index) => {
                const question = questions[questionIndex];
                const userAnswer = userAnswers[questionIndex];
                const isCorrect = userAnswer === question.correct;
                
                flaggedSummary += `${index + 1}. Question ${questionIndex + 1}: ${isCorrect ? '‚úì CORRECT' : '‚úó INCORRECT'}\n`;
                flaggedSummary += `${question.question.substring(0, 100)}...\n`;
                flaggedSummary += `Your answer: ${userAnswer !== null ? question.options[userAnswer] : 'Not answered'}\n`;
                flaggedSummary += `Correct answer: ${question.options[question.correct]}\n`;
                flaggedSummary += `Domain: ${question.domain}\n\n`;
            });
            
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
                background: rgba(0,0,0,0.8); z-index: 1000; 
                display: flex; align-items: center; justify-content: center;
                padding: 20px;
            `;
            
            const content = document.createElement('div');
            content.style.cssText = `
                background: white; padding: 30px; border-radius: 10px; 
                max-width: 800px; max-height: 80vh; overflow-y: auto;
                font-family: monospace; white-space: pre-line;
            `;
            content.textContent = flaggedSummary;
            
            const closeBtn = document.createElement('button');
            closeBtn.textContent = 'Close';
            closeBtn.style.cssText = `
                margin-top: 20px; padding: 10px 20px; 
                background: #667eea; color: white; border: none; 
                border-radius: 5px; cursor: pointer;
            `;
            closeBtn.onclick = () => document.body.removeChild(modal);
            
            content.appendChild(closeBtn);
            modal.appendChild(content);
            document.body.appendChild(modal);
        }

        document.addEventListener('DOMContentLoaded', function() {
            console.log('CISA Exam Simulator loaded successfully');
            
            document.querySelectorAll('.mode-card').forEach(card => {
                card.addEventListener('click', function() {
                    const mode = this.getAttribute('data-mode');
                    selectExamMode(mode);
                });
            });
        });
    </script>
</body>
</html>